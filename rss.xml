<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[RSS Feed | Jinwoo's Blog]]></title><description><![CDATA[서버 엔지니어가 글쓰기 연습을 위해 개발한 기술 블로그입니다. 다양한 주제를 포괄적으로 다룹니다.]]></description><link>https://bugoverdose.github.io</link><generator>GatsbyJS</generator><lastBuildDate>Sun, 14 Jul 2024 10:22:36 GMT</lastBuildDate><item><title><![CDATA[[k8s] kube-scheduler와 스케줄링 과정]]></title><description><![CDATA[쿠버네티스 클러스터에서 스케줄러의 역할과 스케줄링의 기본적인 흐름에 대해 정리합니다. 파드가 실행될 노드가 선택되기까지 거치는 필터링과 스코어링 단계를 설명하고, 스케줄러 설정 변경 방법에 대한 개요만 정리합니다.]]></description><link>https://bugoverdose.github.io/posts/83/</link><guid isPermaLink="false">https://bugoverdose.github.io/posts/83/</guid><pubDate>Sun, 14 Jul 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;kube-scheduler&lt;/h2&gt;&lt;p&gt;쿠버네티스에서 스케줄링이란 파드들이 노드의 &lt;code&gt;kubelet&lt;/code&gt;에 의해 실행될 수 있도록 각 파드를 특정 노드에 연결해주는 작업입니다.
이를 위해 스케줄러는 클러스터 내에서 아직 노드가 할당되지 않은 신규 파드들이 존재하는지 지속적으로 체크합니다.
그리고 이러한 파드가 발견될 때마다 스케줄러는 각종 스케줄링 원칙에 따라 해당 파드가 실행될 수 있는 최적의 노드를 탐색합니다.&lt;/p&gt;&lt;p&gt;쿠버네티스에서 디폴트로 제공하는 스케줄러는 &lt;code&gt;kube-scheduler&lt;/code&gt;이며, 컨트롤 플레인의 일부분으로 실행됩니다.
만일 필요하다면 별도의 스케줄링 컴포넌트를 작성하여 사용하는 것도 가능합니다.&lt;/p&gt;&lt;p&gt;스케줄러는 쿠버네티스 클러스터에서 없으면 안 되는 필수 요소이므로 반드시 클러스터를 구축할 때 포함되어야 합니다.
참고로 &lt;a href=&quot;https://minikube.sigs.k8s.io/docs/&quot;&gt;minikube&lt;/a&gt;의 경우에도
&lt;code&gt;kube-system&lt;/code&gt; 네임스페이스의 &lt;code&gt;kube-scheduler-minikube&lt;/code&gt; 파드에서
&lt;code&gt;registry.k8s.io/kube-scheduler&lt;/code&gt; 이미지 기반의 스케줄러가 실행됩니다.&lt;/p&gt;&lt;h2&gt;스케줄링의 기본 흐름&lt;/h2&gt;&lt;p&gt;&lt;code&gt;kube-scheduler&lt;/code&gt;는 아직 스케줄링되지 않은 파드를 실행시키기 위해 최적의 노드를 하나 선택합니다.
이때 파드의 컨테이너들이나 파드들마다 다른 요구사항을 지닐 수 있습니다.
이에 따라 스케줄러는 각 파드의 요구사항에 맞지 않는 노드들은 선택지에서 제외시킵니다.
API를 통해 파드가 무조건 실행될 특정한 노드 하나를 지정할 수 있도 있으나,
이는 일반적이지 않으며 특수한 상황들에서만 사용됩니다.&lt;/p&gt;&lt;p&gt;클러스터에서 파드의 스케줄링 요구사항을 충족하는 노드들은 &lt;strong&gt;실행 가능한(feasible) 노드&lt;/strong&gt;라고 부릅니다.
만일 클러스터 내에 요구사항을 충족하는 노드가 하나도 없는 경우,
적절한 노드가 발견될 때까지 해당 파드는 스케줄링되지 못한 상태로 대기합니다.&lt;/p&gt;&lt;p&gt;스케줄러가 특정 파드에 대해 실행 가능한 노드들을 발견하면
일련의 함수들을 실행하여 해당 노드들에 각각 점수를 주고, 가장 점수가 높은 노드를 하나 선택합니다.
이후 스케줄러는 API 서버에게 어떠한 노드가 선택되었는지에 대해 통보를 하는 &lt;strong&gt;바인딩(binding)&lt;/strong&gt; 과정을 거칩니다.&lt;/p&gt;&lt;p&gt;최적의 노드를 선택하기 위해 고려해야 하는 요소들은 다양합니다.
개별 및 종합적인 리소스 요구사항,
하드웨어 / 소프트웨어 / 정책적인 제한조건들(constraints),
&lt;a href=&quot;https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity&quot;&gt;affinity 및 anti-affinity&lt;/a&gt; 명세,
데이터 지역성(data locality), 워크로드 간 간섭 등이 대표적입니다.&lt;/p&gt;&lt;h2&gt;노드 선택 과정&lt;/h2&gt;&lt;p&gt;&lt;code&gt;kube-scheduler&lt;/code&gt;는 두 단계에 거쳐 파드를 위한 노드를 선택합니다.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;필터링(filtering)&lt;/li&gt;&lt;li&gt;스코어링(scoring)&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;필터링 단계&lt;/strong&gt;에서 스케줄러는 파드를 스케줄링할 수 있는 실행 가능한(feasible) 노드들을 찾습니다.
예를 들어, &lt;code&gt;PodFitsResources&lt;/code&gt; 필터는
파드에서 &lt;a href=&quot;https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#requests-and-limits&quot;&gt;요청하는 리소스&lt;/a&gt;만큼의
가용 리소스가 각 노드에 충분히 존재하는지를 확인합니다.
필터링 단계 이후 실행 가능한 노드 목록이 비어있으면 해당 파드는 아직 스케줄링될 수 없습니다.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;스코어링 단계&lt;/strong&gt;에서 스케줄러는 최적의 파드를 선택하기 위해 각 노드들에 순위를 부여합니다.
이를 위해 스케줄러는 스코어링 규칙에 따라 필터링 과정에서 살아남은 각 노드들에 점수를 부여합니다.
스코어링 단계가 끝나면 &lt;code&gt;kube-scheduler&lt;/code&gt;는 가장 순위가 가장 높은 노드에 파드를 할당합니다.
만일 복수의 노드가 공동 1등이라면 &lt;code&gt;kube-scheduler&lt;/code&gt;는 이 중 하나를 임의로 선택합니다.&lt;/p&gt;&lt;h2&gt;스케줄러 설정 변경&lt;/h2&gt;&lt;p&gt;쿠버네티스 v1.23 이전까지는 &lt;a href=&quot;https://kubernetes.io/docs/reference/scheduling/policies/&quot;&gt;스케줄링 정책(scheduling policy)&lt;/a&gt;을
활용하여 필터링을 위한 predicate와 스코어링을 위한 우선순위(priorities)를 설정할 수 있었습니다.
예를 들어, &lt;code&gt;kube-scheduler --policy-config-file &amp;lt;filename&amp;gt;&lt;/code&gt; 혹은
&lt;code&gt;kube-scheduler --policy-configmap &amp;lt;ConfigMap&amp;gt;&lt;/code&gt;와 같이 명령어를 실행함으로서 스케줄링 정책을 설정할 수 있었습니다.
다만, 해당 기능은 v1.23 릴리즈부터는 지원되지 않습니다.&lt;/p&gt;&lt;p&gt;일반적으로 스케줄러 설정 변경은 &lt;code&gt;kube-scheduler&lt;/code&gt;에
&lt;a href=&quot;https://kubernetes.io/docs/reference/scheduling/config/#profiles&quot;&gt;스케줄링 프로파일(scheduling profile)&lt;/a&gt;을
넘기는 방식으로 이루어집니다.
스케줄링 프로파일을 사용하면 &lt;code&gt;QueueSort&lt;/code&gt;, &lt;code&gt;Filter&lt;/code&gt;, &lt;code&gt;Score&lt;/code&gt;, &lt;code&gt;Bind&lt;/code&gt;, &lt;code&gt;Reserve&lt;/code&gt;, &lt;code&gt;Permit&lt;/code&gt; 등
세부적인 스케줄링 단계를 구현한 플러그인들을 설정할 수 있습니다.&lt;/p&gt;&lt;p&gt;예를 들어, 아래와 같은 &lt;code&gt;KubeSchedulerConfiguration&lt;/code&gt; 설정을 작성하고
&lt;code&gt;kube-scheduler --config &amp;lt;filename&amp;gt;&lt;/code&gt; 명령어를 실행하면
&lt;code&gt;kube-scheduler&lt;/code&gt;의 스코어링 단계를 수정할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; kubescheduler.config.k8s.io/v1
&lt;span class=&quot;token key atrule&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; KubeSchedulerConfiguration
&lt;span class=&quot;token key atrule&quot;&gt;profiles&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;score&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;disabled&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PodTopologySpread
        &lt;span class=&quot;token key atrule&quot;&gt;enabled&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; MyCustomPlugin
          &lt;span class=&quot;token key atrule&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;세부 사항은 &lt;a href=&quot;https://kubernetes.io/docs/reference/scheduling/config/&quot;&gt;공식문서&lt;/a&gt;를 참고하기 바랍니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;스케줄링 과정 자체가 굉장히 큰 주제이므로 주요 내용을 전부 정리하는 데에는 한계가 있습니다.
그래도 워낙 중요한 내용이므로 키워드 제공 및 전체적인 동작 방식만 가볍게 정리해보았습니다.&lt;/p&gt;&lt;p&gt;자세한 사항은
공식문서의 &lt;a href=&quot;https://kubernetes.io/docs/concepts/scheduling-eviction/&quot;&gt;Scheduling, Preemption and Eviction&lt;/a&gt;
내용을 참고하기 바랍니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/&quot;&gt;Kubernetes - Taints and Tolerations&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/reference/scheduling/config/&quot;&gt;Kubernetes - Scheduler Configuration&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[FCM] 안드로이드 doze 모드에서 수신 가능한 푸시 알림을 발송하고 테스트하기]]></title><description><![CDATA[안드로이드 6.0버전부터 doze 모드라는 개념이 도입되었습니다. 이와 관련하여 FCM으로 푸시 알림을 보낼 때 신경써야 하는 점과 adb라는 툴로 doze 모드에 진입하는 방법까지 가볍게 정리합니다.]]></description><link>https://bugoverdose.github.io/posts/82/</link><guid isPermaLink="false">https://bugoverdose.github.io/posts/82/</guid><pubDate>Sat, 13 Jul 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;배경&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;쿠키런: 오븐브레이크&lt;/strong&gt;라는 모바일 게임이 있습니다.
2024년도 7월 초에 제가 개발한 &lt;strong&gt;서리런&lt;/strong&gt;이라는 컨텐츠가 오픈되었습니다.&lt;/p&gt;&lt;p&gt;서리런에서 모든 유저는 자신만의 농장을 경영합니다.
유저가 밭에 씨앗을 심으면, 작물이 자라는 동안 밭에 서리꾼이 등장할 수 있습니다.
서리꾼이 언제 등장할지는 알 수 없으며,
서리꾼이 등장하면 유저는 제한 시간 내에 인게임에서 서리꾼을 쫓아내야 합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/d6e03ca243a7333de5e18334f39e61ce/be3c7/stealrunmode_attacker.jpg&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:41.104294478527606%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAMAAv/aAAwDAQACEAMQAAABjYFZwmf/xAAaEAABBQEAAAAAAAAAAAAAAAACAAEEEyMz/9oACAEBAAEFAhYqNVK6f//EABcRAQADAAAAAAAAAAAAAAAAAAACETH/2gAIAQMBAT8Bjqn/xAAXEQADAQAAAAAAAAAAAAAAAAAAAhEB/9oACAECAQE/AWbYU//EABoQAAICAwAAAAAAAAAAAAAAAAABAlEDETH/2gAIAQEABj8CxuFEei3R/8QAGhAAAgMBAQAAAAAAAAAAAAAAAREAITFR0f/aAAgBAQABPyEp52oSITAu9uO4C/Rn/9oADAMBAAIAAwAAABCD3//EABYRAQEBAAAAAAAAAAAAAAAAAAEAMf/aAAgBAwEBPxAjiAX/xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8QJBZf/8QAGhABAQACAwAAAAAAAAAAAAAAAREAITFRgf/aAAgBAQABPxDWNUHWIuRO0+5Vz5lAJFd24f/Z&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;stealrunmode_attacker&quot; title=&quot;stealrunmode_attacker&quot; src=&quot;/static/d6e03ca243a7333de5e18334f39e61ce/6aca1/stealrunmode_attacker.jpg&quot; srcSet=&quot;/static/d6e03ca243a7333de5e18334f39e61ce/d2f63/stealrunmode_attacker.jpg 163w,/static/d6e03ca243a7333de5e18334f39e61ce/c989d/stealrunmode_attacker.jpg 325w,/static/d6e03ca243a7333de5e18334f39e61ce/6aca1/stealrunmode_attacker.jpg 650w,/static/d6e03ca243a7333de5e18334f39e61ce/7c09c/stealrunmode_attacker.jpg 975w,/static/d6e03ca243a7333de5e18334f39e61ce/01ab0/stealrunmode_attacker.jpg 1300w,/static/d6e03ca243a7333de5e18334f39e61ce/be3c7/stealrunmode_attacker.jpg 1320w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;문제는 게임을 꺼놓았을 때에 서리꾼이 등장할 수 있다는 점입니다.
이러한 상황에서 저희 서버는 푸시 알림 수신에 동의한 유저들에게
아래와 같은 서리꾼 등장 푸시 알림을 전송합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:620px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/67249a9e20e8c069d26470fc6a0c7dd8/2a195/push_alarm.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:87.73006134969326%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEUklEQVQ4yyWUS28bVRzF5zsEGqmPkPjtsWfs2B7bM+OZsT0vv8bjR+IkTtKGOmkCaRNooSkRBYFKhVgggdiwByEhwbJ7vkWX3XaF1C/wQx4WV/ch3fM/95zzv4Ioiui6TqPRoFQqYds2qqrSbDbRNQ3X9dB1g5woU5TLFAsVClIZWSoh5Quk0lkURWE2m5FIJBBSqVR0YBgGlUqFwWCAZVmEYUgYjpjNdul2BuTFTSSxzKZco1oxKBVrFPJlsuk89brGvXtHJBJxBFmWub6+jiqsra2x3C+BNzZiSFIBXTUpSApOu88P3//I6ckFWtXBd0fYrS5yvkRpU0FRqmSzWYTFYsHr16959eoVkiQxn885Ozsjn5cZjaZ89fxbmobP18+/46+//+T33/6g7+5wfvqER+efRcVm23NevnyJUlEQlrq9ePGCg4MDVlZWIoaGYZLLSWiqxXi0S8vssz35kF9+/pWrx9/gGFPGwSFdb4KcV6gpOo7jsfRDWLI6OTnh8vKSq6uraDZNC8No4dg9ep0JW6O7zMYLdicP2B09YGe0YNjdw7NDmqaHVl/qX0UU8whHR0e8efOGt2/f8u7du2h9//4x08kOdw+POVk84vz0cy7Pr/nk4ZdcfvwFH508YXH0kIP5gtnWPpPRNkEQoqo6QrFY5OLigqdPn/Ls2TMeP36CY3u0Wz6D3oSt8QH7u8fc3T/j3v4Zh3snzKaHhINtut6QdtPHMmwamkVBLiHE43FWV1dZXb3BzZs32diII0tFyptVqhUdU7fpd0aEwRYdt4/b9rFbLmajTb3aQCmpSOImYloiLxYQkskksVgsCmUul6PdthkOR3huh/KmglbX8V2foN+n3bSwTIPpeMxsa4ed2ZzZ1l4UnVxGRhKLCOl0inQ6QyabiwCXElQqStQtpmHg2C3CYY/pNCAYePR7Ll3fw3OWTDuYDQe1akZMl2EXUqkEH9x6j/XbKySTS6Yx0ukkOTFDqSSj1svoukKjoWBZdSxLw2jo6KqBWjWolnXKhXrUSUumwu2b77OuLUj5z1nfWMfzbDodl8k0jC4XCiKVShFVVZBlkUw6hZjNkU6KpOIiyViWRCxDIp4hHkshrN5Ywfr0H2Y//csH6QK+Z+F4LWY7EwaBT6/vMZkE+J6N77k4tkNDt/DdHr47wDTaZDMSGxvJyFAhEVvjVrLCnVyLTHodVatSKks0jBqmqWK3LbodN3qm63jYbQ9Da+LaXey2j2XapJIid+6sE4slECpKhZqy/ASKmJaG3qhimrVoNC2NptWInG1ZbZqNdmSCobuotRZVxaS0NKNUo1AoI8mbCK7rMJ/vcXr2gNOzY3Z2pwwGHqOwzygcEA4DRsGIsDcm7E4J/Ckdd4xrD2m3+mham2bLw3Y6/wMu49FqNel2fYbDHsNhn2HQYzjoE/QHDHoBfX9Izw3p2kM6rQDH6mMZPrpmU69bVBSNzVI1AvwPUMOH9km1qIIAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;push_alarm&quot; title=&quot;push_alarm&quot; src=&quot;/static/67249a9e20e8c069d26470fc6a0c7dd8/2a195/push_alarm.png&quot; srcSet=&quot;/static/67249a9e20e8c069d26470fc6a0c7dd8/222b7/push_alarm.png 163w,/static/67249a9e20e8c069d26470fc6a0c7dd8/ff46a/push_alarm.png 325w,/static/67249a9e20e8c069d26470fc6a0c7dd8/2a195/push_alarm.png 620w&quot; sizes=&quot;(max-width: 620px) 100vw, 620px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;그런데 서리꾼 등장 푸시 알림이 제대로 도착하지 않는다고 호소하는 유저들이 아주 많았습니다.&lt;/p&gt;&lt;h2&gt;안드로이드 doze 모드&lt;/h2&gt;&lt;p&gt;안드로이드 6.0 버전부터 doze 모드라는 개념이 도입되었습니다.
doze 모드는 해당 기기가 숙면을 취하는게 아니라 배터리 절약을 위해 꾸벅꾸벅 졸고 있다는 의미입니다.&lt;/p&gt;&lt;p&gt;기본적으로 기기가 충전기에 연결되어있지 않고, 물리적으로 이동 중이지 않으며,
화면이 꺼진 상태로 일정 시간이 지나면 기기는 doze 모드로 전환됩니다.
doze 모드 동안 시스템은 앱들의 네트워크 접근과 CPU 사용을 최대한 제한하며, 많은 앱들의 동작이 지연됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9caf94b569e20752defed542627e7ccb/7de21/doze.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:40.49079754601227%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABE0lEQVQY042Q2U7CYBCF+/6vwYX3xBsSFVGiYWtYRK0iEKCtVKpU6L/MP4uBmojeyJdJJiczJ2cynrVWaw0AsgcRkyRZr9fMLP/hBUHg+36WZYUGgGX8qpSSI/CWSTKZTvP99rve5GA2aAy5o8xFIwQBa5wFBwYMMguRHF7+RxZmnj3yzSnVy1wvc5bK9pNX8W4SjcXtH1F43kLJ0h/5nTzqydkJVUpcKek0yj+WOnpRImbcV3qjCJTTuYgJn/VqoYSVMwptjsaS82QVcdDBYYMfWv6sV590WqPmRTzsPt1ez3uX4aC26FfjYXvUbEza1eiuFg6uwsH5vHufzryt0gYciaAIEjpER4TokBkPIdrVb74ARqPJE2ypIRMAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;doze&quot; title=&quot;doze&quot; src=&quot;/static/9caf94b569e20752defed542627e7ccb/a6d36/doze.png&quot; srcSet=&quot;/static/9caf94b569e20752defed542627e7ccb/222b7/doze.png 163w,/static/9caf94b569e20752defed542627e7ccb/ff46a/doze.png 325w,/static/9caf94b569e20752defed542627e7ccb/a6d36/doze.png 650w,/static/9caf94b569e20752defed542627e7ccb/e548f/doze.png 975w,/static/9caf94b569e20752defed542627e7ccb/3c492/doze.png 1300w,/static/9caf94b569e20752defed542627e7ccb/7de21/doze.png 1839w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;doze 모드에서 일정 기간이 지나면 짧은 기간 동안 유지보수 기간(maintenance window)을 거칩니다.
이때 기기에서는 doze 모드 동안 지연시켰던 작업들이 실행되고 네트워크에 접근할 수 있게 됩니다.
유지보수 기간이 끝난 이후 기기는 다시 doze 모드에 진입합니다. 그리고 다음 유지보수 기간이 올 때까지 걸리는 시간은 점점 늘어납니다.&lt;/p&gt;&lt;p&gt;이후 기기를 물리적으로 움직이거나, 화면을 키거나 충전기를 연결하여 절전모드를 해제하면
시스템은 doze 모드에서 벗아나며 모든 앱들이 정상화됩니다.&lt;/p&gt;&lt;h2&gt;푸시 알림의 우선순위&lt;/h2&gt;&lt;p&gt;많은 서비스들이 푸시 알림을 발송하고 수신하기 위해 FCM(Firebase Cloud Messaging)이라는 서비스를 활용합니다.&lt;/p&gt;&lt;p&gt;FCM으로 안드로이드 기기에 푸시 알림을 보낼 때에는 메시지의 우선순위를 &lt;code&gt;normal&lt;/code&gt;과 &lt;code&gt;high&lt;/code&gt; 중 하나로 설정할 수 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;normal&lt;/code&gt;: 디폴트 우선순위입니다. &lt;strong&gt;기기가 doze 모드인 동안에 해당 푸시 알림의 전달이 지연됩니다.&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;high&lt;/code&gt; : FCM에서 해당 푸시 알림을 즉시 전달하고자 합니다. 즉, 기기가 doze 모드일 경우 &lt;strong&gt;강제로 기기를 깨우면서 푸시 알림을 수신&lt;/strong&gt;하도록 시도합니다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;언뜻 보면 최대한 푸시 알림이 즉시 수신되도록 모든 메시지들을 &lt;code&gt;high&lt;/code&gt; 우선순위로 발송하는게 이상적이라고 생각할 수도 있습니다.
그러나 별로 중요하지도 않은 푸시 알림이 수시로 기기에 뜬다면,
유저 입장에서는 귀찮게 느껴지며 기기의 배터리도 불필요하게 낭비됩니다.
이처럼 불필요한 푸시 알림이 과하게 올 경우, 유저는 해당 앱의 푸시 알림 수신 동의를 꺼버릴 수도 있습니다.&lt;/p&gt;&lt;p&gt;때문에 공식문서에서도 푸시 알림을 수신한 유저가 즉시 어떠한 행동을 해야 하는 상황일 때 &lt;code&gt;high&lt;/code&gt; 우선순위를 사용할 것을 권장하고 있습니다.
위에서 설명한 서리꾼 등장 푸시 알림의 경우, 제한 시간 내에 유저가 게임에 접속하지 않으면 불이익을 받게 됩니다.
때문에 doze 모드일지라도 강제로 수신되도록 설정할 필요가 있는 푸시 알림이라고 판단되었으며,
즉시 &lt;code&gt;high&lt;/code&gt; 우선순위로 발송하도록 설정을 수정하여 라이브에 반영하였습니다.&lt;/p&gt;&lt;h2&gt;테스트 방법&lt;/h2&gt;&lt;p&gt;당연한 이야기지만 &amp;quot;서버에서 전송한 푸시 알림을 doze 모드에 진입한 안드로이드 기기에서도 수신할 수 있다&amp;quot;라는 시나리오는
서버 테스트 코드로는 검증할 수가 없습니다. 이는 서버팀보다는 QA팀의 업무 영역입니다.&lt;/p&gt;&lt;p&gt;그런데 QA를 할 때에 다양한 어려움이 있습니다.
단순히 테스트 기기를 방치하는 경우,
얼마나 방치해야 doze 모드에 진입하는지에 대한 기준도 명확하지 않으며,
애초에 특정한 안드로이드 기기가 doze 모드에 진입한 상황이 맞는지 판단하는 것도 어렵습니다.&lt;/p&gt;&lt;p&gt;이 때문에 많은 개발자들이 &lt;code&gt;adb&lt;/code&gt;(Android Debug Bridge)라는 프로그램을 활용해
강제로 기기를 doze 모드에 진입시키는 방식으로 테스트를 진행합니다.&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://developer.android.com/tools/adb&quot;&gt;공식문서&lt;/a&gt;를 참고하면
다양한 방식으로 테스트 기기에 &lt;code&gt;adb&lt;/code&gt; 명령어를 보낼 수 있는 환경을 셋업할 수 있습니다.
이후 화면을 끄고 아래와 같은 명령어들을 활용하면 강제로 기기를 doze 모드에 진입시킬 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 배터리 충전 중단 (doze 모드 진입을 위한 사전 조건)&lt;/span&gt;
adb shell dumpsys battery unplug
&lt;span class=&quot;token comment&quot;&gt;# IDLE 상태로 전환되도록 반복 실행&lt;/span&gt;
adb shell dumpsys deviceidle step
&lt;span class=&quot;token comment&quot;&gt;# 혹은 강제로 IDLE 상태 진입&lt;/span&gt;
adb shell dumpsys deviceidle force-idle&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;명령어 실행 결과, &lt;code&gt;IDLE&lt;/code&gt; 상태가 되었다는 메시지가 응답되면 doze 모드에 진입했다는 의미입니다.
이 상태에서 우선순위가 &lt;code&gt;high&lt;/code&gt;로 푸시 알림이 잘 도달하는지 테스트할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ adb shell dumpsys deviceidle step
Stepped to deep: IDLE_PENDING

$ adb shell dumpsys deviceidle step
Stepped to deep: SENSING

$ adb shell dumpsys deviceidle step
Stepped to deep: LOCATING

$ adb shell dumpsys deviceidle step
Stepped to deep: IDLE&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;제가 안드로이드 개발자가 아니다보니 이런 개념이 있다는 것도 몰랐습니다.
그래도 불만사항을 전달받자마자 몇 시간만에 서버에 기능 추가해서 라이브에 반영한 것만으로도 충분하지 않나.. 싶습니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://developer.android.com/about/versions/marshmallow/android-6.0-changes&quot;&gt;Android Developers - Android 6.0 Changes&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://developer.android.com/training/monitoring-device-state/doze-standby&quot;&gt;Android Developers - Optimize for Doze and App Standby&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://firebase.google.com/docs/cloud-messaging/android/message-priority&quot;&gt;FCM - Set and manage message priority&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://developer.android.com/tools/adb&quot;&gt;Android Developers - adb (Android Debug Bridge)&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[k8s] 클러스터 오버프로비저닝의 필요성과 구현]]></title><description><![CDATA[클러스터 오버프로비저닝과 오토스케일러를 통해 수평 확장성이 높은 클러스터를 구축하는 방법에 대해 가볍게 정리합니다. 오버프로비저닝의 필요성을 다루고, 파드의 우선순위 및 선점을 토대로 오버프로비저닝의 구현 방법을 이해해봅니다.]]></description><link>https://bugoverdose.github.io/posts/81/</link><guid isPermaLink="false">https://bugoverdose.github.io/posts/81/</guid><pubDate>Thu, 11 Jul 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;오버프로비저닝&lt;/h2&gt;&lt;p&gt;인프라에서 프로피저닝(provisioning)이란 단어는 각종 컴퓨팅 자원을 생성하고 할당하는 작업을 의미합니다.
그리고 오버프로비저닝(overprovisioning)이란
지금 당장 필요한 수준 이상으로 컴퓨팅 자원을 미리 생성해놓는 것을 의미합니다.
오버프로비저닝은 불필요한 추가 비용을 발생시킨다는 단점을 지니지만,
트래픽이 증가하는 등 서버 성능을 높여야 하는 상황에서 빠르게 대처할 수 있다는 장점을 지닙니다.&lt;/p&gt;&lt;p&gt;온프레미스(on-premise) 환경의 경우 시스템의 확장을 위해 많은 시간이 소요되므로 오버프로비저닝이 필수적입니다.&lt;/p&gt;&lt;p&gt;클라우드 환경에서는 딱 필요한 만큼의 컴퓨팅 자원을 할당받아 사용할 수 있으므로
일반적으로 오버프로비저닝이 필요하지 않습니다.
그러나 급속도로 트래픽이 증가하는 상황에 빠르게 대응할 수 있도록 약간의 오버프로비저닝을 의도적으로 구현해놓는 경우가 있습니다.
쿠버네티스에서 오버프로비저닝을 구현하는 방법에 대해 가볍게 다루겠습니다.&lt;/p&gt;&lt;h2&gt;클러스터 오토스케일러&lt;/h2&gt;&lt;p&gt;쿠버네티스는 클러스터의 수평 확장성을 위해
&lt;a href=&quot;https://github.com/kubernetes/autoscaler/tree/01e8918db7009e8a19a0eb48e54f15c54eaecaf9/cluster-autoscaler&quot;&gt;cluster-autoscaler&lt;/a&gt;라는
컴포넌트를 공식적으로 제공합니다.&lt;/p&gt;&lt;p&gt;이 컴포넌트는 아래 두 가지 조건 중 하나가 충족되었을 때 자동으로 클러스터의 노드 개수를 조정합니다.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;리소스 부족으로 인해 실행에 실패하는 파드가 존재한다.&lt;/li&gt;&lt;li&gt;일정 기간 동안 리소스를 충분히 활용하지 않는 노드가 존재하며, 해당 노드의 파드들을 전부 다른 노드에서 실행 가능하다.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/aws/README.md&quot;&gt;AWS 환경&lt;/a&gt;의 경우
일반적으로 클러스터 오토스케일러는 클러스터 내에 디플로이먼트(Deployment)로 실행되며,
&lt;a href=&quot;https://docs.aws.amazon.com/autoscaling/ec2/userguide/what-is-amazon-ec2-auto-scaling.html&quot;&gt;ASG(Auto Scaling Groups)&lt;/a&gt;를
활용하여 노드들의 개수를 조절합니다.&lt;/p&gt;&lt;p&gt;문제는 EC2 인스턴스를 하나 생성하고, 해당 인스턴스를 클러스터에 노드로 등록해줄 때까지 어느 정도의 시간이 소요되며,
스케줄링되지 못하는 파드는 그대로 대기해야 한다는 점입니다.
물론 트래픽이 원만하게 증가하는 상황에서는 다소 느리게 수평 확장이 진행되더라도 장애가 나지 않을 수 있습니다.
그러나 짧은 시간 동안 트래픽이 빠른 속도로 급증하는 경우 문제가 됩니다.&lt;/p&gt;&lt;p&gt;물론 어떤 시간대에 트래픽이 얼마나 몰릴지 예상할 수 있다면,
해당 시간대 직전에 미리 적정 개수의 파드를 클러스터에 스케줄링해놓는 것도 가능합니다.
그러나 트래픽 급증 상황에 상시 대비하기 위해서는 오버프로비저닝을 구현해놓는 것을 고려해볼 수 있습니다.&lt;/p&gt;&lt;h2&gt;클러스터 오버프로비저닝&lt;/h2&gt;&lt;p&gt;쿠버네티스 클러스터 내에 리소스만 충분하면 새로운 파드를 생성하고 노드에 스케줄링하는 과정은 상대적으로 빠르게 이루어집니다.
즉, 새로운 파드를 생성했을 때 즉시 스케줄링할 수 있도록
클러스터 내에 사용하지 않는 리소스를 유지하는 것이 클러스터 오버프로비저닝의 기본 원리입니다.
이를 위해 클러스터 오버프로비저닝은 디플로이먼트를 활용해
&lt;strong&gt;CPU와 메모리를 최대한 사용하지 않으며, 우선순위(priority)가 낮게 설정된 파드들을 유지&lt;/strong&gt;하는 방식으로 구현됩니다.&lt;/p&gt;&lt;h3&gt;cluster-overprovisioner 애드온&lt;/h3&gt;&lt;p&gt;DeliveryHero라는 조직에서 제공하는
&lt;a href=&quot;https://github.com/deliveryhero/helm-charts/tree/master/stable/cluster-overprovisioner&quot;&gt;cluster-overprovisioner&lt;/a&gt; 프로젝트를
클러스터의 애드온으로 활용하면 쉽게 오버프로비저닝을 구현할 수 있습니다.
해당 프로젝트는 &lt;code&gt;registry.k8s.io/pause&lt;/code&gt; 이미지를 활용하여 생성된 pause 파드&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;들을 클러스터 내에 유지합니다.
pause 파드는 CPU와 메모리를 최대한 사용하지 않으며, 노드 내에 자리를 차지하는 것 외에는 아무런 기능도 수행하지 않습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/aecfaf1a610a7be10390f507c863ba83/7f403/overprovisioning.webp&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:52.14723926380368%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/webp;base64,UklGRlYAAABXRUJQVlA4IEoAAACwAwCdASoUAAoAPtFUo0uoJKMhsAgBABoJYwCdACICqHmrpMuqAAD+83Vk18vYjV20kFDByNaP6z+PzFGO3dN6avVqU+UiBgAAAA==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;overprovisioning&quot; title=&quot;overprovisioning&quot; src=&quot;/static/aecfaf1a610a7be10390f507c863ba83/c1dc5/overprovisioning.webp&quot; srcSet=&quot;/static/aecfaf1a610a7be10390f507c863ba83/94563/overprovisioning.webp 163w,/static/aecfaf1a610a7be10390f507c863ba83/647a8/overprovisioning.webp 325w,/static/aecfaf1a610a7be10390f507c863ba83/c1dc5/overprovisioning.webp 650w,/static/aecfaf1a610a7be10390f507c863ba83/1e975/overprovisioning.webp 975w,/static/aecfaf1a610a7be10390f507c863ba83/063bf/overprovisioning.webp 1300w,/static/aecfaf1a610a7be10390f507c863ba83/7f403/overprovisioning.webp 1400w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이후 트래픽이 증가하면서 새로운 파드를 위한 리소스가 부족해지면,
스케줄러는 새로운 파드를 스케줄링하기 위해 우선순위가 낮은 더미 파드를 종료(evict)시키는 &lt;strong&gt;선점(preemption)&lt;/strong&gt; 과정을 거칩니다.
그 이후 디플로이먼트는 새로운 pause 파드를 생성하여 스케줄링을 시도하며, 이 과정에서 오토스케일러는 노드를 생성해 클러스터에 등록하는 과정을 거치게 됩니다.&lt;/p&gt;&lt;p&gt;클러스터 내에서 어느 정도의 리소스를 오버프로비저닝해놓을지는
pause 파드에서 사용하는 리소스와 pause 파드의 개수를 통해 조절할 수 있습니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;해당 글에서는 클러스터의 수평 확장성을 위해 사용되는
&lt;a href=&quot;https://github.com/kubernetes/autoscaler/tree/01e8918db7009e8a19a0eb48e54f15c54eaecaf9/cluster-autoscaler&quot;&gt;cluster-autoscaler&lt;/a&gt;와
&lt;a href=&quot;https://github.com/deliveryhero/helm-charts/tree/master/stable/cluster-overprovisioner&quot;&gt;cluster-overprovisioner&lt;/a&gt;라는
애드온들에 대해 설명했습니다.&lt;/p&gt;&lt;p&gt;전자의 경우 쿠버네티스 조직에서 관리되며, AWS에서 직접 기여를 하고 있는 프로젝트이므로 거의 필수로 사용되는 애드온입니다.
다만, 클러스터 오버프로비저닝의 경우 굳이 애드온에 의존하지 않고 기본 원리를 참고하여 직접 구현하는 것도 가능합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/autoscaler/blob/01e8918db7009e8a19a0eb48e54f15c54eaecaf9/cluster-autoscaler/FAQ.md#how-can-i-configure-overprovisioning-with-cluster-autoscaler&quot;&gt;Github - How can I configure overprovisioning with Cluster Autoscaler?&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.eksworkshop.com/docs/autoscaling/compute/cluster-autoscaler/overprovisioning/&quot;&gt;EKS Workshop - Cluster Over-Provisioning&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/kubernetes/autoscaler&quot;&gt;Github - kubernetes/autoscaler&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/&quot;&gt;Kubernetes - Pod Priority and Preemption&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://medium.com/scout24-engineering/cluster-overprovisiong-in-kubernetes-79433cb3ed0e&quot;&gt;Medium - Cluster overprovisioning in Kubernetes&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;pause 파드란 기본적으로 &lt;a href=&quot;https://man7.org/linux/man-pages/man2/pause.2.html&quot;&gt;pause 시스템콜&lt;/a&gt;만 호출하고 무한정 대기하는 컨테이너로 구성된 파드입니다.
pause 파드는 클러스터 오버프로비저닝 이외의 맥락에서도 사용되며,
클러스터 오버프로비저닝 구현을 위해 pause 파드가 필수적인 것도 아니라는 점에 유의해야 합니다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[k8s] 컨테이너 프로브를 통한 헬스체킹]]></title><description><![CDATA[프로브란 컨테이너에 대해 주기적으로 실행되는 헬스체킹 작업입니다. 공식문서를 토대로 livenessProbe, readinessProbe, startupProbe에 대해 가볍게 정리합니다.]]></description><link>https://bugoverdose.github.io/posts/80/</link><guid isPermaLink="false">https://bugoverdose.github.io/posts/80/</guid><pubDate>Tue, 09 Jul 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;프로브(probe)란 컨테이너에 대해 주기적으로 실행되는 헬스체킹 작업입니다.
프로브는 컨테이너가 실행되는 노드의 &lt;code&gt;kubelet&lt;/code&gt;에서
컨테이너에 네트워크 요청을 보내거나, 컨테이너 내부에서 코드를 실행하거는 방식으로 이루어집니다.&lt;/p&gt;&lt;h2&gt;프로브 메커니즘&lt;/h2&gt;&lt;p&gt;컨테이너 프로브는 네 가지 메커니즘으로 컨테이너를 헬스체킹할 수 있습니다.
각 프로브를 정의할 때 이 네 가지 중 하나의 메커니즘을 사용하도록 명시해야 합니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;exec&lt;/strong&gt;: 컨테이너 내부에서 특정한 명령어를 실행합니다. 명령어 실행 결과, 상태 코드가 0이면 성공으로 간주합니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;grpc&lt;/strong&gt;: gRPC를 통해 원격 프로시저 호출을 진행합니다. 대상 컨테이너에서는 gRPC 헬스 체킹을 구현해놓아야 하며, 응답 상태가 &lt;code&gt;SERVING&lt;/code&gt;이면 성공으로 간주합니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;httpGet&lt;/strong&gt;: 파드의 IP 주소의 특정 포트 및 경로에 대해 HTTP GET 요청을 보냅니다. 응답 상태코드가 200 이상이고 400미만일 경우 성공으로 간주합니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;tcpSocket&lt;/strong&gt;: 파드의 IP 주소의 특정 포트에 대해 TCP 체크를 수행합니다. 해당 포트가 열려있기만 하면 성공으로 간주합니다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;다른 메커니즘과 달리 &lt;code&gt;exec&lt;/code&gt; 프로브의 경우 실행될 때마다 복수의 프로세스를 생성 및 포크합니다.
이로 인해 노드의 CPU 사용량 측면에서 오버헤드가 될 수도 있습니다.
이러한 오버헤드가 문제가 될 수 있는 환경이라면 다른 프로브 메커니즘을 선택하는 것을 고려해봐야 합니다.&lt;/p&gt;&lt;h2&gt;프로브 결과&lt;/h2&gt;&lt;p&gt;컨테이너 프로브를 실행할 때마다 세 가지 중 한 가지 결과가 나옵니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Success&lt;/strong&gt;: 컨테이너가 헬스체킹을 통과하였습니다. 건강합니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Failure&lt;/strong&gt;: 컨테이너가 헬스체킹을 통과하지 못했습니다. 건강하지 않습니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;Unknown&lt;/strong&gt;: 프로브 작업이 실패했습니다. &lt;code&gt;kubelet&lt;/code&gt;이 추가로 체크를 진행할 것입니다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;만일 특정 타입의 프로브가 정의되어있지 않은 경우 해당 타입의 프로브는 디폴트로 &lt;strong&gt;Success&lt;/strong&gt; 상태입니다.
그리고 실행된 프로브의 종류에 따라 프로브 결과에 따른 &lt;code&gt;kubelet&lt;/code&gt;의 반응은 달라집니다.&lt;/p&gt;&lt;h2&gt;프로브 종류&lt;/h2&gt;&lt;p&gt;각 컨테이너에 대해 정의할 수 있는 프로브의 종류는 세 가지입니다.
각 프로브는 선택사항이며 &lt;code&gt;kubelet&lt;/code&gt; 입장에서 이들은 별개입니다.
때문에 동일한 컨테이너에 대해 이 세 가지 모두 정의할 수도 있고, 하나도 정의하지 않을 수도 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;livenessProbe&lt;/code&gt;: 컨테이너가 실행 중인 것을 확인합니다.&lt;/li&gt;&lt;li&gt;&lt;code&gt;readinessProbe&lt;/code&gt;: 컨테이너가 요청에 응답할 수 있는 준비가 되어있음을 확인합니다.&lt;/li&gt;&lt;li&gt;&lt;code&gt;startupProbe&lt;/code&gt;: 컨테이너 내부에서 애플리케이션이 시작되었는지를 확인합니다.&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;liveness 프로브&lt;/h3&gt;&lt;p&gt;liveness 프로브는 말 그대로 컨테이너가 건강하게 실행 중인지 검사하는 프로브입니다.
liveness 프로브 결과가 &lt;strong&gt;Failure&lt;/strong&gt;일 경우,
&lt;code&gt;kubelet&lt;/code&gt;는 해당 컨테이너를 죽이며 기존에 정의된 &lt;code&gt;restartPolicy&lt;/code&gt; 설정에 따라 재시작 과정을 거칩니다.&lt;/p&gt;&lt;p&gt;앱에서 이슈가 발생하거나 unhealthy 상태가 되었을 때
컨테이너 내부 프로세스가 자동으로 죽을 수 있다면 굳이 liveness 프로브를 설정하지 않아도 됩니다.
이 경우 &lt;code&gt;kubelet&lt;/code&gt;에서 자동으로 파드의 &lt;code&gt;restartPolicy&lt;/code&gt; 설정에 따라 적절한 작업을 진행합니다.&lt;/p&gt;&lt;p&gt;만일 특정 조건에서 의도적으로 실행 중인 컨테이너를 죽이고 재시작하기를 바란다면,
liveness 프로브를 정의하고 &lt;code&gt;restartPolicy&lt;/code&gt;를 &lt;code&gt;Always&lt;/code&gt; 혹은 &lt;code&gt;OnFailure&lt;/code&gt;로 정의할 필요가 있습니다.
컨테이너 재시작과 &lt;code&gt;restartPolicy&lt;/code&gt;에 관한 내용은 &lt;div to=&quot;/posts/79&quot;&gt;지난 게시글&lt;/div&gt;을 참고하기 바랍니다.&lt;/p&gt;&lt;h3&gt;readiness 프로브&lt;/h3&gt;&lt;p&gt;readiness 프로브는 컨테이너가 작업을 처리할 준비가 되어있는지 검사하는 프로브입니다.&lt;/p&gt;&lt;p&gt;프로브가 성공한 이후부터 해당 파드에 트래픽을 보내기 시작하고 싶다면, readiness 프로브를 설정해야 합니다.
기본적으로 readiness 프로브와 liveness 프로브의 진단 방식은 동일할 수 있습니다.
다만, readiness 프로브가 설정된 파드는
프로브 결과가 &lt;strong&gt;Failure&lt;/strong&gt; 상태에서 시작하며 초반에 트래픽을 전혀 받지 않습니다.
이후 해당 프로브가 &lt;strong&gt;Success&lt;/strong&gt;가 되었을 때부터 트래픽을 받기 시작합니다.
만일 프로브 결과가 &lt;strong&gt;Failure&lt;/strong&gt;가 되면
엔드포인트 컨트롤러(endpoints controller)는 해당 파드의 IP 주소를 관련 서비스들로부터 제거합니다.&lt;/p&gt;&lt;p&gt;문제가 있을 때 컨테이너를 즉시 죽이지 않고 자체적으로 회복할 수 있도록 하고 싶을 수 있습니다.
이를 위해 일시적으로 트래픽을 받지 않도록 설정하고 싶다면,
readiness 프로브와 liveness 프로브가 서로 다른 엔드포인트를 확인하도록 설정할 필요가 있습니다.
예를 들어, liveness 프로브는 애플리케이션 자체가 건강한지를 체크하고,
readiness 프로브는 애플리케이션이 의존하는 백엔드 서비스들이 모두 건강한지를 체크할 수 있습니다.
만일 백엔드 서비스 중 하나에 문제가 발생하여 파드에 전달되는 모든 트래픽이 에러를 응답하게 되는 상황이라면
readiness 프로브 결과가 &lt;strong&gt;Failure&lt;/strong&gt;가 되면서 트래픽을 받지 않게 될 것입니다.&lt;/p&gt;&lt;p&gt;참고로 파드가 제거되는 동안 들어오는 요청들을 없애고(drain) 싶은 경우, 굳이 readiness 프로브를 설정할 필요는 없습니다.
readiness 프로브의 존재와 무관하게
파드는 제거될 때 자동으로 스스로를 unready 상태로 전환하며,
파드 내 모든 컨테이너들이 종료될 때까지 대기하게 됩니다.&lt;/p&gt;&lt;h3&gt;startup 프로브&lt;/h3&gt;&lt;p&gt;startup 프로브는 컨테이너 내 애플리케이션이 시작했는지 검사하는 프로브입니다.&lt;/p&gt;&lt;p&gt;startup 프로브가 설정된 경우, 해당 프로브의 결과가 &lt;strong&gt;Success&lt;/strong&gt;가 될 때까지 다른 프로브들은 비활성화됩니다.
startup 프로브 결과가 &lt;strong&gt;Failure&lt;/strong&gt;일 경우 &lt;code&gt;kubelet&lt;/code&gt;은 해당 컨테이너를 종료시키며,
컨테이너는 &lt;code&gt;restartPolicy&lt;/code&gt; 설정에 따른 재시작 정책을 거치게 됩니다.&lt;/p&gt;&lt;p&gt;실행되기까지 긴 시간이 걸리는 컨테이너가 포함된 파드들의 경우,
아직 셋업 중인 상황에서 liveness 프로브에 의해 죽어버리는 이슈가 존재합니다.
이 경우 liveness 프로브의 간격을 길게 두는 대신, startup 프로브를 추가해주는 것이 안전합니다.
일반적으로 컨테이너가 실행되기까지
liveness 프로브의 &lt;code&gt;initialDelaySeconds + (failureThreshold x periodSecond)&lt;/code&gt;초 이상 걸릴 경우,
liveness 프로브와 동일한 엔드포인트를 검사하는 startup 프로브를 별도로 설정하는 것이 권장됩니다.&lt;/p&gt;&lt;p&gt;readiness 프로브와 startup 프로브 중 어떤 것을 사용할지는 상황에 따라 달라집니다.
앱 자체가 실패한 경우 readiness 프로브를 쓰고,
아직 대량의 데이터를 다운로드받거나, 마이그레이션을 진행하는 등의 셋업 작업을 진행 중이면 startup 프로브를 써야 합니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;최근에 liveness 프로브가 꾸준히 실패하는 서버 장애를 경험했기에 관련 내용을 가볍게 정리했습니다.
실제로 각종 프로브를 설정하는 방법은
&lt;a href=&quot;https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/&quot;&gt;공식문서&lt;/a&gt;를
참고하기 바랍니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes&quot;&gt;Kubernetes - Container probes&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[k8s] 파드 생명주기, 파드 장애 회복과 컨테이너 재시작]]></title><description><![CDATA[쿠버네티스 공식문서 중 파드 생명주기 관련 내용을 가볍게 정리합니다. 스케줄링, 파드의 단계, 컨테이너 상태 및 재시작 과정 등에 대해 다룹니다.]]></description><link>https://bugoverdose.github.io/posts/79/</link><guid isPermaLink="false">https://bugoverdose.github.io/posts/79/</guid><pubDate>Sat, 06 Jul 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;파드와 노드&lt;/h2&gt;&lt;p&gt;파드는 쿠버네티스에서 생성하고 관리할 수 있는 가장 작은 배포 단위입니다.
하나의 파드는 하나 이상의 컨테이너들로 구성되며, 파드들은 노드 하나에서 실행됩니다.&lt;/p&gt;&lt;p&gt;노드는 쿠버네티스 컨트롤 플레인에 의해 관리되는 가상 혹은 물리적인 머신입니다.
하나의 클러스터 내에는 복수의 노드가 실행됩니다.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/729a61a43a3edded1c5056f6c023d0b4/kubernetes-cluster-architecture.svg&quot; alt=&quot;kubernetes-cluster-architecture&quot;/&gt;&lt;/p&gt;&lt;p&gt;각 노드마다 파드를 실행시키기 위해 다음과 같은 노드 컴포넌트들이 설치 및 실행됩니다. &lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet/&quot;&gt;kubelet&lt;/a&gt; : 파드의 컨테이너들이 제대로 실행되는 것을 보장 &lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/setup/production-environment/container-runtimes/&quot;&gt;컨테이너 런타임&lt;/a&gt;: 노드에서 실질적으로 컨테이너들을 실행 (&lt;div to=&quot;/posts/77&quot;&gt;지난 게시글 참고&lt;/div&gt;)&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/reference/command-line-tools-reference/kube-proxy/&quot;&gt;kube-proxy&lt;/a&gt; : 네트워크 프록시&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;파드의 단계&lt;/h2&gt;&lt;p&gt;파드의 상태(&lt;code&gt;status&lt;/code&gt;) 필드의 값은
&lt;a href=&quot;https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.30/#podstatus-v1-core&quot;&gt;PodStatus&lt;/a&gt; 객체입니다.
PodStatus 객체의 &lt;code&gt;phase&lt;/code&gt; 필드를 통해 파드의 현재 상태에 대한 전반적인 개요를 파악할 수 있습니다.
기본적으로 각 파드는 아래 다섯 가지 단계(&lt;code&gt;phase&lt;/code&gt;) 중 하나를 지닙니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;Pending&lt;/code&gt;: 하나 이상의 컨테이너가 아직 실행 중이지 않음. (ex. 파드가 노드에 스케줄링&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;되기 이전, 컨테이너 이미지를 다운로드 받는 중, 등)&lt;/li&gt;&lt;li&gt;&lt;code&gt;Running&lt;/code&gt;: 파드가 노드에 바인딩&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;되어 모든 컨테이너들이 생성됨. 최소 하나의 컨테이너가 시작, 실행, 재시작 중인 상태.&lt;/li&gt;&lt;li&gt;&lt;code&gt;Succeeded&lt;/code&gt;: 파드의 모든 컨테이너들이 성공적으로 제거(terminated in success)되었으며, 재시작하지 않음.&lt;/li&gt;&lt;li&gt;&lt;code&gt;Failed&lt;/code&gt;: 파드의 컨테이너들 중 최소 하나가 실패로 인해 제거(terminated in failure)되었고, 모든 컨테이너들이 종료되어 재시작하지 않음.
재시작하지 않으나, &lt;/li&gt;&lt;li&gt;&lt;code&gt;Unknown&lt;/code&gt;: 파드의 상태를 알 수 없음. 파드가 바인딩된 노드와의 네트워크 통신에서의 문제.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;새로운 파드가 생성되면 해당 파드는 고유한 식별자(&lt;code&gt;.metadata.uid&lt;/code&gt;)를 할당 받으며, &lt;code&gt;Pending&lt;/code&gt; 단계가 됩니다.
이후 파드는 스케줄링 과정을 통해 어떠한 노드에서 실행될 것인지 결정되며, &lt;code&gt;kubelet&lt;/code&gt;은 해당 파드를 노드에서 실행시키기 위한 작업을 진행합니다.
컨테이너들이 전부 생성되었다면 파드는 &lt;code&gt;Running&lt;/code&gt; 단계가 되며,
해당 노드가 중단되거나 파드 자체가 제거(terminated)될 때까지 실행됩니다.
만일 컨테이너 생성 과정에서 문제가 발생했다면 &lt;code&gt;Running&lt;/code&gt; 단계에 도달하지 못할 수 있습니다.
또한 모든 컨테이너들이 종료되었고 더 이상 재시작할 수 없는 상태가 되었다면,
파드는 &lt;code&gt;Succeeded&lt;/code&gt; 혹은 &lt;code&gt;Failed&lt;/code&gt; 단계가 됩니다.&lt;/p&gt;&lt;p&gt;참고로 &lt;code&gt;kubectl&lt;/code&gt; 명령어들에서는
제거되고 있는 파드를 &lt;code&gt;Terminating&lt;/code&gt;이라는 상태로 표시하는 경우가 있는데,
이는 파드의 다섯 가지 단계들 중 하나는 아닙니다.&lt;/p&gt;&lt;h3&gt;파드 장애 회복&lt;/h3&gt;&lt;p&gt;파드가 회복할 수 없는 상태라고 판단될 경우 클러스터는 문제가 된 파드를 제거하고,
클러스터 내 다른 컴포넌트들에서 적절하게 대응하기를 기대합니다.
즉, 쿠버네티스에서는 기본적으로 기존 파드는 제거하고 새로운 파드에 의해 대체하는 방식으로 파드 장애에 대응됩니다.
이 새로운 파드는 기존 파드와 &lt;code&gt;.metadata.uid&lt;/code&gt; 값이 다르며, 어떤 노드에 스케줄링될지도 보장할 수 없습니다.&lt;/p&gt;&lt;p&gt;예를 들어, 특히 파드가 스케줄링된 노드에 장애가 발생하는 경우,
해당 파드는 unhealthy하다고 판정되고 쿠버네티스에 의해 제거됩니다.
또한 리소스 부족 혹은 노드 유지보수로 인해 파드들이 제거(eviction)될 수도 있습니다.&lt;/p&gt;&lt;p&gt;이런 방식으로 동작하는 이유는
파드들이 휘발적인(ephemeral) 것으로 간주되며,
&lt;strong&gt;각 파드는 생명주기상 단 한 번만 특정 노드에 스케줄링&lt;/strong&gt;될 수 있기 때문입니다.
즉, 노드에 문제가 있을 때 이미 특정 노드에 스케줄링된 파드를 다른 노드로 이동시키는 것은 애초에 구조적으로 불가능합니다.&lt;/p&gt;&lt;h2&gt;컨테이너 상태와 kubelet&lt;/h2&gt;&lt;p&gt;쿠버네티스는 파드의 개별 컨테이너들의 상태를 지속적으로 체크하며,
상태 변화 시점에 &lt;code&gt;postStart&lt;/code&gt;, &lt;code&gt;preStop&lt;/code&gt;과 같은
&lt;a href=&quot;https://kubernetes.io/docs/concepts/containers/container-lifecycle-hooks/&quot;&gt;컨테이너 생명주기 훅&lt;/a&gt;을
실행시킬 수도 있습니다.
파드 내 컨테이너들은 세 가지 상태 중 하나를 지닙니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;Waiting&lt;/code&gt;: 아직 프로그램을 실행하기 이전 상태.&lt;/li&gt;&lt;li&gt;&lt;code&gt;Running&lt;/code&gt;: 문제 없이 실행 중인 상태. &lt;code&gt;postStart&lt;/code&gt; 훅이 설정된 경우 이미 실행 완료.&lt;/li&gt;&lt;li&gt;&lt;code&gt;Terminated&lt;/code&gt;: 실행을 시작하였고, 종료된 상태. &lt;code&gt;preStop&lt;/code&gt; 훅이 설정된 경우 이미 실행 완료.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;파드가 특정 노드에 스케줄링된 이후, 해당 노드의 &lt;code&gt;kubelet&lt;/code&gt;는 컨테이너 런타임을 활용하여 해당 파드의 컨테이너들을 생성하고 실행시킵니다.
각 컨테이너는 우선 &lt;code&gt;Waiting&lt;/code&gt; 상태에서 시작하며
컨테이너 이미지를 저장소에서 풀 받거나, Secret의 값을 적용하는 등의 사전 작업을 진행합니다.
컨테이너가 실행되었고, 별 이슈 없이 아직도 실행 중이라면 &lt;code&gt;Running&lt;/code&gt; 상태가 됩니다.
컨테이너가 실행되기 시작한 이후 문제 없이 프로그램이 종료되었거나, 에러로 인해 종료된 경우 &lt;code&gt;Terminated&lt;/code&gt; 상태가 됩니다.&lt;/p&gt;&lt;p&gt;기본적으로 &lt;code&gt;kubectl describe pod &amp;lt;name-of-pod&amp;gt;&lt;/code&gt; 명령어를 통해 파드 내의 모든 컨테이너들의 상태를 조회할 수 있으며,
&lt;code&gt;kubectl&lt;/code&gt;를 활용하여 컨테이너의 현재 상태와 관련된 추가 정보를 질의할 수도 있습니다.&lt;/p&gt;&lt;h3&gt;컨테이너 재시작&lt;/h3&gt;&lt;p&gt;파드가 &lt;code&gt;Running&lt;/code&gt; 단계일 때 특정 컨테이너가 종료(terminated)되면,
&lt;code&gt;kubelet&lt;/code&gt;에서는 해당 파드 내에 동일한 컨테이너를 자동으로 재시작합니다.&lt;/p&gt;&lt;p&gt;이때 해당 파드의 재시작 정책을 어떻게 설정했는지에 따라 종료된 컨테이너를 재시작시키거나, 그대로 종료된 상태로 유지합니다.
기본적으로 &lt;code&gt;restartPolicy&lt;/code&gt; 필드에는 세 가지 값 중 하나가 오며, 디폴트 값은 &lt;code&gt;Always&lt;/code&gt;입니다.
파드 수준에서 재시작 정책을 수정하면 이는 app 컨테이너와
일반적인 &lt;a href=&quot;https://kubernetes.io/docs/concepts/workloads/pods/init-containers/&quot;&gt;init 컨테이너&lt;/a&gt;에 적용됩니다.
&lt;a href=&quot;https://kubernetes.io/docs/concepts/workloads/pods/sidecar-containers/&quot;&gt;사이드카 컨테이너&lt;/a&gt;의 경우
컨테이너 수준에서 &lt;code&gt;restartPolicy&lt;/code&gt;를 별도로 정의해줘야 합니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;Always&lt;/code&gt;: 종료되었으면 무조건 재시작&lt;/li&gt;&lt;li&gt;&lt;code&gt;OnFailure&lt;/code&gt;: 에러 코드(non-zero exit status)와 함께 종료된 경우에만 재시작&lt;/li&gt;&lt;li&gt;&lt;code&gt;Never&lt;/code&gt;: 자동으로 재시작하지 않음&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;code&gt;kubelet&lt;/code&gt;은 지수적 백오프(exponential backoff) 전략을 통해
컨테이너가 제대로 실행될 때까지 컨테이너 재시작 작업을 반복합니다.
즉, 기본적으로 다음의 단계를 거칩니다.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;Initial crash: 최초로 컨테이너가 사망했을 때 즉시 재시작합니다.&lt;/li&gt;&lt;li&gt;Repeated crashes: 재시작 이후 컨테이너가 다시 종료하는 상황이 반복되는 상태입니다. 다음 재시도 이전까지 대기 시간을 적용합니다(10초, 20초, 40초, 80초, ...로 증가. 최대값은 300초)&lt;/li&gt;&lt;li&gt;&lt;code&gt;CrashLoopBackOff&lt;/code&gt; 상태: 컨테이너 재시작 과정이 반복되며 백오프 메커니즘이 동작하고 있는 상태입니다.&lt;/li&gt;&lt;li&gt;Backoff reset: 컨테이너가 재시작되고 문제 없이 실행된지 일정 기간(ex. 10분)이 지난 상태입니다.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;정리하자면 재시작된 컨테이너가 종료되는 과정이 무한히 반복되는 현상을 크래시 루프(crash loop)라고 합니다.
만일 노드에서 특정 컨테이너를 재시작하는 과정을 무한히 반복하는데 과하게 자원을 사용한다면,
오히려 문제 없는 시스템에서 이상이 생길 수 있습니다.
이 때문에 &lt;code&gt;kubelet&lt;/code&gt;은 일정 기간 동안 대기한 다음에 재시도하되, 이 대기 기간을 증가시키는 지수적 백오프 전략을 취합니다.
만일 컨테이너가 &lt;code&gt;CrashLoopBackOff&lt;/code&gt; 상태라면 다음 컨테이너 재시작 작업까지 대기하는 중이라는 의미이며,
이때 개발자는 장애 원인 분석을 진행할 필요가 있습니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;최근 회사에서 장애 대응을 할 일이 있었습니다.
지속적으로 컨테이너가 재시작되는 과정을 지켜보며, 관련 지식을 정리해볼 필요성을 느꼈습니다.
해당 게시글은 이 주제에 대해 가볍게 다뤘을 뿐이므로 자세한 내용은
&lt;a href=&quot;https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/&quot;&gt;공식문서&lt;/a&gt;를 숙독해보는 것을 추천드립니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/workloads/pods/&quot;&gt;Kubernetes - Pod&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/architecture/nodes/&quot;&gt;Kubernetes - Nodes&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/overview/components/#node-components&quot;&gt;Kubernetes - Node Components&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/&quot;&gt;Kubernetes - Pod Lifecycle&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;스케줄링이란 생성된 파드를 실행시킬 노드를 하나 선택하는 과정입니다.
자세한 사항은 &lt;div to=&quot;/posts/77&quot;&gt;스케줄링 과정&lt;/div&gt;에 대한 게시글을 참고하기 바랍니다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;바인딩이란 스케줄링된 노드에 실제로 파드를 할당하는 과정입니다.
이때 스케줄러는 API 서버에게 어떠한 노드가 선택되었는지에 대해 통보합니다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[k8s] ArgoCD과 Argo Rollouts 릴리즈별 k8s 버전 호환성 검토]]></title><description><![CDATA[ArgoCD과 Argo Rollouts 릴리즈들은 각각 특정 쿠버네티스 버전들에 대해서만 테스트되었습니다. 이를 확인하는 방법과 마이너 버전들 간의 Breaking Changes를 확인하는 방법이 대해 정리합니다.]]></description><link>https://bugoverdose.github.io/posts/78/</link><guid isPermaLink="false">https://bugoverdose.github.io/posts/78/</guid><pubDate>Fri, 05 Jul 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;버전 호환성 검토의 필요성&lt;/h2&gt;&lt;p&gt;Argo CD는 쿠버네티스 환경에서 선언적인 GitOps 기반의 CD를 제공하기 위한 프로젝트입니다.
Argo Rollouts는 쿠버네티스에서 블루-그린 배포, 카나리 배포 등의 배포 기능을 제공해주기 위한 프로젝트입니다.
이 둘은 서로 독립된 별개의 프로젝트들이지만, 하나의 클러스터에서 함께 활용되는 경우가 많으므로 함께 다루고자 합니다.&lt;/p&gt;&lt;p&gt;이 둘 모두 쿠버네티스 클러스터 내부에서 &lt;code&gt;argocd&lt;/code&gt;와 &lt;code&gt;argo-rollouts&lt;/code&gt;와 같은 네임스페이스 내부에 배포되어 실행됩니다.
때문에 쿠버네티스 클러스터의 버전에 부합하는 Argo CD 및 Argo Rollouts 릴리즈들을 설치하여 실행해야 합니다.&lt;/p&gt;&lt;p&gt;또한 클러스터의 버전을 올리기 전에는 현재 Argo CD와 Argo Rollouts 릴리즈들이
어떤 클러스터의 버전들에 대해 테스트되었는지 사전에 검토해야 합니다.
만일 업그레이드하려는 쿠버네티스 버전을 지원하지 않는 릴리즈를 사용하고 있다면,
쿠버네티스 클러스터를 업그레이드하기 이전에 적절한 버전의 Argo CD와 Argo Rollouts 릴리즈들을
재설치하는 작업을 진행해야 합니다.&lt;/p&gt;&lt;h2&gt;ArgoCD 검토&lt;/h2&gt;&lt;p&gt;기본적으로 &lt;a href=&quot;https://argo-cd.readthedocs.io/en/stable/operator-manual/installation/#tested-versions&quot;&gt;ArgoCD 공식문서&lt;/a&gt;를 확인해보면
최근에 출시된 ArgoCD 버전들이 어떤 쿠버네티스 버전들에 대해 테스트되었는지를 표로 보여줍니다.
다만, 현재는 &lt;code&gt;v2.9&lt;/code&gt; 이상에 대해서만 표에 명시되어있고 그 이전 버전의 ArgoCD 릴리즈들에 대한 정보는 공식문서에서 찾기 어렵습니다.&lt;/p&gt;&lt;p&gt;ArgoCD는 오픈소스 프로젝트이기 때문에 &lt;a href=&quot;https://github.com/argoproj/argo-cd&quot;&gt;깃헙 저장소&lt;/a&gt;에서
각 릴리즈별 소스코드를 확인해볼 수 있습니다.
공식문서에서 자료를 찾아보기 어려운 버전들의 경우 해당 릴리즈에 부합하는 태그를 선택하고,
깃헙 액션 코드를 보면 어떤 쿠버네티스 버전들에 대해 테스트되었는지를 확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;예를 들어, &lt;a href=&quot;https://github.com/argoproj/argo-cd/blob/v2.4.17/.github/workflows/ci-build.yaml#L351&quot;&gt;v2.4.17&lt;/a&gt;의
경우 쿠버네티스 클러스터 &lt;code&gt;v1.21&lt;/code&gt;, &lt;code&gt;v1.22&lt;/code&gt;, &lt;code&gt;v1.23&lt;/code&gt;에 대해 테스트되었습니다.
때문에 클러스터가 해당 버전 중 하나일 때에는 해당 릴리즈를 설치하여 사용해도 무관하지만,
&lt;code&gt;v1.20&lt;/code&gt; 이하 혹은 &lt;code&gt;v1.24&lt;/code&gt; 이상에서는 예상하지 못한 문제들이 발생할 수도 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;  &lt;span class=&quot;token key atrule&quot;&gt;test-e2e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run end&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;to&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;end tests
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    &lt;span class=&quot;token key atrule&quot;&gt;strategy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;matrix&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;k3s-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;v1.23.3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; v1.22.6&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; v1.21.2&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;예를 들어, 쿠버네티스 클러스터를 &lt;code&gt;v1.23&lt;/code&gt;에서 &lt;code&gt;v1.24&lt;/code&gt;로 업그레이드하려는 경우
두 버전 모두에 대해 테스트된 ArgoCD 릴리즈를 사전에 설치해놓아야 합니다.
&lt;a href=&quot;https://github.com/argoproj/argo-cd/blob/v2.5.22/.github/workflows/ci-build.yaml#L364&quot;&gt;v2.5.22&lt;/a&gt;의 경우
이 조건에 부합함을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;  &lt;span class=&quot;token key atrule&quot;&gt;test-e2e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run end&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;to&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;end tests
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;22.04&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;strategy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;matrix&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;k3s-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;v1.24.3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; v1.23.3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; v1.22.6&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;Breaking Changes&lt;/h3&gt;&lt;p&gt;ArgoCD는 시멘틱 버저닝을 따릅니다.
즉, 패치 릴리즈들(&lt;code&gt;2.0.x&lt;/code&gt;) 사이에는 신규 기능의 추가 혹은 버그 수정이 포함되어있으며,
마이너 릴리즈들(&lt;code&gt;2.x.0&lt;/code&gt;) 사이에는 하위 호환성이 깨지는 변경사항이 포함되어있습니다.&lt;/p&gt;&lt;p&gt;예를 들어, 기존에 클러스터에 ArgoCD가 설치되어있을 때
&lt;code&gt;v2.4.0&lt;/code&gt;에서 &lt;code&gt;v2.4.17&lt;/code&gt;로 버전을 올리는 것은 문제가 될게 없습니다.
그러나 &lt;code&gt;v2.4.17&lt;/code&gt;에서 &lt;code&gt;v2.5.22&lt;/code&gt;로 버전을 올린다면
&lt;code&gt;v2.4&lt;/code&gt;와 &lt;code&gt;v2.5&lt;/code&gt; 사이에 어떠한 Breaking Changes가 있었는지를 검토해야 합니다.&lt;/p&gt;&lt;p&gt;다행히 &lt;a href=&quot;https://argo-cd.readthedocs.io/en/stable/operator-manual/upgrading/overview/&quot;&gt;공식문서&lt;/a&gt;에서는
모든 버전들에 대한 Breaking Changes가 체계적으로 정리되어있습니다.
&lt;a href=&quot;https://argo-cd.readthedocs.io/en/stable/operator-manual/upgrading/2.4-2.5/&quot;&gt;v2.4 to v2.5 페이지&lt;/a&gt;를
통해 어떠한 구조적 변화가 있었으며, deprecated되거나 완전히 제거된 기능들 중 현재 클러스터에 영향을 줄 수 있는 사항이 있는지를 검토해야 합니다.
그리고 대응이 필요한 사항들은 미리 적절히 대응하여 수정 사항을 적용한 다음에 ArgoCD 업그레이드를 진행해야 합니다.&lt;/p&gt;&lt;h2&gt;Argo Rollouts 검토&lt;/h2&gt;&lt;p&gt;현재 Argo Rollouts 공식문서에서는 개별 릴리즈에 대한 정보를 체계적으로 다루고 있지 않습니다.
그 대신 &lt;a href=&quot;https://github.com/argoproj/argo-rollouts/releases&quot;&gt;깃헙 저장소의 릴리즈 섹션&lt;/a&gt;을 참고하도록
안내하고 있습니다.&lt;/p&gt;&lt;p&gt;예를 들어,
&lt;a href=&quot;https://github.com/argoproj/argo-rollouts/blob/v1.4.1/.github/workflows/e2e.yaml#L40-L42&quot;&gt;v1.4.1&lt;/a&gt;의 경우
쿠버네티스 클러스터 &lt;code&gt;v1.23&lt;/code&gt;과 &lt;code&gt;v1.24&lt;/code&gt;에 대해 테스트되었습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;  &lt;span class=&quot;token key atrule&quot;&gt;test-e2e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;strategy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;fail-fast&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean important&quot;&gt;false&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;matrix&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;kubernetes-minor-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.23&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.24&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;만일 쿠버네티스 클러스터를 &lt;code&gt;v1.24&lt;/code&gt;에서 &lt;code&gt;v1.25&lt;/code&gt;로 업그레이드하려는 경우
두 버전 모두에 대해 테스트된 Argo Rollouts 릴리즈를 사전에 설치해놓아야 합니다.
&lt;a href=&quot;https://github.com/argoproj/argo-rollouts/blob/v1.5.1/.github/workflows/e2e.yaml#L40-L44&quot;&gt;v1.5.1&lt;/a&gt;는
이 조건에 부합함을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;  &lt;span class=&quot;token key atrule&quot;&gt;test-e2e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;strategy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;fail-fast&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean important&quot;&gt;false&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;matrix&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;kubernetes-minor-version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.23&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.24&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.25&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.26&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;Breaking Changes&lt;/h3&gt;&lt;p&gt;ArgoCD에 비해 Argo Rollouts는 Breaking Changes를 확인하는 것이 쉽지 않습니다.
기본적으로 공식문서에 정리되어있지 않아 깃헙 저장소를 참고해야 하며, 가독성이 그다지 높지 않습니다.
예를 들어, &lt;code&gt;v1.4.x&lt;/code&gt;에서 &lt;code&gt;v1.5.x&lt;/code&gt;로 업그레이드하려는 경우
&lt;a href=&quot;https://github.com/argoproj/argo-rollouts/blob/0c716e2e608a5d58abe66fb86fa12c8ca132a3ca/CHANGELOG.md#breaking-change-1&quot;&gt;CHANGELOG.md&lt;/a&gt;에서
&lt;code&gt;v1.5.0&lt;/code&gt;이 아니라 &lt;code&gt;v1.5.0-rc1&lt;/code&gt; 태그의 내용을 확인해볼 필요가 있습니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://argo-cd.readthedocs.io/en/stable/&quot;&gt;ArgoCD 공식문서&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://argoproj.github.io/argo-rollouts/&quot;&gt;Argo Rollouts 공식문서&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[k8s] 쿠버네티스와 도커, 그리고 dockershim 제거]]></title><description><![CDATA[AWS EKS에서 곧 v1.23에 대한 지원이 종료됩니다. v1.24로 업그레이드하기 전에 숙지하고 있어야 하는 dockershim 컴포넌트 제거와 컨테이너 런타임에 대하여 가볍게 정리하겠습니다.]]></description><link>https://bugoverdose.github.io/posts/77/</link><guid isPermaLink="false">https://bugoverdose.github.io/posts/77/</guid><pubDate>Sun, 30 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;AWS EKS에서 곧 v1.23에 대한 지원이 종료됩니다.
v1.24로 업그레이드하기 전에 숙지하고 있어야 하는 dockershim 컴포넌트 제거와 컨테이너 런타임에 대하여 가볍게 정리하겠습니다.&lt;/p&gt;&lt;h2&gt;쿠버네티스의 컨테이너 런타임&lt;/h2&gt;&lt;p&gt;쿠버네티스 클러스터를 구성하는 각 노드에서 파드를 실행시키기 위해서는 노드마다 컨테이너 런타임이 설치되어 있어야 합니다.
컨테이너 런타임은 컨테이너 이미지를 외부 저장소에 풀 받고 실행시키는 등 컨테이너의 라이프사이클을 관리해주는 역할을 맡습니다.&lt;/p&gt;&lt;p&gt;쿠버네티스 초창기에는 컨테이너 런타임 기술로 도커를 활용하였습니다.
그러나 컨테이너 기술이 보편화되고, 다양한 기술이 생겨나면서 쿠버네티스에서도 점차 다양한 컨테이너 런타임을 지원하기 시작했습니다.
그리고 이 과정에서 &lt;code&gt;kubelet&lt;/code&gt;과 같은 시스템 컴포넌트들이 컨테이너 런타임과 상호작용하기 위한
표준화된 인터페이스인 CRI(Container Runtime Interface)가 정립되었습니다.
쿠버네티스 최신 버전들에서는 &lt;code&gt;containerd&lt;/code&gt;, &lt;code&gt;CRI-O&lt;/code&gt;과 같은 CRI 기반의 컨테이너 런타임들을 지원하고 있습니다.&lt;/p&gt;&lt;h2&gt;도커와 dockershim&lt;/h2&gt;&lt;p&gt;엄밀히 말하자면 도커는 &lt;code&gt;containerd&lt;/code&gt;라는 고수준 컨테이너 런타임만이 아니라,
이 컨테이너 런타임을 개발자들이 쉽게 조작할 수 있는 기능들을 추가로 제공하는 기술입니다.
즉, 도커 자체는 컨테이너 런타임이 아니라 컨테이너를 다루는 기술스택이라고 볼 수 있습니다&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/b58e2f8372e34ce752c3b8fb0b948a13/d30ee/docker-containerd.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:70.5521472392638%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADIklEQVQ4y2WU2VMiVxTGW0HpBZpeQBqapYEGxFQcrZlYNTE1VXnIUxwRHXcUcBnBBRSnMnGWVKxYmWxPU5W/95dwUfOQh6/P7a/6nj7fud+5kiS/ZExZZuwhKg9xmXGl9n+oNYZ7pNDSf5i8j0N+Uq/j5PYpVI9xCy3s1C5OpoVf7VIod3HSBwKe37l/bxMKrxNUVwlqdQJajYnIyuhHIrleJ5Hdw823cb0DHLeNV+xSqlxQrvTJ58/JZU/x/Z5ANtfFMJuUqj386jmWs4eR2EExX91XrK/iZJqUZ87I+6ek3NdMT1+xsPCBhWcfqfjXlArXzM++Z272HeXiAEM/wIi20aP7hNRNAqFVxkLDCl8ijSsryJEN1PA2ur4vPraix8SiHaaMMxzjgqTZJ2n2xDphnmNFTggrbTR1H1VtEFK3CCprjMk1JEXfIJk+ouifU/AuyKV7FLPXfFl5z2zpJ6q5D8zkPjJXvmWu/DOV7A0pq0/a6WMbrwlrTVR1l0llg4C8iqRFt8h6HSGzUhrgewOmC295+sUtz2bumCve8dT/xOLsXyw++YMnpVvS9oBcckDc7KJrbTRt77FKKWxs4xW6ovml4hXV0g+iuufzv7I4/ztfVT7xfOZPvlv4zNK3f/PN/G9k7Gu85DU595Jkooub7qJo2wTlNaQJdQ1N3yEabWIah8SMDo55jmtdkrHfkLPfko/dUIi/Ix//UXDDnrpTfYzwERGtJSSHlM2R5IBSR41sEdEbGNEWtnFE3OyQMM9IWj1c+4pMbCAwXA8PZ8o4xYmdPsqV1W0mlFeMyytIcnRN+C+VPWRu/g3V6iWFfE/Yw0v3ebF4x3r9My++/oXZmRv8/IC4dSLUKMouIXmLCXmYrD6yzdDldnKHWHKPtHeEmzkWXnTdE9xUh7x3gV/ok89dkM2ckXa7I3tZTXSzwfAMgtrqKJm8hBQM14jE1onENoi5DSyngRFvYMX3seJN7HiLRPIQJ3WEPdUSnBLeJGJtE7Y2Ua11MX6PsyweD7gnx+RlgXG5xrDHAbku+hNQVgQnhZZHF8Lk9yM8JPs3/gNO97FAFbRfDgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;docker-containerd&quot; title=&quot;docker-containerd&quot; src=&quot;/static/b58e2f8372e34ce752c3b8fb0b948a13/a6d36/docker-containerd.png&quot; srcSet=&quot;/static/b58e2f8372e34ce752c3b8fb0b948a13/222b7/docker-containerd.png 163w,/static/b58e2f8372e34ce752c3b8fb0b948a13/ff46a/docker-containerd.png 325w,/static/b58e2f8372e34ce752c3b8fb0b948a13/a6d36/docker-containerd.png 650w,/static/b58e2f8372e34ce752c3b8fb0b948a13/e548f/docker-containerd.png 975w,/static/b58e2f8372e34ce752c3b8fb0b948a13/d30ee/docker-containerd.png 980w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;다르게 표현하자면 도커는 인간 친화적인 도구이며, 쿠버네티스 내부에서 사용되는 것을 전제로 개발된 기술이 아닙니다.
때문에 초기 쿠버네티스에서는 내부적으로 도커를 조작하기 위해 &lt;code&gt;dockershim&lt;/code&gt;이라는 어댑터 컴포넌트를 활용했습니다.
&lt;code&gt;kubelet&lt;/code&gt;은 &lt;code&gt;dockershim&lt;/code&gt; 컴포넌트를 통해 마치 CRI 기반의 런타임과 상호작용하듯이 도커와 상호작용할 수 있게 되었습니다.
이후 다양한 CNCF 프로젝트들에서도 자연스럽게 도커과 &lt;code&gt;dockershim&lt;/code&gt;에 대한 의존성이 추가되었으며,
이는 코드의 취약성으로 이어졌습니다.&lt;/p&gt;&lt;p&gt;그런데 애초에 쿠버네티스에서 필요로 하는 것은 도커가 아니라 컨테이너 런타임인 &lt;code&gt;containerd&lt;/code&gt;뿐입니다.
이후 다양한 컨테이너 런타임들도 등장하면서 쿠버네티스는 자연스럽게 &lt;code&gt;dockershim&lt;/code&gt;과 같은 CRI 컴포넌트를 경유하지 않고,
CRI 기반의 컨테이너 런타임과 직접적으로 소통하는 방향으로 진화했습니다.
쿠버네티스와 &lt;code&gt;containerd&lt;/code&gt;의 상호작용 방식의 변천사는
&lt;a href=&quot;https://kubernetes.io/blog/2018/05/24/kubernetes-containerd-integration-goes-ga/&quot;&gt;공식 블로그&lt;/a&gt;를
참고하시기 바랍니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/846a5f3aa629b402465b1058e2c1a960/29007/k8s-containerd.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:26.993865030674847%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8UlEQVQY0z2PwU6EMBRF+Vx3JuPaL3ExutE/MK4mukXU2QkbUWhhCqUUSktf6QPDTGbO8ib35txA1OVuX908FJt7+pUcXt7Z1V3x+Mo+frK37zTP85o3hJAkSaIoao4IIbqu6/s+WJZlGD3hwKTzOA8WaeP0iMuC42i89/OZ5YjWum1bpdQ8z8EpGgEL4bIaLEwGJiocFW4wdsYVAPDeSymVUlprY8xpK8gJZUW229eb7Wr+mZTP4eF6W9w+0fivZSWN4yQMQ875SVhK2fc9Iq7lyU2TA20xZTatwDpUxv9WlnCACdH7i7lSinMupbxc+AfKyxOH6DsgeQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;k8s-containerd&quot; title=&quot;k8s-containerd&quot; src=&quot;/static/846a5f3aa629b402465b1058e2c1a960/a6d36/k8s-containerd.png&quot; srcSet=&quot;/static/846a5f3aa629b402465b1058e2c1a960/222b7/k8s-containerd.png 163w,/static/846a5f3aa629b402465b1058e2c1a960/ff46a/k8s-containerd.png 325w,/static/846a5f3aa629b402465b1058e2c1a960/a6d36/k8s-containerd.png 650w,/static/846a5f3aa629b402465b1058e2c1a960/e548f/k8s-containerd.png 975w,/static/846a5f3aa629b402465b1058e2c1a960/3c492/k8s-containerd.png 1300w,/static/846a5f3aa629b402465b1058e2c1a960/29007/k8s-containerd.png 1600w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;결과적으로 쿠버네티스 v1.20에서는 도커를 deprecate 선언하였습니다.
그리고 쿠버네티스 v1.24에서 &lt;code&gt;dockershim&lt;/code&gt; 컴포넌트를 제거함으로써 도커에 대한 의존성을 완전히 제거하였습니다.&lt;/p&gt;&lt;h2&gt;개발도구로서의 도커와 OCI 이미지&lt;/h2&gt;&lt;p&gt;쿠버네티스 v1.24부터 도커를 직접적으로 사용하지 않는다고 도커에 문제가 있는 것은 결코 아닙니다.
개발자들은 여전히 개발 도구로 도커와 &lt;code&gt;Dockerfile&lt;/code&gt;를 사용해도 됩니다.&lt;/p&gt;&lt;p&gt;특히 도커로 빌드되는 컨테이너 이미지들은 여전히 쿠버네티스에서 실행될 수 있습니다.
&lt;code&gt;docker build&lt;/code&gt; 명령어로 생성되는 이미지는 도커 엔진에 한정되는 이미지가 아니라
&lt;a href=&quot;https://opencontainers.org/&quot;&gt;OCI(Open Container Initiative)&lt;/a&gt; 이미지이기 때문입니다.
어떤 도구를 활용하여 생성되었든, OCI를 준수하는 이미지들은 쿠버네티스 입장에서 동일하게 간주됩니다.
또한 OCI 이미지를 &lt;code&gt;docker push&lt;/code&gt; 명령어로 이미지 저장소들에 푸시해놓으면,
&lt;code&gt;containerd&lt;/code&gt;, &lt;code&gt;CRI-O&lt;/code&gt;와 같은 컨테이너 런타임들 모두 이를 적절히 풀 받고 실행시킬 수 있습니다.&lt;/p&gt;&lt;h2&gt;컨테이너 런타임 변경시 고려해볼 사항&lt;/h2&gt;&lt;p&gt;운영 중인 쿠버네티스 클러스터를 v1.24 버전으로 업그레이드하려는 경우
사전에 대응해줘야 하는 요소가 존재할 수도 있고 없을 수도 있습니다.
클러스터의 구성요소와 클러스터가 운영되는 환경에 따라 이는 천차만별입니다.&lt;/p&gt;&lt;p&gt;만일 직접 쿠버네티스 클러스터를 구축하여 운영 중이라면
사전에 CRI 기반의 컨테이너 런타임을 사용하도록 명시적으로 수정해줘야 합니다.
그러나 AWS EKS와 같은 클라우드 서비스를 활용하는 상황이라면 이러한 설정을 수정할 필요가 없거나,
애초에 개발자들에게 특정한 컨테이너 런타임을 선택할 권한이 없을 수도 있습니다.&lt;/p&gt;&lt;p&gt;기본적으로 쿠버네티스 클러스터 내에 배포될 포드들이 직접적으로 도커를 조작하는 일은 없는지 검토해야 합니다.
&lt;code&gt;docker&lt;/code&gt; 명령어들을 실행하거나,
&lt;code&gt;systemctl restart docker.service&lt;/code&gt;와 같이 도커를 재시작하거나,
&lt;code&gt;/etc/docker/daemon.json&lt;/code&gt;와 같이 도커에서만 사용되는 파일을 수정하는 코드가 대표적인 예시입니다.
혹은 도커 소켓(&lt;code&gt;/var/run/docker.sock&lt;/code&gt;)에 의존하는 DIND(Docker in Docker) 패턴이 존재하는지도 확인이 필요합니다.&lt;/p&gt;&lt;p&gt;마찬가지로 쿠버네티스 자체 구성요소가 아니더라도, 노드에서 실행되는 스크립트 혹은 앱들이
도커 명령어를 실행하는 일이 없는지 검토해야 합니다.
대표적으로 노드에 직접적으로 모니터링 및 보안과 관련된 에이전트들을 확인해봐야 합니다.
만일 이와 관련된 외부 도구를 활용하고 있다면
&lt;a href=&quot;https://kubernetes.io/docs/tasks/administer-cluster/migrating-from-dockershim/migrating-telemetry-and-security-agents/&quot;&gt;관련 문서&lt;/a&gt;를
참고해봅시다.
스크립트 예시로는 &lt;code&gt;ssh&lt;/code&gt;로 원격에서 노드에 접근하거나, 노드 시작 시점에 실행되는 경우가 있을 수 있습니다.&lt;/p&gt;&lt;p&gt;클러스터 내부에 도커와 관련된 커스텀 설정 및 구성요소들이 존재하는 경우,
다른 컨테이너 런타임으로 옮기면서 동일한 셋업을 별도로 해줘야 할 것입니다.
이를 위해 클러스터 내부에서 &lt;code&gt;/etc/docker/daemon.json&lt;/code&gt; 파일 등을 통해 도커 설정을 건드린게 없는지를 확인해줍니다.&lt;/p&gt;&lt;p&gt;또한 도커의 동작방식에 맞추어 반응하도록 설정된 도구들이 쿠버네티스 내부에 존재할 수 있습니다.
특정한 메트릭에 반응하거나, 특정한 로그 메시지를 검색하는 등의 상황이 대표적입니다.&lt;/p&gt;&lt;p&gt;한편 명시적으로 도커와 관련되지 않은 이슈들도 존재할 수 있습니다.
&lt;a href=&quot;https://kubernetes.io/docs/tasks/administer-cluster/migrating-from-dockershim/check-if-dockershim-removal-affects-you/#known-issues&quot;&gt;공식문서&lt;/a&gt;를
참고하며 최대한 각자의 클러스터 구성에 대해 검토해보고,
가능하다면 마이그레이션 이전에 별도의 클러스터에서 실험해보는 것이 권장됩니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;사실 대부분의 경우 쿠버네티스 클러스터는 클라우드 환경에서 운영됩니다.
AWS, GCP 등의 플랫폼은 각자 자신만의 방식으로 쿠버네티스 클러스터를 구축해주기 때문에
쿠버네티스 공식문서에 명시되지 않은 설정이나 동작 방식을 제공하기도 합니다.
때문에 이러한 플랫폼을 사용하는 경우,
쿠버네티스 공식문서만이 아니라 반드시 이러한 플랫폼에서 제공하는 공식문서들은 참고해야 합니다.&lt;/p&gt;&lt;p&gt;예를 들어, AWS EKS를 활용하는 경우 반드시 아래와 같은 문서들은 참고해야 합니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/eks/latest/userguide/dockershim-deprecation.html&quot;&gt;Amazon EKS ended support for Dockershim&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://aws.amazon.com/ko/blogs/containers/all-you-need-to-know-about-moving-to-containerd-on-amazon-eks/&quot;&gt;All you need to know about moving to containerd on Amazon EKS&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.docker.com/blog/containerd-vs-docker/&quot;&gt;Docker Blog - containerd vs. Docker&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2022/01/07/kubernetes-is-moving-on-from-dockershim/&quot;&gt;Kubernetes Blog - Kubernetes is Moving on From Dockershim: Commitments and Next Steps&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/blog/2020/12/02/dont-panic-kubernetes-and-docker/&quot;&gt;Kubernetes Blog - Don&amp;#x27;t Panic: Kubernetes and Docker&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/tasks/administer-cluster/migrating-from-dockershim/check-if-dockershim-removal-affects-you/&quot;&gt;Kubernetes - Check whether dockershim removal affects you&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/setup/production-environment/container-runtimes/&quot;&gt;Kubernetes - Container Runtimes&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/docs/concepts/overview/components/#container-runtime&quot;&gt;Kubernetes - Kubernetes Components&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[AWS] EKS 버전 업그레이드는 미리미리 하자]]></title><description><![CDATA[Amazon EKS로 쿠버네티스 클러스터를 운영할 경우 꾸준히 버전 업그레이드가 필요합니다. 제때 업그레이드를 하지 않을 경우 추가적인 서버 비용이 발생하고, 시간이 지나면 자동으로 업그레이드되면서 서버 장애가 발생할 수 있습니다.]]></description><link>https://bugoverdose.github.io/posts/76/</link><guid isPermaLink="false">https://bugoverdose.github.io/posts/76/</guid><pubDate>Sun, 23 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Amazon EKS(Elastic Kubernetes Service)를 활용하면 쿠버네티스 컨트롤 플레인을 개발자가 직접 설치할 필요가 없이,
클라우드에서 쿠버네티스 클러스터를 운영할 수 있습니다.&lt;/p&gt;&lt;p&gt;해당 게시글에서는 EKS 기반 쿠버네티스 클러스터의 운영 및 유지보수라는 맥락에서 쿠버네티스 버전과 관련하여 알아야 하는 내용들에 대해 가볍게 정리하겠습니다.&lt;/p&gt;&lt;h2&gt;쿠버네티스 마이너 버전 릴리즈&lt;/h2&gt;&lt;p&gt;기본적으로 쿠버네티스는 오픈소스 프로젝트이며, 굉장히 빠른 속도로 업데이트되고 있습니다.
꾸준히 새로운 기능이 추가되고, 성능이 개선되며, 버그가 수정되고 있습니다.
그리고 쿠버네티스 커뮤니티에서는 체계적인 과정을 거치며, 4개월마다 한 번씩 새로운 쿠버네티스 마이너 버전을 릴리즈하고 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/33b1add6a7fab54858dbbde926ad0037/2e694/k8s-release-cycle.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:60.122699386503065%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABeUlEQVQoz41Ta0+EMBDk//8wY9T41ain0XvxpoUWSjlgzCzHiajRTTZt2t1hZ6YE4zjir2T8dO69R+NadF13qQnwj5hBV6fIcoXDMYKxNfq+nwBPpxOMMSiUhtIa6rxqXaIoFFrvv0yoz3eM7W6Pq+tb6R2GQTLg2GwMoxhJmsraNE6AmPzyHGzgfZplsle6RJxkqIyVOgFcavQbvbWO834CzIUywRgBkW1dC21rrayNcyjLSkRfG1I3jdxzH0YJbu7uYYyFc07qJ8qK4oYIo+hCmzqtp+UUrMuLAm3boqwMoiQTiagt+y+A1JFJoDwvUFaVpHOt3HNifoAm9v1kgC4rFKqEtbWAcvKgHwb5Gt+S7zoxgk08YxHPuWeuJ85zhYfHZ9i6+dSQRbPlBCLA0tm1OdOE05vjc9m8vAngxWVSiuIE79sd4iQVesbab2bMGu4PR6mjCVyfNq9CfQIcEbDI+06cXk62pLd8KgQiC/axJ0lSkWP+9T4AZOCm9HNPYFcAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;k8s-release-cycle&quot; title=&quot;k8s-release-cycle&quot; src=&quot;/static/33b1add6a7fab54858dbbde926ad0037/a6d36/k8s-release-cycle.png&quot; srcSet=&quot;/static/33b1add6a7fab54858dbbde926ad0037/222b7/k8s-release-cycle.png 163w,/static/33b1add6a7fab54858dbbde926ad0037/ff46a/k8s-release-cycle.png 325w,/static/33b1add6a7fab54858dbbde926ad0037/a6d36/k8s-release-cycle.png 650w,/static/33b1add6a7fab54858dbbde926ad0037/e548f/k8s-release-cycle.png 975w,/static/33b1add6a7fab54858dbbde926ad0037/2e694/k8s-release-cycle.png 1048w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;마이너 버전이 올라갈 때마다 deprecate 혹은 삭제되는 API들이 존재하며, 큰 구조적 변경사항이 있는 경우도 종종 있습니다.
때문에 운영 중인 클러스터의 마이너 버전을 올리기 전에는 꼭 해당 버전의 릴리즈 노트를 읽어보고 대응해야 할 사항이 없는지 검토해봐야 합니다.&lt;/p&gt;&lt;h2&gt;EKS 쿠버네티스 버전&lt;/h2&gt;&lt;p&gt;새로운 쿠버네티스 마이너 버전이 릴리즈될 때마다 Amazon EKS에서는 약간의 텀을 지니고 최신 버전으로 업그레이드할 수 있도록 지원해줍니다.
문제는 단순히 새로운 버전을 추가로 지원하는 데에 그치는 것이 아니라, EKS에서는 구 버전들에 대한 지원을 순차적으로 종료시킨다는 점입니다.&lt;/p&gt;&lt;p&gt;구체적으로 설명하자면 EKS에서는 v1.23 이상부터 추가 버전 지원을 제공하기 시작하였으며,
현재 모든 쿠버네티스 마이너 버전들은 릴리즈될 때마다 다음과 같은 흐름을 거칩니다.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;새로운 마이너 버전이 릴리즈되면 첫 14개월 동안
&lt;a href=&quot;https://docs.aws.amazon.com/eks/latest/userguide/kubernetes-versions-standard.html&quot;&gt;표준 지원 버전(standard support version)&lt;/a&gt;으로 분류되어
EKS에서 사용할 수 있습니다.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;표준 지원 기간이 종료되면
&lt;a href=&quot;https://docs.aws.amazon.com/eks/latest/userguide/kubernetes-versions-extended.html&quot;&gt;추가 지원 버전(extended support version)&lt;/a&gt;으로 분류되며,
12개월 동안 시간당 추가 비용을 지불하고 EKS에서 추가로 사용할 수 있습니다.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;추가 지원 기간이 종료되기 전에 클러스터를 업데이트하지 않은 경우,
클러스터는 현재 지원되는 가장 오래된 추가 버전으로 자동 업그레이드됩니다.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;현재 공식문서에 공지된 세부적인 &lt;a href=&quot;https://docs.aws.amazon.com/eks/latest/userguide/kubernetes-versions.html#kubernetes-release-calendar&quot;&gt;EKS 쿠버네티스 릴리즈 일정&lt;/a&gt;은 다음과 같습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/2d98a983f935d066d8b15a7043e1116e/5e703/eks-k8s-release-calendar.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:47.852760736196316%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABiklEQVQoz02SiXKjMBBE+f9fTOKAOAy6OCzMZdypbm+8URUFgzRveqaVfX1dMAwDjuOA9x5lVaFuGkzTTe+iMEgpYd02VHWtuO067PuuPGNKGGPQ970YGYHLsugAE8dxxDCMWNYVeV4Iyj0+l8s3qqrGPM9K7ocBHx+fCDG+GMeObBhHcD2fT1hrlRT7Hk8AnbUojIG1Dud5wjonhQRxpXlWAXa1H4cY2bqu+iAghIgYo9Q8Hg9wj0msTuD9fsc8vx7uE0K1PPPLyVKa3wrZrvNeYCZ85zma5ioQ930IcM7B+4Bt2zTXtu3gnFfuG8gPKpimSfNgy1TJRBogIKAkxlTMxTkTFkLQPhkZ3fk/QweaZMpSkLZt5WLXWRXguywrmcd1uyXNkCoJO6mQqrgYxNijrhu5/DhPHSSUbXNOVHO9tm+T7suiW0DVv0Wy8Y/LbJEKmMR2rm2rApzp+a8AHaVxcjklzZnnqF5AXmABAQHzotAsX7FXy5wZYwJ5uamUpnEsFMD/NImm/AAhqPxcYfQTlgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;eks-k8s-release-calendar&quot; title=&quot;eks-k8s-release-calendar&quot; src=&quot;/static/2d98a983f935d066d8b15a7043e1116e/a6d36/eks-k8s-release-calendar.png&quot; srcSet=&quot;/static/2d98a983f935d066d8b15a7043e1116e/222b7/eks-k8s-release-calendar.png 163w,/static/2d98a983f935d066d8b15a7043e1116e/ff46a/eks-k8s-release-calendar.png 325w,/static/2d98a983f935d066d8b15a7043e1116e/a6d36/eks-k8s-release-calendar.png 650w,/static/2d98a983f935d066d8b15a7043e1116e/e548f/eks-k8s-release-calendar.png 975w,/static/2d98a983f935d066d8b15a7043e1116e/3c492/eks-k8s-release-calendar.png 1300w,/static/2d98a983f935d066d8b15a7043e1116e/5e703/eks-k8s-release-calendar.png 1942w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;예를 들어, v1.23의 경우 커뮤니티에서는 2021년 12월 7일에 릴리즈되었으나,
EKS에서 해당 버전을 표준 지원 버전으로 지원하기 시작한 것은 2022년 8월 11일입니다.
표준 지원 기간 동안은 별도의 추가 비용 없이 해당 버전의 클러스터를 사용 가능합니다.
표준 지원 기간이 끝나는 2023년 10월 11일부터는 추가 지원 버전으로 전환되며 추가 비용을 사용하여 클러스터를 사용해야 합니다.
추가 지원 버전인 클러스터를 그대로 방치할 경우
2024년 10월 11일이 되었을 때 v1.24으로 클러스터가 자동으로 업그레이드됩니다.
사전에 이에 대비하지 않았을 경우 치명적인 서버 장애가 발생할 것으로 예상할 수 있습니다.&lt;/p&gt;&lt;h2&gt;추가 지원 버전 비용 정책&lt;/h2&gt;&lt;p&gt;현재 AWS 정책상 표준 지원 버전은 시간당 $0.10이고, 추가 지원 버전은 시간당 $0.60으로
추가 지원 버전은 표준 지원 버전에 비해 클러스터당 &lt;strong&gt;6배&lt;/strong&gt;의 추가 비용이 발생합니다.
예를 들어, 클러스터 3개를 1년 동안 운영할 경우,
모든 클러스터들이 표준 지원 버전이라면 $2,628가 기본적으로 청구되고, 추가 지원 버전이라면 $13,140이 청구됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/2e8c99efd2882d3244798750a03b3f3c/fe9e8/pricing.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:24.539877300613497%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA3UlEQVQY021Qx66EMBDj/z8LCQFL70WLhGDpcKBz88o57nsHKzMTx+NYUhQFuq7DNE04jgPDMMCZqqqQZRmu62IYBnRdh7IsxZxc8jRNw+v1EqBGkiSQbNtGEAQoigJt2yIMQ/GwaRpUVYW+77GuK7ZtE7VlWYLL+19M0wSJqu/3W5Cv60Ke5ziOA8/z4L5vMdv3Hed5YhxHeJ4n3LL/BXkSrfOrWZaJLXRb1zU+n4/o6Zo1xVjzy1y6LAvmef4Dyfd9EGmaIooikQNPZhfHsYiAWVGMIsyLkdDNf/gC3GtpmWNUfKsAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;pricing&quot; title=&quot;pricing&quot; src=&quot;/static/2e8c99efd2882d3244798750a03b3f3c/a6d36/pricing.png&quot; srcSet=&quot;/static/2e8c99efd2882d3244798750a03b3f3c/222b7/pricing.png 163w,/static/2e8c99efd2882d3244798750a03b3f3c/ff46a/pricing.png 325w,/static/2e8c99efd2882d3244798750a03b3f3c/a6d36/pricing.png 650w,/static/2e8c99efd2882d3244798750a03b3f3c/e548f/pricing.png 975w,/static/2e8c99efd2882d3244798750a03b3f3c/fe9e8/pricing.png 1146w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;가장 이상적인 것은 EKS 클러스터가 추가 지원 버전으로 전환되기 전에 꾸준히 표준 지원 버전 이상으로 업그레이드하는 것입니다.
그러나 이미 운영 중인 인프라의 설정을 건드리는 작업은 아무때나 할 수 있는 것이 아닙니다.
추가 비용이 얼마 안된다고 판단될 경우, 팀의 사정에 따라 버전 업그레이드 작업을 잠시 미루는 것도 고려해볼 수 있습니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;Amazon EKS로 쿠버네티스 클러스터를 운영할 경우 꾸준한 버전 업그레이드가 필요합니다.
가장 이상적인 것은 언제나 표준 지원 버전만을 사용하는 것입니다.
제때 업그레이드를 하지 않을 경우 추가 지원 버전으로 전환되어 추가적인 서버 비용이 발생하고,
추가 지원 버전 기간이 끝나면 자동으로 업그레이드되면서 서버 장애가 발생할 수 있습니다.&lt;/p&gt;&lt;p&gt;다만, 해당 게시글 작성 이후로 정책이 변했을 수 있으니 최신 공식문서도 함께 참고하기 바립니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/eks/latest/userguide/kubernetes-versions.html&quot;&gt;AWS - Amazon EKS Kubernetes versions&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/eks/latest/userguide/what-is-eks.html&quot;&gt;AWS - What is Amazon EKS&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://aws.amazon.com/ko/blogs/containers/amazon-eks-extended-support-for-kubernetes-versions-pricing/&quot;&gt;AWS - Amazon EKS extended support for Kubernetes versions pricing&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://kubernetes.io/releases/release/&quot;&gt;Kubernetes - Kubernetes Release Cycle&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[C++] 사칙연산 연산자 오버로딩]]></title><description><![CDATA[C++에서 지원하는 연산자 오버로딩에 대해 설명하고, +, -, *, /, % 연산자들을 오버로딩하는 방법 및 세부 문법에 대해 정리하겠습니다.]]></description><link>https://bugoverdose.github.io/posts/74/</link><guid isPermaLink="false">https://bugoverdose.github.io/posts/74/</guid><pubDate>Sat, 22 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;C++에서 지원하는 연산자 오버로딩에 대해 설명하고, &lt;code&gt;+&lt;/code&gt;, &lt;code&gt;-&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt;, &lt;code&gt;/&lt;/code&gt;, &lt;code&gt;%&lt;/code&gt; 연산자들을 오버로딩하는 방법들을 정리하겠습니다.
기본적으로 모든 예시 코드에서 &lt;code&gt;#include  &amp;lt;iostream&amp;gt;&lt;/code&gt;는 생략되어있습니다.&lt;/p&gt;&lt;h2&gt;사칙연산 연산자&lt;/h2&gt;&lt;p&gt;&lt;code&gt;+&lt;/code&gt;, &lt;code&gt;-&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt;, &lt;code&gt;/&lt;/code&gt;, &lt;code&gt;%&lt;/code&gt;와 같은 연산자들은 기본 자료형들 간의 사칙계산을 지원합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; b&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 13&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; b&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 7&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; b&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 30&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; b&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 3&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; b&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 1&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;아래와 같이 &lt;code&gt;Integer&lt;/code&gt; 클래스를 정의하고 객체들에 대해 &lt;code&gt;+&lt;/code&gt; 연산을 시도할 경우,
컴파일러는 어떠한 방식으로 연산을 진행해야 하는지 모르기 때문에 에러가 발생합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Integer &lt;span class=&quot;token function&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Integer &lt;span class=&quot;token function&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Integer num3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; num1 &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [컴파일 에러]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;연산자 오버로딩&lt;/h2&gt;&lt;p&gt;특정한 이름의 함수가 오버로딩되면, 오버로딩된 수만큼 다양한 기능들을 제공하게 됩니다.
마찬가지로 연산자들에 대해 다양한 타입에 대한 연산이 가능하도록 추가로 함수를 정의하는 것이 연산자 오버로딩입니다.&lt;/p&gt;&lt;p&gt;결과부터 보자면 &lt;code&gt;+&lt;/code&gt;, &lt;code&gt;-&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt;, &lt;code&gt;/&lt;/code&gt;, &lt;code&gt;%&lt;/code&gt; 연산자들은 각각
&lt;code&gt;operator+&lt;/code&gt;, &lt;code&gt;operator-&lt;/code&gt;, &lt;code&gt;operator*&lt;/code&gt;, &lt;code&gt;operator/&lt;/code&gt;, &lt;code&gt;operator%&lt;/code&gt;라는 이름의 함수를 정의하여 오버로딩될 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            Integer &lt;span class=&quot;token function&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; ref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            Integer &lt;span class=&quot;token function&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; ref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            Integer &lt;span class=&quot;token function&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; ref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            Integer &lt;span class=&quot;token function&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; ref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            Integer &lt;span class=&quot;token function&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; ref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;GetValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;실제로 이를 실행해보면 기본 자료형과 동일한 방식으로 객체들을 다룰 수 있는 것을 확인할 수 있습니다.
&lt;code&gt;GetValue&lt;/code&gt;를 호출하고 있기 때문에 어색해보일 수 있으나, 이 역시 연산자 오버로딩을 통해 대응할 수 있습니다.
자세한 사항은 &lt;strong&gt;&lt;div to=&quot;/development/cpp-overloading-input-output-operators&quot;&gt;다음 게시글&lt;/div&gt;&lt;/strong&gt;에서 다루겠습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Integer &lt;span class=&quot;token function&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Integer &lt;span class=&quot;token function&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 13&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 7&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 30&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 3&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 1&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;연산자 오버로딩의 두 가지 방법&lt;/h2&gt;&lt;p&gt;기본적으로 연산자 오버로딩은 두 가지 방법을 지원합니다.
&lt;code&gt;+&lt;/code&gt; 연산자로 아래와 같은 연산을 수행할 수 있도록 기능을 확장하고 싶은 경우를 생각해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Integer &lt;span class=&quot;token function&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Integer &lt;span class=&quot;token function&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Integer num3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; num1 &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
num3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PrintValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 30&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;멤버함수 기반 오버로딩&lt;/h3&gt;&lt;p&gt;우선 &lt;code&gt;Integer&lt;/code&gt; 클래스에 &lt;code&gt;operator+&lt;/code&gt;라는 멤버함수를 추가하는 방법이 있습니다.
&lt;code&gt;operator+&lt;/code&gt; 멤버함수를 정의하면 두 객체가 &lt;code&gt;+&lt;/code&gt; 연산자를 만났을 때
좌측 피연산자 &lt;code&gt;num1&lt;/code&gt;에서 우측 피연산자 &lt;code&gt;num2&lt;/code&gt;를 인자로 받으며 &lt;code&gt;operator+&lt;/code&gt;를 호출하게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            Integer &lt;span class=&quot;token function&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; ref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PrintValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;전역함수 기반 오버로딩&lt;/h3&gt;&lt;p&gt;또 다른 방법은 &lt;code&gt;operator+&lt;/code&gt;를 전역함수로 정의하는 것입니다.
이 경우 두 객체가 &lt;code&gt;+&lt;/code&gt; 연산자를 만났을 때 좌측 피연산자 &lt;code&gt;num1&lt;/code&gt;와 우측 피연산자 &lt;code&gt;num2&lt;/code&gt;를 매개변수들의 인자로 받으며 &lt;code&gt;operator+&lt;/code&gt; 함수가 실행됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;GetValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PrintValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Integer &lt;span class=&quot;token function&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;GetValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 경우 함수에서 객체의 &lt;code&gt;private&lt;/code&gt; 필드들에 접근할 수 있도록
&lt;strong&gt;&lt;div to=&quot;/development/cpp-friend-keyword&quot;&gt;friend 키워드&lt;/div&gt;&lt;/strong&gt;를 활용하는 방안도 생각해볼 수 있습니다.
물론 이미 &lt;code&gt;GetValue&lt;/code&gt;와 같은 메서드가 정의되어있고, 객체 외부에서 해당 필드들에 쉽게 접근할 수 있는 상황이라면 굳이 해당 함수를 친구로 선언할 필요는 없습니다.
다만, 해당 함수 하나만을 위해 내부 필드들을 외부로 노출하는 것이 꺼려지는 경우 고려해볼 필요가 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;friend&lt;/span&gt; Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 생략&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Integer &lt;span class=&quot;token function&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;오버로딩 방식의 우선순위&lt;/h3&gt;&lt;p&gt;참고로 두 가지 방식의 오버로딩이 모두 적용된 경우, 기본적으로 멤버함수 기반의 오버로딩이 우선적으로 호출됩니다.
예를 들어, 아래 &lt;code&gt;operator+&lt;/code&gt;들은 좌측 피연산자와 우측 피연산자 모두 &lt;code&gt;Integer&lt;/code&gt;를 받도록 정의되어있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;method&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            Integer &lt;span class=&quot;token function&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; ref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;friend&lt;/span&gt; Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;function&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Integer &lt;span class=&quot;token function&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;아래 코드를 실행해보면 멤버함수에 정의한 &lt;code&gt;operator+&lt;/code&gt;가 실행되었음을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Integer &lt;span class=&quot;token function&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Integer &lt;span class=&quot;token function&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Integer num3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; num1 &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: method&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;매개변수의 다양성&lt;/h2&gt;&lt;p&gt;이때 &lt;code&gt;operator+&lt;/code&gt;의 매개변수를 정의함에 있어 두 피연산자의 타입이 무조건 같을 필요는 없습니다.
&lt;code&gt;operator+&lt;/code&gt;도 함수의 일종이기 때문에 매개변수로 다양한 타입이 정의될 수 있으며,
이러한 함수들은 서로 함수 시그니처가 다르기 때문에 복수의 &lt;code&gt;operator+&lt;/code&gt;를 정의하는 것도 허용됩니다.&lt;/p&gt;&lt;p&gt;아래는 &lt;code&gt;Integer&lt;/code&gt; 객체 두 개 간의 &lt;code&gt;+&lt;/code&gt; 연산과 &lt;code&gt;Integer&lt;/code&gt; 객체와 &lt;code&gt;int&lt;/code&gt; 데이터 간의 &lt;code&gt;+&lt;/code&gt; 연산을 정의한 예시입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            Integer &lt;span class=&quot;token function&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; ref&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            Integer &lt;span class=&quot;token function&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PrintValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;실제로 이를 실행해보면 &lt;code&gt;Integer&lt;/code&gt; 객체 &lt;code&gt;num1&lt;/code&gt;과 &lt;code&gt;num2&lt;/code&gt; 간의 연산이나,
&lt;code&gt;Integer&lt;/code&gt; 객체 &lt;code&gt;num3&lt;/code&gt;과 &lt;code&gt;int&lt;/code&gt; 데이터 100 사이의 연산은 문제 없이 실행됩니다.
다만, &lt;code&gt;int&lt;/code&gt; 데이터와 &lt;code&gt;Integer&lt;/code&gt; 객체 &lt;code&gt;num4&lt;/code&gt; 간의 연산은 컴파일에 실패합니다.
이는 교환법칙이 성립하지 않음을 보여주며,
좌측 피연산자가 &lt;code&gt;Integer&lt;/code&gt;인 경우만 지원되는 멤버함수 기반의 오버로딩의 한계라고 볼 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Integer &lt;span class=&quot;token function&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Integer &lt;span class=&quot;token function&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Integer num3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; num1 &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
num3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PrintValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 30&lt;/span&gt;

Integer num4 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; num3 &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
num4&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PrintValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 130&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Integer num5 = 100 + num4; // [컴파일 에러]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;교환법칙 구현&lt;/h3&gt;&lt;p&gt;서로 다른 자료형 간의 연산을 위한 연산자 오버로딩을 정의할 경우,
교환법칙을 구현하기 위해 아래와 같이 전역함수 기반의 오버로딩을 적용해야 할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;friend&lt;/span&gt; Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;friend&lt;/span&gt; Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer num2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PrintValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

Integer &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Integer num2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1 &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이를 실행해보면 교환법칙이 문제 없이 성립됨을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Integer &lt;span class=&quot;token function&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

Integer num2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; num &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
num2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PrintValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 30&lt;/span&gt;

Integer num3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
num3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PrintValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 130&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;해당 글에서는 사칙연산 연산자를 예시로, C++에서 연산자를 오버로딩하는 두 가지 방법에 대해 다루었습니다.
멤버함수 기반의 오버로딩이 지닌 한계를 전역함수 기반의 오버로딩으로 보완할 수 있음을 짧게 다루었는데,
이에 대해서는 &lt;strong&gt;&lt;div to=&quot;/development/cpp-overloading-input-output-operators&quot;&gt;다음 게시글&lt;/div&gt;&lt;/strong&gt;에서도 추가로 다루겠습니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001589147&quot;&gt;윤성우의 열혈 C++ 프로그래밍&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[C++] cin, cout과 입출력 연산자 오버로딩]]></title><description><![CDATA[iostream 라이브러리에서 제공하는 std::cin과 std::cout에 대해 알아보고, 입출력 연산자 >>와 <<를 오버로딩하는 방법을 정리하겠습니다.]]></description><link>https://bugoverdose.github.io/posts/75/</link><guid isPermaLink="false">https://bugoverdose.github.io/posts/75/</guid><pubDate>Sat, 22 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;입출력 연산&lt;/h2&gt;&lt;p&gt;C++에서는 다양한 방식으로 데이터를 입력받고 출력할 수 있습니다.
특히 입출력 라이브러리 &lt;code&gt;iostream&lt;/code&gt;과 입출력 연산자 &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;와 &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt;를 통해
표준 입출력 스트림에서의 읽기와 쓰기를 제어할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cin&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;age&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;height&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 입력: 25 180&lt;/span&gt;
    std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;[age: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;age&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;, height: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;height&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;]&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 출력: [age: 25, height: 180]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이때 입출력 연산자 &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;와 &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt;는 기본 자료형만을 다룰 수 있습니다.
만일 아래와 같이 별도의 클래스를 정의하고, 객체를 입력받거나 출력하려고 하면,
컴파일러는 어떠한 방식으로 &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;과 &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt; 연산을 진행해야 하는지 모르기 때문에 에러가 발생합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; height &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;height&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Person person &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cin&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [컴파일 에러]&lt;/span&gt;
    std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;person&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [컴파일 에러]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이러한 방식의 입출력 연산을 실행하고 싶은 경우, &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;과 &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt; 연산자들의 기능을 확장해야 합니다.
즉, &lt;strong&gt;&lt;div to=&quot;/development/cpp-overloading-input-output-operators&quot;&gt;이전 게시글&lt;/div&gt;&lt;/strong&gt;에서와 마찬가지로
연산자 오버로딩을 통해 입출력 연산자들의 기능을 확장해야 함을 의미합니다.&lt;/p&gt;&lt;h2&gt;cin과 operator&amp;gt;&amp;gt;&lt;/h2&gt;&lt;p&gt;우선 입력 연산자 &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;를 오버로딩하기에 앞서 &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt; 연산의 피연산자들을 분석해봅시다.&lt;/p&gt;&lt;p&gt;기본적으로 &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;의 좌측에는 &lt;code&gt;std::cin&lt;/code&gt;이 오며, 그 우측에 입력받은 값을 저장할 대상이 옵니다.
이때 &lt;code&gt;std::cin&lt;/code&gt;는 &lt;code&gt;iostream&lt;/code&gt; 라이브러리의 &lt;code&gt;std&lt;/code&gt; 네임스페이스에 정의된 &lt;code&gt;std::istream&lt;/code&gt; 타입의 전역 스트림 객체입니다.
즉, &lt;code&gt;operator&amp;gt;&amp;gt;&lt;/code&gt;의 피연산자들은 &lt;code&gt;std::istream&lt;/code&gt; 타입의 객체와 기본 자료형 데이터입니다. &lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cin&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;또한 아래와 같이 &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt; 연산 직후에 즉시 &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt; 연산을 실행할 수 있습니다.
이는 &lt;code&gt;operator&amp;gt;&amp;gt;&lt;/code&gt;에서 인자로 받은 &lt;code&gt;std::istream&lt;/code&gt; 타입의 객체를 그대로 반환하고 있음을 알 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cin&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;age&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;height&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;즉, 입력 연산자 &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;를 호출하면 아래와 같은 함수가 실행되는 것으로 이해할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;istream&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;istream&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; in&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    in&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; in&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;cout과 operator&amp;lt;&amp;lt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;cout&lt;/code&gt;과 출력 연산자 &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt;도 본질적으로 동일합니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt;의 좌측에는 &lt;code&gt;std::cout&lt;/code&gt;이 오며, 그 우측에 출력할 값이 옵니다.
즉, &lt;code&gt;std::cout&lt;/code&gt;는 &lt;code&gt;iostream&lt;/code&gt; 라이브러리의 &lt;code&gt;std&lt;/code&gt; 네임스페이스에 정의된 &lt;code&gt;std::ostream&lt;/code&gt; 타입의 전역 스트림 객체입니다.
즉, &lt;code&gt;operator&amp;lt;&amp;lt;&lt;/code&gt;의 피연산자들은 &lt;code&gt;std::ostream&lt;/code&gt; 타입의 객체와 기본 자료형 데이터입니다. &lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;age&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;또한 아래와 같이 &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt; 연산 직후에 즉시 &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt; 연산을 실행할 수 있으므로,
이는 &lt;code&gt;operator&amp;lt;&amp;lt;&lt;/code&gt;에서 인자로 받은 &lt;code&gt;std::ostream&lt;/code&gt; 타입의 객체를 그대로 반환하고 있음을 알 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; height &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;180&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;age&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;height&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;즉, 입력 연산자 &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt;를 호출하면 아래와 같은 함수가 실행되는 것으로 이해할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;ostream&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;ostream&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; out&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    out&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; out&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;입출력 연산자 오버로딩&lt;/h2&gt;&lt;p&gt;연산자 오버로딩은 멤버함수 기반의 오버로딩과 전역함수 기반의 오버로딩으로 정의할 수 있습니다.
그런데 &lt;code&gt;cin&lt;/code&gt;과 &lt;code&gt;cout&lt;/code&gt;은 외부 라이브러리에 정의되어 있으므로 개발자가 해당 라이브러리를 직접적으로 수정할 수가 없는 상황입니다.
그렇기 때문에 입출력 연산자 오버로딩은 오로지 전역함수 기반의 오버로딩을 통해서만 구현할 수 있습니다.&lt;/p&gt;&lt;p&gt;아래 예시에서는 &lt;code&gt;Person&lt;/code&gt; 클래스를 매개변수로 받는 &lt;code&gt;operator&amp;gt;&amp;gt;&lt;/code&gt;와 &lt;code&gt;operator&amp;lt;&amp;lt;&lt;/code&gt;라는 전역함수를 정의하고 있습니다.
그리고 Person&lt;code&gt;클래스에서는 해당 함수들을 **&amp;lt;Link to=&amp;quot;/development/cpp-friend-keyword&amp;quot;&amp;gt;친구로 선언&amp;lt;/Link&amp;gt;**함으로써
해당 함수들에서&lt;/code&gt;Person&lt;code&gt;의 &lt;/code&gt;private` 필드들에 접근 가능하도록 열어놓았습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; height &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;height&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;friend&lt;/span&gt; std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;istream&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;istream&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Person&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;friend&lt;/span&gt; std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;ostream&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;ostream&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Person&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;istream&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;istream&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; in&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Person&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; person&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    in&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; in&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;ostream&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;ostream&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; out&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Person&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; person&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    out&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;[age: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;, height: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;]&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; out&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;실제로 코드를 실행해보면 입력받은 데이터를 &lt;code&gt;Person&lt;/code&gt; 객체에 저장하고, &lt;code&gt;Person&lt;/code&gt; 객체 출력할 수 있음을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Person person &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cin&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 입력: 20 180&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;person&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 출력: [age: 20, height: 180]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001589147&quot;&gt;윤성우의 열혈 C++ 프로그래밍&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/cpp/standard-library/iostream?view=msvc-170&quot;&gt;Microsoft - iostream 라이브러리&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://gcc.gnu.org/onlinedocs/gcc-4.6.2/libstdc++/api/a00911_source.html&quot;&gt;iostream 소스코드&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[C++] friend 키워드의 활용]]></title><description><![CDATA[C++의 friend 키워드에 대해 정리하고, 주의사항에 대해 가볍게 정리하겠습니다.]]></description><link>https://bugoverdose.github.io/posts/73/</link><guid isPermaLink="false">https://bugoverdose.github.io/posts/73/</guid><pubDate>Fri, 21 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;C++의 &lt;code&gt;friend&lt;/code&gt; 키워드에 대해 정리하고, 주의사항에 대해 가볍게 정리하겠습니다.
기본적으로 모든 예시 코드에서 &lt;code&gt;#include  &amp;lt;iostream&amp;gt;&lt;/code&gt;는 생략되어있습니다.&lt;/p&gt;&lt;h2&gt;클래스의 friend 선언&lt;/h2&gt;&lt;p&gt;A 클래스가 B 클래스를 대상으로 &lt;code&gt;friend&lt;/code&gt; 선언을 하면 B 클래스는 A 클래스의 &lt;code&gt;private&lt;/code&gt; 멤버에 직접 접근이 가능해집니다.&lt;/p&gt;&lt;p&gt;이해하기 쉬운 예시로, &lt;code&gt;Spongebob&lt;/code&gt; 클래스가 &lt;strong&gt;일방적으로&lt;/strong&gt; &lt;code&gt;Squidward&lt;/code&gt; 클래스를 친구로 선언하는 경우를 생각해봅시다.
두 클래스 모두 &lt;code&gt;private&lt;/code&gt; 멤버변수와 멤버함수를 지닙니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Squidward&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Spongebob::ShowPrivateInfo의 컴파일을 위해 Squidward가 클래스임을 선언&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Spongebob&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowMyInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;friend&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Squidward&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// friend 선언&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Spongebob&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowPrivateInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Squidward squidward&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Squidward&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowMyInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Squidward&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;height&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowPrivateInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Spongebob spongebob&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;친구로 선언당한 &lt;code&gt;Squidward&lt;/code&gt; 클래스 내부에서는 상대방의 &lt;code&gt;private&lt;/code&gt; 멤버변수와 멤버함수를 호출할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Squidward&lt;/span&gt;&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ShowPrivateInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Spongebob spongebob&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;spongebob&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    spongebob&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ShowMyInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 &lt;code&gt;Spongebob&lt;/code&gt;의 경우 상대방에게 친구로 선언되지 않았기 때문에 상대방의 &lt;code&gt;private&lt;/code&gt; 멤버들에 접근하려고
시도하면 컴파일 에러가 발생합니다. 오로지 상대방의 &lt;code&gt;public&lt;/code&gt; 멤버에만 접근할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Spongebob&lt;/span&gt;&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ShowPrivateInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Squidward squidward&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// std::cout&amp;lt;&amp;lt;squidward.height&amp;lt;&amp;lt;std::endl; // [컴파일 에러]&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// squidward.ShowMyInfo(); // [컴파일 에러]&lt;/span&gt;
    squidward&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ShowPrivateInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;한편 두 클래스가 서로를 친구로 선언할 경우 당연히 서로가 서로의 &lt;code&gt;private&lt;/code&gt; 멤버들에 접근할 수 있습니다.
아래는  &lt;code&gt;Spongebob&lt;/code&gt;와 &lt;code&gt;Patrick&lt;/code&gt; 클래스가 서로를 친구로 선언하는 예시입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Patrick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Spongebob&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowMyInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;friend&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Patrick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// friend 선언&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Spongebob&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowPrivateInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Patrick patrick&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Patrick&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowMyInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;friend&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Spongebob&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// friend 선언&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Patrick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;height&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowPrivateInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Spongebob spongebob&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Patrick&lt;/span&gt;&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ShowPrivateInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Spongebob spongebob&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;spongebob&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    spongebob&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ShowMyInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Spongebob&lt;/span&gt;&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ShowPrivateInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Patrick patrick&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;patrick&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
    patrick&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ShowMyInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;멤버함수의 friend 선언&lt;/h2&gt;&lt;p&gt;클래스 전체만이 아니라 특정 멤버함수만 친구로 선언할 수도 있습니다.&lt;/p&gt;&lt;p&gt;예를 들어, &lt;code&gt;Integer&lt;/code&gt;는 &lt;code&gt;Calculator&lt;/code&gt; 클래스의 멤버함수 &lt;code&gt;Increment&lt;/code&gt;를 친구로 선언했기 때문에
해당 &lt;code&gt;Increment&lt;/code&gt; 내에서는 &lt;code&gt;private&lt;/code&gt; 멤버에 접근할 수 있으나,
&lt;code&gt;Calculator&lt;/code&gt;의 다른 함수에서는 접근할 수 없습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Calculator&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Increment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Integer integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Integer integer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;friend&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Calculator&lt;/span&gt;&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Increment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Integer integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Calculator&lt;/span&gt;&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Increment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Integer integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    integer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Calculator&lt;/span&gt;&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Integer integer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// integer.value += value; // [컴파일 에러]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;함수의 friend 선언&lt;/h2&gt;&lt;p&gt;마지막으로 클래스에서는 특정 멤버함수를 대상으로 친구로 선언할 수도 있습니다.&lt;/p&gt;&lt;p&gt;한편 아래 예시의 &lt;code&gt;Integer&lt;/code&gt;는 전역함수 &lt;code&gt;increment&lt;/code&gt;를 친구로 선언했기 때문에
해당 함수 내에서는 &lt;code&gt;private&lt;/code&gt; 멤버에 접근할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;friend&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;increment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Integer integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// friend 선언&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;increment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Integer integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    integer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;참고로 아래와 같이 클래스 내부에서 &lt;code&gt;friend&lt;/code&gt; 전역함수를 선언하는 것도 가능합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;friend&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;increment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Integer integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            integer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 경우 &lt;code&gt;increment&lt;/code&gt;는 멤버함수로 간주되지 않기 때문에 객체의 멤버함수처럼 호출하려고 시도하면 컴파일에 실패합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Integer &lt;span class=&quot;token function&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;increment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

Integer &lt;span class=&quot;token function&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num.increment(other); // [컴파일 에러]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;주의사항&lt;/h2&gt;&lt;p&gt;당연한 얘기겠지만 객체의 &lt;code&gt;private&lt;/code&gt; 멤버에 대한 외부에서의 접근을 허용할 경우 캡슐화를 위배하게 됩니다.
때문에 &lt;code&gt;friend&lt;/code&gt;는 기본적으로 객체지향 프로그래밍에 위배되며, 남발하지 않도록 주의해야 하는 키워드입니다.
다만, 아주 제한된 상황에서는 &lt;code&gt;friend&lt;/code&gt; 키워드도 나름의 효용이 있습니다.
대표적인 예시가 바로 &lt;strong&gt;&lt;div to=&quot;/development/cpp-overloading-arithmetic-operators&quot;&gt;연산자 오버로딩&lt;/div&gt;&lt;/strong&gt;입니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001589147&quot;&gt;윤성우의 열혈 C++ 프로그래밍&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[C++] const 키워드의 활용]]></title><description><![CDATA[C언어에서의 const 키워드를 가볍게 복습하고, const 객체, const 함수, const 매개변수, const 반환형, 형 변환 연산자 const_cast, mutable 키워드 등에 대해 포괄적으로 정리하겠습니다.]]></description><link>https://bugoverdose.github.io/development/cpp-const-keyword/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/cpp-const-keyword/</guid><pubDate>Thu, 20 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;C언어에서의 &lt;code&gt;const&lt;/code&gt; 키워드를 가볍게 복습하고, C++에서 &lt;code&gt;const&lt;/code&gt;와 관련하여 알아야 할 핵심 문법을 정리하고자 합니다.
기본적으로 모든 예시 코드에서 &lt;code&gt;#include  &amp;lt;iostream&amp;gt;&lt;/code&gt;는 생략되어있습니다.&lt;/p&gt;&lt;h2&gt;지역변수의 상수화&lt;/h2&gt;&lt;p&gt;&lt;code&gt;const&lt;/code&gt;는 말 그대로 대상을 상수로 선언하기 위한 키워드입니다.&lt;/p&gt;&lt;p&gt;예를 들어, 아래와 같이 지역변수 &lt;code&gt;a&lt;/code&gt;를 상수화할 경우,
&lt;code&gt;a&lt;/code&gt;에 담긴 값을 조회할 수는 있으나, &lt;code&gt;a&lt;/code&gt;에 담긴 값을 수정할 수는 없게 됩니다.
아래와 같이 &lt;code&gt;a&lt;/code&gt;에 다른 값을 수정하려고 시도한다면 컴파일에 실패합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 20&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// a = 20; // [컴파일 에러]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// a += 10; // [컴파일 에러]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;참고로 지역변수가 포인터가 아닌 경우 &lt;code&gt;const&lt;/code&gt;와 자료형의 순서는 자유롭지만 대부분의 경우 &lt;code&gt;const&lt;/code&gt;가 왼쪽에 옵니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;포인터와 상수&lt;/h2&gt;&lt;p&gt;포인터를 대상으로 &lt;code&gt;const&lt;/code&gt;를 사용할 경우, &lt;code&gt;const&lt;/code&gt;가 어떤 대상의 왼쪽에 있는지에 따라 그 의미가 전혀 달라집니다.
기본적으로 두 가지 케이스가 있고, 세 번째는 두 가지 케이스를 합친 것이라고 볼 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; ptr1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// a 상수화. ptr1 수정 가능.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; ptr2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ptr2 상수화. a 수정 가능.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; ptr3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// a 상수화. ptr2 상수화.&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;상수의 포인터&lt;/h3&gt;&lt;p&gt;우선 포인터 자체가 상수가 되는 것이 아니라, &lt;strong&gt;포인터가 가리키는 대상을 상수화&lt;/strong&gt;하는 경우입니다.&lt;/p&gt;&lt;p&gt;아래와 같이, &lt;code&gt;a&lt;/code&gt;라는 변수에 대한 포인터 &lt;code&gt;ptr&lt;/code&gt;를 &lt;code&gt;const&lt;/code&gt;로 선언한 경우,
&lt;code&gt;ptr&lt;/code&gt;를 통해 &lt;code&gt;a&lt;/code&gt;의 값을 수정하는 것은 방지됩니다.
다만, 포인터를 경유하지 않고 직접 &lt;code&gt;a&lt;/code&gt;를 수정하거나
&lt;code&gt;ptr&lt;/code&gt;에 다른 포인터를 할당하는 것은 가능합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; ptr &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// *ptr = 100; // [컴파일 에러]&lt;/span&gt;
a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ptr&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 100&lt;/span&gt;
ptr &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ptr&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 20&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// *ptr = 200; // [컴파일 에러]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;상수 포인터&lt;/h3&gt;&lt;p&gt;다음으로 포인터가 가리키는 대상이 아니라 &lt;strong&gt;포인터를 상수화&lt;/strong&gt;시키는 경우입니다.&lt;/p&gt;&lt;p&gt;아래와 같이, &lt;code&gt;a&lt;/code&gt;라는 변수에 대한 포인터 &lt;code&gt;ptr&lt;/code&gt;를 &lt;code&gt;const&lt;/code&gt;로 선언한 경우,
&lt;code&gt;ptr&lt;/code&gt;를 통해 &lt;code&gt;a&lt;/code&gt;의 값을 수정하거나 &lt;code&gt;ptr&lt;/code&gt;가 가리키는 &lt;code&gt;a&lt;/code&gt;를 직접 수정하는 것은 가능합니다.
그러나 &lt;code&gt;ptr&lt;/code&gt;라는 지역변수에 다른 포인터를 할당하는 것은 허용되지 않습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; ptr &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ptr &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ptr&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 100&lt;/span&gt;
a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ptr&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 200&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ptr = &amp;amp;b; // [컴파일 에러]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;참조자의 상수화&lt;/h2&gt;&lt;p&gt;C++에서는 &lt;strong&gt;&lt;div to=&quot;/development/cpp-reference-syntax&quot;&gt;참조자(reference)&lt;/div&gt;&lt;/strong&gt;라는 문법이 도입되었습니다.&lt;/p&gt;&lt;p&gt;참조자를 포인터로 선언할 경우 지역변수의 상수화와 동일합니다.
상수로 선언된 &lt;code&gt;ref&lt;/code&gt;에 다른 값을 할당하는 것은 불가능하지만, 참조자가 가리키는 대상을 다른 값으로 수정하는 것은 허용됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ref = 100 // [컴파일 에러]&lt;/span&gt;
a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 100&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;참고로 참조자의 경우 &lt;code&gt;const&lt;/code&gt;와 자료형의 순서도 자유롭습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;형 변환 연산자 const_cast&lt;/h2&gt;&lt;p&gt;C++에서는 &lt;code&gt;const_cast&lt;/code&gt;라는 형 변환 연산자를 제공합니다.
기본적으로 &lt;code&gt;const&lt;/code&gt;로 선언된 포인터와 참조자를 수정 가능하도록 변경해주는, 즉 &lt;code&gt;const&lt;/code&gt; 선언을 무효화해주는 기능입니다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token generic-function&quot;&gt;&lt;span class=&quot;token function&quot;&gt;const_cast&lt;/span&gt;&lt;span class=&quot;token generic class-name&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;T&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;expr&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;기본적으로 수정을 방지하기 위해 특정 변수를 &lt;code&gt;const&lt;/code&gt;로 선언하고,
특정 상황에서 제한적으로 수정을 허용하기 위해 &lt;code&gt;const&lt;/code&gt;를 임시로 무효화하는 등의 방식으로 활용될 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; num&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    num &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// a += 100; // [컴파일 에러]&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token generic-function&quot;&gt;&lt;span class=&quot;token function&quot;&gt;const_cast&lt;/span&gt;&lt;span class=&quot;token generic class-name&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 100&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;const 객체와 const 멤버함수&lt;/h2&gt;&lt;p&gt;C++에서는 객체도 상수화할 수 있습니다.
객체가 상수로 선언되면 멤버변수들의 수정을 방지하기 위해 &lt;code&gt;const&lt;/code&gt;가 붙어있는 멤버함수의 호출만 허용됩니다.&lt;/p&gt;&lt;p&gt;예를 들어, 아래의 &lt;code&gt;Class&lt;/code&gt;는 두 종류의 멤버함수를 지니고 있습니다.
&lt;code&gt;Method&lt;/code&gt;의 경우 내부적으로 멤버변수 &lt;code&gt;value&lt;/code&gt;를 수정할 수 있습니다.
그러나 &lt;code&gt;const&lt;/code&gt;가 붙은 &lt;code&gt;ConstMethod&lt;/code&gt;의 경우 내부적으로 멤버함수를 수정하려고 시도하면 컴파일에 실패합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
            value &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ConstMethod&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// value += 1; // [컴파일 에러]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;일반적인 객체 &lt;code&gt;a&lt;/code&gt;의 경우 &lt;code&gt;Method&lt;/code&gt;와 &lt;code&gt;ConstMethod&lt;/code&gt;를 모두 호출할 수 있습니다.
그러나 &lt;code&gt;const&lt;/code&gt;로 선언한 객체 &lt;code&gt;b&lt;/code&gt;의 경우 &lt;code&gt;const&lt;/code&gt; 멤버함수가 아닌 &lt;code&gt;Method&lt;/code&gt;를 호출하려는 경우 컴파일에 실패합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Class &lt;span class=&quot;token function&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ConstMethod&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Class &lt;span class=&quot;token function&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// b.Method(); // [컴파일 에러]&lt;/span&gt;
b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ConstMethod&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;const 멤버함수 오버로딩&lt;/h3&gt;&lt;p&gt;&lt;code&gt;const&lt;/code&gt;의 선언 유무도 메서드 오버로딩의 조건에 해당됩니다.
예를 들어, 아래의 &lt;code&gt;Class&lt;/code&gt; 클래스의 &lt;code&gt;Method&lt;/code&gt; 멤버함수들은 이름과 매개변수의 종류가 완전히 동일합니다.
그러나 한쪽은 &lt;code&gt;const&lt;/code&gt;가 붙었기 때문에 상수로 선언된 객체에 대해서만 호출됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;method&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;const method&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;예를 들어, 객체 &lt;code&gt;a&lt;/code&gt;에서 &lt;code&gt;Method&lt;/code&gt;를 호출하면 기본적으로 &lt;code&gt;const&lt;/code&gt;가 붙어있지 않은 멤버함수가 실행됩니다.
그러나 &lt;code&gt;const&lt;/code&gt; 객체 &lt;code&gt;b&lt;/code&gt;에서는 &lt;code&gt;const&lt;/code&gt;가 붙은 멤버함수가 실행됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Class a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: method&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Class b&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: const method&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;mutable&lt;/h3&gt;&lt;p&gt;&lt;code&gt;mutable&lt;/code&gt;은 &lt;code&gt;const&lt;/code&gt; 함수 내에서도 멤버변수의 수정을 허용해주는 키워드입니다.
예를 들어, 아래의 &lt;code&gt;value&lt;/code&gt; 멤버변수는 &lt;code&gt;const&lt;/code&gt; 멤버함수에서 값이 수정될 수 없으나,
&lt;code&gt;mutValue&lt;/code&gt; 멤버변수는 어디에서나 수정될 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;mutable&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; mutValue&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mutValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Increment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
            value&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            mutValue&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Increment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// value+=1; // [컴파일 에러]&lt;/span&gt;
            mutValue&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;당연한 얘기겠지만 &lt;code&gt;mutable&lt;/code&gt; 키워드의 남용은 권장되지 않으며, 극히 제한된 상황에서 예외적으로 사용되어야 합니다.&lt;/p&gt;&lt;h2&gt;const와 함수&lt;/h2&gt;&lt;p&gt;함수에서 &lt;code&gt;const&lt;/code&gt;는 크게 세 가지 방식으로 사용됩니다. 이미 위에서 언급한 내용도 있지만 짧게 정리하겠습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;const 함수 선언&lt;/li&gt;&lt;li&gt;const 매개변수 &lt;/li&gt;&lt;li&gt;const 반환형&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;const 함수&lt;/h3&gt;&lt;p&gt;함수의 경우 클래스에 정의된 멤버함수들만 &lt;code&gt;const&lt;/code&gt;로 정의될 수 있습니다.
즉, 아래와 같이 일반적인 함수에 &lt;code&gt;const&lt;/code&gt;를 붙이는 경우 컴파일에 실패합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;InvalidConstFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// [컴파일 에러]&lt;/span&gt;
    val &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;멤버함수는 반환형, 함수형, 매개변수에 대한 정의가 다 끝난 오른쪽에 &lt;code&gt;const&lt;/code&gt;를 붙이는 방식으로 상수로 선언할 수 있습니다.
&lt;code&gt;const&lt;/code&gt;로 정의된 함수 내에서는 일반적인 멤버변수들을 수정할 수 없으며,
&lt;code&gt;mutable&lt;/code&gt; 키워드가 붙은 멤버변수들만 예외적으로 수정할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;mutable&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; mutValue&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ConstMethod&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
            &lt;span class=&quot;token comment&quot;&gt;// value += 1; // [컴파일 에러]&lt;/span&gt;
            mutValue &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;const 매개변수&lt;/h2&gt;&lt;p&gt;함수의 매개변수를 &lt;code&gt;const&lt;/code&gt;로 선언할 경우, 인자로 넘어온 값이 상수로 간주되어 함수 내부에서 수정될 수 없게 됩니다.
예를 들어, 아래의 &lt;code&gt;constVal&lt;/code&gt;를 수정하려고 하면 컴파일에 실패합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; constVal&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// constVal+=10; // [컴파일 에러]&lt;/span&gt;
    val &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이때 중요한 점은 매개변수로 넘어온 인자가 함수 내에서 &lt;code&gt;const&lt;/code&gt;로 선언된다는 점입니다.
아래 예시에서 일반적인 &lt;code&gt;obj&lt;/code&gt; 객체의 &lt;code&gt;Method&lt;/code&gt;를 호출하면 &lt;code&gt;const&lt;/code&gt;가 없는 멤버함수가 실행됩니다.
그러나 동일한 &lt;code&gt;obj&lt;/code&gt; 객체를 &lt;code&gt;CallMethod&lt;/code&gt; 함수의 인자로 전달할 경우,
&lt;code&gt;obj&lt;/code&gt; 객체를 복사한 &lt;code&gt;const&lt;/code&gt; 객체로 다루어지기 때문에 &lt;code&gt;const&lt;/code&gt;가 붙은 멤버함수가 실행됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;method: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;const method: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;CallMethod&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Class obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; 

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Class obj&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: method: 0x16ce12bdb&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;CallMethod&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: const method: 0x16ce12baf&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;const 반환값&lt;/h3&gt;&lt;p&gt;함수의 반환형이 &lt;code&gt;const&lt;/code&gt;인 경우, 함수의 반환 과정에서 생성되는 임시 객체를 &lt;code&gt;const&lt;/code&gt; 객체로 다루게 됩니다.
예를 들어, 아래와 같은 &lt;code&gt;Class&lt;/code&gt; 클래스와 &lt;code&gt;Class&lt;/code&gt; 객체를 넘겨받아 상수로 반환하는 &lt;code&gt;ConstReturnFunc&lt;/code&gt; 함수가 있다고 해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Class&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; other&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;copying &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;other&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot; to &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;method called by &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;const method called by &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Class&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ConstReturnFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Class &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; obj&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;ConstReturnFunc&lt;/code&gt;가 반환한 임시 객체에 대해 즉시 &lt;code&gt;Method&lt;/code&gt; 함수를 호출할 경우,
임시 객체는 &lt;code&gt;const&lt;/code&gt;이기 때문에 &lt;code&gt;const&lt;/code&gt; 멤버함수가 실행됩니다.&lt;/p&gt;&lt;p&gt;그러나 &lt;code&gt;ConstReturnFunc&lt;/code&gt;가 반환한 임시 객체를 &lt;code&gt;returnedObj&lt;/code&gt;라는 변수에 할당할 경우,
&lt;code&gt;const&lt;/code&gt; 임시 객체에 대해 복사 생성자가 호출되어 새로운 객체가 생성됩니다.
이 새로운 객체는 &lt;code&gt;const&lt;/code&gt;가 아니므로 &lt;code&gt;Method&lt;/code&gt;를 호출했을 때 &lt;code&gt;const&lt;/code&gt;가 붙지 않은 멤버함수가 실행됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Class obj&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;ConstReturnFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
&lt;span class=&quot;token comment&quot;&gt;// 출력: const method called by 0x16da4ebdb&lt;/span&gt;

Class returnedObj &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ConstReturnFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 출력: copying 0x16da4ebdb to 0x16da4ebda&lt;/span&gt;
returnedObj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 출력: method called by 0x16da4ebda&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001589147&quot;&gt;윤성우의 열혈 C++ 프로그래밍&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;&lt;code&gt;const_cast&lt;/code&gt; 연산자는 &lt;code&gt;const&lt;/code&gt;만이 아니라 &lt;code&gt;volatile&lt;/code&gt;도 무효화해줄 수 있습니다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[리뷰] 윤성우의 열혈 C++ 프로그래밍 독후감]]></title><description><![CDATA[지인으로부터 선물받은 윤성우의 열혈 C++ 프로그래밍이라는 서적을 완독하였습니다. 책에 대한 짧은 후기를 남기고자 합니다.]]></description><link>https://bugoverdose.github.io/essay/passionate-cpp-book-review/</link><guid isPermaLink="false">https://bugoverdose.github.io/essay/passionate-cpp-book-review/</guid><pubDate>Wed, 19 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;3년 전에 지인으로부터 &lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001589148&quot;&gt;윤성우의 열혈 C 프로그래밍&lt;/a&gt;과
&lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001589147&quot;&gt;윤성우의 열혈 C++ 프로그래밍&lt;/a&gt;이라는 문법서를 두 권 선물 받았습니다.&lt;/p&gt;&lt;p&gt;꽤 유명한 책들이지만 C++를 직접적으로 사용할 일이 없다보니 끝까지 읽지는 않았었는데,
최근에 두 번째 책을 완독하여 가볍게 정리하고자 합니다.&lt;/p&gt;&lt;h2&gt;내용과 난이도&lt;/h2&gt;&lt;p&gt;일반적으로 C++은 어렵다는 이미지가 있는데, 이 책의 저자는 C++을 정말 쉽게 입문할 수 있도록 안내해줍니다.
물론 C언어에 어느 정도 익숙하다는 점을 전제로 깔고 있기는 합니다.
그러나 복습 차원에서 주요 C언어 문법들과 개념들을 지속적으로 정리해주기 때문에
이 책을 이해하기 위해 다른 책을 펼쳐보거나 무언가를 검색할 일은 전혀 없었습니다. &lt;/p&gt;&lt;p&gt;실무에서 C++ 개발자로 일을 하려면 모던 C++ 문법과 STL 등 추가적으로 학습해야 할 내용은 넘쳐납니다.
그리고 이 책에서는 이러한 내용을 직접적으로 담고 있지는 않습니다.
그러나 이 책은 모던 C++과 STL 등의 심화 내용을 본격적으로 학습하기 위해 필요한 기본 지식을 탄탄히 쌓을 수 있도록 도와줍니다.
게임 클라이언트, 게임 서버, 임베디드 등 어떠한 분야에서 C++을 활용하든 이 책은 훌륭한 시작점이라고 생각합니다.&lt;/p&gt;&lt;h2&gt;문체&lt;/h2&gt;&lt;p&gt;전반적으로 윤성우님은 이전에 후기를 적은 &lt;strong&gt;&lt;div to=&quot;/essay/object-book-review&quot;&gt;오브젝트&lt;/div&gt;&lt;/strong&gt;의 저자 분과 정반대 스타일로 글을 작성합니다.
오브젝트의 저자 분의 경우 본인이 알고 있는 모든 지식을 최대한 독자들에게 전달해주고 싶다는 점이 장점입니다.
그러나 독자 입장에서 모든 내용을 1회독으로 소화하기는 힘든 면이 있습니다.&lt;/p&gt;&lt;p&gt;한편 윤성우님의 경우 기본적으로 독자들과 대화를 하듯이 글을 적으며, 철저히 프로그래밍 자체에 처음 입문한 사람을 대상으로 삼고 있습니다.
물론 때로는 과잉 친절이 아닌게 싶은 순간도 있었습니다.
그러나 불필요한 내용으로 인해 제 시간이 낭비된다는 느낌을 받지는 않았습니다.&lt;/p&gt;&lt;h2&gt;실습 및 복습&lt;/h2&gt;&lt;p&gt;해당 서적을 구매하면 강의도 제공해주고, 책에서 사용된 예시 코드의 소스코드도 제공해준다고 합니다.
저의 경우 해당 자료들과는 별개로
흥미로운 문법이 나올 때마다 직접 다양한 예시 코드를 생각해내고 직접 작성 및 실행을 하며 추가 학습을 했습니다.&lt;/p&gt;&lt;p&gt;개인적으로 시간이 되면, 즉 심심하면 해당 예시 코드들을 정리하여 블로그에 추가로 정리할 계획입니다.&lt;/p&gt;&lt;h2&gt;적절한 독자층&lt;/h2&gt;&lt;p&gt;C와 C++은 모두가 익혀야 할 필수 교양에 해당한다고 생각합니다.
특히 다양한 오픈소스 프로젝트의 소스코드나 Java의 내부 동작을 제대로 이해할려면 C++은 필수이며,
이 책은 딱 그 정도의 배경지식을 제공해줍니다.&lt;/p&gt;&lt;p&gt;문제는 본인이 직접적으로 C와 C++를 사용할 일이 없는 경우입니다.
학생이 아니라면 취업 혹은 회사 업무에 직접적으로 도움이 되지 않는 것들에 시간을 과하게 투자하는 것은 상당히 비합리적이라고 볼 수 있습니다.&lt;/p&gt;&lt;p&gt;다만, 이 책은 기본적으로 내용도 쉬운 편이고 굉장히 술술 읽히는 가성비 좋은 책입니다.
때문에 이 책을 펼쳤을 때 부담 없이 읽을 수 있다면 당장 읽고, 별로 읽고 싶은 마음이 들지 않는다면 나중으로 미뤄도 된다고 생각합니다.&lt;/p&gt;&lt;p&gt;참고로 저의 경우 매일 퇴근 후 만보를 걷고 이 책을 읽으며 스트레스가 굉장히 해소되었습니다.
또한 이 책을 읽은 이후 회사에서 디버깅을 할 때 클라이언트 쪽의 JNI 및 C++ 코드를 분석할 수 있게 되었습니다.
이처럼 본인에게 부담이 되지 않거나, 명확한 효용이 있다고 판단될 때 읽으면 좋다고 생각합니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;저의 경우 당분간은 회사 업무 때문에 다른 것들을 공부해야 합니다.
하지만 여유가 생기면 이 책의 내용을 블로그에 조금 더 정리해보고,
C++ 최신 버전들의 문법들, STL, 혹은 언리얼 엔진을 본격적으로 공부해보는 것을 생각하고 있습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[[C++] 가상 소멸자와 메모리 누수]]></title><description><![CDATA[소멸자 문법에 대해 간략히 정리하고 소멸자를 통해 메모리 누수를 방지하는 방법에 대해 알아봅니다. 상속 문법의 경우 최상위 클래스에 가상 소멸자를 정의해야 하는 경우와 필요성에 대해 정리해봅니다.]]></description><link>https://bugoverdose.github.io/development/cpp-destructor-and-memory-leak/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/cpp-destructor-and-memory-leak/</guid><pubDate>Sun, 09 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;소멸자 문법&lt;/h2&gt;&lt;p&gt;객체 생성 시점에 반드시 생성자가 호출되듯이, 객체 소멸 시점에는 반드시 소멸자가 호출됩니다.&lt;/p&gt;&lt;p&gt;모든 클래스에는 하나의 소멸자가 존재하며, 소멸자는 다음과 같은 형태로 정의됩니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;함수명은 생성자와 같이 클래스명과 동일하지만, 앞에 &lt;code&gt;~&lt;/code&gt;가 추가됨&lt;/li&gt;&lt;li&gt;매개변수는 void형으로 선언&lt;/li&gt;&lt;li&gt;반환형이 선언되어있지 않고, 실제로 반환값이 없음&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;예를 들어, 아래와 같은 &lt;code&gt;One&lt;/code&gt; 클래스에는 &lt;code&gt;~One&lt;/code&gt;이라는 소멸자를 명시적으로 정의할 수 있습니다.
만일 소멸자를 명시하지 않더라도 디폴트 소멸자가 자동으로 삽입되므로 언제나 컴파일에는 성공합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 이하 생략&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;One&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;One&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Creating One&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;One&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Destroying One&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;소멸자를 통한 메모리 누수 방지&lt;/h2&gt;&lt;p&gt;일반적으로 소멸자는 생성자에서 할당한 리소스의 소멸을 위해 활용됩니다.&lt;/p&gt;&lt;p&gt;예를 들어, 아래와 같이 생성자 내부에서 &lt;code&gt;new&lt;/code&gt; 키워드를 통해 메모리 공간을 할당하는 경우,
소멸자에서 명시적으로 &lt;code&gt;delete&lt;/code&gt; 키워드로 해당 메모리 공간을 소멸시켜줘야 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Two&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        One&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; one&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Two&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            one &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;One&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Two&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;delete&lt;/span&gt; one&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Destroying Two&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;실제로 아래와 같은 &lt;code&gt;doSomething&lt;/code&gt; 함수를 호출하면 함수 반환 시점에 &lt;code&gt;two&lt;/code&gt; 객체의 소멸자를 호출합니다.
이 시점에 자연스럽게 &lt;code&gt;one&lt;/code&gt; 객체의 소멸자도 호출되는 것을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;doSomething&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Two two&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;token comment&quot;&gt;// [출력] Destroying One&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// [출력] Destroying Two&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;만약 &lt;code&gt;Two&lt;/code&gt; 클래스에서 소멸자를 명시하지 않거나, 아래와 같이 직접 메모리 공간을 해제하지 않는 경우
&lt;code&gt;Two&lt;/code&gt; 클래스의 객체가 소멸되더라도 &lt;code&gt;One&lt;/code&gt;의 소멸자는 호출되지 않습니다.
이로 인해 프로그램이 실행되는 동안 &lt;code&gt;One&lt;/code&gt; 객체는 그대로 메모리 공간에 남아 자리를 차지하게 됩니다.
즉, 메모리의 누수(leak)가 발생합니다. &lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Two&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        One&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; one&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Two&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            one &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;One&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Two&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// delete 누락&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Destroying Two&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;상속과 소멸자&lt;/h2&gt;&lt;p&gt;클래스가 다른 클래스를 상속하는 경우 무조건 상위클래스의 생성자가 호출되고 객체가 하나 생성됩니다.
때문에 상속 문법을 사용할 경우, 상위클래스의 객체들에 대한 소멸자들이 적절히 호출될 수 있는지를 반드시 확인해야 합니다.&lt;/p&gt;&lt;p&gt;예를 들어, 아래와 같이 &lt;code&gt;First&lt;/code&gt; 클래스와 &lt;code&gt;Second&lt;/code&gt; 클래스는 각자 생성자 내부에서 &lt;code&gt;new&lt;/code&gt;로 메모리 공간을 할당받고,
소멸자에서 &lt;code&gt;delete&lt;/code&gt;를 호출하여 메모리 공간을 소멸하고 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;cstring&amp;gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;First&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; str1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;First&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; str&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;str1&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;strlen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;str&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;strcpy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;str1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; str&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;First&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Destroying First&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Destroying &amp;#x27;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;str1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;#x27;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;str1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Second&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;First&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; str2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Second&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; str1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; str2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;First&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;str1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;str2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;strlen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;str2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;strcpy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;str2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; str2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Second&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Destroying Second&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Destroying &amp;#x27;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;str2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;#x27;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;str2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 코드는 언뜻 봐서는 별 문제가 없어보입니다.
실제로 하위클래스 &lt;code&gt;Second&lt;/code&gt; 객체를 하나 생성하고 이를 소멸시키는 경우,
상위클래스 &lt;code&gt;First&lt;/code&gt;의 소멸자까지 함께 호출되는 것을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Second&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; second &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Second&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;one&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;two&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;delete&lt;/span&gt; second&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] Destroying Second&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] Destroying &amp;#x27;two&amp;#x27;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] Destroying First&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] Destroying &amp;#x27;one&amp;#x27;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 문제는 &lt;code&gt;Second&lt;/code&gt; 객체가 상위타입인 &lt;code&gt;First&lt;/code&gt;로 업캐스팅된 경우입니다.
&lt;code&gt;First&lt;/code&gt; 타입의 포인터변수에 대해 &lt;code&gt;delete&lt;/code&gt;를 호출하면
기본적으로 &lt;code&gt;First&lt;/code&gt; 클래스에 정의된 소멸자만 호출됩니다.
이 또한 위와 마찬기자로 메모리 누수가 발생한다고 볼 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;First&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; first &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Second&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;one&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;two&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;delete&lt;/span&gt; first&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] Destroying First&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] Destroying &amp;#x27;one&amp;#x27;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;사실 해당 이슈는
&lt;strong&gt;&lt;div to=&quot;/development/cpp-polymorphism-and-virtual-function&quot;&gt;가상 함수&lt;/div&gt;&lt;/strong&gt;를
정의하지 않으면 객체의 실제 타입에 오버라이딩된 메서드가 아니라,
업캐스팅된 타입의 메서드가 호출되는 것과 근본적으로 동일한 상황입니다.
때문에 해당 문제 역시 &lt;code&gt;virtual&lt;/code&gt; 키워드를 활용하여 해결할 수 있습니다.&lt;/p&gt;&lt;h2&gt;가상 소멸자를 통한 메모리 누수 방지&lt;/h2&gt;&lt;p&gt;상속의 계층구조상 최상위에 위치한 클래스의 소멸자에 &lt;code&gt;virtual&lt;/code&gt; 키워드를 추가해주면
그 하위클래스들은 전부 가상 소멸자로 정의됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;First&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;First&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Destroying First&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Destroying &amp;#x27;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;str1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;#x27;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;str1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 이처럼 가상 소멸자가 정의되어있으면
하위클래스의 객체는 어떤 타입의 포인터 변수에 할당되었는지와는 무관하게,
언제나 실제 객체의 타입과 그 위의 소멸자들이 순차적으로 전부 호출됩니다.&lt;/p&gt;&lt;p&gt;실제로 아래 코드를 보면, &lt;code&gt;Second&lt;/code&gt; 객체를 상위타입인 &lt;code&gt;First&lt;/code&gt;로 업캐스팅하였음에도
&lt;code&gt;Second&lt;/code&gt;와 &lt;code&gt;First&lt;/code&gt;의 소멸자가 전부 순차적으로 호출되고 있음을 확인할 수 있습니다.
이를 통해 효과적으로 메모리 누수를 방지할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;First&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; first &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Second&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;one&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;two&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;delete&lt;/span&gt; first&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] Destroying Second&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] Destroying &amp;#x27;two&amp;#x27;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] Destroying First&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] Destroying &amp;#x27;one&amp;#x27;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001589147&quot;&gt;윤성우의 열혈 C++ 프로그래밍&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[C++] 접근제어자와 상속]]></title><description><![CDATA[C++에서는 상위클래스의 멤버들을 상속받을 때 접근제어자를 변형시킬 수 있는 문법을 제공합니다. 접근제어자들에 대해 가볍게 다루고, public 상속, protected 상속, private 상속에 대해 정리해보겠습니다.]]></description><link>https://bugoverdose.github.io/development/cpp-access-modifier-and-inheritance/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/cpp-access-modifier-and-inheritance/</guid><pubDate>Sat, 08 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;C++에서는 상위클래스의 멤버들을 상속받을 때 접근제어자를 변형시킬 수 있는 문법을 제공합니다.
실제로는 &lt;code&gt;public&lt;/code&gt; 상속만 쓰는 경우가 일반적이지만, 특이한 문법이므로 간단한 정리하고자 합니다.&lt;/p&gt;&lt;h2&gt;접근제어자&lt;/h2&gt;&lt;p&gt;C++에는 세 가지 접근 제어자가 존재합니다.
기본적으로 클래스와 구조체의 멤버 변수, 필드 등에 대한 접근 권한을 제어하기 위해 활용됩니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;public&lt;/code&gt; : 외부와 하위클래스에서 모두 접근 가능.&lt;/li&gt;&lt;li&gt;&lt;code&gt;protected&lt;/code&gt; : 외부에서는 접근 불가. 하위클래스에서는 접근 가능.&lt;/li&gt;&lt;li&gt;&lt;code&gt;private&lt;/code&gt; : 외부와 하위클래스에서 모두 접근 불가.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;예를 들어 아래와 같이 &lt;code&gt;Base&lt;/code&gt;라는 클래스가 있다고 해봅시다.
&lt;code&gt;ShowBaseData&lt;/code&gt; 메서드를 보면 알 수 있듯이
클래스 내부에서는 &lt;code&gt;public&lt;/code&gt;, &lt;code&gt;protected&lt;/code&gt;, &lt;code&gt;private&lt;/code&gt;가 붙은 필드들에 문제 없이 접근할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 이하 생략&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Base&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;num3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowBaseData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ShowBaseData&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num3&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 &lt;code&gt;Base&lt;/code&gt; 클래스로 생성된 객체의 경우 &lt;code&gt;public&lt;/code&gt; 멤버변수 및 메서드들만 호출 가능합니다.
외부에서 &lt;code&gt;private&lt;/code&gt; 혹은 &lt;code&gt;protected&lt;/code&gt; 멤버변수들을 직접 호출하려는 코드는 컴파일에 실패하며,
이러한 멤버변수들은 &lt;code&gt;public&lt;/code&gt;를 통해 간접적으로 접근할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Base &lt;span class=&quot;token function&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
&lt;span class=&quot;token comment&quot;&gt;// std::cout&amp;lt;&amp;lt;obj.num1&amp;lt;&amp;lt;std::endl; // [컴파일 실패] private&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// std::cout&amp;lt;&amp;lt;obj.num2&amp;lt;&amp;lt;std::endl; // [컴파일 실패] protected&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;num3&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ShowBaseData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;C++의 경우 이러한 접근제어자들 상속 문법에서도 활용됩니다.&lt;/p&gt;&lt;h2&gt;public 상속&lt;/h2&gt;&lt;p&gt;다음은 위에서 정의한 &lt;code&gt;Base&lt;/code&gt; 클래스를 &lt;code&gt;public&lt;/code&gt;으로 상속한 &lt;code&gt;Derived&lt;/code&gt; 클래스입니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;public&lt;/code&gt; 상속을 한 하위클래스에서는
상위클래스에서 &lt;code&gt;protected&lt;/code&gt; 이상의 접근권한을 지닌 멤버변수 및 메서드들을 그대로 상속받아 활용할 수 있습니다.
실제로 상위클래스에서 &lt;code&gt;private&lt;/code&gt;로 선언된 &lt;code&gt;num1&lt;/code&gt; 멤버변수를 제외하고는 하위클래스 내부에서 직접적으로 접근할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Derived&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Base&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Derived&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ShowDerivedData&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// std::cout&amp;lt;&amp;lt;num1&amp;lt;&amp;lt;&amp;lt;std::endl; // [컴파일 실패] private&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num3&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;ShowBaseData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;실제로 &lt;code&gt;Derived&lt;/code&gt; 클래스로 객체를 하나 생성해보면 여전히
상위클래스에서 멤버변수와 메서드들 중 &lt;code&gt;public&lt;/code&gt;으로 선언된 &lt;code&gt;num3&lt;/code&gt;와 &lt;code&gt;ShowBaseData&lt;/code&gt;는 외부에서 접근 가능합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Derived &lt;span class=&quot;token function&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// std::cout&amp;lt;&amp;lt;obj.num1&amp;lt;&amp;lt;std::endl; // [컴파일 실패] private&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// std::cout&amp;lt;&amp;lt;obj.num2&amp;lt;&amp;lt;std::endl; // [컴파일 실패] protected&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;num3&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ShowBaseData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ShowDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;정리하자면 &lt;code&gt;public&lt;/code&gt; 상속에서는 상위클래스의 멤버변수들의 접근범위를 최대 &lt;code&gt;public&lt;/code&gt;으로 상속받습니다.
그러나 &lt;code&gt;public&lt;/code&gt;이 가장 넓은 접근범위이므로 상속받은 멤버들의 접근제어자는 변형되지 않고 그대로 활용됩니다.
요약하자면 아래와 같은 상속관계를 지니게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Base&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Derived&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Base&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;protected 상속&lt;/h2&gt;&lt;p&gt;다음은 위에서 정의한 &lt;code&gt;Base&lt;/code&gt; 클래스를 &lt;code&gt;protected&lt;/code&gt;로 상속한 &lt;code&gt;Derived&lt;/code&gt; 클래스입니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;protected&lt;/code&gt; 상속을 했을 때에도 하위클래스 내부적으로는
상위클래스에 정의된 &lt;code&gt;protected&lt;/code&gt; 이상의 접근권한을 지닌 멤버변수 및 메서드들을 상속받아 활용할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Derived&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Base&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Derived&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ShowDerivedData&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// std::cout&amp;lt;&amp;lt;num1&amp;lt;&amp;lt;std::endl; // [컴파일 실패] private&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num3&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;ShowBaseData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다만, &lt;code&gt;protected&lt;/code&gt; 상속의 경우
상위클래스로부터 상속받은 멤버들 중 &lt;code&gt;protected&lt;/code&gt;보다 접근범위가 넓은 멤버는 &lt;code&gt;protected&lt;/code&gt;로 변형시켜서 다루게 됩니다.
즉, &lt;code&gt;Base&lt;/code&gt; 클래스에서 &lt;code&gt;public&lt;/code&gt;으로 선언된 &lt;code&gt;num3&lt;/code&gt; 멤버변수와 &lt;code&gt;GetNum1&lt;/code&gt; 메서드는 더 이상 외부에서 접근 불가능해집니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Derived &lt;span class=&quot;token function&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// std::cout&amp;lt;&amp;lt;obj.num2&amp;lt;&amp;lt;std::endl; // [컴파일 실패] protected&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// std::cout&amp;lt;&amp;lt;obj.num3&amp;lt;&amp;lt;std::endl; // [컴파일 실패] public =&amp;gt; protected로 변환&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// obj.ShowBaseData(); // [컴파일 실패] public =&amp;gt; protected로 변환&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그래도 해당 멤버들은 &lt;code&gt;protected&lt;/code&gt;로 전화되었기 때문에 &lt;code&gt;Derived&lt;/code&gt; 클래스를 상속한
&lt;code&gt;DeDerived&lt;/code&gt;에서는 해당 멤버들을 다시 그대로 상속 받을 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DeDerived&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Derived&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;DeDerived&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Derived&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowDeDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ShowDeDerivedData&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num3&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;정리하자면 &lt;code&gt;protected&lt;/code&gt; 상속에서는 상위클래스의 멤버변수들의 접근범위를 최대 &lt;code&gt;protected&lt;/code&gt;로 상속받습니다.
즉, 상위클래스에서 &lt;code&gt;public&lt;/code&gt; 혹은 &lt;code&gt;protected&lt;/code&gt;로 선언된 멤버변수들을 &lt;code&gt;protected&lt;/code&gt;로 상속받습니다.
요약하자면 아래와 같은 상속관계를 지니게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Base&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowBaseData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Derived&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Base&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// public =&amp;gt; protected&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowBaseData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// public =&amp;gt; protected&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DeDerived&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Derived&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowBaseData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// public =&amp;gt; protected&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowDeDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;private 상속&lt;/h2&gt;&lt;p&gt;다음은 위에서 정의한 &lt;code&gt;Base&lt;/code&gt; 클래스를 &lt;code&gt;private&lt;/code&gt;로 상속한 &lt;code&gt;Derived&lt;/code&gt; 클래스입니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;private&lt;/code&gt; 상속을 했을 때에도 하위클래스 내부적으로는
상위클래스에 정의된 &lt;code&gt;private&lt;/code&gt; 이상의 접근권한을 지닌 멤버들을 상속받아 활용할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Derived&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Base&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Derived&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ShowDerivedData&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num3&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;ShowBaseData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다만, &lt;code&gt;private&lt;/code&gt; 상속의 경우 상위클래스로부터 상속받은 멤버들을 전부 &lt;code&gt;private&lt;/code&gt;로 변형시켜서 다루게 됩니다.
즉, &lt;code&gt;Derived&lt;/code&gt;를 다시 상속한 &lt;code&gt;DeDerived&lt;/code&gt; 클래스에서는 &lt;code&gt;Base&lt;/code&gt; 클래스의 멤버들에 접근할 수 없게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DeDerived&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Derived&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;DeDerived&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Derived&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowDeDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ShowDeDerivedData&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// std::cout&amp;lt;&amp;lt;num2&amp;lt;&amp;lt;std::endl; // [컴파일 실패] protected =&amp;gt; private&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// std::cout&amp;lt;&amp;lt;num3&amp;lt;&amp;lt;std::endl; // [컴파일 실패] protected =&amp;gt; private&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// ShowBaseData(); // [컴파일 실패] protected =&amp;gt; private&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;ShowDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;정리하자면 &lt;code&gt;private&lt;/code&gt; 상속에서는 상위클래스의 멤버변수들의 접근범위를 최대 &lt;code&gt;private&lt;/code&gt;로 상속받습니다.
그러나 &lt;code&gt;private&lt;/code&gt;이 가장 좁은 접근범위이므로 상속받은 멤버들의 접근제어자는 전부 &lt;code&gt;private&lt;/code&gt;로 변형되어 활용됩니다.
요약하자면 아래와 같은 상속관계를 지니게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Base&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowBaseData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Derived&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Base&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// protected =&amp;gt; private&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num3&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// public =&amp;gt; private&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowBaseData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// public =&amp;gt; private&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DeDerived&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Derived&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// public =&amp;gt; protected&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ShowDeDerivedData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001589147&quot;&gt;윤성우의 열혈 C++ 프로그래밍&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[C++] 다형성과 가상 함수]]></title><description><![CDATA[C++에서 다형성을 구현하기 위해 필수적으로 알아야 하는 기초 개념 및 문법을 간단히 정리하였습니다. 추가로 Java와의 비교를 통해 가상함수의 필요성을 정리하였습니다.]]></description><link>https://bugoverdose.github.io/development/cpp-polymorphism-and-virtual-function/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/cpp-polymorphism-and-virtual-function/</guid><pubDate>Sat, 08 Jun 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;C++에서 다형성을 구현하기 위해 필수적으로 알아야 하는 기초 개념 및 문법을 간단히 정리하였습니다.&lt;/p&gt;&lt;h2&gt;업캐스팅과 참조값&lt;/h2&gt;&lt;p&gt;C++에서 특정 타입의 포인터 변수와 참조자는 해당 타입의 객체 혹은 해당 타입을 상속하는 모든 객체를 가리킬 수 있습니다.&lt;/p&gt;&lt;p&gt;예를 들어, &lt;code&gt;Bird&lt;/code&gt; 클래스와 그 하위클래스 &lt;code&gt;Penguin&lt;/code&gt; 클래스가 있다고 합시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 이하 생략&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Bird&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Bird&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Bird &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Copying: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot; to &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Penguin&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;Penguin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;Bird&lt;/code&gt;의 포인터변수와 참조자에는 하위클래스 &lt;code&gt;Penguin&lt;/code&gt; 타입의 객체의 주소가 그대로 할당될 수 있습니다.
실제로 주소값도 동일함을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Penguin penguin&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Bird&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; ref &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; penguin&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Bird&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; pointer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;penguin&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;penguin&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x16af6abfb&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x16af6abfb&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;pointer&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x16af6abfb&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;한 가지 주의할 점은 상위타입의 변수에는 하위 타입의 주소값이 아니라 객체 자체도 할당될 수 있다는 점입니다.
다만, 이 경우 상위클래스의
&lt;strong&gt;&lt;div to=&quot;/development/cpp-copy-constructor-syntax&quot;&gt;복사 생성자&lt;/div&gt;&lt;/strong&gt;가 호출되면서 새로운 객체가 할당됩니다.
즉, 아래의 &lt;code&gt;bird&lt;/code&gt; 변수에는 &lt;code&gt;Penguin&lt;/code&gt; 타입의 객체가 그대로 담기는 것이 아니라,
&lt;code&gt;Bird&lt;/code&gt; 클래스의 복사생성자가 &lt;code&gt;penguin&lt;/code&gt; 객체를 넘겨받아 새로운 &lt;code&gt;Bird&lt;/code&gt; 타입의 객체를 하나 생성하여 할당됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Penguin penguin&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;penguin&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x16d256bfb&lt;/span&gt;
Bird bird &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; penguin&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] Copying: 0x16badebfb to 0x16badebfa&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;bird&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x16d256bfa&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;타입변환과 오버라이딩&lt;/h2&gt;&lt;p&gt;C++ 컴파일러는 포인터 연산의 가능성 여부를 판단할 때, 실제로 가리키는 객체의 자료형이 아니라 &lt;strong&gt;포인터의 자료형을 기준으로 판단&lt;/strong&gt;합니다.&lt;/p&gt;&lt;p&gt;예시를 위해, 아래와 같이 상위클래스 &lt;code&gt;Bird&lt;/code&gt; 클래스와 하위클래스 &lt;code&gt;Penguin&lt;/code&gt;을 정의해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;I&amp;#x27;m a bird. I can fly!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Penguin&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;I&amp;#x27;m a penguin. I can not fly!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;swim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;I&amp;#x27;m a penguin. I can swim!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;동일한 &lt;code&gt;Penguin&lt;/code&gt; 객체를 &lt;code&gt;Penguin&lt;/code&gt; 포인터 변수에 담는 경우와 상위타입인 &lt;code&gt;Bird&lt;/code&gt; 포인터 변수에 담는 경우를 비교해봅시다.
주소값이 동일하므로 이 둘은 분명히 동일한 &lt;code&gt;Penguin&lt;/code&gt; 객체입니다.
그러나 동일한 &lt;code&gt;fly&lt;/code&gt; 메서드를 호출했을 때 &lt;code&gt;Bird&lt;/code&gt; 포인터 변수에서는
오버라이딩된 &lt;code&gt;Penguin&lt;/code&gt;의 메서드가 아니라 &lt;code&gt;Bird&lt;/code&gt;에 정의된 메서드를 호출합니다.
비슷한 맥락에서 &lt;code&gt;Bird&lt;/code&gt; 포인터 변수에서 &lt;code&gt;Bird&lt;/code&gt;에 정의되지 않은 &lt;code&gt;swim&lt;/code&gt; 메서드를 호출하려고 하면 컴파일에 실패합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Penguin&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; penguin &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Penguin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Bird&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; bird &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; penguin&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;penguin&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x130e06a90&lt;/span&gt;
std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;bird&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x130e06a90&lt;/span&gt;

penguin&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] I&amp;#x27;m a penguin. I can not fly!&lt;/span&gt;
bird&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] I&amp;#x27;m a bird. I can fly!&lt;/span&gt;

penguin&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;swim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] I&amp;#x27;m a penguin. I can swim!&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// bird-&amp;gt;swim(); // 컴파일 실패&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;C++과 Java를 비교했을 때,
하위타입에만 정의된 &lt;code&gt;swim&lt;/code&gt; 메서드를 상위타입에서 호출하지 못하는 것은 두 언어 모두 동일합니다.
그러나 Java의 경우 객체를 상위타입으로 업캐스팅했더라도,
실제 객체에서 오버라이딩한 메서드를 호출하는 것이 디폴트 동작이기 때문에 다소 차이가 있습니다.&lt;/p&gt;&lt;h2&gt;다형성과 가상함수&lt;/h2&gt;&lt;p&gt;상속을 통해 타입계층을 구성하고 다형성을 구현하려면 하위타입을 상위타입으로 업캐스팅했을 때, 오버라이딩된 메서드가 호출될 수 있어야 합니다.&lt;/p&gt;&lt;p&gt;예를 들어, 아래와 같이 복수의 &lt;code&gt;Penguin&lt;/code&gt;과 &lt;code&gt;Bird&lt;/code&gt; 객체를 함께 관리한다고 했을 때,
각 객체의 실제 타입을 무시하고 무조건 &lt;code&gt;Bird&lt;/code&gt; 객체로서 활용된다면 이는 다형성이라고 볼 수 없습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Bird&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; birds&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
birds&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Penguin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
birds&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Bird&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
birds&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Penguin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    birds&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] I&amp;#x27;m a bird. I can fly!&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] I&amp;#x27;m a bird. I can fly!&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] I&amp;#x27;m a bird. I can fly!&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다형성이라는 개념은 차치하더라도, 동일한 객체가 어떠한 타입의 변수에 할당되었는지에 따라
매번 다른 메서드를 호출한다는 점 자체도 문제라고 느낄 수 있습니다.&lt;/p&gt;&lt;p&gt;그러한 맥락에서 C++은 &lt;code&gt;virtual&lt;/code&gt; 키워드를 통해
특정 객체가 어떠한 타입의 포인터 변수에 할당되었는지와는 무관하게 무조건 오버라이딩된 메서드를 호출하도록 강제할 수 있습니다.
이처럼 포인터가 가리키는 실제 객체의 타입을 기준으로 호출 대상을 고르는 메서드를 &lt;strong&gt;가상함수(virtual function)&lt;/strong&gt;라고 부릅니다.
그리고 하나 이상의 가상함수를 지닌 클래스는 &lt;strong&gt;가상 클래스(polymorphic class)&lt;/strong&gt;라고 부릅니다&lt;/p&gt;&lt;p&gt;아래는 &lt;code&gt;fly&lt;/code&gt; 메서드를 가상함수로 정의한 예시입니다.
상위클래스 &lt;code&gt;Bird&lt;/code&gt; 쪽에 &lt;code&gt;virtual&lt;/code&gt; 키워드를 추가해주면,
하위클래스들 쪽에 별도의 처리를 하지 않더라도 해당 메서드는 전부 자동으로 가상함수로 간주됩니다.
즉, 상위클래스가 가상클래스면 이를 상속한 하위클래스들도 자동으로 가상 클래스가 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;virtual&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;I&amp;#x27;m a bird. I can fly!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Penguin&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token base-clause&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;I&amp;#x27;m a penguin. I can not fly!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 &lt;code&gt;Bird&lt;/code&gt;로 업캐스팅되었더라도 &lt;code&gt;Penguin&lt;/code&gt; 객체들은 오버라이딩된 메서드가 호출됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;Bird&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; birds&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
birds&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Penguin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
birds&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Bird&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
birds&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Penguin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    birds&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] I&amp;#x27;m a penguin. I can not fly!&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] I&amp;#x27;m a bird. I can fly!&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] I&amp;#x27;m a penguin. I can not fly!&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;참고로 Java의 경우 모든 메서드들이 가상함수로 정의됩니다.
이러한 면에서 Java는 분명히 C++에 비해 성능은 저하되지만, 개발 생산성은 높다고 볼 수 있습니다. &lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001589147&quot;&gt;윤성우의 열혈 C++ 프로그래밍&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[C++] 복사 생성자 문법]]></title><description><![CDATA[C++의 복사 생성자는 매개변수로 같은 타입의 객체를 넘겨받고 그 내용을 복사하여 생성하는 생성자입니다. 복사 생성자의 호출 시점, 디폴트 복사 생성자, 얕은 복사와 깊은 복사, explicit 키워드에 대해 정리하겠습니다.]]></description><link>https://bugoverdose.github.io/development/cpp-copy-constructor-syntax/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/cpp-copy-constructor-syntax/</guid><pubDate>Tue, 28 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;복사 생성자&lt;/h2&gt;&lt;p&gt;C++의 복사 생성자(copy constructor)는 매개변수로 같은 타입의 객체를 넘겨받고 그 내용을 복사하여 생성하는 생성자입니다.&lt;/p&gt;&lt;p&gt;예를 들어, 아래의 &lt;code&gt;SimpleClass&lt;/code&gt; 클래스에는 두 종류의 생성자가 있습니다.
이 중 13~17행의 복사 생성자는 매개변수로 넘겨받은 &lt;code&gt;obj&lt;/code&gt; 객체에 대한 정보를 출력하고,
넘겨받은 객체의 &lt;code&gt;num&lt;/code&gt; 값을 새로운 객체의 &lt;code&gt;num&lt;/code&gt; 필드에 할당하고 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;namespace&lt;/span&gt; std&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SimpleClass&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;SimpleClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Create new object&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      &lt;span class=&quot;token comment&quot;&gt;// 복사 생성자&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      &lt;span class=&quot;token function&quot;&gt;SimpleClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; SimpleClass &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;        cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Create copy of &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;      &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;AddNum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        num &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PrintData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;아래는 &lt;code&gt;SimpleClass&lt;/code&gt; 클래스의 생성자들을 호출하는 예시입니다.
1행에서는 일반적인 생성자로 &lt;code&gt;obj1&lt;/code&gt; 객체를 생성하고,
2행에서는 복사 생성자를 활용하여 &lt;code&gt;obj1&lt;/code&gt;의 기반의 &lt;code&gt;obj2&lt;/code&gt; 객체를 생성하고 있습니다.
이 둘은 분명히 별도의 객체입니다.
메모리 주소도 서로 다르고, &lt;code&gt;obj1&lt;/code&gt;를 수정했을 때 &lt;code&gt;obj2&lt;/code&gt;에 영향이 가지도 않습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;SimpleClass obj1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SimpleClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] Create new object&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;SimpleClass obj2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SimpleClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] Create copy of 0x16dcaad98&lt;/span&gt;&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;obj1 : &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] obj1 : 0x16d1d2d98&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;obj2 : &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] obj2 : 0x16d1d2d94&lt;/span&gt;
obj1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;AddNum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
obj1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PrintData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 15&lt;/span&gt;
obj2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PrintData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 10&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;또한 &lt;code&gt;const&lt;/code&gt; 키워드가 없어도 문제 없지만,
복사 과정에서 실수로라도 원본을 변형시키지 않도록 추가하는 것이 권장됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token function&quot;&gt;SimpleClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; SimpleClass &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Create copy of &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;디폴트 복사 생성자&lt;/h2&gt;&lt;p&gt;이때 유의해야 하는 점은 클래스 내에 복사 생성자가 정의되지 않은 경우
컴파일러가 자동으로 &lt;strong&gt;디폴트 복사 생성자&lt;/strong&gt;를 생성해준다는 점입니다.&lt;/p&gt;&lt;p&gt;예를 들어, 위에서 활용한 &lt;code&gt;SimpleClass&lt;/code&gt; 클래스에서 복사 생성자 부분을 주석처리하더라도
디폴트 복사 생성자가 추가되기 때문에 아래와 같은 코드가 문제 없이 컴파일되고 실행됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;SimpleClass obj1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SimpleClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] Create new object&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;SimpleClass obj2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SimpleClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;obj1 : &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] obj1 : 0x16d1d2d98&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;obj2 : &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] obj2 : 0x16d1d2d94&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 컴파일러가 생성해주는 &lt;strong&gt;디폴트 복사 생성자는 무조건 얕은 복사를 실행&lt;/strong&gt;한다는 점에 유의해야 합니다.&lt;/p&gt;&lt;h2&gt;얕은 복사와 깊은 복사&lt;/h2&gt;&lt;p&gt;아래 &lt;code&gt;Integer&lt;/code&gt; 클래스는 &lt;code&gt;int&lt;/code&gt; 타입의 데이터에 대한 포인터를 멤버 변수로 지닙니다.
만일 별도로 복사 생성자를 정의하지 않으면, 주석처리한 내용이 자동으로 추가됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 얕은 복사 기반의 복사 생성자&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// Integer(Integer &amp;amp;other): value(other.value)&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// {}&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ChangeValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;아래 예시를 보면 분명 &lt;code&gt;int1&lt;/code&gt;과 &lt;code&gt;int2&lt;/code&gt;는 별개의 객체이지만, 내부적으로 &lt;code&gt;value&lt;/code&gt; 멤버변수는 동일한 대상을 가리키고 있습니다.
때문에 둘 중 한 쪽의 &lt;code&gt;value&lt;/code&gt; 값이나, 원본인 &lt;code&gt;num&lt;/code&gt;을 직접 수정하면 양쪽 모두에 영향이 갑니다.
복사 생성자에서 &lt;strong&gt;얕은 복사&lt;/strong&gt;로 멤버를 복제하기 때문입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Integer &lt;span class=&quot;token function&quot;&gt;int1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
Integer int2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;int1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 다름!&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;int1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x16ae56d90&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;int2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x16ae56d88&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 같음!&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;int1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x16ae56d98&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;int2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x16ae56d98&lt;/span&gt;

int1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;int1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 20&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;int2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 20&lt;/span&gt;

num &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;int1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 30&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;int2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 30&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;만일 이러한 동작 방식을 희망하지 않는다면
아래와 같이 &lt;strong&gt;깊은 복사&lt;/strong&gt; 기반의 복사 생성자를 구현하면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DeepCopyInteger&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;DeepCopyInteger&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 깊은 복사 기반의 복사 생성자&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;DeepCopyInteger&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;DeepCopyInteger &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;other&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; copy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;other&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;copy&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ChangeValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;아래 예시를 보면 &lt;code&gt;int1&lt;/code&gt;과 &lt;code&gt;int2&lt;/code&gt; 내부의 &lt;code&gt;value&lt;/code&gt; 멤버변수들까지 별도의 대상을 가리키고 있음을 알 수 있습니다.
때문에 둘 중 한 쪽의 &lt;code&gt;value&lt;/code&gt; 값을 수정하더라도 다른 쪽에는 영향이 가지 않습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
DeepCopyInteger &lt;span class=&quot;token function&quot;&gt;int1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
DeepCopyInteger int2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;int1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 다름!&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;int1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x16f0dad90&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;int2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x16f0dad88&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 다름!&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;int1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x16f0dad98&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;int2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 0x130606a50&lt;/span&gt;

int1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;int1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 20&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;int2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 10&lt;/span&gt;

int2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;int1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 20&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;int2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] 30&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;복사 생성자 호출 시점&lt;/h2&gt;&lt;p&gt;그동안의 예시들에서는 명시적으로 복사 생성자를 호출했습니다.
그러나 실제로는 보다 다양한 상황들에서 복사 생성자가 자동으로 호출됩니다.
복사 생성자의 호출 빈도는 프로그램의 성능과 관련이 있기 때문에 이에 대해 이해하는 것은 중요합니다.&lt;/p&gt;&lt;p&gt;기본적으로 &lt;strong&gt;메모리 공간의 할당과 초기화가 동시에 일어나는 상황&lt;/strong&gt;들에서
복사 생성자가 호출될 수 있습니다. 이러한 상황은 크게 세 가지로 구분됩니다.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;기존에 생성된 객체를 이용하여 새로운 객체를 초기화하는 경우&lt;/li&gt;&lt;li&gt;Call-by-value 방식의 함수 호출 과정에서 객체를 인자로 전달하는 경우&lt;/li&gt;&lt;li&gt;객체를 반환하되, 참조형으로 반환하지 않는 경우&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;아래 예제를 실행해보면 이 세 가지 케이스를 개별적으로 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;namespace&lt;/span&gt; std&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SimpleClass&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;SimpleClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Create new object: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 복사 생성자&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;SimpleClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; SimpleClass &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Create copy of &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

SimpleClass &lt;span class=&quot;token function&quot;&gt;PassAndReturn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SimpleClass ob &lt;span class=&quot;token comment&quot;&gt;/* [출력] Create copy of 0x16d9fad9a: 0x16d9fad98 */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
  cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;passed ob: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ob&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] passed ob: 0x16d9fad98&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; ob&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] Create copy of 0x16d9fad98: 0x16d9fad99&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    SimpleClass ob1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] Create new object: 0x16d9fad9b&lt;/span&gt;
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ob1: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ob1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] ob1: 0x16d9fad9b&lt;/span&gt;
    SimpleClass ob2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ob1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] Create copy of 0x16d9fad9b: 0x16d9fad9a&lt;/span&gt;
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ob2: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ob2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] ob2: 0x16d9fad9a&lt;/span&gt;
    SimpleClass ob3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PassAndReturn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ob2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;returned ob3: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ob3&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] returned ob3: 0x16d9fad99&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;각 케이스별로 분석해봅시다.&lt;/p&gt;&lt;p&gt;우선 아래 부분에서는 기존에 생성된 &lt;code&gt;ob1&lt;/code&gt; 객체를 활용하여 새로운 객체를 생성하고 &lt;code&gt;ob2&lt;/code&gt;에 할당하고 있습니다.
&lt;code&gt;ob2&lt;/code&gt;라는 메모리 공간이 할당되면서 초기화되므로 복사 생성자가 호출됩니다.
Java와 같은 고수준 언어에 익숙하다면 새로운 객체가 생성된다는 점 자체가 의아할 수 있지만,
객체의 포인터가 아니라 객체 값 자체를 활용하고 있다는 점에 초점을 맞추면 쉽게 이해할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;SimpleClass ob1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] Create new object: 0x16d9fad9b&lt;/span&gt;
SimpleClass ob2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ob1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] Create copy of 0x16d9fad9b: 0x16d9fad9a&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음으로 &lt;code&gt;PassAndReturn&lt;/code&gt; 함수는 Call-by-value 방식으로 호출되고 있습니다.
함수의 인자로 전달된 &lt;code&gt;ob2&lt;/code&gt; 객체를 활용하여 복사 생성자가 호출되고, &lt;code&gt;ob&lt;/code&gt; 매개변수에 새로운 객체가 할당됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;SimpleClass &lt;span class=&quot;token function&quot;&gt;PassAndReturn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SimpleClass ob&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// [출력] Create copy of 0x16d9fad9a: 0x16d9fad98&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 인자 ob2: 0x16d9fad9a&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 매개변수 ob: 0x16d9fad98&lt;/span&gt;
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;passed ob: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ob&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] passed ob: 0x16d9fad98&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;마지막으로 &lt;code&gt;PassAndReturn&lt;/code&gt; 함수는 객체의 값을 반환하되, 참조형으로 반환하지 않고 있습니다.
이 과정에서 &lt;code&gt;ob&lt;/code&gt; 객체를 활용하여 복사 생성자가 호출되고, 새로운 객체가 반환되어 지역변수 &lt;code&gt;ob3&lt;/code&gt;에 할당됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;SimpleClass &lt;span class=&quot;token function&quot;&gt;PassAndReturn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SimpleClass ob&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;passed ob: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ob&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] passed ob: 0x16d9fad98&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; ob&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] Create copy of 0x16d9fad98: 0x16d9fad99&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 매개변수 ob: 0x16d9fad98&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 반환값: 0x16d9fad99&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
    SimpleClass ob3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PassAndReturn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ob2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;returned ob3: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ob3&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [출력] returned ob3: 0x16d9fad99&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;복사 생성자의 매개변수는 참조형&lt;/h2&gt;&lt;p&gt;참고로 복사 생성자의 매개변수는 반드시 참조형이어야 합니다. 예를 들어 아래와 같은 클래스는 컴파일 시점에 실패합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SimpleClass&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;SimpleClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 에러 메시지: copy constructor must pass its first argument by reference&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;SimpleClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SimpleClass obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;컴파일러에서 에러를 뱉는 이유는 간단합니다. 해당 케이스를 막지 않는다면 무한루프에 빠질 수 있기 때문입니다.
Call-by-value 방식의 함수 호출 과정에서 객체를 인자로 전달하면 복사 생성자가 호출되는데,
복사 생성자를 다시 Call-by-value 방식으로 호출한다면 무한루프에 빠질 수 있습니다.&lt;/p&gt;&lt;h2&gt;묵시적 변환과 explicit 키워드&lt;/h2&gt;&lt;p&gt;C++에서는 아래와 같이 두 가지 방식으로 변수 및 참조자를 선언 및 초기화할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ref1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다른 언어에 익숙하다면 대입연산자(&lt;code&gt;=&lt;/code&gt;)를 활용한 초기화 방법이 익숙할 수 있습니다.
그런데 복사 생성자에서는 조금 상황이 다를 수 있습니다.&lt;/p&gt;&lt;p&gt;아래 2행에서는 복사 생성자가 호출되고 있다는 점을 쉽게 파악할 수 있습니다.
그러나 3행과 같이 대입연산자(&lt;code&gt;=&lt;/code&gt;)로 객체에 객체를 할당할 경우,
내부적으로 복사 생성자를 호출하는 문법으로 묵시적으로 변환되어 실행됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;SimpleClass &lt;span class=&quot;token function&quot;&gt;ob1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
SimpleClass &lt;span class=&quot;token function&quot;&gt;ob2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ob1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
SimpleClass ob3&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;ob1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// SimpleClass ob3(ob1);로 묵시적 변환&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;복사 생성자의 예상치 못한 호출은 프로그램의 성능을 떨어뜨립니다.
때문에 개발자가 복사 생성자의 호출 여부를 쉽게 파악할 수 있는 것이 이상적입니다.
그러한 점에서 복사 생성자에 &lt;code&gt;explicit&lt;/code&gt; 키워드를 추가해주면
대입연산자를 통한 묵시적 변환을 컴파일 시점에 막을 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SimpleClass&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;explicit&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SimpleClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SimpleClass &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001589147&quot;&gt;윤성우의 열혈 C++ 프로그래밍&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[C++] 참조자 문법 정리]]></title><description><![CDATA[C++에서 참조자는 특정 변수가 가리키는 메모리 공간을 가리키는 또 하나의 식별자를 생성하는 문법입니다. 포인터와의 차이점, const 참조자, 선언 가능 범위, 매개변수 및 반환형 위치의 참조자 등에 대해 정리해보고자 합니다.]]></description><link>https://bugoverdose.github.io/development/cpp-reference-syntax/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/cpp-reference-syntax/</guid><pubDate>Mon, 06 May 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;C++에서 참조자(reference)는 특정 변수가 가리키는 메모리 공간을 가리키는 또 하나의 식별자를 생성하는 문법입니다.
C, Go 언어에는 없는 문법이고 개인적으로 헷갈리기 때문에 체계적으로 정리해보고자 합니다.&lt;/p&gt;&lt;h2&gt;참조자와 포인터&lt;/h2&gt;&lt;p&gt;참조자는 &lt;code&gt;&amp;amp;&lt;/code&gt; 연산자를 활용한다는 점에서 포인터와 혼동될 수 있으나, 사실상 별개의 개념입니다.&lt;/p&gt;&lt;p&gt;이미 선언된 변수에 &lt;code&gt;&amp;amp;&lt;/code&gt; 연산자가 오면 변수의 주소 값의 반환을 의미하지만,
새로 선언되는 변수의 이름 앞에 &lt;code&gt;&amp;amp;&lt;/code&gt; 연산자가 오면 참조자의 선언을 의미합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ptr&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 변수 num의 주소값을 포인터 ptr에 저장&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 변수 num에 대한 참조자 ref를 선언&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;num에 대한 참조자 ref를 선언하면 num과 ref는 동일한 메모리 공간에 직접적으로 접근합니다.
아래 예시 코드를 실행해보면 num과 ref에 대한 메모리 주소 값이 동일하며,
num이나 ref 중 하나를 수정했을 때 다른 변수에 담긴 값도 함께 수정됨을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 이후 예시들에서는 아래 두 줄을 생략하겠습니다.&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt; &lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;namespace&lt;/span&gt; std&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 가독성 상승을 위해 namespace 전체를 활용합니다&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ref: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// num: 0x16b3dec38&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ref: 0x16b3dec38&lt;/span&gt;

    num&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;val: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ref: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// val: 200&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ref: 200&lt;/span&gt;

    ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;val: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ref: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// val: 300&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ref: 300&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;참조자와 new 연산자&lt;/h3&gt;&lt;p&gt;참고로 C++에서는 포인터 연산 없이도 힙에 할당된 변수에 접근할 수 있습니다.
C++에서 new 연산자를 이용해서 힙 영역에 할당된 메모리 공간은 일반적인 변수로 간주하며, 이에 대해 참조자 선언이 가능하기 때문입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ptr&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ptr&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 힙 영역에 할당된 변수에 대한 참조자 선언&lt;/span&gt;
ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ref: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;*ptr: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ptr&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ref: 20&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// *ptr: 20&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;참조자의 선언 가능 범위&lt;/h2&gt;&lt;p&gt;참조자는 변수에 대해 별명을 부여하는 것으로 비유할 수 있습니다.
동일한 사람이 다양한 별명을 지닐 수 있듯이, 하나의 변수에 대해 복수의 참조자를 생성할 수 있습니다.
즉, 참조자의 수에는 제한이 없습니다. 또한 참조자를 대상으로 참조자를 선언할 수도 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num3&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num4&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;num3&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num1: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num2: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num3: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num3&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num4: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num4&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num1: 100&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num2: 100&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num3: 100&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num4: 100&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;참조자는 선언됨과 동시에 특정 대상을 참조해야만 합니다.
미리 참조자를 선언했다가 향후 참조 대상을 할당하는 것은 불가능하며,
참조자를 선언하면서 NULL로 초기화하는 것도 불가능합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 컴파일 실패&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 컴파일 실패&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;마지막으로 참조자는 배열의 요소나 포인터 변수에 대해서도 선언될 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; arr&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;first&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;arr&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;second&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;arr&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;third&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;arr&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;first: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;first&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;second: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;second&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;third: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;third&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// first: 1&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// second: 3&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// third: 5&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ptr&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ptrRef&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;ptr&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ptr: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ptr&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;ptrRef: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ptrRef&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ptr: 10&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ptrRef: 10&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;const 참조자&lt;/h2&gt;&lt;p&gt;const 참조자란 간단히 말해 상수화된 변수에 대한 참조자 선언을 의미합니다.
아래와 같이 const 선언을 통해 변수 num을 상수화한 경우,
num에 대한 참조자 ref를 활용하여 num의 값을 수정하는 것을 허용해서는 안 됩니다.
때문에 아래와 같은 코드는 컴파일되지 않습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 컴파일 실패&lt;/span&gt;
ref&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이때 자신이 참조하는 대상을 변경할 수 없는 const 참조자로 선언하는 방식으로
변수화된 상수에 대한 참조가 가능해집니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref1&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;기본적으로 참조자는 변수에 대해서만 선언이 가능하며, 상수를 대상으로 선언할 수는 없습니다.
다만, const 참조자의 경우 상수에 대해 선언할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 컴파일 실패&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;참조자와 함수&lt;/h2&gt;&lt;p&gt;함수에서 참조자가 어떻게 활용되며 어떠한 무엇에 주의해야 하는지 알아봅시다.&lt;/p&gt;&lt;h3&gt;매개변수 위치의 참조자&lt;/h3&gt;&lt;p&gt;참조자는 선언과 동시에 변수로 초기화되어야 합니다.
그런데 매개변수는 함수가 호출되는 시점에 전달되는 인자로 초기화가 진행되는 변수입니다.
때문에 매개변수 선언 위치에 참조자를 위치시켜도 아무런 문제가 없습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SwapByRef&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; temp&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;ref1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    ref1&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;ref2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    ref2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;temp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 매개변수로 참조자를 선언할 수 있기 때문에 C++에서는 &lt;strong&gt;참조자 기반의 Call-by-reference&lt;/strong&gt;를 허용합니다.
즉, 주소의 값이 아니라 아래와 같이 변수의 참조자를 함수에 전달함으로써
함수 내부에서 함수 외부의 변수를 수정할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; val1&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; val2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;SwapByRef&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;val1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;val1: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;val1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;val2: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;val2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// val1: 20&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// val2: 10&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다만, 참조자 기반의 Call-by-reference이 가능하다는 점을 C++의 문제점이라고 생각하는 관점도 존재합니다.
예를 들어 아래와 같은 코드가 있을 때,
C 언어의 경우 포인터를 통해 주소 값을 넘기지 않았기 때문에
당연히 인자로 전달한 지역변수 num이 수정되지 않았을 것이라 보장할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;Do&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 1&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 C++는 다릅니다. Do 함수의 매개변수가 참조자로 선언되었을 수 있으므로
&lt;strong&gt;인자로 넘겨진 변수를 함수 내부에서 수정할 가능성이 존재&lt;/strong&gt;합니다.
때문에 함수의 호출부만이 아니라 호출되는 함수의 본문까지도 확인해봐야 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Do&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    ref&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Do&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;ref&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 2&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;물론 const 선언을 통해 매개변수로 전달되는 참조자의 수정을 예방할 수도 있습니다.
즉, 함수의 시그니처만 보았을 때 매개변수가 수정되지 않음을 보장할 수 있기는 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Do&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    ref&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 컴파일 에러&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 함수의 호출부만으로
Call-by-value인지 참조자 기반의 Call-by-reference인지 판단할 수 없다는
문제점은 C++에 여전히 존재합니다.&lt;/p&gt;&lt;h3&gt;참조형 반환&lt;/h3&gt;&lt;p&gt;우선 반환형이 참조형이 아니라 기본 자료형인 경우를 생각해봅시다.
아래 Func 함수는 분명히 매개변수로 전달받은 참조자를 반환하지만,
반환형이 기본 자료형 &lt;code&gt;int&lt;/code&gt;이기 때문에 참조자가 참조하는 변수에 저장된 값이 반환됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    ref&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; ref&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이로 인해 아래 예시에서 num1과 Func의 반환 값이 담긴 num2는 다른 메모리 주소 값을 지니며,
서로 별개의 변수로 간주됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

num1&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
num2&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num1: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num2: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num1: 12&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num2: 102&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num1: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num2: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num1: 0x16f9f2c38&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num2: 0x16f9f2c34&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;또한 반환형이 참조형이 아니기 때문에 일반적인 상수로 간주되고, 참조자로 선언할 수도 없습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 컴파일 에러&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;한편, 함수의 반환형으로 참조형을 선언하는 경우를 생각해봅시다.
&lt;code&gt;int&amp;amp;&lt;/code&gt;와 같이 기본 자료형 뒤에 &lt;code&gt;&amp;amp;&lt;/code&gt; 연산자가 추가된 형태로 선언해주기만 하면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;RefReturnFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    ref&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; ref&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 함수를 호출하는 쪽에서 반환값을 다시 참조자로 선언할 경우,
인자로 전달한 변수와 전달받은 반환값은 정확히 동일한 메모리 주소 값을 가리키며,
둘 중 하나를 수정했을 때 다른 쪽도 함께 수정됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;RefReturnFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

num1&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
num2&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num1: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num2: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num1: 112&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num2: 112&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num1: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num2: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num1: 0x16d042c38&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num2: 0x16d042c38&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 때 주의할 점은 참조형으로 반환된 값을 참조자가 아니라 일반 변수 num2로 선언하여 저장하는 경우,
인자로 전달했던 num1과 전혀 다른 변수가 된다는 점입니다.
이는 참조형이 아닌 기본 자료형으로 반환했던 위의 Func 함수와 정확히 동일한 결과가 나옵니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;RefReturnFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

num1&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
num2&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num1: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num2: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num1: 12&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num2: 102&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num1: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num2: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num1: 0x16f9f2c38&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num2: 0x16f9f2c34&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;정리해보자면 매개변수로 전달받은 인자를 참조자로 선언하고,
이를 참조형으로 반환하고, 반환값을 다시 참조자로 선언할 경우,
매개변수로 넘긴 지역변수(num1)와 반환값(num2)은 서로 동일한 메모리 주소를 가리키게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num1&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num2&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;RefReturnFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num3&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;RefReturnFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num4&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;num1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// int &amp;amp;num5=Func(num1); // 컴파일 에러&lt;/span&gt;

cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num1: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num1&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num2: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num3: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num3&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// num1과 메모리 주소 일치&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num4: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;num4&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num1: 0x16b87ac38&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num2: 0x16b87ac34&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num3: 0x16b87ac38&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num4: 0x16b87ac24&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;지역변수의 참조형 반환&lt;/h3&gt;&lt;p&gt;마지막으로 C++에서 주의해야 하는 코드를 한 번 봐봅시다.&lt;/p&gt;&lt;p&gt;아래 RefReturnFunc 함수는 함수 내부에서 선언된 지역변수 num에 저장된 값인 30을 반환하는 것이 아니라
지역변수 num을 참조형으로 반환하고 있습니다.
이때 문제는 함수가 반환된 이후, 지역변수 num은 소멸된다는 점입니다.
따라서 이는 잘못 작성된, 위험한 코드라고 볼 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;LocalRefReturnFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    num&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 이 구조의 가장 무서운 점은 컴파일러가 실패하지 않는다는 점입니다.
때문에 아래 코드의 경우 런타임에 소멸될 예정이지만 아직 소멸되지 않은 num 변수의 데이터가 출력될 때도 있고,
기대한 바와 다른 결과가 출력될 수도 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;cpp&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-cpp line-numbers&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; num&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;LocalRefReturnFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
cout&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;num: &amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;num&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;endl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num: 30&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// num: ??&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;사실 참조자의 사용을 지양하는 C++ 프로그래머들도 존재합니다.
위에서 언급했듯이 함수의 호출부만 보았을 때 인자로 넘긴 값이 수정되었을지 판단할 수 없다는 문제나,
지역변수를 참조형으로 반환하는 등 다양한 문제를 경험할 수 있기 때문입니다.&lt;/p&gt;&lt;p&gt;그러나 타인이 작성한 소스코드에서 참조자 문법을 접했을 때 문제 없이 이해할 수 있도록
기본 문법에 대해 숙지해놓을 필요성은 있다고 생각합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001589147&quot;&gt;윤성우의 열혈 C++ 프로그래밍&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[OMSCS] 조지아텍 컴퓨터공학 석사 과정 준비 및 합격 후기]]></title><description><![CDATA[직장 생활과 병행하면서 대학원 석사 과정을 이수하기 위해 조지아텍에 지원했고 합격했습니다. 합격 당시 스펙을 궁금해하는 사람들이 있어 준비 과정을 간략히 공유합니다.]]></description><link>https://bugoverdose.github.io/essay/georgia-tech-admission-review/</link><guid isPermaLink="false">https://bugoverdose.github.io/essay/georgia-tech-admission-review/</guid><pubDate>Fri, 12 Apr 2024 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;조지아텍 지원 동기&lt;/h2&gt;&lt;p&gt;대학원 진학을 위해 다양한 선택지를 탐색하였고,
최종적으로 조지아텍 Online Master of Science in Computer Science (이하, OMSCS) 과정에 지원하였습니다.&lt;/p&gt;&lt;p&gt;조지아텍 OMSCS 과정의 가장 큰 장점은 두 가지입니다.
우선 직장 생활과 병행할 수 있습니다. 평일에는 회사를 다니고,
주말에 온라인으로 강의를 수강하고 과제를 제출하는 것만으로도 학점을 채울 수 있습니다.
또한 학비가 저렴합니다. 한 달치 월급만으로도 1년치 학비를 부담할 수 있을 정도입니다.
졸업하기 위해 최소 수천만원은 필요한 다른 미국 대학원들에 비해 압도적으로 저렴하기 때문에 다른 선택지를 고르기 어려웠습니다.&lt;/p&gt;&lt;p&gt;물론 MIT와 같은 다른 명문대들이나 제 모교 대학원에 지원하는 선택지도 있었습니다.
실제로 조지아텍은 &amp;quot;미국 남부 최고의 명문 공대&amp;quot;라는 타이틀을 지니고 있지만 많은 지원자들이 다른 곳들도 함께 지원한다고 합니다.&lt;/p&gt;&lt;p&gt;그러나 직장 생활을 그만두면서까지 대학원생이 되고 싶지는 않았기 때문에
저에게 주어진 선택지들 중에서는 조지아텍이 가장 합리적이라 판단됩니다.&lt;/p&gt;&lt;h2&gt;공인 어학 성적&lt;/h2&gt;&lt;p&gt;일반적으로 미국 대학원에 진학하려면 GRE라는 시험을 봐야 하는데, 조지아텍 OMSCS 과정에서는 불필요합니다.
다만, 영어로 진행되는 강의에 따라올 수 있는 능력이 있는지 판단하기 위해 공인 어학 성적을 요구합니다.&lt;/p&gt;&lt;p&gt;공인 어학 성적으로는 TOEFL과 IELTS라는 두 시험만을 인정해주며, 둘 중 하나만 응시하면 됩니다.
요구되는 점수는 매 학기마다 달라질 수 있으므로
&lt;a href=&quot;https://grad.gatech.edu/degree-programs/computer-science-online&quot;&gt;홈페이지&lt;/a&gt;를 참고하기 바랍니다.
참고로 토플 최소 점수 조건에 미달했지만 합격한 케이스도 존재하므로, 최소 조건만 맞추면 그 이상은 크게 신경 쓸 필요가 없는 듯합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/229daaf843a4456064d5d58191ed1680/b97f6/standardized-tests.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:123.92638036809815%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAABYlAAAWJQFJUiTwAAACxUlEQVQ4y51Va1PaUBTM//8X1pl26qDUd9U6tgoRQxIghGcIeZEE8NX+gu3siRd1RLD9sHPvzSR7z9mz50Q7PD7Al6+fsb1TwqfNDWyXt7GxuYHyblmefdstY6u0hdJOCQOvj3yWYZIlSPPJUmh6rSok+wd72D/cw8nZd5z+OMXxyRHOL85hmAYOjw5wenbyMcJ2x8FV9RKNlo2qXsGNUQMvcbttPP55wOx2ioff97h/vFtLJoR8IZ5ECOMQQTjGOPQRRGP4wQhhFAhBksYCRbYywkkWw/P7MK06rIYJx21JtE2nIcimqRAorIpOCNMsgecP5GOSEUyX6PY6EpkiXUf2itBu2kLiuA66/S6obX/QEwkoiUr1ZdrLzlqaxRh4PUmXYLpc7aaFin6Fm3oNo7EnHykdV0GKwpSSNJK0SURSRmg3LIRxgPndTCo8nefvIpulz1Xmhh9KIVoNISQxJaAUfN5qNxd7uaxpLzRX+veHPWiMjshnqZBSMwVlF9qIaQ9HA3j+cLHnyjP3fD9KQmg0Mo1dva7g5+UF9Jouxr68+oWKXpGV0UlaT5e/B0lZmVndxHUc+K8iYOT5PBMd1ce8QJ1VBxVVzhPESfBkmRashoW6aaDlNMVCjE5V3rTrohf3fKduGdIQfB4l0ZMP84lEQnsY9ZuFmRkVtXtGceZzpbU6c1XF1Qp/JRiNh1I90y686I2Gkko6nazVTum38CEP7AaWvbCEhU7XfdMR6/DKh1ESoDcoWo66tTttSX3ddFk6vl4SMjrVLf9NSFDcTs+VipGQdvnI/HtDyIl8ez/HdJ5Jteg/RsoL/mVsLQjpK/26ippxLdFZtileWzVZVkWtMc1Gq2h+KYbrSIWXTpfbfG3UWpGqL1WlwWkdDlZVaXYPK09wEtHQq0ilKH7gwe26oh9/ld1+R8A9QU0JtmcUhytT/gvhuv5E/YbtzQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;standardized tests&quot; title=&quot;standardized tests&quot; src=&quot;/static/229daaf843a4456064d5d58191ed1680/a6d36/standardized-tests.png&quot; srcSet=&quot;/static/229daaf843a4456064d5d58191ed1680/222b7/standardized-tests.png 163w,/static/229daaf843a4456064d5d58191ed1680/ff46a/standardized-tests.png 325w,/static/229daaf843a4456064d5d58191ed1680/a6d36/standardized-tests.png 650w,/static/229daaf843a4456064d5d58191ed1680/b97f6/standardized-tests.png 958w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;제가 지원하던 당시에는 토플 90점이 필요했으며, 저는 추석 연휴 중 3일 간 벼락치기로 독학을 하여 104점을 받았습니다.
성인이 되어 처음으로 응시한, 제 인생 두 번째 토플치고는 나쁘지 않았다고 생각합니다.
참고로 말하기 영역과 쓰기 영역에서 AI의 채점 기준을 잘 모르겠어서 객관식 문항들로 구성된 읽기 영역과 듣기 영역에 몰빵했습니다.
자세한 이야기는 &lt;strong&gt;&lt;div to=&quot;/essay/toefl-home-edition-retrospective&quot;&gt;토플 홈 에디션 후기편&lt;/div&gt;&lt;/strong&gt;를 참고하기 바랍니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/26a70c4b117ba3c72e5d3486cd5538db/41045/toefl-scores.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:30.061349693251532%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABAElEQVQY04WOyU4DMRBE5/8/hy8AceCAxAEEEigsAXKYxTPjWe1u2w/FCVHEhZJK1a8st128fX1jjMF5zyLC5IXZCyFGUkrElHL+Ov7p4p8sunlmGCc6a2mspVsWJhF8CGiM2XI2/8dFby1929G2LU3dMA4D6oW99i+elHJxyFOXDj4qL/SqvJcl47ISgXKwlMYQSISUsG6l6fv840hiVqHqWlzQzGsI+dypHha+1A0Xj09syooK5abecb37YBscdRRuu4rLzw2vsmCicDcYrrYbnv1IG4X7pc/8sFrGoBST9zjn8SIMKhhxtOKxKkyqR3aZ5zPu1DMHzXN7vLOq8gP6GdEOpBvZRwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;toefl-scores&quot; title=&quot;toefl-scores&quot; src=&quot;/static/26a70c4b117ba3c72e5d3486cd5538db/a6d36/toefl-scores.png&quot; srcSet=&quot;/static/26a70c4b117ba3c72e5d3486cd5538db/222b7/toefl-scores.png 163w,/static/26a70c4b117ba3c72e5d3486cd5538db/ff46a/toefl-scores.png 325w,/static/26a70c4b117ba3c72e5d3486cd5538db/a6d36/toefl-scores.png 650w,/static/26a70c4b117ba3c72e5d3486cd5538db/e548f/toefl-scores.png 975w,/static/26a70c4b117ba3c72e5d3486cd5538db/3c492/toefl-scores.png 1300w,/static/26a70c4b117ba3c72e5d3486cd5538db/41045/toefl-scores.png 2434w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;참고로 많은 지원자 분들이 100점 달성시 수강료와 응시료를 무료로 환불해주는 토플 학원을 활용한다고 합니다.
전 당시에 이런게 있는 줄 몰랐고, 이미 90점을 넘겼기 때문에 굳이 토플에 시간을 더 투자하지는 않았습니다.&lt;/p&gt;&lt;p&gt;마지막으로 아까운 점은 조지아텍에 제 점수를 제출하기 위해 $20를 낭비했다는 점입니다.
토플 응시 시점에 무료로 기관들에 점수를 제출해주는 서비스가 있었는데, 이걸 활용하지 않은 것이 아쉬웠습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/75935d4206cdf96aec7dc81da3cedd10/2ef06/toefl-score-report-fee.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:18.404907975460123%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAsUlEQVQY042OTW/CMBBE8/9/G4dy6KEforQKTZXEjk0d20m8fsjmAhfESE+jGa12t9Fa45xDcibDHaUrnGMkiVCUy9wDmn4cMdbiQ2AOATfPOO/xMbKJUNZo7+uBZ9Ts2m/ereK173g5/fD5b3ibRnbHA/vftuav+Vz944aSj8FdiVffdy1NZy0xJVwI6PLpuhC2lb9hoFeKYdIoa1HWMExTZTSm9jFtLCIsklizoIzhAs4bNJcQwCOVAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;toefl-score-report-fee&quot; title=&quot;toefl-score-report-fee&quot; src=&quot;/static/75935d4206cdf96aec7dc81da3cedd10/a6d36/toefl-score-report-fee.png&quot; srcSet=&quot;/static/75935d4206cdf96aec7dc81da3cedd10/222b7/toefl-score-report-fee.png 163w,/static/75935d4206cdf96aec7dc81da3cedd10/ff46a/toefl-score-report-fee.png 325w,/static/75935d4206cdf96aec7dc81da3cedd10/a6d36/toefl-score-report-fee.png 650w,/static/75935d4206cdf96aec7dc81da3cedd10/e548f/toefl-score-report-fee.png 975w,/static/75935d4206cdf96aec7dc81da3cedd10/3c492/toefl-score-report-fee.png 1300w,/static/75935d4206cdf96aec7dc81da3cedd10/2ef06/toefl-score-report-fee.png 2448w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;컴퓨터공학 강의 수강&lt;/h2&gt;&lt;p&gt;일반적인 이공계 대학원들이 그러하듯이 조지아텍에서도
대학원 수준의 수업을 따라오기 위해 필요한 최소한의 컴퓨터공학 배경지식을 갖추고 있는지 판별하고자 합니다.
기본적으로 조지아텍 혹은 타대학 출신의 컴퓨터공학 전공자를 굉장히 높게 평가하며,
타전공생들의 경우 자신의 역량을 증명할 것을 요구합니다.&lt;/p&gt;&lt;p&gt;특히 지원자를 평가함에 있어 학부 때 어떠한 컴퓨터공학 전공 과목을 들었는지를 무엇보다도 중요시합니다.
참고로 10년 이상의 실무 경력이 있음에도 컴퓨터공학 강의를 학부 때 전혀 이수하지 않았기에 불합격한 지원자도 있었다고 합니다.&lt;/p&gt;&lt;p&gt;제가 지원했을 당시에는 어떠한 컴퓨터공학 강의를 수강했는지 세부적으로 전부 나열하라고 지시하였습니다.
세부 문항은 아래와 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;If you have a non-CS/Computer Eng./Electrical Eng. Degree, list ALL (both undergrad &amp;amp; grad, if applicable) CS course titles that you took for ACADEMIC credit.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;저의 경우 기재할 만한 과목이 하나밖에 없었기 때문에 문제였습니다.
그래서 회사를 다니면서 학점은행제로 학점을 채웠습니다.
원서 제출까지 시간이 부족해서 2023년 10월부터 2024년 2월까지 한 학기 동안 24학점을 한 번에 들었는데,
일부러 최대한 익숙한 내용의 과목들만 골랐기 때문에 큰 문제는 없었습니다.
참고로 성적 장학금을 받았습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/702bf89ac6ae355f4a257ed0b4de4b96/b1584/cs-lectures.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:83.43558282208589%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACK0lEQVQ4y3VUiY7qMAzs/3/gSgvbR6H3fV9J23kal0CBXUtWSmyNx/YEy3VD+H6M0+kfvr5O8LxInHdBkIrb9lVizA3DFL6fSPx8vuDnx8H57OD720aSZLCqqsO2AW3boWla+V6WFVprdF2Hsixxvd7g+wGSJEVTNxiGUfKY33U9xnHCPM9QSsMqyxbrumIYBvR9L990rRSqqkKWZQ/AMIqQ57kU37YN0zQLEItrvYgL4KI1yrJCludSZV03Oeu6FoDb7YYgCBHHCYqiEOYGcJrITkk+gQWQQbJrmkbAhKHeAcnwdiVggCiKkecGEBj6AeM4Qil1Z6lhZVl1BxzQtu0HIBk6zlVafmfIMXF+L4CO44H2F0MCep6HKIqQJEfAJ8P5CFgUtVRjYGe4CqhWel9Kmt4Z+m9LMYBvDM0Mya6uGyxmy1pLAcrGcz1EYYQkTaUIxyNLGafHUl4AqTu2R12x2pPh3rLregjDEDFbzo9b/gWQwp6nWSrTyZTJ2sgmyx5L4ZZfZvixlIUz3BdRlRXq+1LMS2HLBDCyIcO95X5XRtcL6K7DXYtW140ys131ShKFoYi9FEA+OZ5sn7okQ9r+3BSWZbn7CosBApiTQAzyNM+Q92RuivGOOcbMPd0yHzQOWPQWJ8jSBHlRII5jYSXs0kx+h0EgctKLxpEQ7QXwGFTzjKIsH/84lBRPtkkzzD8YvtJ+AhLItm24rgvHcXC5XMSbtsX7mI72H6x2H5b0TxIvAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;cs-lectures&quot; title=&quot;cs-lectures&quot; src=&quot;/static/702bf89ac6ae355f4a257ed0b4de4b96/a6d36/cs-lectures.png&quot; srcSet=&quot;/static/702bf89ac6ae355f4a257ed0b4de4b96/222b7/cs-lectures.png 163w,/static/702bf89ac6ae355f4a257ed0b4de4b96/ff46a/cs-lectures.png 325w,/static/702bf89ac6ae355f4a257ed0b4de4b96/a6d36/cs-lectures.png 650w,/static/702bf89ac6ae355f4a257ed0b4de4b96/e548f/cs-lectures.png 975w,/static/702bf89ac6ae355f4a257ed0b4de4b96/3c492/cs-lectures.png 1300w,/static/702bf89ac6ae355f4a257ed0b4de4b96/b1584/cs-lectures.png 1342w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이메일 및 SNS를 통해 어떤 기관에서 이수했는지에 대해 질문하시는 분들이 계셨습니다.
저는 제가 이수한 기관을 추천하지 않습니다.
가능하다면 &lt;a href=&quot;https://bank.e-koreatech.ac.kr/&quot;&gt;한국기술교육대학교 원격평생교육원&lt;/a&gt; 혹은
&lt;a href=&quot;https://www.yeogicyber.co.kr/Web/Sub/enroll-in-classes/page_01_01.asp?jun_code=ANGA#none&quot;&gt;여기스터디사이버평생교육원&lt;/a&gt;을
활용하는 것을 추천드립니다.&lt;/p&gt;&lt;h2&gt;성적증명서&lt;/h2&gt;&lt;p&gt;지원을 위한 최소 조건은 아니지만 학부 때 평균 3.0 이상의 평점을 받은 경우를 이상적으로 여긴다고 합니다.
저의 경우 학부 때는 4.3 만점인 곳에서 4.2대로 졸업하였으므로 성적증명서를 발급받아 그대로 제출하였습니다.&lt;/p&gt;&lt;p&gt;학점은행제에서 받은 성적증명서도 첨부하였는데, 영문 성적증명서가 제공되지 않아 문제였습니다.
때문에 제가 직접 번역본을 만들어서 원문과 함께 제출하였습니다.
참고로 학부 때 평균 평점이 너무 낮은 분들의 경우
평균 평점을 올리기 위해 학점은행제를 활용한다고도 합니다.&lt;/p&gt;&lt;h2&gt;이력서 및 경력기술서&lt;/h2&gt;&lt;p&gt;약간 뜬금없다고 느낄 수 있지만 조지아텍의 경우 이력서를 한 장 작성하여 제출해야 합니다.
다양한 배경을 지닌 지원자들을 환영하기 때문에 요구한다고 들었는데,
그냥 합격시킬지 말지 애매한 지원자를 평가할 때 가산점으로 활용하는 것으로 보입니다.&lt;/p&gt;&lt;p&gt;실무 경험으로는 1년 동안 정규직 직원으로 온라인 게임의 서버 개발을 한 경력을 기재했습니다.
그 외에도 쿠버네티스 프로젝트 기여 내역, 컨퍼런스 및 유튜브에서의 발표 내역,
우아한테크코스 백엔드 커리큘럼 등에 대해 간략히 기재하였습니다.&lt;/p&gt;&lt;h2&gt;추천서&lt;/h2&gt;&lt;p&gt;마지막으로 최대 세 명의 교수님 및 직장 동료들로부터 추천서를 받아야 합니다.
이때 추천서들 중 최소 한 장은 대학교 교수님에게 받는 것이 이상적이라고 합니다.&lt;/p&gt;&lt;p&gt;저의 경우 전공별로 교수님 세 분께 요청하였습니다.
주전공의 경우 어떤 분께 요청을 드릴지 애매했는데, 제가 학생회장이던 시절에 학과장직을 맡으셨던 분에게 부탁을 드렸습니다.
복수전공의 경우 제 졸업논문을 지도해주셨고 엔지니어링과 연결점이 있는 분에게 부탁을 드렸습니다.
컴퓨터공학 쪽 교수님의 경우 수업을 듣지는 않았지만, 저에 대해 가장 많이 알고 계신 분에게 부탁을 드렸습니다.&lt;/p&gt;&lt;p&gt;이메일을 통해 왜 직장 동료들에게 부탁하지 않았냐고 문의하신 분이 계십니다.
개인적인 생각이지만 직장 동료는 차선책일 뿐이지 대학원 추천서는 교수님들께 받는 것이 당연하다고 생각합니다.&lt;/p&gt;&lt;p&gt;기본적으로 교수님의 전공보다는 지원자에 대해 긍정적으로 평가해주실 분인지가 훨씬 중요한 것으로 보입니다.
교수님들 측에서 해당 지원자에 대해 추천하는지, 추천하기 애매한지, 추천하지 않는지에 대한 세부적인 문항들에 응답해야 하기 때문입니다.
즉, 일면식도 없는 공대 교수님 세 분께 부탁하기보다는
아무런 대가 없이 지원자를 위해 본인의 시간을 투자해줄 수 있는 분께 부탁드리는게 이상적이라고 생각합니다.&lt;/p&gt;&lt;p&gt;참고로 추천서를 요청할 때 가급적이면 &amp;quot;I waive my right to access this report&amp;quot;라는 항목을 체크해야 합니다.
간단히 말해 &amp;quot;나는 추천인이 나에 대해 어떻게 작성했는지 보지 않겠습니다&amp;quot;라는 의미이며,
이것을 체크하지 않은 추천서는 당연히 신빙성이 떨어집니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;아무튼 결론적으로 합격했습니다. 일단 부담 없이 대학원 공부를 찍먹해보면서 앞으로의 커리어에 대해 고민해보고자 합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/d0d979659176efc7ac528281c4209b5e/b5a09/admission.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:41.104294478527606%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDUlEQVQoz5WQXUvDMBSG+/9v/DEqDO9UpjeCDib2c9quS7rGprX7alezRxaHOBHdXji8JzkvTw5xVsuKJLxFSRdj3um6lsWqsTVfNpjNhq02O/9Pzot/hTc45+biBH9wxnxR0+vf0+s/cHp5h9JvxwHXzQKdh8T+NUo+2ct0+ko6LZCqtFseBfwMgzGwXne/hrawQ8vZ/luWSfJ8ii7LPYDZ+U/oX484xhiqqqIsS9q23Qt/3/BQWeB4PCaOY+tZliGF+OonkwlCCDsXUlqXUtp5kiQIIUnTlNHomdlshtN1HWEQ4Hkeruvi+z5RFBEEAVEU8jgcWqDWmkJrdFFQ17U9K6UoigKlcts3TcMHRd1n3ZfQCPAAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;admission&quot; title=&quot;admission&quot; src=&quot;/static/d0d979659176efc7ac528281c4209b5e/a6d36/admission.png&quot; srcSet=&quot;/static/d0d979659176efc7ac528281c4209b5e/222b7/admission.png 163w,/static/d0d979659176efc7ac528281c4209b5e/ff46a/admission.png 325w,/static/d0d979659176efc7ac528281c4209b5e/a6d36/admission.png 650w,/static/d0d979659176efc7ac528281c4209b5e/e548f/admission.png 975w,/static/d0d979659176efc7ac528281c4209b5e/3c492/admission.png 1300w,/static/d0d979659176efc7ac528281c4209b5e/b5a09/admission.png 1360w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[[Swagger] 인터페이스로 어노테이션 분리하기]]></title><description><![CDATA[스프링에서 스웨거를 활용하다보면 컨트롤러에 각종 스웨거 어노테이션을 추가할 일이 생깁니다. 자바 인터페이스를 활용하여 문서화 관련 어노테이션을 컨트롤러로부터 분리해봅시다.]]></description><link>https://bugoverdose.github.io/development/swagger-separate-annotations-with-interface/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/swagger-separate-annotations-with-interface/</guid><pubDate>Wed, 27 Mar 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;서버 개발자들 중 스웨거에 대해 부정적인 입장을 지닌 사람들이 의외로 많습니다.&lt;/p&gt;&lt;p&gt;특히 &amp;quot;문서화 관련 어노테이션을 컨트롤러에 덕지 덕지 붙이기 싫다&amp;quot;는 의견을 흔히 들을 수 있습니다.
해당 이슈와 관련하여 개인적으로 가장 편하다고 생각하는 해결방법을 가볍게 공유하고자 합니다.&lt;/p&gt;&lt;p&gt;해당 게시글에서 사용한 자바 및 스프링부트 버전은 아래와 같으며,
&lt;strong&gt;&lt;div to=&quot;/development/swagger-tutorial&quot;&gt;이전 게시글&lt;/div&gt;&lt;/strong&gt;에서 셋업한 프로젝트에 기반을 두고 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Java 11, Spring Boot 2.6.6&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;소스코드는 이 &lt;a href=&quot;https://github.com/bugoverdose/examples/tree/c60e529fe34e3c7269b701dca4d2cb579289c1f7/java11/swagger&quot;&gt;깃헙 저장소의 java11/swagger 프로젝트&lt;/a&gt;를 참고하기 바랍니다.&lt;/p&gt;&lt;h2&gt;ArgumentResolver와 @ApiIgnore&lt;/h2&gt;&lt;p&gt;복수의 API에서 공통된 로직을 수행해야 하는 경우,
&lt;a href=&quot;https://www.baeldung.com/spring-mvc-custom-data-binder#1-custom-argument-resolver&quot;&gt;ArgumentResolver&lt;/a&gt;를
주로 활용합니다.&lt;/p&gt;&lt;p&gt;아래는 컨트롤러 메서드의 매개변수에 &lt;code&gt;@AuthUserId&lt;/code&gt; 어노테이션이 붙어있을 때,
&lt;code&gt;resolveArgument&lt;/code&gt; 메서드의 반환값을 해당 매개변수의 인자로 넣어주는 &lt;code&gt;ArgumentResolver&lt;/code&gt; 예시입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Target&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ElementType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;PARAMETER&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@Retention&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RetentionPolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RUNTIME&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token annotation punctuation&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthUserId&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthArgumentResolver&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HandlerMethodArgumentResolver&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 매개변수에 @AuthUserId 어노테이션이 붙어있을 때&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;supportsParameter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MethodParameter&lt;/span&gt; parameter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; parameter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hasParameterAnnotation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;AuthUserId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 해당 매개변수의 인자로 아래 로직의 반환값을 넣어준다&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolveArgument&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MethodParameter&lt;/span&gt; parameter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                  &lt;span class=&quot;token class-name&quot;&gt;ModelAndViewContainer&lt;/span&gt; mavContainer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                  &lt;span class=&quot;token class-name&quot;&gt;NativeWebRequest&lt;/span&gt; webRequest&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                  &lt;span class=&quot;token class-name&quot;&gt;WebDataBinderFactory&lt;/span&gt; binderFactory&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 요청 메시지에 담긴 정보를 활용하여 가공된 정보 (ex. JWT 토큰을 통해 알아낸 유저의 id 등)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ArgumentResolverConfig&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WebMvcConfigurer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;addArgumentResolvers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HandlerMethodArgumentResolver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; resolvers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        resolvers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthArgumentResolver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 아래와 같이 컨트롤러를 작성하면, &lt;code&gt;/api/examples/{exampleId}&lt;/code&gt; 요청이 들어왔을 때
자동으로 &lt;code&gt;resolvedArgument&lt;/code&gt; 매개변수에 &lt;code&gt;1&lt;/code&gt;이라는 값이 담기게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/api/examples&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ExampleController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/{exampleId}&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getExample&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@AuthUserId&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; resolvedArgument&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                           &lt;span class=&quot;token annotation punctuation&quot;&gt;@PathVariable&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; exampleId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                           &lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestParam&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Boolean&lt;/span&gt; isExample&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 생략&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그런데 문제는 아래와 같이 스웨거 UI 페이지에 &lt;code&gt;resolvedArgument&lt;/code&gt;가 Parameters 목록에 뜬다는 점입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/528b8fea360959d24014ff99c6f57a1c/f291a/resolved-argument-parameter-visible-example.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:52.14723926380368%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABUklEQVQoz42SbW7cIBBAff/z9AS9QqsqUrqbbOw1n7bBYC/grV5lmmwjtdv0xxNIDI8ZZppOTTw8CTqheekkdvSVOa6sl8zyH+xxayrENdF8PiQ+fY0c+5HvneHQWR5bzUk5xLhi44YJBXuPuKF8orOBfrrQuCXh4oWYr8R0va1L/pg9dik/6n1hRrRbaFoTOPQTclw5Sk87rMh5Q/iMcK/4fyN9QYWN3heaF+X58thyNoEX5Wi1Q7kVGzJDLBUddra7qLmg54LYhf24ctIz2iXkGFBjwLiFKSb8UnBLrn+o5u2u+O1M+I3mWUw8PEusz7TaI6e9EQXlLkifa3DN4FW67//knbCzkW9PkqOYONt4k5o5/woOv4X3S34nPA+xyqRL9NZz6jVy8OhxRg0eF9Ot5L9nV24PVmGdseWKCVudqSFutWQTcmWfNfNBU97YhT8BQrD7X6jzpPkAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;resolved-argument-parameter-visible-example&quot; title=&quot;resolved-argument-parameter-visible-example&quot; src=&quot;/static/528b8fea360959d24014ff99c6f57a1c/a6d36/resolved-argument-parameter-visible-example.png&quot; srcSet=&quot;/static/528b8fea360959d24014ff99c6f57a1c/222b7/resolved-argument-parameter-visible-example.png 163w,/static/528b8fea360959d24014ff99c6f57a1c/ff46a/resolved-argument-parameter-visible-example.png 325w,/static/528b8fea360959d24014ff99c6f57a1c/a6d36/resolved-argument-parameter-visible-example.png 650w,/static/528b8fea360959d24014ff99c6f57a1c/e548f/resolved-argument-parameter-visible-example.png 975w,/static/528b8fea360959d24014ff99c6f57a1c/3c492/resolved-argument-parameter-visible-example.png 1300w,/static/528b8fea360959d24014ff99c6f57a1c/f291a/resolved-argument-parameter-visible-example.png 2258w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이와 같은 스웨거의 디폴트 동작 방식이 불만인 경우 아래와 같이 &lt;code&gt;@ApiIgnore&lt;/code&gt;라는 스웨거 어노테이션을 추가해줘야 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/api/examples&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ExampleController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/{exampleId}&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getExample&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@ApiIgnore&lt;/span&gt; &lt;span class=&quot;token annotation punctuation&quot;&gt;@AuthUserId&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; resolvedArgument&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;                                           &lt;span class=&quot;token annotation punctuation&quot;&gt;@PathVariable&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; exampleId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                           &lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestParam&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Boolean&lt;/span&gt; isExample&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 생략&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/70143a407f19d6edcd3b6a40d620408f/a3a74/apiignore-example.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:41.104294478527606%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDklEQVQoz42PQW6DMBBFuf+pqh6i6oJGJQnE2ICNPQ7YJHoVILXdNOniyZbmz5uZomwc75XhVLcca4Xp3YYLkRBnZErI9TFxzlsuToni5SPxWl45a8exHamU5VNZ6k7Q40wvC90D1rpyE3Uv9GGmGEbByURId6zMhPmGpJX79n/GmjNOqLXFykRRac/h4mj6SNlYzsOE8guNS99cxscon7eePmSKQzPwdmhQQ6TpPGoIaBcZJGFjZpCMDivL3/hM6zO9ZIqjCVStx7iZxoxoK5jxio0JFxNW0iZs/fJAvNc3YXnuKM892idOeqR1VzqfaN2EGvfgOv1H+kTYyQ0T73uTTxiftncn/zrpfxt+AVy/Y4y1YORAAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;apiignore-example&quot; title=&quot;apiignore-example&quot; src=&quot;/static/70143a407f19d6edcd3b6a40d620408f/a6d36/apiignore-example.png&quot; srcSet=&quot;/static/70143a407f19d6edcd3b6a40d620408f/222b7/apiignore-example.png 163w,/static/70143a407f19d6edcd3b6a40d620408f/ff46a/apiignore-example.png 325w,/static/70143a407f19d6edcd3b6a40d620408f/a6d36/apiignore-example.png 650w,/static/70143a407f19d6edcd3b6a40d620408f/e548f/apiignore-example.png 975w,/static/70143a407f19d6edcd3b6a40d620408f/3c492/apiignore-example.png 1300w,/static/70143a407f19d6edcd3b6a40d620408f/a3a74/apiignore-example.png 2272w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;인터페이스 기반 어노테이션 분리&lt;/h2&gt;&lt;p&gt;자바 인터페이스에 정의된 어노테이션은 그 인터페이스의 구현체들에 그대로 상속됩니다.
이 점을 활용하여 우선 &lt;code&gt;ExampleController&lt;/code&gt;와 동일한 퍼블릭 메서드를 지닌 &lt;code&gt;SwaggerExampleController&lt;/code&gt;를 정의합시다.
그리고 어노테이션의 경우 스웨거와 관련된 &lt;code&gt;@ApiIgnore&lt;/code&gt;만 &lt;code&gt;SwaggerExampleController&lt;/code&gt; 쪽에 추가합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SwaggerExampleController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getExample&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@ApiIgnore&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; resolvedArgument&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                    &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; exampleId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                    &lt;span class=&quot;token class-name&quot;&gt;Boolean&lt;/span&gt; isExample&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;ExampleController&lt;/code&gt;에서는 &lt;code&gt;SwaggerExampleController&lt;/code&gt;를 구현하도록 하고,
의 경우 스웨거 관련 어노테이션은 없애고, 요청 처리를 위해 컨트롤러에서 꼭 필요한 어노테이션들만 남깁니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/api/examples&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ExampleController&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SwaggerExampleController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/{exampleId}&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getExample&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@AuthUserId&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; resolvedArgument&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;                                           &lt;span class=&quot;token annotation punctuation&quot;&gt;@PathVariable&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; exampleId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                           &lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestParam&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Boolean&lt;/span&gt; isExample&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 생략&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 경우 &lt;code&gt;ExampleController&lt;/code&gt;에 직접적으로 &lt;code&gt;@ApiIgnore&lt;/code&gt;를 붙이지 않았음에도 해당 어노테이션이 제대로 적용됨을 확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/70143a407f19d6edcd3b6a40d620408f/a3a74/apiignore-example.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:41.104294478527606%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDklEQVQoz42PQW6DMBBFuf+pqh6i6oJGJQnE2ICNPQ7YJHoVILXdNOniyZbmz5uZomwc75XhVLcca4Xp3YYLkRBnZErI9TFxzlsuToni5SPxWl45a8exHamU5VNZ6k7Q40wvC90D1rpyE3Uv9GGmGEbByURId6zMhPmGpJX79n/GmjNOqLXFykRRac/h4mj6SNlYzsOE8guNS99cxscon7eePmSKQzPwdmhQQ6TpPGoIaBcZJGFjZpCMDivL3/hM6zO9ZIqjCVStx7iZxoxoK5jxio0JFxNW0iZs/fJAvNc3YXnuKM892idOeqR1VzqfaN2EGvfgOv1H+kTYyQ0T73uTTxiftncn/zrpfxt+AVy/Y4y1YORAAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;apiignore-example&quot; title=&quot;apiignore-example&quot; src=&quot;/static/70143a407f19d6edcd3b6a40d620408f/a6d36/apiignore-example.png&quot; srcSet=&quot;/static/70143a407f19d6edcd3b6a40d620408f/222b7/apiignore-example.png 163w,/static/70143a407f19d6edcd3b6a40d620408f/ff46a/apiignore-example.png 325w,/static/70143a407f19d6edcd3b6a40d620408f/a6d36/apiignore-example.png 650w,/static/70143a407f19d6edcd3b6a40d620408f/e548f/apiignore-example.png 975w,/static/70143a407f19d6edcd3b6a40d620408f/3c492/apiignore-example.png 1300w,/static/70143a407f19d6edcd3b6a40d620408f/a3a74/apiignore-example.png 2272w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;혹시라도 착각할까봐 부연설명을 하자면, 이는 매개변수에만 한정된 것이 아닙니다.
클래스나 메서드에 붙이는 스웨거 어노테이션들의 경우 인터페이스에 추가하면 클래스 구현체에 그대로 적용됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Api&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tags &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;예시 API&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SwaggerExampleController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@ApiOperation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;예시를 조회한다&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getExample&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@ApiIgnore&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; resolvedArgument&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                    &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; exampleId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                    &lt;span class=&quot;token class-name&quot;&gt;Boolean&lt;/span&gt; isExample&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/1be54933b20c7bd9e22609ec74de8011/b0bb3/api-apioperation-apiignore-example.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:41.104294478527606%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABCElEQVQoz42P22rDMBAF/f9f0y8pLeSh0MS5Orbkm7ySHEtpmGKZPrSQpA/DWS3soJOpTc7H+wq13aHzHKMU4kek7xODOAb7AHGI9UiaLdnbYeTl1bA5KPL9mfxUsz5qjp9bys2e1gYaF+/SuoiWiaKxKHMhMz7QugkJN+zM9LXw930HF2509kKhO+phJKs6z7roqLqRvDQc2xFlr5RDoDQhZfWUiLbXlFnZOVbrgqIWTrVQ1APajKlq52JC2+XgPnPtiJJIpszItpolE2UrVJ1QD57eBYyP9D6kA/VQuJCE58bysVNJOP+w6j2NDejhkuooeS76JZwrNf62LCVQS0i5EP8t+xF+Aw7fYi+whO6vAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;api-apioperation-apiignore-example&quot; title=&quot;api-apioperation-apiignore-example&quot; src=&quot;/static/1be54933b20c7bd9e22609ec74de8011/a6d36/api-apioperation-apiignore-example.png&quot; srcSet=&quot;/static/1be54933b20c7bd9e22609ec74de8011/222b7/api-apioperation-apiignore-example.png 163w,/static/1be54933b20c7bd9e22609ec74de8011/ff46a/api-apioperation-apiignore-example.png 325w,/static/1be54933b20c7bd9e22609ec74de8011/a6d36/api-apioperation-apiignore-example.png 650w,/static/1be54933b20c7bd9e22609ec74de8011/e548f/api-apioperation-apiignore-example.png 975w,/static/1be54933b20c7bd9e22609ec74de8011/3c492/api-apioperation-apiignore-example.png 1300w,/static/1be54933b20c7bd9e22609ec74de8011/b0bb3/api-apioperation-apiignore-example.png 2344w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;전혀 특별할 것 없는 내용이지만, 개인적으로 좋아하는 코드 스타일이라 기록으로 남깁니다.&lt;/p&gt;&lt;p&gt;물론 구현체가 하나밖에 없는데 굳이 인터페이스를 정의하는 것에 대해서는 별로라고 생각합니다.
다만, 위와 같이 개발 생산성 향상을 위한 부수적인 기능을 비즈니스 로직으로부터 분리한다는
명확한 효용이 있는 상황에서는 예외적으로 허용해도 된다고 생각합니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[[Swagger] JWT 인증 버튼 셋업 (feat. Bearer 인증)]]></title><description><![CDATA[스웨거를 통해 요청을 보낼 때마다 Authorization 헤더에 매번 JWT 토큰을 입력하는 것은 번거롭습니다. 딱 한번만 JWT 토큰을 설정하고 재활용할 수 있도록 Authorize 버튼을 설정해봅시다.]]></description><link>https://bugoverdose.github.io/development/swagger-auth-tutorial/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/swagger-auth-tutorial/</guid><pubDate>Wed, 21 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;strong&gt;&lt;div to=&quot;/development/swagger-tutorial&quot;&gt;지난 게시글&lt;/div&gt;&lt;/strong&gt;에서는
스프링 부트 애플리케이션에 스웨거를 설정하고 스웨거 UI 페이지를 조작하여 API를 테스트하는 방법을 다루었습니다.&lt;/p&gt;&lt;p&gt;해당 게시글에서는 JWT 토큰 기반의 인증 기능이 구현된 애플리케이션에서
스웨거를 사용하기 위한 최소한의 셋업에 대해 다루고자 합니다.&lt;/p&gt;&lt;p&gt;해당 게시글에서 사용한 자바 및 스프링부트의 세부 버전 정보는 아래와 같습니다.
다른 버전을 사용할 경우 다른 의존성을 활용하거나 추가적인 트러블 슈팅이 필요할 수 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Java 11, Spring Boot 2.6.6&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;소스코드는 이 &lt;a href=&quot;https://github.com/bugoverdose/examples/tree/46352950b46796b3d6a55162a054c14163b2006b/java11/swagger_auth&quot;&gt;깃헙 저장소의 java11/swagger_auth 프로젝트&lt;/a&gt;를 참고하기 바랍니다.&lt;/p&gt;&lt;h2&gt;인증과 인가&lt;/h2&gt;&lt;p&gt;기초 개념부터 정리하겠습니다.
&lt;strong&gt;인증(Authentication)&lt;/strong&gt;이란 &lt;strong&gt;사용자가 누구인지 확인&lt;/strong&gt;하는 과정, 즉 아이디와 비밀번호를 받아 로그인하는 과정을 의미합니다.
&lt;strong&gt;인가(Authoraization)&lt;/strong&gt;란 인증된 사용자가 요청을 보냈을 때 해당 사용자에게 적절한 &lt;strong&gt;권한이 있는지 확인&lt;/strong&gt;하는 과정을 의미합니다.&lt;/p&gt;&lt;p&gt;예를 들어 &lt;em&gt;JWT 토큰 기반 인증&lt;/em&gt;을 생각해봅시다.
클라이언트에서 아이디와 비밀번호를 입력하여 서버로 로그인 요청을 보냅니다.
이 정보가 적절한 경우 서버에서는 JWT 토큰을 발급하여 클라이언트에게 응답하고,
이 과정에서 문제가 발생하면 서버는 상태코드로 &lt;code&gt;401 Unauthorized&lt;/code&gt;을 응답합니다.
여기까지가 &lt;strong&gt;인증&lt;/strong&gt; 단계에 해당됩니다.&lt;/p&gt;&lt;p&gt;그 이후 클라이언트는 서버로부터 전달받은 JWT 토큰을 관리하며,
향후 서버로 보내는 HTTP 요청들의 &lt;code&gt;Authorization&lt;/code&gt; 헤더에 JWT 토큰을 포함시킵니다.
이때 서버는 각 요청을 처리할 때 &lt;code&gt;Authorization&lt;/code&gt; 헤더에 담긴 토큰 정보를 검증하고
클라이언트가 적절한 권한을 지니고 있는지 판단합니다.
만일 이때 클라이언트에게 적절한 권한이 없다고 판단되면 서버는 상태코드로 &lt;code&gt;403 Forbidden&lt;/code&gt;을 응답합니다.
이러한 검증 과정이 바로 &lt;strong&gt;인가&lt;/strong&gt; 단계입니다.&lt;/p&gt;&lt;h2&gt;Authorize 버튼의 필요성&lt;/h2&gt;&lt;p&gt;스웨거를 조작할 때 번거로운 점은 바로 인증 성공 이후 서버로 보내는 모든 HTTP 요청들에
&lt;code&gt;Authorization&lt;/code&gt; 헤더 값을 입력해줘야 한다는 점입니다.
물론 로그인 요청을 통해 발급 받은 JWT 토큰을 메모장에 저장해놓고,
API로 요청을 보낼 때마다 일일이 &lt;code&gt;Authorization&lt;/code&gt; 헤더에 해당 값을 붙여넣는 것도 불가능하지는 않습니다.
그러나 이는 매우 번거롭고 생산성이 떨어집니다.&lt;/p&gt;&lt;p&gt;이러한 상황에서 가장 이상적인 방안은 Swagger UI 페이지의 상단에 &lt;strong&gt;&lt;em&gt;Authorize 버튼&lt;/em&gt;&lt;/strong&gt;을 추가하는 것입니다.
로그인을 통해 JWT 토큰을 발급 받고 이 버튼을 통해 해당 토큰 값을 설정해놓으면,
그 이후로 서버로 전송되는 모든 HTTP 요청 메시지들의 &lt;code&gt;Authorization&lt;/code&gt; 헤더에 해당 토큰이 자동으로 포함됩니다.
마치 &lt;strong&gt;로그인에 성공한 사용자의 브라우저 상태를 모방&lt;/strong&gt;하듯이 말입니다.&lt;/p&gt;&lt;p&gt;실제 코드를 통해 이를 확인해봅시다.&lt;/p&gt;&lt;h2&gt;실습 환경 셋업&lt;/h2&gt;&lt;p&gt;우선 기본적인 셋업부터 시작합니다. &lt;code&gt;build.gradle&lt;/code&gt; 파일에 Springfox 의존성을 추가하는 작업은
&lt;strong&gt;&lt;div to=&quot;/development/swagger-tutorial&quot;&gt;지난 게시글&lt;/div&gt;&lt;/strong&gt;과 동일합니다.
만약 아래와 동일한 버전을 활용하여 문제가 발생할 경우, 지난 게시글의 트러블슈팅 과정을 참고하시기 바랍니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;plugins &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id &lt;span class=&quot;token char&quot;&gt;&amp;#x27;java&amp;#x27;&lt;/span&gt;
    id &amp;#x27;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;boot&amp;#x27; version &lt;span class=&quot;token char&quot;&gt;&amp;#x27;2.6.6&amp;#x27;&lt;/span&gt;
    id &amp;#x27;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;spring&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dependency&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;management&amp;#x27; version &amp;#x27;&lt;span class=&quot;token number&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RELEASE&lt;/span&gt;&amp;#x27;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

repositories &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;mavenCentral&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    implementation &amp;#x27;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;spring&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;starter&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;web&amp;#x27;
    testImplementation &amp;#x27;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;spring&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;starter&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;test&amp;#x27;

    implementation &amp;#x27;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springfox&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;springfox&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;starter&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3.0&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.0&lt;/span&gt;&amp;#x27;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;해당 실습에서는 &lt;code&gt;Authorization&lt;/code&gt; 헤더에 넣은 값이 제대로 컨트롤러 내부에 도달할 수 있는지만을 가볍게 확인해보겠습니다.
아래 컨트롤러는 &lt;code&gt;GET /api&lt;/code&gt;로 들어오는 모든 요청들에 대해 컨트롤러 내부에서
&lt;code&gt;Authorization&lt;/code&gt; 헤더 값을 그대로 추출하여 JSON 형식으로 응답합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/api&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HeaderReaderController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GetMapping&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;authHeaderChecker&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;HttpServletRequest&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Authorization&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Authorization&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;HTTP 헤더에 값 넣기&lt;/h2&gt;&lt;p&gt;이제 드디어 &lt;strong&gt;Authorize 버튼&lt;/strong&gt;을 셋업해봅시다.
프로젝트 어디에서든 상관 없으니 아래와 같이 &lt;code&gt;Docket&lt;/code&gt; 객체를 설정하여 빈으로 등록해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SwaggerConfiguration&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;REFERENCE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Authorization 헤더 값&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Docket&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Docket&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DocumentationType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SWAGGER_2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apis&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RequestHandlerSelectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;withClassAnnotation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RestController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PathSelectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;securityContexts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;securityContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;securitySchemes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;securityScheme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SecurityContext&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;securityContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SecurityContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;securityReferences&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;securityReferences&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;operationSelector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;operationContext &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SecurityReference&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;securityReferences&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;AuthorizationScope&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; authorizationScopes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthorizationScope&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        authorizationScopes&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthorizationScope&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;global&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;accessEverything&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SecurityReference&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;REFERENCE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; authorizationScopes&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ApiKey&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;securityScheme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 어떠한 헤더에 값을 대입할 것인가: Authorization 헤더&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; targetHeader &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Authorization&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ApiKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;REFERENCE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; targetHeader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;header&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위에서 중요한 점은 바로 &lt;code&gt;Docket&lt;/code&gt;에 &lt;code&gt;SecurityContext&lt;/code&gt;와 &lt;code&gt;SecurityScheme&lt;/code&gt;을 설정한다는 점입니다.
위에서 사용한 &lt;code&gt;ApiKey&lt;/code&gt;는 &lt;code&gt;SecurityScheme&lt;/code&gt;의 구현체 중 하나로, &lt;strong&gt;특정한 HTTP 헤더에 대해 자유롭게 특정한 문자열을 설정&lt;/strong&gt;할 수 있도록 해줍니다.
위의 경우 두 번째 매개변수에 &lt;code&gt;Authorization&lt;/code&gt;이라는 문자열을 대입함으로써 &lt;code&gt;Authorization&lt;/code&gt; 헤더에 값이 전달되도록 설정하였습니다.&lt;/p&gt;&lt;p&gt;이제 애플리케이션을 실행하고 &lt;code&gt;http://localhost:8080/swagger-ui/&lt;/code&gt;에 접속하면 아래와 같은 방식으로 &lt;strong&gt;Authorize 버튼&lt;/strong&gt;을 사용할 수 있습니다.
기본적으로 &lt;code&gt;12345&lt;/code&gt;라는 문자열을 입력하면 그대로 &lt;code&gt;Authorization&lt;/code&gt; 헤더에 담기고,
로그아웃을 통해 입력값이 초기화되는 점을 확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/3de0cef9c869cdaf2e258b90819e8d2a/authorization-gif.gif&quot; alt=&quot;Authorization GIF&quot;/&gt;&lt;/p&gt;&lt;h2&gt;JWT 토큰 기반 인증을 위한 설정&lt;/h2&gt;&lt;p&gt;그런데 중요한 점이 하나 있습니다. 일반적으로 토큰 기반 인증은 &lt;strong&gt;Bearer 인증&lt;/strong&gt;이라고도 불리며,
아래와 같이 &lt;code&gt;Bearer&lt;/code&gt;라는 문자열 다음에 토큰 담아서 보내는 형식을 띠고 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Authorization: Bearer &amp;lt;토큰&amp;gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;만일 위의 셋업을 그대로 사용한다면 &lt;strong&gt;Authorize 버튼&lt;/strong&gt;에 토큰 값을 그대로 등록하는 것이 아니라
앞에 &lt;code&gt;Bearer&lt;/code&gt;라는 문자열을 일일이 추가해줘야 할 것입니다.
이는 다소 번거로운 작업입니다.
커뮤니케이션이 충분한 개발 팀 내에서도 &amp;quot;인증이 안되요&amp;quot;라는 말이 오갈 것이며,
&lt;code&gt;Bearer&lt;/code&gt;라고 추가해줘야 함을 알고 있는 사람이더라도 이따금씩 실수를 할 수 있을 것입니다.&lt;/p&gt;&lt;p&gt;이러한 문제를 해결하기 위해 이번에는 스웨거의 문서 타입(DocumentType)을 &lt;code&gt;OpenAPI 3.0&lt;/code&gt;으로 수정하고,
&lt;code&gt;Bearer Authentication&lt;/code&gt; 기능을 사용하도록 설정을 변경해보겠습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SwaggerConfiguration&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;REFERENCE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Bearer 토큰 값&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Docket&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Docket&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DocumentationType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;OAS_30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// OpenAPI 3.0&lt;/span&gt;&lt;/span&gt;            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apis&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RequestHandlerSelectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;withClassAnnotation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RestController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PathSelectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;securityContexts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;securityContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;securitySchemes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bearerAuthSecurityScheme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SecurityContext&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;securityContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SecurityContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;securityReferences&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;defaultAuth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;operationSelector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;operationContext &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SecurityReference&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;defaultAuth&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;AuthorizationScope&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; authorizationScopes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthorizationScope&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        authorizationScopes&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthorizationScope&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;global&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;accessEverything&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SecurityReference&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;REFERENCE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; authorizationScopes&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpAuthenticationScheme&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;bearerAuthSecurityScheme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpAuthenticationScheme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;JWT_BEARER_BUILDER&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;REFERENCE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이전과 달라진 점으로는 우선
&lt;code&gt;Docket&lt;/code&gt; 객체를 생성할 때 생성자 매개변수로 &lt;code&gt;DocumentationType.OAS_30&lt;/code&gt;를 전달하여
문서 타입을 변경했습니다. 그 이유는 &lt;code&gt;Bearer Authentication&lt;/code&gt;이 &lt;code&gt;OpenAPI 3.0&lt;/code&gt;부터 지원되기 때문입니다.&lt;/p&gt;&lt;p&gt;또한 &lt;code&gt;SecurityScheme&lt;/code&gt; 구현체로 &lt;code&gt;HttpAuthenticationScheme&lt;/code&gt; 객체를 활용하였으며,
이때 &lt;code&gt;JWT_BEARER_BUILDER&lt;/code&gt;를 사용했습니다.&lt;/p&gt;&lt;p&gt;이제 애플리케이션을 재실행하고 이전과 동일한 방식으로 &lt;strong&gt;Authorize 버튼&lt;/strong&gt;을 사용해봅시다.
이전과 완전히 동일한 값을 입력했음에도 자동으로 앞에 &lt;code&gt;Bearer&lt;/code&gt;라는 문자열이 추가된다는 점을 확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/8388ce1f8a3132b4c04c9dcbbbc0fcf8/bearer-auth-gif.gif&quot; alt=&quot;Beaerer Auth GIF&quot;/&gt;&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Bearer&lt;/code&gt; 인증 설정에 관한 자료가 생각보다 너무 적어서 기본적인 셋업 방법을 공유하고자 글로 정리해보았습니다.
참고로 &lt;a href=&quot;https://swagger.io/docs/specification/about/&quot;&gt;공식문서&lt;/a&gt;를
보면 토큰 기반 인증 외에도 다양한 인증 방식을 지원하고 있음을 알 수 있습니다.&lt;/p&gt;&lt;p&gt;사실 프로젝트 셋업은 각자의 환경에 따라 다르고, 시간이 지나면서 deprecate될 기능들도 많기 때문에
이 글이 그다지 큰 의미를 지니지는 않는다고 생각합니다.
그래도 전체적인 흐름을 참고하는 데 있어 도움이 될 것이라 생각합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.baeldung.com/spring-boot-swagger-jwt&quot;&gt;Baeldung - Set JWT with Spring Boot and Swagger UI&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://swagger.io/docs/specification/authentication/bearer-authentication/&quot;&gt;Swagger - Bearer Authentication&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Swagger] 스프링부트 2버전에서 API 명세 자동화하기]]></title><description><![CDATA[스프링부트 2버전에서 API 문서화 및 관리 툴인 Swagger를 셋업해봅시다. Postman처럼 서버에 실제로 요청을 보낼 수 있는 API 명세를 자동으로 생성할 수 있다는 점은 스웨거가 지닌 명확한 장점입니다.]]></description><link>https://bugoverdose.github.io/development/swagger-tutorial/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/swagger-tutorial/</guid><pubDate>Sun, 18 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;스프링부트 2버전에서 API 문서화 및 관리 툴인 &lt;code&gt;Swagger&lt;/code&gt;(이하, 스웨거)를 셋업해봅시다.&lt;/p&gt;&lt;p&gt;해당 게시글에서 사용한 자바 및 스프링부트의 세부 버전 정보는 아래와 같습니다.
다른 버전을 사용할 경우 다른 의존성을 활용하거나 추가적인 트러블 슈팅이 필요할 수 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Java 11, Spring Boot 2.6.6&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;소스코드는 이 &lt;a href=&quot;https://github.com/bugoverdose/examples/tree/dd0356c580ae0293d15a8a63d3e5d6d7708a4c62/java11/swagger&quot;&gt;깃헙 저장소의 java11/swagger 프로젝트&lt;/a&gt;를 참고하기 바랍니다.&lt;/p&gt;&lt;h2&gt;Swagger와 Springfox&lt;/h2&gt;&lt;p&gt;기본적으로 스웨거란 API 명세를 관리하기 위한 개발도구입니다.
개별 API를 테스트해볼 수 있도록 마치 Postman처럼 실제로 실행 중인 서버에 요청을 보낼 수 있는 UI를 제공해줍니다.
스웨거 자체는 특정한 언어나 프레임워크에 종속되어있지 않기 때문에 스프링, Node.js 등 다양한 서버 애플리케이션에서 활용 가능합니다.&lt;/p&gt;&lt;p&gt;Springfox는 스프링부트 2버전에서 스웨거를 쉽게 활용하기 위한 기능을 제공해주는 의존성입니다.
이를 활용하면 클래스 구조, 자바 어노테이션, 각종 설정들을 참고하여 자동으로 API 명세를 생성할 수 있습니다.
물론 &lt;a href=&quot;https://springfox.github.io/springfox/docs/current/#what-its-not&quot;&gt;Springfox 공식문서&lt;/a&gt;에
따르면 스프링 프로젝트는 Springfox 프로젝트를 공식적으로 인정하고 있지 않으며, 호의적인 입장도 아니라고 합니다.
그럼에도 불구하고 이미 수많은 사람들이 거의 디폴트로 Springfox를 활용하고 있으므로 해당 게시글에서도 이를 활용하고자 합니다.&lt;/p&gt;&lt;h2&gt;프로젝트 셋업&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://start.spring.io/&quot;&gt;Spring Initializr&lt;/a&gt;를 사용하여 Gradle 기반의 스프링부트 프로젝트를 만들어봅시다.
의존성으로는 &lt;code&gt;Spring Web&lt;/code&gt; 정도만 선택합니다.&lt;/p&gt;&lt;p&gt;프로젝트가 생성되면 &lt;code&gt;build.gradle&lt;/code&gt; 파일에 스웨거 관련 라이브러리를 의존성으로 추가합시다.
다양한 종류의 라이브러리가 존재하지만 해당 게시글에서는 최소한의 설정만 필요로 하는
&lt;code&gt;springfox-boot-starter&lt;/code&gt;를 사용하겠습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// web mvc&lt;/span&gt;
	implementation &amp;#x27;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;spring&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;starter&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;web&amp;#x27;
	testImplementation &amp;#x27;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;spring&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;starter&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;test&amp;#x27;

	&lt;span class=&quot;token comment&quot;&gt;// swagger&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;	implementation &amp;#x27;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springfox&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;springfox&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;starter&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3.0&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.0&lt;/span&gt;&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;의존성 추가 후 Gradle 프로젝트들을 새로고침하고 애플리케이션을 실행해봅시다.
만일 애플리케이션이 제대로 실행되었다면, 브라우저에서
&lt;a href=&quot;http://localhost:8080/swagger-ui/&quot;&gt;localhost:8080/swagger-ui&lt;/a&gt; 라는 페이지에 접근해봅시다.
문제가 없다면 아래와 같은 화면이 보일 것입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/8266882d38b7b91289149ac2fa521803/813c1/default-API-spec.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:60.122699386503065%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABiUlEQVQoz62SzWrbUBCF73vIK2+8aqA0m6z6Cu2i5AEKXfRFEhxaZ9Pn6aIlsVzbMS5YXjRYlmS78Y/sq+jXlvQVXbWlEApK6cDHGbjcmcNwxMlpnZPnxzx7eoxW09C0klqthqbVqNfrHB09odFo8PLVC5qtc5qtMy5a51xcljTfn3H54R1v3r5GfOnr9Ps9bm76dDod2u02uq5zdXXNp88f0TvX9Ho9ut0ug8GA0WiEMTYwDKPUn/14PGY4HCK+3224nTiY1hxzOsOy50ymNrP5ioX8SorHg8ofkue5ehLL9RZnsca5c1m5Es+7R0qPIAhI4oQoionj6ghXBizde8IoIksPHA4l+/2eJEmUPgax8xNkkKjP/wORpgfyPFM3yLJMkabp7/6xCHNq8+12gmlaTC0by3LYbFz+tUQcJ4RhSBCGSgsK64XLgl83rYoo3DizBcvVWqltz9jtpEJ6XuXbRVGkEL7vI6UkCEL8IFBxCf9wWzUuRbzUwGLYdrv96+ZqA8u8FmZ+AIwCdeAapox/AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;디폴트 API 명세&quot; title=&quot;디폴트 API 명세&quot; src=&quot;/static/8266882d38b7b91289149ac2fa521803/a6d36/default-API-spec.png&quot; srcSet=&quot;/static/8266882d38b7b91289149ac2fa521803/222b7/default-API-spec.png 163w,/static/8266882d38b7b91289149ac2fa521803/ff46a/default-API-spec.png 325w,/static/8266882d38b7b91289149ac2fa521803/a6d36/default-API-spec.png 650w,/static/8266882d38b7b91289149ac2fa521803/e548f/default-API-spec.png 975w,/static/8266882d38b7b91289149ac2fa521803/3c492/default-API-spec.png 1300w,/static/8266882d38b7b91289149ac2fa521803/813c1/default-API-spec.png 2004w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;스웨거는 이처럼 &lt;strong&gt;실행 중인 웹 페이지를 API 명세&lt;/strong&gt;로 활용합니다.
현재 &lt;code&gt;basic-error-controller&lt;/code&gt;라는 것이 존재하지만
일단은 접근할 수 있는 페이지가 생성된다는 점에서 만족하며 해당 페이지를 단계적으로 꾸며봅시다.&lt;/p&gt;&lt;h3&gt;트러블슈팅&lt;/h3&gt;&lt;p&gt;버전에 따라 애플리케이션 실행에 실패할 수도 있습니다.
모든 케이스를 다룰 수는 없으나, 일단 제가 사용한 버전에서 확인된 트러블슈팅을 기록하겠습니다.&lt;/p&gt;&lt;p&gt;제가 작성한 &lt;code&gt;build.gradle&lt;/code&gt; 파일의 주요 내용은 기본적으로 아래와 같습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;plugins &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    id &lt;span class=&quot;token char&quot;&gt;&amp;#x27;java&amp;#x27;&lt;/span&gt;
    id &amp;#x27;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;boot&amp;#x27; version &lt;span class=&quot;token char&quot;&gt;&amp;#x27;2.6.6&amp;#x27;&lt;/span&gt;
    id &amp;#x27;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;spring&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dependency&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;management&amp;#x27; version &amp;#x27;&lt;span class=&quot;token number&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RELEASE&lt;/span&gt;&amp;#x27;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

repositories &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;mavenCentral&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    implementation &amp;#x27;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;spring&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;starter&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;web&amp;#x27;
    testImplementation &amp;#x27;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;spring&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;starter&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;test&amp;#x27;

    implementation &amp;#x27;io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springfox&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;springfox&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;starter&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3.0&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.0&lt;/span&gt;&amp;#x27;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이때 애플리케이션을 실행하면 터미널에 아래와 같은 에러 메시지가 찍히며 실패합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;org.springframework.context.ApplicationContextException: Failed to start bean &amp;#x27;documentationPluginsBootstrapper&amp;#x27;; nested exception is java.lang.NullPointerException: Cannot invoke &amp;quot;org.springframework.web.servlet.mvc.condition.PatternsRequestCondition.getPatterns()&amp;quot; because &amp;quot;this.condition&amp;quot; is null
	at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181) ~[spring-context-5.3.18.jar:5.3.18]
	...
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.6.jar:2.6.6]
	at example.bugoverdose.swagger.SwaggerApplication.main(SwaggerApplication.java:10) ~[main/:na]
Caused by: java.lang.NullPointerException: Cannot invoke &amp;quot;org.springframework.web.servlet.mvc.condition.PatternsRequestCondition.getPatterns()&amp;quot; because &amp;quot;this.condition&amp;quot; is null
	at springfox.documentation.spring.web.WebMvcPatternsRequestConditionWrapper.getPatterns(WebMvcPatternsRequestConditionWrapper.java:56) ~[springfox-spring-webmvc-3.0.0.jar:3.0.0]
	at springfox.documentation.RequestHandler.sortedPaths(RequestHandler.java:113) ~[springfox-core-3.0.0.jar:3.0.0]
    ...&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;해당 이슈는 &lt;code&gt;application.properties&lt;/code&gt; 파일에 아래와 같은 설정을 추가해주면 해결됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;spring.mvc.pathmatch.matching&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;strategy = ANT_PATH_MATCHER&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;컨트롤러 기반 디폴트 설정&lt;/h2&gt;&lt;p&gt;우선 스웨거의 API 자동 문서화에 대해 가볍게 맛보기 위해
아래와 같이 &lt;code&gt;ProductController&lt;/code&gt;라는 컨트롤러를 하나 구현해봅시다.
세부적인 소스코드는 &lt;a href=&quot;https://github.com/bugoverdose/examples/tree/7b5b4a5cd96399f11a9f089150a376965a8a0862/java11/swagger&quot;&gt;깃헙&lt;/a&gt;을
참고하기 바랍니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/api/products&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GetMapping&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getAllProducts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; products &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;고구마&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;감자&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;양배추&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;products&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// statusCode 200&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/{productId}&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getProduct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@PathVariable&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; productId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt; dummyProduct &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;productId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;고구마&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dummyProduct&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// statusCode 200&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@PostMapping&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createProduct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestBody&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductRequest&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;URI&lt;/span&gt; uri &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ServletUriComponentsBuilder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fromCurrentRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toUri&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Location : /api/products/4&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;created&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;uri&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// statusCode 201&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@DeleteMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/{productId}&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;deleteProduct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@PathVariable&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; productId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;noContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// statusCode 204&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위에서 사용된 DTO들의 내부 필드 구성은 다음과 같습니다. getter와 같은 세부 구현은 생략합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductRequest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; price&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; price&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;애플리케이션을 재실행하고 다시
&lt;a href=&quot;http://localhost:8080/swagger-ui/&quot;&gt;localhost:8080/swagger-ui&lt;/a&gt;로 접속해보면
아래와 같이 &lt;code&gt;product-controller&lt;/code&gt;라는 섹션이 추가된 것을 확인할 수 있습니다.
해당 섹션을 클릭하면 &lt;code&gt;ProductController&lt;/code&gt;에서 구현한 각 API를 확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/f61d7a629c05e57e95b26dd684fe4ce9/c7bb6/product-controller-overview.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:57.05521472392638%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABV0lEQVQoz53OTWvcMBSFYf3/H9FFIauuCqHQfdZZtSUZjz3jsS3527IlS5YZ+haboZvSZIjg4Rx0xUUiTTPi5Mw5zdj65ZKj9chHj3DOYYzFWIu92e6u1+uHiLrpUGVN03aUZU0hS8ZxQo/Tnuu6EkJ427rivWdZFoQeOpqqpGlalCoZhmH/5Wwtawh3WPZcvCdsCxM58jPpkFVHVtQ03UjbT/TaMvsV68K7tneTXZjdgniMLA8/DEfVccgbYtWTlD1Zb5GjR2p3l1w7WuMR39QzD9kTB5Xxkp2JK0lSS3LdUs6a0g530Cjb07sJ8T3+zZdfcJQ9h6zmWHS83vJUDhS9ozIr1RTepKZAbwNi+vrI+OkzTRSjXiPqQ4x6iaijmPZ4YjileKlwhcL/zzbPC3zbIYKUhEuKG8d/LMYQrNnzfRNhnhGN1myc98zu5m939/GeyZi9/wFZS0cpFlMWRgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;ProductController&quot; title=&quot;ProductController&quot; src=&quot;/static/f61d7a629c05e57e95b26dd684fe4ce9/a6d36/product-controller-overview.png&quot; srcSet=&quot;/static/f61d7a629c05e57e95b26dd684fe4ce9/222b7/product-controller-overview.png 163w,/static/f61d7a629c05e57e95b26dd684fe4ce9/ff46a/product-controller-overview.png 325w,/static/f61d7a629c05e57e95b26dd684fe4ce9/a6d36/product-controller-overview.png 650w,/static/f61d7a629c05e57e95b26dd684fe4ce9/e548f/product-controller-overview.png 975w,/static/f61d7a629c05e57e95b26dd684fe4ce9/3c492/product-controller-overview.png 1300w,/static/f61d7a629c05e57e95b26dd684fe4ce9/c7bb6/product-controller-overview.png 1986w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;각 API는 단순히 HTTP 메서드와 URI만을 보여주는 것이 아니라 컨트롤러에 정의한 메서드명도 첨부되었습니다.
이 메서드명을 통해 각 API가 어떠한 기능을 수행하는지 대략적으로 파악할 수도 있습니다.
예를 들어 &lt;code&gt;POST /api/products&lt;/code&gt;의 경우 &lt;code&gt;createProduct&lt;/code&gt; 메서드로 처리되기 때문에
&amp;quot;상품을 생성&amp;quot;하는 기능임을 명시적으로 확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;이제 해당 API의 세부사항을 한번 확인해봅시다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9eac892adde7b41423ff2c7835cd0d7d/d4e7f/post-products.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:88.34355828220859%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACGklEQVQ4y52Uy27TQBhG/WQsgtRuQGoBUbFBfQ8WRZWgakU3IPE4vAJqadK0SZybL2PH4xnfLyk9yAmpKoSSqIujfzGfznyz+Mf4Pv7BT2FiOha3zoSxFIwCgZcpvEyvJ9e4kcTVEkdLZBph3Po2QRaTViVJVZDW5YL8rl5LNq8o7uc4I4/urz63lybBTGFcjm8wvSkyDZklckHQzDhYgyTMFCrX+CrAES6uJ5BJhOE7NmrmkcWKREvSKFzD8jwOZ3TbV1xdXDAa9BDOFHvYR0sPI76vSanJ+c0cqDfQZCpA3xXoeUF0VxDfV+gyQYcexofjE44+nXJ8+oWPJ2db0+SXnHP0+Yzzr99w7BHGq4NDXh8c8mLvHa2dPVq7+7R2tmFvwfPdfZ61XvLm7XvGoz7G9fCGdq/DVa9DZ3D9JNqDLt1em8C3MbSSVGXKvC6oq/xJzOucukxJsxjDkjNknqDK7GlUy6mrnKjMMCZKYEU+fW+KyCQiC3HT7XDSEJEpxqFHT0yRRYwxlBIzkIyVYqI1U60WoW1pVtBJwoVU5nHTMKSR9j0fK44YBBo71vi5RuTLfd2E+1g4lIq+L+lYLmYQYkqNkzbBLRs2wjRkovyl0Ekkdhww8CymyscvVrLlXNdsJWwcIykeCyWm7zwEVnPT9/XQ8PGTG1nTcBi4i+oroci34H8N/b83WHqGlyr8bHOzf2kcDWGe8AeMDRaqycCZTAAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;POST /api/products&quot; title=&quot;POST /api/products&quot; src=&quot;/static/9eac892adde7b41423ff2c7835cd0d7d/a6d36/post-products.png&quot; srcSet=&quot;/static/9eac892adde7b41423ff2c7835cd0d7d/222b7/post-products.png 163w,/static/9eac892adde7b41423ff2c7835cd0d7d/ff46a/post-products.png 325w,/static/9eac892adde7b41423ff2c7835cd0d7d/a6d36/post-products.png 650w,/static/9eac892adde7b41423ff2c7835cd0d7d/e548f/post-products.png 975w,/static/9eac892adde7b41423ff2c7835cd0d7d/3c492/post-products.png 1300w,/static/9eac892adde7b41423ff2c7835cd0d7d/d4e7f/post-products.png 1416w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;빨간 부분을 보면 바디 메시지에 JSON 형식의 데이터를 담아서 요청을 보내며,
&lt;code&gt;name&lt;/code&gt;이라는 문자열 데이터와 &lt;code&gt;price&lt;/code&gt;라는 숫자 데이터로 구성됨을 알 수 있습니다.
이는 컨트롤러에서 &lt;code&gt;createProduct&lt;/code&gt; 메서드가 &lt;code&gt;ProductRequest&lt;/code&gt; 타입의 매개변수를 받고 있으며,
해당 매개변수에 &lt;code&gt;@RequestBody&lt;/code&gt; 어노테이션을 붙여놓았다는 점이 자동으로 반영된 결과입니다.
참고로 &lt;code&gt;ProductRequest&lt;/code&gt; 클래스에 &lt;code&gt;getName&lt;/code&gt;과 &lt;code&gt;getPrice&lt;/code&gt;라는 게터 메서드가 정의되어 있어야
스웨거에서 내부 필드를 알 수 있습니다.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;파란 부분을 보면 기본적으로 제공되는 &lt;code&gt;200&lt;/code&gt;, &lt;code&gt;401&lt;/code&gt;, &lt;code&gt;403&lt;/code&gt;, &lt;code&gt;404&lt;/code&gt; 상태코드의 응답 이외에
&lt;code&gt;201 Created&lt;/code&gt;가 존재함을 알 수 있습니다.
이는 컨트롤러의 &lt;code&gt;createProduct&lt;/code&gt; 메서드에서
상태코드 &lt;code&gt;201&lt;/code&gt;의 &lt;code&gt;ResponseEntity&lt;/code&gt;를 반환한다는 점이 자동으로 반영된 결과입니다.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;나아가 우측 상단의 &lt;code&gt;Try it out&lt;/code&gt; 버튼을 클릭하면 현재 실행 중인 서버에 대해
해당 API로 요청을 보낼 수 있습니다.
아래와 같이 JSON 바디에 값을 담고 하단의 &lt;code&gt;Execute&lt;/code&gt; 버튼을 클릭하면
1000원짜리 고구마를 생성하라는 요청이 전송됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/3a4db75f879931952f79224401a7ff9c/8b936/post-products-request.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:65.6441717791411%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABbklEQVQ4y6WQ327TMBxG/eoICdgVPAKvgEB0RRPcwC1IINqibdXoaBrHTp3YSZw/bg9KUAQXYZO6iyPL+h1//mzxKvrMy1+fWMkNV9EtV7tbNqkcUFWO8vmf9X94iyoMyqZIlyKkNazllswX+K6hbGuqbqS5g5qqd0NLle2pNje4LEXcZJKv0ZqfRqK9JanuaVTlg9O7uh5xA9JnCFM4tDHYqqTub2vvadbWg7eVMd+WK35cX7NLJNs4JtIJQlc5uS+HJ9u6pGg9rvHDOsU4M6VD24zU9eTsXY50BqHLHKVTpNLYoiAcD7ShozuEOwnHMLgjR46YpkCk3hL+EfuwU+gzTF0g9t4Nm3Fwamg4HP4GPqTZZMMu9P8WTqYJYcjY94FZY4EWaB5IS9bkiEWSMlso3q0U8wnOl4r3l5oPl5r5ctrpz779rvgSacTHteLxm4iz8x3PJngy2/H8IubFRczT2bRzNt/x6HXEbJHwG3cd2yZEh5+FAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;POST /api/products Request&quot; title=&quot;POST /api/products Request&quot; src=&quot;/static/3a4db75f879931952f79224401a7ff9c/a6d36/post-products-request.png&quot; srcSet=&quot;/static/3a4db75f879931952f79224401a7ff9c/222b7/post-products-request.png 163w,/static/3a4db75f879931952f79224401a7ff9c/ff46a/post-products-request.png 325w,/static/3a4db75f879931952f79224401a7ff9c/a6d36/post-products-request.png 650w,/static/3a4db75f879931952f79224401a7ff9c/e548f/post-products-request.png 975w,/static/3a4db75f879931952f79224401a7ff9c/3c492/post-products-request.png 1300w,/static/3a4db75f879931952f79224401a7ff9c/8b936/post-products-request.png 1368w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;Execute&lt;/code&gt;을 클릭하면 아래와 같이 &lt;code&gt;curl&lt;/code&gt; 명령어로 요청이 보내지며
같은 화면에서 응답 결과를 조회할 수 있습니다.
응답 메시지에 &lt;code&gt;Location&lt;/code&gt; 헤더 값이 제대로 담기는 점까지 확인함으로써
해당 API가 어떠한 방식으로 동작하는지 대략적으로 파악할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/41eb0c7bad1f4c5da10a9161ac75fd3b/99661/post-products-response.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:55.828220858895705%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACR0lEQVQoz43T60vTURzH8d+fUg8LbJktE7PYNMMwK52ZM0MMC2W1cl6mqUvnWHnFykwkEKLUB+Wc0zm336aSFxCCKOppQZRdNp1uXsl3/H7pKATpwYvzORfOOV84R3BNjNM/MoLDKzLoceMQPQx5RYa8XoZ8XoZ9XhyiiG3UJa+xu93YXC55TJqT1r50OukdGGDqzWsEY3Ud59Mvoc0tIDMrj7RzWnJyr8r5ovYKF7LzycrOJ11zWR5TnzyLKvEMySkZpKRmcuq0hhPqVBTRx7A0tSLkX7uBIjqB2LgklLFqDm87ovqLGuXRxEhfuTUfo1QRc0RFXHwy+/bHUnu3CcH1aoI+u51B0SOXJNvKUsm7Gd425mPAPcrs+7cIbZ1dGIw1mO81yyyNrZFsrDFTUmmi9PadXZVV16ErNvK834bgnZnmxbBTPlGcnkScmsQ7MyVn5/hY5Aa7cY77sHvczH54h/Ap8I3ARpi58DzfV4KEWCe4ucLC5gpBVv/bImsENkIIH/1zfA0F+Bz8iZSlA+aWF/Cvh/BvSMKyQERoB7/chvmxtojwZclPcHOVHpsNQ3kVlSYzpnorFTW1XC8uo0hvoEhfQqHeICvSl+6gu1VOXoGO7t6+Pxsusc79zidkaArIztGhzdWjySokQSW9sUzi4tOIUqhRRCcRpUggShH/j4OHjrNn7wGqzFYEqdz5X8s4PCIdDW08aHlMfetTGh/2YG17hqW5m46WDrpa2mlveESVyYrRZKbCVC+3kspaCzfLquTf8hsdfGsd8Twl7AAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;POST /api/products Response&quot; title=&quot;POST /api/products Response&quot; src=&quot;/static/41eb0c7bad1f4c5da10a9161ac75fd3b/a6d36/post-products-response.png&quot; srcSet=&quot;/static/41eb0c7bad1f4c5da10a9161ac75fd3b/222b7/post-products-response.png 163w,/static/41eb0c7bad1f4c5da10a9161ac75fd3b/ff46a/post-products-response.png 325w,/static/41eb0c7bad1f4c5da10a9161ac75fd3b/a6d36/post-products-response.png 650w,/static/41eb0c7bad1f4c5da10a9161ac75fd3b/e548f/post-products-response.png 975w,/static/41eb0c7bad1f4c5da10a9161ac75fd3b/99661/post-products-response.png 1098w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이때 중요한 점은 해당 서버에서 아직 상품 데이터를 생성하고 저장하는 기능이 제대로 구현되어있지는 않다는 점입니다.
이처럼 실제 기능을 전혀 구현하지 않고도 컨트롤러 쪽 코드의 형태만으로 상호작용이 가능한 API 명세를 만들어낼 수 있다는 점은
스웨거가 지닌 장점 중 하나입니다.&lt;/p&gt;&lt;h3&gt;DB 모방하기&lt;/h3&gt;&lt;p&gt;물론 상품의 생성 및 제거 요청에 따른 결과를 실제로 확인할 수는 없다는 점은 불편할 수 있습니다.
만일 이 점이 불편하다면 실제로 DB를 연동하거나,
아래와 같이 DB 역할을 수행하는 레포지토리를 구현하고 컨트롤러를 수정해봅시다.
세부적인 소스코드는 &lt;a href=&quot;https://github.com/bugoverdose/examples/tree/a06dba3d76f56cb62debfc04a1bc71ab97fe3e1d/java11/swagger&quot;&gt;깃헙&lt;/a&gt;을
참고하기 바랍니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;Product&lt;/code&gt; : 상품 데이터입니다.&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Product&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; price&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;ProductRepository&lt;/code&gt; : 상품 데이터가 관리되는 저장소입니다. 처음부터 세 개의 데이터를 저장해주는 이유는
조회 API를 테스트하기 위해 데이터를 일일이 생성하는 작업을 줄이기 위함입니다.&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Repository&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductRepository&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Product&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; database&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductRepository&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;database &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        database&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Product&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;고구마&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        database&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Product&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;감자&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        database&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Product&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;양배추&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; database&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toUnmodifiableList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; productId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;database&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;containsKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;productId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;존재하지 않는 상품입니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;database&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;productId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ProductRequest&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; newId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getAutoIncrementedId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Product&lt;/span&gt; product &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Product&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPrice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        database&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; product&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; newId&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; productId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        database&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;productId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getAutoIncrementedId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;ProductController&lt;/code&gt; : &lt;code&gt;ProductRepository&lt;/code&gt;를 사용하도록 수정합니다.&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/api/products&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductRepository&lt;/span&gt; productRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ProductRepository&lt;/span&gt; productRepository&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;productRepository &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; productRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GetMapping&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getAllProducts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;productRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GetMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/{productId}&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ProductResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getProduct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@PathVariable&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; productId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;productRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;productId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@PostMapping&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createProduct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestBody&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProductRequest&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; productId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; productRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;URI&lt;/span&gt; uri &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ServletUriComponentsBuilder&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fromCurrentRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; productId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toUri&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;created&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;uri&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@DeleteMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/{productId}&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;deleteProduct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@PathVariable&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; productId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        productRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;productId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;noContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// @ControllerAdvice로 분리하여 구현하여도 동일 결과&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@ExceptionHandler&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleUnhandledException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;internalServerError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;서버에 문제가 발생하였습니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@ExceptionHandler&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleUnhandledException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;badRequest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 다시 애플리케이션을 실행하고 &lt;a href=&quot;http://localhost:8080/swagger-ui/&quot;&gt;웹페이지&lt;/a&gt;를 통해 요청을 보내봅시다.&lt;/p&gt;&lt;p&gt;아래는 4000원짜리 호박고구마를 만드는 POST 요청과 &lt;code&gt;id&lt;/code&gt;가 3인 상품을 제거하는
DELETE 요청을 보낸 후, 현재 저장된 모든 상품 정보를 조회하는 GET 요청을 보낸 결과입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/4507b3d49b25b6b7318a3d27a0de57ed/99661/get-all-products.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:95.0920245398773%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAADb0lEQVQ4y43U609bdRzH8fOfGB8ZBUlYYVxWCvS6rhegbGMtjC6BSpeB2VQcIhsj7eSO4ybI2FxEJrpxrZTSAm2ZAwT1gYtP1LgHJm46I2wwBrLxNueQwJaMhgev/H7nd375nO/ve3KOMB6ex+cPMx8IMhMIMRsIMTcRZm5yx4w/yHhgGl9wjtHALYZ9IYbGggyPhSQjvjD9ngkW7vyK4Cw5i05loFBvJE9v5rjejN2QyQmjKIsTpizydQaMugwMGVY0uixSlQZS0g5tS1OZiI1T0NByGcGWX0R0TBJx+9OQxaUgi1Mgk6Ww73lxCmLjU4kV5/GpyMS9z9mfpOK112VUN7QjjE3O0DcwxpBYvi8sjVvzECPj09s842E80jy8xbdDXB8YneT7O78htH36OR9W1lB/qVPS2Ny1Pa90N1JRVce5qvqIzrsaKC13MeidQvBNzXL95iiDo1N4J27jnfgWsWpxFBsurosbIxFf0I0RPws//YLwx4MVHm3A3482+GflGY83ka6XN2Dl6d49fgZLayDc/XOR+0tr3Ftc5d7iEx4sb/BwnW1Le7G2tfff1U2E+0vr0hM+65smO68cu9OFo6SawpImTp52U3KmjOLT5RG9/U4Fhc4zUusEsbonwMWmr5GnGsiw5KLWmkhSWNiXaCYxOZ2EZHVEyXItUW8mUNvUsRNY3zaA7tARcmwFHMnJR2e0o1BZUWvNKLWZqCLQHLRIwR+3X90JrG25ieZgNtY8B5kWK2kaK3LlMdLVBtJUZtLVuxND4xOVNLVe2Qmsax1ArbOQfdROZraNdK0NuTIHpRio3mNg25UXKxSPnGcv4ugxO+ZsBwq1FZXGhFKTEZEUmJD+YmBNcz/yVCOmzFz0xsNS/+IPZJEsV5Mk1+5K7J3jZCnO4g/o6P4S4a+H/7G0tsn0wl3ar01wuTdET/8svUM/cMMzTb8nwKA3yNAuxC/FH5pnPPgdP/78+1aFy0+h56shSssqOXehmvNVNbhrmiircPPu2Qs4i9/nrVPvUbQL8V5uvpOevuGtwNVNaLjURZbFhjW3AFtuAXnHHegNh1FpzFJ/3ohOIDomkaiXiIk9wCuvRuGqaRaPvC59Nt7J27R2XqOzu5euq9fp6P6CT7p6cNe24q5t4aP6Ni7WvZz4H6x0NfKN/xb/AwHK4IMkQME0AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;GET /api/products&quot; title=&quot;GET /api/products&quot; src=&quot;/static/4507b3d49b25b6b7318a3d27a0de57ed/a6d36/get-all-products.png&quot; srcSet=&quot;/static/4507b3d49b25b6b7318a3d27a0de57ed/222b7/get-all-products.png 163w,/static/4507b3d49b25b6b7318a3d27a0de57ed/ff46a/get-all-products.png 325w,/static/4507b3d49b25b6b7318a3d27a0de57ed/a6d36/get-all-products.png 650w,/static/4507b3d49b25b6b7318a3d27a0de57ed/e548f/get-all-products.png 975w,/static/4507b3d49b25b6b7318a3d27a0de57ed/99661/get-all-products.png 1098w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이때 이미 제거된 &lt;code&gt;id&lt;/code&gt;가 3인 상품을 조회하는 GET 요청을 보내면
&lt;code&gt;ProductRepository&lt;/code&gt;에서 설정한 &lt;code&gt;IllegalArgumentException&lt;/code&gt; 예외가 발생합니다.
그리고 그에 대응되는 &lt;code&gt;@ExceptionHandler&lt;/code&gt; 메서드가 동작함에 따라 아래와 같이 상태코드 400의 응답이 돌아옵니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/115c53a7d8fe1ee6145a88705563d68e/fe9e8/get-product.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:109.81595092024541%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAADvklEQVQ4y5XU+1NUZRzH8fMvdZ8uJt42FMwkHCktzTGmqDGNGnTUQUzIUcEZUyy1nAqmmpKLWZOJWqA5gijCGi7shb2wu+e2y+7ZC3v27L6bcxaKVsz84TWf5/me53nmPM9z5git16b5eiiHMxDB4ZUY9ys4vDIOn4xrMoInPEUwmkbWskj3E9eRYhkrhUlpCp84RSqTJWPk0I0809mcJWMy8oW8H3N8Ms30ZIhpNYowHk7gVnSkhIEczxCOplASOmoiizKHmtBRkkahr+nWmIKZfjxjpeAauInH7kBxuAg63DhH7iJ6Aii+ELI3+A9fCMXtQ1I0RM1AiumFrRYRRq8PMjwewB9UCSkavlAEKZpCjU+jxGalrTdWJ0XksIqUzM27mLVg2O1FzYCayhGbNsjm8hhANj9HLo8OaEoEORxBTuaR47p1UcWEyT/HmRgLMOHwMzHmt9Iz257hHfNbxyC7JgpbjuuIscw9pHgG4dKdKfZ0iXzUHaahK8z+cyJHLsjs7Q5bzFrT2RB2j0pQieOTNAKyZn1inlDUavtlDZ8UI6AkEELKFGFVI5bSZ2SJp7NWFszU00X9pD5nTkE8lUWIxJJo6Sw5+Jsxpz2ffJHZmjlPuHnHTf/wGIN2FwPD49wYcVrtQbuTG3anVTOfm/X+22Ncuzl6r1ujXB28w9DoBEJD02EWLFxO+aoqSsvWUPbiWspNq6pYadZWVGIrrbDqi5etYuGiMp4vUrJkJU89s5SaLXUIexpbePpZG8tKK1hie+keS19YbVliK+TSUlPFv9iWv8yCkhVsqd2FcP6365xu76Dj3EXO/NgzxwV+OPv/fdf5Cz29Awjfd/9K44EjHPvsS46faqP1xFdWHj56yqo3HfyExgP/rengUcyjO91+BsH8RU2ICbxiglA0gxg3CMeyiKa48VBkzUDou6Vg96S5NaYx6jNwhcElglt6OF4FRgMgDN6NIscSXB0Y4acLvfRdH+JK/xAX+/q5dGWAiw9gjunp7ef85V7O9tgRbjvTJHOwe2+zddu25ZUsWLiCR59YxGNPLn6gRx4v4bmScl59/W3eqPkY4cbdFG4Rvvj2d3bsPUljyzccOtZBc2snza0dtBzv5PCnXffRbT0/+vnPtHX8QXvXEEJQTRJNw7ETbXy4vYGd9fuprWtgU/U2Nr/1Ppuqt7J+4zus31gzk/NbXbmB+n2HECbVJLEMtJ5sY1vtTnbs2scHdfVsrd1l5bvvbadq/ZusXbeZqnWFLPbKa9VUrNnA7oaD/AXdQZbtQg5kbQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;GET /api/products/3&quot; title=&quot;GET /api/products/3&quot; src=&quot;/static/115c53a7d8fe1ee6145a88705563d68e/a6d36/get-product.png&quot; srcSet=&quot;/static/115c53a7d8fe1ee6145a88705563d68e/222b7/get-product.png 163w,/static/115c53a7d8fe1ee6145a88705563d68e/ff46a/get-product.png 325w,/static/115c53a7d8fe1ee6145a88705563d68e/a6d36/get-product.png 650w,/static/115c53a7d8fe1ee6145a88705563d68e/e548f/get-product.png 975w,/static/115c53a7d8fe1ee6145a88705563d68e/fe9e8/get-product.png 1146w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이제 우리의 API 명세는 마치 실제로 DB가 연동된 것처럼 동작합니다.
실습 목적으로 이러한 코드를 구현해본 것이지만,
사실 실무에서도 프론트엔드/클라이언트 개발자들이 최대한 빨리 개발에 착수할 수 있도록
이처럼 서버의 뼈대만 우선적으로 구현하여 개발서버를 띄우는 경우가 종종 있습니다.
이러한 상황에서 스웨거를 사용하면 &lt;em&gt;앞으로 애플리케이션에서 구현할 예정인 API에 대한 명세&lt;/em&gt;를
굉장히 쉽게 구현할 수 있습니다.&lt;/p&gt;&lt;h2&gt;Docket 기반 커스터마이징&lt;/h2&gt;&lt;p&gt;위의 디폴트 설정만으로도 충분히 협업에 도움이 되는 API 명세 페이지를 만들 수 있지만,
사실 해당 페이지를 꾸밀 수 있는 방법은 무궁무진합니다.
해당 게시글에서는 프로젝트를 처음에 셋업할 때 하면 좋은 초기 설정 작업만 몇 가지 진행해보고자 합니다.&lt;/p&gt;&lt;h3&gt;제목 및 버전 수정하기&lt;/h3&gt;&lt;p&gt;기본적으로 아무런 설정도 하지 않으면 아래와 같이 제목, 버전, 프로젝트 설명 등의 정보가 상단에 제시됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:572px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9d394723edad71374c19dabe99b4ecdd/a805e/default-title.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:46.62576687116564%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABXklEQVQoz6WS207bQBRF/e39BP6BPlRCVDSJiFMoFRKt4IUHAgISLgHLY4d4bMeXucReyAMICXpR1Yelc2Y0e+noaLy6rsmyHK0NUqZImaGNQWuNUpqqrl2/LAqqqnJvu4wxhsvpDWfnV0znPmdiE6UqvOn0mvWPGwz9XQ5+HNLr+/QHPl93vuOPvrHV8xls7/J5a8iX/ohPGz16gx2Goz329g85+HnM0WyN/asPVCrHk3nJ6STg5GLGTEjOrwXjScD48o6Lm5DbICaK5o4gCBEiJgwjRDTHWkvbtjQWhzEWr6wNSdmQVi1JYVkUjSMpViwKS6FWtG1D0zQu3Lr6dO5W8RYvz3MiIYijiHkcI8LQ1ZXVDmv0L4MvmOd9vwqXJYskJZGZqx1pmv8mZFz/J7ys1Nw+KEKpuVso7hNFqQz2WfI3wTthslRMRMn9Q4WQ3Xd4P9k/Cd9e/I+sEz4C7NCrOizne9cAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;디폴트 제목&quot; title=&quot;디폴트 제목&quot; src=&quot;/static/9d394723edad71374c19dabe99b4ecdd/a805e/default-title.png&quot; srcSet=&quot;/static/9d394723edad71374c19dabe99b4ecdd/222b7/default-title.png 163w,/static/9d394723edad71374c19dabe99b4ecdd/ff46a/default-title.png 325w,/static/9d394723edad71374c19dabe99b4ecdd/a805e/default-title.png 572w&quot; sizes=&quot;(max-width: 572px) 100vw, 572px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;애플리케이션에 &lt;code&gt;Docket&lt;/code&gt; 빈을 하나 등록함으로써 API 문서 전반에 대한 설정을 수정할 수 있습니다.
아래와 같이 &lt;code&gt;Docket&lt;/code&gt; 빈에 &lt;code&gt;ApiInfo&lt;/code&gt; 객체를 설정하여 넣음으로써 제목, 버전, 문서 설명 등의 정보를
세부적으로 설정할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SwaggerConfiguration&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Docket&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Docket&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DocumentationType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SWAGGER_2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apiInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getApiInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apis&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RequestHandlerSelectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PathSelectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ApiInfo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getApiInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ApiInfoBuilder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;스웨거 입문 프로젝트&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;beta&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Java 11, Spring Boot 2 환경에서 스웨거 셋업하기&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위와 같이 설정하면 아래와 같이 제목, 버전, 프로젝트 설명의 내용이 수정되어 페이지가 생성됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/1449cc136565980055f00139e82a45ab/8ae3e/custom-title.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:40.49079754601227%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABkklEQVQoz22SzW/TQBDF/f8fkBASBw5IgEBCgSgUt0ENoYXSplAKalO1KST+it3abtKWeL224yg/5AFDERxmd2Z29u3Me2vM53OKohBLlCJJFFmWo5QiTVNms4Q8z2WvYqlRCqVSqa38KJ4QxxPBMKbTS3of9nlhrnPr9j1ernbY/9Kn2WrTaJo8eNTAsl1ev9miu/Ge5601Hj5+xp2791kx16X2ScPkabPNLFEYUXTBweExO7ufaK28YmQ5OO6Ynd4e5lqH1XYX3z9j9+Nntnt7dLrvGI5s3m712NjclrNUa+m4mtbQWmM5Hn4Q4gfnTKaXhPEE2/VxPV/GOTw6wbJcqtrFYgHLJbAUvwIpy1JMRr5Kcpw4w4pSrDDFiTXDUGPHWnzvIiO8ypgXhVy+aTX3tUmHFeHVy1mW/bPXolQCaZ39FmaWJDJiDfIX4PX1d+EkjGJsx8OyPU4G3xj7ZyLGQf+Y068jguCcwelQcv2jAeNxIL+hBqy7Nqql4qIsf3IhcVn+4edXXN7I1bwV/6HhB19gUa6zk/EnAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;커스텀 제목&quot; title=&quot;커스텀 제목&quot; src=&quot;/static/1449cc136565980055f00139e82a45ab/a6d36/custom-title.png&quot; srcSet=&quot;/static/1449cc136565980055f00139e82a45ab/222b7/custom-title.png 163w,/static/1449cc136565980055f00139e82a45ab/ff46a/custom-title.png 325w,/static/1449cc136565980055f00139e82a45ab/a6d36/custom-title.png 650w,/static/1449cc136565980055f00139e82a45ab/8ae3e/custom-title.png 756w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://springfox.github.io/springfox/docs/current/#configuring-springfox&quot;&gt;공식문서&lt;/a&gt;에
따르면 Docket은 &amp;quot;문서의 내용에 대한 간략한 요약, 설명 등을 의미합니다.
이 외에도 &lt;code&gt;Docket&lt;/code&gt; 빈 설정으로 할 수 있는 것들을 자세히 알고 싶다면 해당 문서를 참고하시기 바랍니다.&lt;/p&gt;&lt;h3&gt;컨트롤러 필터링하기&lt;/h3&gt;&lt;p&gt;기본적으로 Springfox 라이브러리는 프로젝트에 존재하는 모든 컨트롤러에 대해 API 명세를 자동으로 생성합니다.
문제는 스프링부트 애플리케이션이 기본적인 예외 처리를 위해
&lt;code&gt;BasicErrorController&lt;/code&gt;라는 컨트롤러를 사용한다는 점입니다.
때문에 &lt;code&gt;basic-error-controller&lt;/code&gt;라는 섹션이 아래와 같이 API 명세의 한 영역을 차지하게 됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/4c72d4a7ace28ecda3006147c0f4b048/04784/basic-error-controller.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:82.82208588957054%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACR0lEQVQ4y5XUy6sURxjG4fpbhYC4yCrb4C7gMmAg2yQIZxFzEUxWISLJwuAiejjYM6dnpq/T3VVd3V3V1deJ/mRa5Bw0qLN4qJeqr77lK+IkQ+kapTRaVxSFIssK8kLinKN1Duc6rG0Zx5F5nt8zTRPDMCxZBJdrVJaw24VEccqlv8PfBGy2IWVZUeoKrWukLOm6fvl8XHzlzbK2bZc3cXYOZ89fEeqJ0vZIMyLNQDO8pOoO6G5Gu3nJZTuh7Iiy0zXjcl+2M5UbEfe9iV/WM/6+Jckawqwhzg2yHlHNdJK6nRCPbsDjzyB80pEHlnRl2K8tTXI4TXzA5jPi0Znir/uaLHBo5dBFh5YdtRpOUqkBUw+IL4uH3Ja/81Ru2BQpXhGzlglpV5F2mqTTy/lh1TIn+wYRvXhI4v1Go0Nao6irbOGsOpGkczWCx5/D31/gkn+p8wibb7FFwMHsTza3EtH/+DPDT79iPY86jmjCABMFTEV2mnzPqEsEd7+Gb7+h9zyaNKMJI0yUMGT5iTLGskTc/O4Zt354zoN/QqJM4ycaP1bE0pKolljZT/BmLq8c4vs/PO79ueKJlxLmJdu9WqSlIdWWVJtPppoW8VVzzh1zwYUpiHXJVkt2WiFHR3GN/IjjjB46xLo3+L2hHnvcNOLmcTnbt3melmyHHjt+yIAbB4T/wifwA+Io5fJyy2rl4/s7msZQVfVSacZY/jscOMzz/5qnaam6Yxa5VCitqermqq6qeqmjYwcel7Wte6ey3tf3w1JfrwHYlfzWz2X5vwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;basic-error-controller&quot; title=&quot;basic-error-controller&quot; src=&quot;/static/4c72d4a7ace28ecda3006147c0f4b048/a6d36/basic-error-controller.png&quot; srcSet=&quot;/static/4c72d4a7ace28ecda3006147c0f4b048/222b7/basic-error-controller.png 163w,/static/4c72d4a7ace28ecda3006147c0f4b048/ff46a/basic-error-controller.png 325w,/static/4c72d4a7ace28ecda3006147c0f4b048/a6d36/basic-error-controller.png 650w,/static/4c72d4a7ace28ecda3006147c0f4b048/e548f/basic-error-controller.png 975w,/static/4c72d4a7ace28ecda3006147c0f4b048/04784/basic-error-controller.png 1174w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;해당 컨트롤러는 저희의 API 명세와는 딱히 관련이 없습니다.
&lt;a href=&quot;https://www.baeldung.com/spring-swagger-remove-error-controller&quot;&gt;밸덩&lt;/a&gt;을
보면 다양한 방법을 사용하여 &lt;code&gt;BasicErrorController&lt;/code&gt;를 제거할 수 있음을 알 수 확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;해당 게시글에서는 이 중 &lt;code&gt;Docket&lt;/code&gt; 빈 설정을 활용하여 해당 컨트롤러를 제거해보고자 합니다.
&lt;code&gt;apis&lt;/code&gt; 메서드에 넘기는 인자 값을 아래와 같이 수정하면
모든 API가 아니라 &lt;code&gt;@RestController&lt;/code&gt;라는 클래스 어노테이션이
붙어있는 컨트롤러들에 대해서만 API 문서가 생성됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Docket&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Docket&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DocumentationType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SWAGGER_2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apiInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getApiInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apis&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RequestHandlerSelectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;withClassAnnotation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RestController&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PathSelectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;스키마 목록 조회&lt;/h3&gt;&lt;p&gt;참고로 위와 같이 꼭 API 명세로 남기고 싶은 컨트롤러들을 필터링하는 것은 하단의 &lt;code&gt;Models&lt;/code&gt; 섹션 쪽에서도 도움이 됩니다.&lt;/p&gt;&lt;p&gt;기본적으로 저희는 &lt;code&gt;ModelAndView&lt;/code&gt;나 &lt;code&gt;View&lt;/code&gt;를 사용하고 있지 않음에도 불구하고
&lt;code&gt;BasicErrorController&lt;/code&gt;로 인해 아래와 같은 영양가 없는 스키마 정보가 API 명세에 추가됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/a9e937435797bd9d090861c45e54524f/0d0e4/models-verbose.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:61.34969325153374%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA60lEQVQoz52TyW6FMBRD+f/PA4kFYp4EYkibkZ2fHMor3VQvLI4iocixfS9R13XIsgxCfEEpDaVUMFprbNsGIQQiKc8Px3F4nHOw1sIYYj7kvKu1QUSBcRxR1zWapsEwDFjX1b+473sQxlpEdEORoihQVRVYwbIswWKMS5dekNDpb1zjawjFOncKlmWJOI6RJAnSNEXf994lo/P8j+sOT++QubVW74L5EicnpfyY75/TXh1yKHTJDsk0Te81eNQhBTjhtm098zw/m/IlSLvXgvJjaGT5N7LzcfM8987uJYdyDuW2Ik9+uztc7Bcxo5AgFSokOgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;models-verbose&quot; title=&quot;models-verbose&quot; src=&quot;/static/a9e937435797bd9d090861c45e54524f/a6d36/models-verbose.png&quot; srcSet=&quot;/static/a9e937435797bd9d090861c45e54524f/222b7/models-verbose.png 163w,/static/a9e937435797bd9d090861c45e54524f/ff46a/models-verbose.png 325w,/static/a9e937435797bd9d090861c45e54524f/a6d36/models-verbose.png 650w,/static/a9e937435797bd9d090861c45e54524f/e548f/models-verbose.png 975w,/static/a9e937435797bd9d090861c45e54524f/0d0e4/models-verbose.png 1230w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;꼭 필수적인 API들만 필터링할 경우, 아래와 같이 &lt;code&gt;ProductController&lt;/code&gt;에서 실제로 사용하는 스키마 정보만 모아서 조회할 수 있습니다.
이때 보여지는 스키마는 &lt;code&gt;ProductRequest&lt;/code&gt;와 &lt;code&gt;ProductResponse&lt;/code&gt;의 클래스명과 내부 필드명을 참고하여 생성됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/b07ecc3e70182fd75f47d58d9eee0b6f/cd78c/models.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:57.668711656441715%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABPUlEQVQoz52T3W6CQBSEef/n8spo0zYurFrQCpHfXVxAQW+mmSUYtS0xXnzZPbDMGeaAs9/vUdc1uq5D27YvU1UVTqcTnDTNcDwecblccD6fX6Zpml6QGzo0xtguxBiuxsLrz0ANOnV2ux2E60IIASklttstsixDnhfIshxaayilUBTFKDxjBVnM5+8QwkOe50iSFForSBlhOvXh+wGCILD3emFl11uowcZWkBnSCR8Y3BA6TJK+QZqmv0T+FWSQhMWw55CYLdcB1mPwTNt1cJIkAT+dMAwRRRFY03FZahhToix7GMOYS56xDik2m73B8zysVks7lDiOsdnEWCy+EQSbhwz/Hsr1lbn5+BRYf/mo6wpKaRwOJVw3xGSyhpRL2+hpQQb+OP5bKDSIjXEVtIFfg7/nfihj9EPhn/IDHECM2FEalv8AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;models&quot; title=&quot;models&quot; src=&quot;/static/b07ecc3e70182fd75f47d58d9eee0b6f/a6d36/models.png&quot; srcSet=&quot;/static/b07ecc3e70182fd75f47d58d9eee0b6f/222b7/models.png 163w,/static/b07ecc3e70182fd75f47d58d9eee0b6f/ff46a/models.png 325w,/static/b07ecc3e70182fd75f47d58d9eee0b6f/a6d36/models.png 650w,/static/b07ecc3e70182fd75f47d58d9eee0b6f/e548f/models.png 975w,/static/b07ecc3e70182fd75f47d58d9eee0b6f/cd78c/models.png 1236w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이제 최종 결과물을 확인해보면 아래와 같으며,
소스코드는 &lt;a href=&quot;https://github.com/bugoverdose/examples/tree/dd0356c580ae0293d15a8a63d3e5d6d7708a4c62/java11/swagger&quot;&gt;깃헙&lt;/a&gt;을 참고하기 바랍니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/33e11765cc06f5b612b43a0ce41435f7/78612/customization.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:116.56441717791411%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAADD0lEQVQ4y52Uy3PjRBCH9Vdz4QYXiiMnznCgoAqqqMqJC0ktG0Ky2TjxK3r4JVlvaSTL1tvho0a2F+9ilgRVfeqentFP3dL0KLbjcX3T4+5+wKM24fc/bpnNLfqDMVfXb7l4dcV9f8T17QNRJNhut9R1TdM0J1FMc8mr36646/Xp3Q/49fw1w+Ejb27veRiMuXnTQzdm2I7PZpPTtu3HBaO0wBM5flKyDNc40QYnSLoHj68/n57+U6wTjEVKEMbYro8fxjhu0GUTBCHW0sbzg26hFDqIfTTDqqooy5KiKKjKkjzPO8q9XxTleyLHYsexg680bUvbbve03UeXtF18x7HAaf6eV3zPYzgYMh6NmUxmDEcqb+8eUFWDRCRd6b4fkKYpW/mCpqZtmvdo6pp1lnW+4iY5E3/DIspJ1gVpR97Z1abcs/OzvCLLy5PI+bysUH4ewJfn8PUV9OcJD4ZLfxqgWgnDecSjKTDjCjttWSbNSeykwRINQVaj3ARLzkyNX+wJMxExD0PmUYgpYmZhyCKOcLIV7vpAdhI7WxHnG5Sf3Es+m3zPV4sz1GCB7pronomZ+Mxjh3ns4hcJYZXiFwIvF3gHu0fGnTwmKlKUy1nLD70tZ6MnNDdFtSM0J+7Y+QLDSzprJQXOqsI+gZVWROsK5WLxxDd9+FGFqZ0yt0Lmy5iFHTPb+6aTsLAFXpwTiAL/A2TMiwtEVqLw3bfw6Sfwxeesx2Ni3SDRdRLdINY0hK6zmkwRmk42ndI6Nq39ATJmmTSBj1L1B1TnF1SvL8lMC2FaJNaSdLns/NXSZuO6ZI5D7nnUUUQdRjt7TBBSpylKBRSAtI3skG1LI5GbeLvtbN3uxnXTUP0bsmPkxg6DgKlhkKVp1zqyh2V/P5d6b2UnyfNAKct/LpIHgpx8KTIZRd4sy0LTNFRVxTAMHMchiqJnE4YhQgjKqtplmCTyEAjeIcer1epFZFnWVddlKOuXIhLpHy96DnLter3eCcqbLHk0GjEejxkOh91YZvo/Sy7ffdADcnw4uV+C/Cl/ASFIzHEhIQzuAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;customization&quot; title=&quot;customization&quot; src=&quot;/static/33e11765cc06f5b612b43a0ce41435f7/a6d36/customization.png&quot; srcSet=&quot;/static/33e11765cc06f5b612b43a0ce41435f7/222b7/customization.png 163w,/static/33e11765cc06f5b612b43a0ce41435f7/ff46a/customization.png 325w,/static/33e11765cc06f5b612b43a0ce41435f7/a6d36/customization.png 650w,/static/33e11765cc06f5b612b43a0ce41435f7/e548f/customization.png 975w,/static/33e11765cc06f5b612b43a0ce41435f7/78612/customization.png 1260w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;주니어 개발자들을 모아놓으면 &amp;quot;스웨거는 컨트롤러에 어노테이션을 덕지 덕지 붙여야 해서 쓰면 안 된다&amp;quot;와 같은 말이 빈번하게 등장합니다.
그러나 비즈니스 로직 쪽의 코드를 전혀 건드리지 않고도 스웨거는 충분히 유의미하게 활용할 수 있습니다.
실제로 해당 프로젝트에서 스웨거와 관련하여 수행한 작업은
&lt;code&gt;build.gradle&lt;/code&gt;에 의존성을 한 줄 추가하고 &lt;code&gt;Docket&lt;/code&gt; 빈을 하나 등록한 것 이외에는 없습니다.&lt;/p&gt;&lt;p&gt;한 번 셋업만 해놓으면 별도의 작업 없이도 자동으로 API 명세가 생성된다는 점에서 스웨거는 높은 생상성을 지닙니다.
또한 Postman처럼 서버에 실제로 요청을 보낼 수 있다는 점은 스웨거가 지닌 명확한 장점이라고 생각합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://springfox.github.io/springfox/docs/current/&quot;&gt;Springfox 공식문서&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/error/BasicErrorController.html&quot;&gt;BasicErrorController&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[발표] 객체지향 언어로서의 Go]]></title><description><![CDATA[실무에서 Go를 사용한지 정확히 1년이 되었습니다. 작년에 Golang Korea 주관 행사에서 발표했던 내용의 요약과 함께 Go와 OOP에 대한 개인적인 생각을 정리해보고자 합니다.]]></description><link>https://bugoverdose.github.io/essay/object-oriented-go-presentation/</link><guid isPermaLink="false">https://bugoverdose.github.io/essay/object-oriented-go-presentation/</guid><pubDate>Tue, 06 Feb 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;작년에 저는 Golang Korea에서 주관하는 작은 행사에서 &amp;quot;Object Oriented Go&amp;quot;라는 주제로 발표를 하였습니다.
기본적으로 Go 언어에서 OOP 이론을 적용할 수 있는 방법과 한계에 대해 포괄적으로 다루었으며,
세부 내용은 당시 &lt;a href=&quot;https://github.com/bugoverdose/bugoverdose/blob/presentations/presentations/%EC%A0%95%EC%A7%84%EC%9A%B0_Object_Oriented_Go.pdf&quot;&gt;발표 자료&lt;/a&gt;에서
확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;문제는 해당 발표가 녹화되지 않았다는 점입니다.
그러한 맥락에서 당시 발표의 핵심 내용 요약과 함께 Go와 OOP에 대한 개인적인 생각을 정리해보고자 합니다.&lt;/p&gt;&lt;h2&gt;Go는 객체지향 언어인가&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://go.dev/doc/faq#inheritance&quot;&gt;Go 공식문서&lt;/a&gt;를 찾아보면 다음과 같은 내용이 있습니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;Is Go an object-oriented language? Yes and no. Although Go has types and methods and allows an object-oriented style of programming, there is no type hierarchy. ...&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;즉, &amp;quot;Go는 객체지향적인 언어이기도 하고, 아니기도 하다&amp;quot;라는 것이 실제로 공식문서에 적혀있는 오피셜한 입장입니다.
기본적으로 OOP 스타일의 프로그래밍이 가능하지만,
클래스 및 상속 문법의 부재로 인해 타입 계층을 구현할 수 없는 등 전통적인 OOP 언어와는 차이가 있다는 것입니다.
공식문서에서 이처럼 애매모호한 입장을 취하고 있기 때문에
&amp;quot;Go는 객체지향 언어인가&amp;quot;에 대해 많은 개발자들이 자신만의 의견을 내는 것을 쉽게 찾아볼 수 있습니다.&lt;/p&gt;&lt;p&gt;저의 경우 각종 서적을 통해 OOP 이론을 공부하였고 1년 간 실무에서 Go를 메인 언어로 사용하였습니다.
그러한 입장에서 저 또한 해당 주제에 대해 가볍게 정리해보고자 합니다.&lt;/p&gt;&lt;h2&gt;OOP 이론의 적용 가능성&lt;/h2&gt;&lt;p&gt;Go는 기본적으로 각종 OOP 이론 및 개념을 적용하기 위해 필요한 문법을 제공하고 있습니다.&lt;/p&gt;&lt;p&gt;물론 Go는 클래스와 상속 문법을 제공하지 않습니다.
때문에 부모 클래스에서 자식 클래스로 이어지는 타입 계층을 구현할 수 없습니다.
그러나 Go에서 제공하는 기초 문법들만으로도 상속의 대안으로 충분합니다.&lt;/p&gt;&lt;p&gt;코드 재사용을 원하면 애초에 &lt;strong&gt;상속 대신 조합&lt;/strong&gt;을 하면 됩니다.
또한 &lt;strong&gt;다형성&lt;/strong&gt;을 위해 상속을 사용하고 싶은 경우 인터페이스를 활용하면 됩니다.
관련 내용은 아래 게시글들을 참고하기 바랍니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;/development/composition-over-inheritance/&quot;&gt;[OOP] 상속 대신 조합&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;/development/composition-in-go/&quot;&gt;[Go] 객체 조합과 필드의 종류&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;/development/abstraction-and-polymorphism-in-go/&quot;&gt;[Go] 추상화와 다형성&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;특히 추상화와 다형성을 활용하면 Go에서 다양한 OOP 이론들을 적용할 수 있습니다.
그 예시로 아래 게시글들에서는 OCP, ISP, DIP 등 대표적인 객체지향 설계 원칙들을 Go에서 적용할 수 있는 방법을 설명합니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;/development/ocp-in-go/&quot;&gt;[Go] 개방 폐쇄 원칙&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;/development/isp-in-go/&quot;&gt;[Go] 인터페이스 분리 원칙&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;/development/dip-in-go/&quot;&gt;[Go] 의존성 역전 원칙&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;캡슐화의 한계&lt;/h2&gt;&lt;p&gt;물론 Go에서 OOP를 추구함에 있어 문제가 없는 것은 아닙니다.&lt;/p&gt;&lt;p&gt;Go는 패키지 수준에서의 캡슐화만 제공합니다.
타입과 변수의 식별자가 대문자로 시작하면 패키지 외부에서 접근 가능하고,
소문자로 시작하면 패키지 내부에서만 접근 가능합니다.&lt;/p&gt;&lt;p&gt;이에 대해 문법적으로 간결하다고 느낄 수도 있습니다.
그러나 &lt;code&gt;private&lt;/code&gt;, &lt;code&gt;public&lt;/code&gt;과 같은 접근 제어자를 통해 인스턴스 단위의 캡슐화가 가능한 자바와 비교했을 때,
Go에서는 구조체의 내부 구현을 구조체의 외부로부터 숨기는 데 명백한 한계가 존재합니다.&lt;/p&gt;&lt;p&gt;예를 들어, &lt;code&gt;Member&lt;/code&gt; 구조체의 이름을 수정할 때 특정한 검증 로직을 실행시키고 싶은 경우를 생각해봅시다.
&lt;code&gt;domain&lt;/code&gt; 패키지 외부에서는 &lt;code&gt;name&lt;/code&gt; 필드에 직접 접근할 수 없으므로
자연스럽게 &lt;code&gt;UpdateName&lt;/code&gt; 메서드의 사용이 강제됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; domain

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Member &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;m &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;UpdateName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validateName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;is invalid name&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	m&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 아래와 같이 &lt;code&gt;Member&lt;/code&gt;와 동일한 패키지 내에서는 &lt;code&gt;Member&lt;/code&gt; 구조체의 내부 구현에 직접 접근할 수 있습니다.
즉, 퍼블릭 인터페이스(&lt;code&gt;UpdateName&lt;/code&gt;) 뒤에  내부 구현(&lt;code&gt;name&lt;/code&gt;)을 캡슐화하는 데 실패했다고 볼 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; domain

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Guild &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	master  &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Member
	members &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Member
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;g &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Guild&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;UpdateMasterName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	g&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;master&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이러한 캡슐화 관련 이슈에 대한 자세한 내용은 아래 게시글을 참고하기 바랍니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;/development/encapsulating-go-structs/&quot;&gt;[Go] 구조체 캡슐화하기&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;객체지향 언어로써의 Go&lt;/h2&gt;&lt;p&gt;정리하자면 &amp;quot;Go는 객체지향적인 언어이기도 하고, 아니기도 하다&amp;quot;라는 것이 공식문서의 입장입니다.
때문에 Go가 객체지향 언어로 &lt;em&gt;분류&lt;/em&gt;될 수 있는지에 대해서는 객체지향 언어에 대한 정의가 무엇인지에 따라 달라질 겁니다.
그러나 적어도 Go는 OOP 이론과 개념들을 적용하는 데 필요한 필수적인 문법을 충분히 제공하고 있습니다.
때문에 Go는 객체지향 언어로&lt;strong&gt;써&lt;/strong&gt; 충분히 활용 가능합니다.&lt;/p&gt;&lt;p&gt;사실 OOP라는 것은 말 그대로 &amp;#x27;프로그래밍 패러다임&amp;#x27;입니다.
개발자는 OOP를 저희의 사고를 확장하는데 도움이 되는 지침 정도로만 다루고, 그것에 매몰되지 않도록 주의해야 합니다.
즉, 기본적으로 &lt;strong&gt;Go에서 좋은 코드는 객체지향적인 코드가 아니라, Go에서 제공하는 문법을 적절하게 활용한 코드&lt;/strong&gt;입니다.
다만, 특정 상황에서 특정 OOP 이론을 적재적소로 적용하는 방식으로 구조를 개선할 수 있을 뿐입니다. &lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;최근 우아한테크코스 백엔드 크루들이 Go 스터디를 진행하길래 코드 리뷰를 해준 적이 있습니다.
&lt;a href=&quot;https://github.com/poi1649/go-racing-car/pulls&quot;&gt;깃헙 저장소&lt;/a&gt;에 올라온 PR들을 보며
자바와 OOP에 익숙한 백엔드 개발자들이 Go를 처음 접하면 다들 비슷한 혼란과 시행착오를 경험한다는 생각이 들었습니다.&lt;/p&gt;&lt;p&gt;한편으로 이처럼 클래스 문법이 없는 언어에서 OOP를 추구해보는 경험은 OOP를 이해하는 데 굉장히 도움이 된다고 생각합니다.
자바와 같은 클래스 기반 언어를 기반으로 OOP 이론들이 발전해왔을 뿐,
OOP라는 것은 본질적으로 특정 언어 혹은 특정 문법에 종속된 개념이 아니기 때문입니다.&lt;/p&gt;&lt;p&gt;마지막으로 OOP에 대한 제 가치관을 한 줄로 요약하면
&lt;em&gt;&amp;quot;애플리케이션 개발자는 OOP라는 도구를 상황에 따라 적재적소로 활용할 수 있어야 한다&amp;quot;&lt;/em&gt;입니다.
OOP 이론에 대해 학습하고 싶으시면 아래 세 권의 서적을 참고하시기 바랍니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;조영호의 &lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001628109&quot;&gt;객체지향의 사실과 오해&lt;/a&gt;&lt;/li&gt;&lt;li&gt;최범균의 &lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001062523&quot;&gt;개발자가 반드시 정복해야 할 객체 지향과 디자인 패턴&lt;/a&gt;&lt;/li&gt;&lt;li&gt;조영호의 &lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001766367&quot;&gt;오브젝트&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[쿠키런] 데이터 기반 조합 추천 시스템 구현 이야기]]></title><description><![CDATA[[쿠키런: 오븐브레이크]라는 게임의 조합 추천 시스템의 개발 과정에 대한 NDC 발표 영상을 정리해보았습니다.]]></description><link>https://bugoverdose.github.io/development/ndc-cookie-recommendation/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/ndc-cookie-recommendation/</guid><pubDate>Tue, 09 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;저는 현재 회사에서 [쿠키런: 오븐브레이크]라는 게임의 서버 개발을 맡고 있습니다.&lt;/p&gt;&lt;p&gt;저희 게임에 존재하는 조합 추천 시스템의 개발 과정에 대한
NDC(Nexon Developers Conference) 발표 영상이 있어 주요 내용만 정리해보았습니다.
제가 직접 구현한 스펙은 아니며, 발표자는 여찬구님과 신현석님입니다.&lt;/p&gt;&lt;h2&gt;조합 추천의 필요성&lt;/h2&gt;&lt;p&gt;[쿠키런: 오븐브레이크]는 런게임입니다.
쿠키, 펫을 조합하여 맵을 달리고, 쿠키의 체력이 다할 때까지 최대한 높은 점수를 획득하는 것이 게임의 기본 구조입니다.&lt;/p&gt;&lt;p&gt;2017년 10월 &amp;#x27;떼탈출&amp;#x27;이라는 게임모드의 등장과 함께 기존의 싱글런 공식을 탈피하였습니다.
해당 게임모드의 핵심은 여러 쿠키들이 이어달린다는 점입니다.
첫 번째 쿠키가 달리다가 쓰러지면 해당 쿠키가 쓰러진 위치에서 두 번째 쿠키가 이어달리고,
모든 쿠키들이 획득한 점수의 총합을 최종 점수로 삼습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/130368b9eebee482667f83a37429a53e/229ad/ovenbreak.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:57.05521472392638%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC40lEQVQozwXB21IaBwCA4Z2JU0ELoyniAqIcdwV2EVlUziKQRQXlaEDNaENTp4ckY6IURFGT1KSTpEkneYBc9KZv+ff7hE/dPMWAHXHKTHY+xENtDb/bj+RViZTWyWbiRNfyZLVlfjsb8PTd34yZjfxw34DosDItjuN2GXE6TCiqD6Grh9iOa7idfsbHprCZ3UxMijidDo4PcjjnZSyBZTo+C92IQq59QDimkEgvkdRknlYWsXumMEzdY8Ezg3CX6/Hnfpp+WyPjM5P2GAg7fET9TT6e9lG8bWxinXq4xMPQDsn079yMbrjrPeKXwzh63Iey5ERWnKwkFIR+psdeeIHS4jRFt4GTlI1eZZmy5CN230521oXuDbG9mqeykqOmxNBDC2xGrDTXLLSyQQ6LETYWLTxQFxDSkh2/aQyvaZz9mMjL7jJPHqu8eiKzF53GZxBYl2b4sbPJwW6BemGDvCLz9bnEf7dBPpwq/Hsbo7Y8iSbOIKT8LuaM94jPmNDmZgjHgqysStjtIiXPLLLZgDr7PbmITCMu8Xng5fpZkKxqI2SdoKt7eXGoknBPotisCGm3Az0apKn60EwCgQmBlN+A5jEiu00kzN8RmB5HdUwRsZnYTYjU9DnWoxbkWSPPtq18+9VFKTCOKloR8rKT5JJEt1XhpFFgeNLm4+kON6dtKlWd/QdZ4ksSup6iVtripP6STueY43KRdnWLUnaNnzdSBOaspN0iQnHRRVhaYL+zS7VV5uinY6o7RWrNMq29Kp12lWI+RSqpUa4UOHhUptbIcHRU4eBwi/reFuVWAy3kY0OaR8i4RLSgh0oxyVYpQWIlRLOxSadTZjUSQNfjJFaXKORSNKtJTh5H6R5HePG8ydlpmep2mFwmQVILkZifRXh/PeRqcM7lRY+rYY/Li3Ne315x9+aG4eCci/4ZV8M/eHN7zevROV8/jfj8V59/3l/y5cMlb18NuBldMBqc83bY53/t54A8hEwxlwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;ovenbreak&quot; title=&quot;ovenbreak&quot; src=&quot;/static/130368b9eebee482667f83a37429a53e/a6d36/ovenbreak.png&quot; srcSet=&quot;/static/130368b9eebee482667f83a37429a53e/222b7/ovenbreak.png 163w,/static/130368b9eebee482667f83a37429a53e/ff46a/ovenbreak.png 325w,/static/130368b9eebee482667f83a37429a53e/a6d36/ovenbreak.png 650w,/static/130368b9eebee482667f83a37429a53e/e548f/ovenbreak.png 975w,/static/130368b9eebee482667f83a37429a53e/3c492/ovenbreak.png 1300w,/static/130368b9eebee482667f83a37429a53e/229ad/ovenbreak.png 1356w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이전까지는 달릴 쿠키를 하나 고르고, 해당 쿠키의 레벨을 올리고 잘 조작하는 것만 신경쓰면 되었습니다.
그러나 떼탈출 모드에서는 어떤 쿠키들을 어떤 순서로 배치할지, 즉 &lt;strong&gt;조합&lt;/strong&gt;이 너무나도 중요합니다.
&lt;strong&gt;동일한 쿠키여도 어떤 맵의 어느 구간에서 달리는지에 따라 점수가 달라지기 때문입니다.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;문제는 쿠키, 펫, 보물을 조합할 수 있는 경우의 수가 너무나도 많다는 점입니다.
당시에만 해도 80종의 쿠키가 존재했고 현재는 그 두 배 이상이 존재합니다.
80종의 쿠키 중 20가지 쿠키를 조합할 수 있는 경우의 수는 아래와 같으며,
다시 80종의 펫의 조합과 보물의 조합까지 생각해보면 경우의 수는 비정상적으로 많습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/4b03fa341e6139c631336f9ae4094492/6f464/permutation.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:22.085889570552148%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAnUlEQVQY041OzQ6CMBjb+7+ML6B3DhpUDCQSA6LAwTg2yHbYX42fTD3SpGm/fklTBgDeOxR5jgilFEII39taC2MMafTGmo/O+Vudc2BcSOyPGcqqQtN2kJNC33f0jBinEXzgpHKUEFIQOeeUkx84tNZgj+qCOkuhDiekmxWac0IlwXta+b90CZhur1C3As9dgnq7xr38FWIui8VL+AJQRzUoOBfXGQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;permutation&quot; title=&quot;permutation&quot; src=&quot;/static/4b03fa341e6139c631336f9ae4094492/a6d36/permutation.png&quot; srcSet=&quot;/static/4b03fa341e6139c631336f9ae4094492/222b7/permutation.png 163w,/static/4b03fa341e6139c631336f9ae4094492/ff46a/permutation.png 325w,/static/4b03fa341e6139c631336f9ae4094492/a6d36/permutation.png 650w,/static/4b03fa341e6139c631336f9ae4094492/e548f/permutation.png 975w,/static/4b03fa341e6139c631336f9ae4094492/3c492/permutation.png 1300w,/static/4b03fa341e6139c631336f9ae4094492/6f464/permutation.png 1464w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;실제로 유저들 사이에는 고득점 조합을 알고자 하는 니즈가 있었습니다.
당시 유튜브와 온라인 커뮤니티를 통해 유저들은 자신의 조합을 공유했고,
어떤 유저들은 자신이 보유한 쿠키들을 토대로 고득점 조합을 만들어달라고 부탁하는 경우도 있었습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/c5be091442deb9eb97d2c7552780fa4c/6e29b/ovenbreak_search.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:47.852760736196316%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB9UlEQVQoz21RO4sUQRCeP2HunzAyMzc80MxIvOgSxUguUbjIQC4Q8REomBwaqBsowimiYHSwu8my7N7OPmZneh49j+7pntcnVXcOijZ8UNX91ddfVTml1miaBv87dV2j6zoGxQTi/omqqmCt7d+dvDKomwrogLbr0LYtmrbpCSRGh4opN9awQGkMams51lozj2qdw5u3sH/7Du4dPIDnrSEigSiOkMgEeZH3oiRYqAJ+4CMQAQql0Bj7T1fO3vW7uHZ1F3u7N1iE3NnKnjlqao7ZNeXWwpQllFYoihy6LFHpEl1dsxh97HwevMRg8Arfv31CGAlkWYYsz9gNFSqleE4kaMy5WFlASAEhAiRxhOrcKQtOXnzE1+MnODl5izRP2SUVlaaEMQa61Nx227RQtUKiJaSUkJlEHMdIkphd9oI/P3zB0fN9vHvzFAkRU4k0SxEnMc+S3P6eYUVLMBa5zhFbyQaIb5VGW5217QxeH+DSxQvYuXIZ7nKBIBQQoWCnjCThLVLrRZoilRJhFsJVa6xDDxtvw4vKRMjzdX4cv8ejh/fx7PEhtt4WURQhFCGEEH/B932sViss3AXcpYvTxSljvXDhb7cIfB8iCOC4yxXWGw+z+Ryj8QhjxhjT6RTz+Ryz2awH3RGHMBwOGaPREJPJpOf+AhWg5qSqvmBQAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;ovenbreak_search&quot; title=&quot;ovenbreak_search&quot; src=&quot;/static/c5be091442deb9eb97d2c7552780fa4c/a6d36/ovenbreak_search.png&quot; srcSet=&quot;/static/c5be091442deb9eb97d2c7552780fa4c/222b7/ovenbreak_search.png 163w,/static/c5be091442deb9eb97d2c7552780fa4c/ff46a/ovenbreak_search.png 325w,/static/c5be091442deb9eb97d2c7552780fa4c/a6d36/ovenbreak_search.png 650w,/static/c5be091442deb9eb97d2c7552780fa4c/e548f/ovenbreak_search.png 975w,/static/c5be091442deb9eb97d2c7552780fa4c/3c492/ovenbreak_search.png 1300w,/static/c5be091442deb9eb97d2c7552780fa4c/6e29b/ovenbreak_search.png 1610w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;탑랭커 조합 복사 기능 구현&lt;/h2&gt;&lt;p&gt;위와 같은 유저들의 니즈에 따라
실시간으로 떼탈출에서 가장 높은 점수를 기록한 탑랭커들의 조합을 확인할 수 있고,
해당 조합을 그대로 복사하여 적용할 수 있는 기능이 인게임에 구현되었습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/0fc03ae86a28b7213eb5a0bb025fb5a2/3a1b1/ranker_combi_copy.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:23.31288343558282%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABiUlEQVQY0y3Fzy9bAQDA8XfZaXGZZC7S2EEo4SBLI6hkjRdBVddHKaU1NTZU/FrCYfNjUhNiSxGZi0RcJKoEMbR5pepZV9HQFAkqcfBffHfxuXyET0WFNOpEzDUVNFkqkErr6K6fwD06RFe1SEulnuEOHe0NBoatlTjtn/k55iS04kBZd3Gy+oXochUJrxVXbxNCR1oSrXkpaNUqpPwMjPnpvNcXMCC1sjDyhvnZVLY3XrO4mMys+xWiqKbNYiK8/hXFO8mJZ5y/nhEegz/obhERnCVvmXNYyXr5guJcFc0laha+DWJrNHAmTxFVZkjcrfH0tEnk9Bd2s4RZekd7eSE6dSZGTTbaTBWuXhMDH2sQ+gs0TBmNlKan8b2rjOlBLQ6DiK3Zwq7HTWhviVhki/PTTeSd39RWm7DVlTHTaeFDcR59VUXYtTn0iBraakWE/b0dtre8BPw+Yucy9zeHPNxecX0V59D/hyPZh3IcIBjwoQT9xOOXxC6ihORdwkf7zx8QPj4g8k/hP5tQ9+Dsil5+AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;ranker_combi_copy&quot; title=&quot;ranker_combi_copy&quot; src=&quot;/static/0fc03ae86a28b7213eb5a0bb025fb5a2/a6d36/ranker_combi_copy.png&quot; srcSet=&quot;/static/0fc03ae86a28b7213eb5a0bb025fb5a2/222b7/ranker_combi_copy.png 163w,/static/0fc03ae86a28b7213eb5a0bb025fb5a2/ff46a/ranker_combi_copy.png 325w,/static/0fc03ae86a28b7213eb5a0bb025fb5a2/a6d36/ranker_combi_copy.png 650w,/static/0fc03ae86a28b7213eb5a0bb025fb5a2/e548f/ranker_combi_copy.png 975w,/static/0fc03ae86a28b7213eb5a0bb025fb5a2/3c492/ranker_combi_copy.png 1300w,/static/0fc03ae86a28b7213eb5a0bb025fb5a2/3a1b1/ranker_combi_copy.png 1686w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;quot;고득점을 할 수 있는 조합을 원한다면 실제로 1위 유저의 조합을 사용하면 된다&amp;quot;는
접근법은 상당히 그럴싸합니다. 왜냐면 그것이 고득점 조합이기 때문입니다.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/78dd1e9f5a7d6dda6b9b61dd521aac7c/fun_cool_sexy.gif&quot; alt=&quot;fun_cool_sexy&quot;/&gt;&lt;/p&gt;&lt;p&gt;그러나 이러한 접근법에는 한 가지 문제가 있습니다.
바로 대부분의 유저가 보유 중인 쿠키와 펫의 스펙이 랭커와 다르다는 점입니다.
각 유저는 탑랭커가 사용한 쿠키와 펫을 보유 중이지 않을 수 있으며,
보유하고 있더라도 만랩이 아닐 수도 있습니다.
1위 유저가 사용한 쿠키의 저레벨 버전을 사용하는 것보다
차라리 다른 고레벨 쿠키로 대체하는 것이 더 나을 수 있습니다.&lt;/p&gt;&lt;p&gt;이 때문에 저희 팀에서는 각 유저가 보유한 쿠키와 펫의 스펙을 고려한
최적인 조합을 유저별로 커스텀하게 계산하고
인게임에서 추천해주는 기능을 추가로 구현하게 되었습니다.&lt;/p&gt;&lt;h2&gt;조합 추천 시스템 구현&lt;/h2&gt;&lt;p&gt;조합을 추천해주기 위해 우선 게임 서버에서는 유저들의 플레이 기록에 대한 로그를 실시간으로 적재해야 합니다.
플레이 기록이란 유저가 어떠한 쿠키와 펫을 활용하여, 어디서부터 어디까지 달렸고&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;,
이를 통해 결과적으로 어느 정도의 점수를 내었는지에 대한 데이터입니다.
이후 동일한 릴레이에서 사용된 개별 플레이 기록을 활용하면
각 유저가 사용한 조합을 재현할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/760fc3ff392f44bc5b26c9f65019ca38/9937c/combi_and_record.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:35.58282208588957%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABPklEQVQoz2WPfU+CUBjF+f6fqE0nWf6hLilRZBTEhdCWSqAwCfHya1xfsjrb2e5znnPOs6vVtaSWkvpwoIEIBObEREqp5rquFf++hfB5fDI4nHJnXeMPPM+lP+xfCs9QZVfB+fKD6bNDVe1/HdN2M4u8daNYziPkccuhqmhuFy8OO889huTpN80QvYHv/ejnwsKeUehtik6L6n1BBZRleQnuXz2+TsFryDCgcux/upaXJYsk4WO7Ic0ztpsNWZYRxzFpmrJKPsl2O6Ut3hes12uWyyVpnrMtCuJ4rbTVakWSJGjzKMIwHuh2bxmNRrTaLUX9VufurotpjnkLQ6IoYjKd4DgO1sxiMOij6x1s28Z1XaV5nocmfEEYhmphWRb3vXt6vR6GYTAcDhFCKPq+r3xBECiOzbHyNiVnvfF9A9i2DFYLu7CzAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;combi_and_record.png&quot; title=&quot;combi_and_record.png&quot; src=&quot;/static/760fc3ff392f44bc5b26c9f65019ca38/a6d36/combi_and_record.png&quot; srcSet=&quot;/static/760fc3ff392f44bc5b26c9f65019ca38/222b7/combi_and_record.png 163w,/static/760fc3ff392f44bc5b26c9f65019ca38/ff46a/combi_and_record.png 325w,/static/760fc3ff392f44bc5b26c9f65019ca38/a6d36/combi_and_record.png 650w,/static/760fc3ff392f44bc5b26c9f65019ca38/e548f/combi_and_record.png 975w,/static/760fc3ff392f44bc5b26c9f65019ca38/9937c/combi_and_record.png 1156w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이후 특정 유저가 조합 추천을 요청하면 추천 서버에서는
그리고 유저가 보유한 쿠키와 펫의 스펙과 다른 유저들의 플레이 기록을 토대로
추천 알고리즘을 통해 고득점을 할 수 있는 조합 하나를 산출하여 반환합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9e7516c7134bfd6ddc4f7841720b41f5/d4b10/recommendation_flow.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:49.079754601226995%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABi0lEQVQoz31SUU6EMBDlsvrhOUz8NfE8ZjVRk/UAaqLZBZaltAXcBQoFWp7OrKgfq5M0lNeZN/NmJhBCIIxCpCLlE8URpJQ4ZtM0HcV+4wH+MEqyfFzCGMMB3nvG6ds0Ddq2xTiO36SE03+glMJut4PznkGtNQhb3C5wfnEOkQkOIuLVaoW6rrGv9qzCWot4EyPPNcf2vUUQxxGESDlj13XsmKYpk1RVBWs7vtP74mbBGFVSlAUneX17RRhFGIYB4zggKIqCnckITJIEG86aM+bcCOcdJ6JqtFbfEgmTSnLfy7I4EJKEmbDve3babregRNwz51jmOlxzIikz1E3NcmmIUgpskhhZJg6EJIkej9nc6P+sfK/RmJ+Cgq5r+fKXzSvhpwnGVPDOwrQtD4BMhddodusvQouA5JZlyQ2mdZgPrc3zyzPy4tDLtrNQMkKzz6B0zj7OeayiJwiVHAiHHgFVQLLm45zj4VxeXeL07AT3D3csndZHaY1km8KYhglo0koXSIWAaQ2GT8IPcjz+PKpFmAYAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;recommendation_flow&quot; title=&quot;recommendation_flow&quot; src=&quot;/static/9e7516c7134bfd6ddc4f7841720b41f5/a6d36/recommendation_flow.png&quot; srcSet=&quot;/static/9e7516c7134bfd6ddc4f7841720b41f5/222b7/recommendation_flow.png 163w,/static/9e7516c7134bfd6ddc4f7841720b41f5/ff46a/recommendation_flow.png 325w,/static/9e7516c7134bfd6ddc4f7841720b41f5/a6d36/recommendation_flow.png 650w,/static/9e7516c7134bfd6ddc4f7841720b41f5/e548f/recommendation_flow.png 975w,/static/9e7516c7134bfd6ddc4f7841720b41f5/3c492/recommendation_flow.png 1300w,/static/9e7516c7134bfd6ddc4f7841720b41f5/d4b10/recommendation_flow.png 1394w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;위의 구조에서 핵심 관건은 추천 알고리즘을 어떻게 구현할 것인가입니다.&lt;/p&gt;&lt;h2&gt;전체 조합 기반 추천 알고리즘&lt;/h2&gt;&lt;p&gt;추천 알고리즘을 구현하는 가장 간단한 방법은
기존 유저들이 사용한 조합 중 하나를 그대로 추천해주는 것입니다.&lt;/p&gt;&lt;p&gt;특정 유저가 조합 추천을 요청하면 추천 서버에서는
모든 유저들이 사용했던 조합 목록을 DB에서 가져오고
&lt;strong&gt;해당 유저의 쿠키와 펫으로 재현할 수 있는 조합&lt;/strong&gt;들만을 필터링합니다.
이후 이렇게 재현 가능한 조합들 중 가장 점수가 높았던 기록의
조합을 그대로 반환해주면 됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/5f0abe284f09b1f476fa79f40b225241/f1c64/brute_filter.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:23.926380368098158%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABWklEQVQY012MSS8DAQBG5zeKRISLJamLUDJaS0UIF+LCTTSISFwIPdhVqaVK6UarMZWpYVRHtWOmaOuJOXq3L9/LE2rqa2myNeNw9SH2O+gecOIaGaSjq4O6hjqaba3s7u/Q2NSIrb2NodEhnAMO7E4R0dWLXezE3mO3/pa2FoRzb4jj7TNKSpq3dAp5fQ3lLkH4NsRpdI8D/xJ/5F41Vt0eiu95PqsV1MAJjz4fZrnMh67zYRiYpokgpR4IX91QeX7CVGUKlyfIyQTX0RBbhyssLo1bwWoFvDs+yt/WxJBivEcj/EeIBxYIX8yip90UFD/VYgEjI5GcHCYbuSd/nbLEovaA19PLW8ZDLj7Fdy7LT6VEZn4aeXcL9ThG2SghbK6PMTcjoj/vUVDjlLIqWSlJYH4KLSahBGNWUNMSTAzXkL7bIC/vY76+8KXnCS67eQwGUI4ifJmf/AIRRErQ6j03vAAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;brute_filter&quot; title=&quot;brute_filter&quot; src=&quot;/static/5f0abe284f09b1f476fa79f40b225241/a6d36/brute_filter.png&quot; srcSet=&quot;/static/5f0abe284f09b1f476fa79f40b225241/222b7/brute_filter.png 163w,/static/5f0abe284f09b1f476fa79f40b225241/ff46a/brute_filter.png 325w,/static/5f0abe284f09b1f476fa79f40b225241/a6d36/brute_filter.png 650w,/static/5f0abe284f09b1f476fa79f40b225241/e548f/brute_filter.png 975w,/static/5f0abe284f09b1f476fa79f40b225241/3c492/brute_filter.png 1300w,/static/5f0abe284f09b1f476fa79f40b225241/f1c64/brute_filter.png 1390w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;그러나 이러한 접근법은 위에서 언급된 탑랭커 조합 복사 기능 구현과 동일한 문제점을 공유합니다.
바로 유저가 보유한 쿠키와 펫의 레벨을 고려하지 못하고 있다는 점입니다.
추천받은 조합과 동일한 순서대로 쿠키와 펫을 배치하더라도
조합의 쿠키와 펫의 레벨이 다르다면 당연히 점수도 달라질 것입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/8b766083736f6fe08662c44eb9bbdd17/062c8/brute_prob.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:28.22085889570552%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABl0lEQVQY012PTWsTYQCE99/oVQSRehE/riYUC72lVqteim2apjQqHvTmyZOCoNabEKFYqEQbrWhLtanWIlXjJttkv7pN1nX3fXezScVH2NJLBwZm5jDDKOfOpxgaGWJiapyxyWtk8+PkpnNcuHKR9ECK/sF+ym/LZC5lyIxkKNwqMDmdYyyfJXt9itHsaMLhq8OkBtIofuARCB8hY4TsIGQPKSOEdPe86NDr9ZBhyOzjl1i6Qedvl/avKltzc4gwRAQ+QRAghEABFWgBMSAAF2izl0sgYB+lF6/xfstE77YNnDclDkJZmh+kuXKK8NMhoo0TUCvQ/nyMhedncF718WfxcjLYjSI+vruL53zArz6g69n8240JVt+jPXtC65uGbNgod26mKT48ibt8BG/tLNHPImr5KDP3DuPOn6ZevJEUymCb2/njVJZncDYf4Zt1Ikfne2mWytP72Eub2F9+oFjVNWxtHa22gm18pa5WcPQN3K11zMYqjVoluRLHMapWx9reQdUMdNOk0WzSNA2s1g6WoWOYBv8BGvePbYzF2CYAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;brute_prob&quot; title=&quot;brute_prob&quot; src=&quot;/static/8b766083736f6fe08662c44eb9bbdd17/a6d36/brute_prob.png&quot; srcSet=&quot;/static/8b766083736f6fe08662c44eb9bbdd17/222b7/brute_prob.png 163w,/static/8b766083736f6fe08662c44eb9bbdd17/ff46a/brute_prob.png 325w,/static/8b766083736f6fe08662c44eb9bbdd17/a6d36/brute_prob.png 650w,/static/8b766083736f6fe08662c44eb9bbdd17/e548f/brute_prob.png 975w,/static/8b766083736f6fe08662c44eb9bbdd17/3c492/brute_prob.png 1300w,/static/8b766083736f6fe08662c44eb9bbdd17/062c8/brute_prob.png 1386w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;때문에 이러한 방식의 추천 알고리즘은 아래와 같은 조건을 충족하는 조합을 찾아내야 합니다.
바로 해당 유저가 보유한 쿠키, 펫, 보물의 레벨이 해당 조합에서의 레벨들 이상이면서,
해당 조합의 점수가 현재 유저가 기록한 최고 점수보다 높아야만 합니다.&lt;/p&gt;&lt;h2&gt;개별 기록 기반 추천 알고리즘&lt;/h2&gt;&lt;p&gt;추천 알고리즘을 구현하는 또 다른 방법은
특정 유저가 사용한 조합 전체를 사용하는 것이 아니라
여러 유저들이 남긴 개별 기록들을 적절히 조립하는 방식이며,
저희 팀에서는 해당 방법이 사용되었습니다.&lt;/p&gt;&lt;p&gt;예를 들어, 5마리 쿠키를 활용한 3가지 조합 기록이 존재한다고 생각해봅시다.
전체 조합 기반 추천 알고리즘은 3가지 조합 중 하나를 사용하는 방식이라면,
개별 기록 기반 추천 알고리즘에서는 아래와 같이 개별 기록을 적절히 조립하는 방식입니다.
후자의 경우 최대 3&lt;sup&gt;5&lt;/sup&gt;가지의 방법이 존재하며,
전자에 비해 최적의 조합을 찾아낼 가능성이 더 높습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:638px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/6ab7945a5c9edf680cf9aebf5ecdaf7b/41be6/record_combination.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:51.533742331288344%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACFklEQVQozz2SS28TMRSF51fBj2DD34A1WxbsumBdIbGKQEJU7QYqpKqoEiwqSBFI5dGU0qRtkraZjOdle/yYx4fGCViy5Ht9fe65xydaLm94s/WOtiMsrTWnZ7/Jy4K2aejT8attZts7rEvIipzrxTWsM0op0lTQNDXRcPeQ+3fvMdk7o2s9V9Mp+wd7jM5GGKlobM7FYIOfm5s4Y8L+dTricPgJKUuMMWRZxmQ8pq5ronRc8OvkBHGeoIWglJL5XJAXEp2m1FZhxILGeqws0UXOMkmIlzG+9gFU9gzLErqOaD0FHR1lfLuORoBDLRO8c/9KMEVBJcvVuaqw1qKMpjUGczkP+UhXVRihlCWlELS2RIsHVPk+hZA4b7HO4GqPTgVWSabzGV++fUVKibIVN8NTfjwdUNuGqBf089ERiUhQWtE2LX/OdzHmBqk03juMXQEarXBFweTqkuPvx7Rtiyoy4g/HDDdfY7Vfjey9D4L2LNuuQ2sZ6Eslw93/kU2FybLgCOtqurZFiiVtZbCLdDVy30WkAl3pANDHlalC3LO3zgbx+0a9biqOef/2BVuDDZLbKUqktL3drAlvo57B5HIcQJqmoa490+spIlv5qi/qfzTLM+o125fPHvH44Z2gbetrijJncjEOjaNe2NlsGn7MORd8tYgXFGUR4n4nSRIArTUB8OPBDoPnT/B1jXMr62RZGt7+Be+j8KmS9SXQAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;record_combination&quot; title=&quot;record_combination&quot; src=&quot;/static/6ab7945a5c9edf680cf9aebf5ecdaf7b/41be6/record_combination.png&quot; srcSet=&quot;/static/6ab7945a5c9edf680cf9aebf5ecdaf7b/222b7/record_combination.png 163w,/static/6ab7945a5c9edf680cf9aebf5ecdaf7b/ff46a/record_combination.png 325w,/static/6ab7945a5c9edf680cf9aebf5ecdaf7b/41be6/record_combination.png 638w&quot; sizes=&quot;(max-width: 638px) 100vw, 638px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;다만, 최적의 조합을 찾아내고자 실제로 모든 경우의 수를 전체 탐색하는 것은 굉장히 오랜 시간이 걸립니다.
하나의 떼탈출 조합은 20주자까지 존재합니다.
여기에 더해 DB에 쌓인 유저들의 플레이 기록이 총 N개라고 했을 때
최대 N&lt;sup&gt;20&lt;/sup&gt;가지 경우의 수가 존재하기 때문입니다.
이러한 성능 이슈로 인해 저희 팀에서는 모든 경우의 수 중 일부분만 탐색하고자 그리디 알고리즘을 도입하였습니다.&lt;/p&gt;&lt;p&gt;그리디 알고리즘의 핵심은 매 순간 최적이라고 생각되는 것을 선택하는 데 있습니다.
이를 추천 알고리즘에 적용하면 다음과 같습니다.
우선 첫 번째 주자 기록들 중 해당 유저가 지닌 쿠키, 펫, 보물로 재현 가능하면서
가장 점수가 잘 나온 플레이 기록을 하나 고릅니다.
그리고 해당 플레이 기록에서 쿠키가 쓰러진 지점을 기준으로 일정 범위를 설정하고,
해당 범위에서 달리기 시작한 기록들 중 가장 점수가 높은 플레이 기록을 하나 골라 두 번째 주자로 삼습니다.
이전 주자에서 이미 사용된 쿠키, 펫, 보물을 후보에서 제외시키면서 해당 작업 20번째 주자까지 반복하면 됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9a8ea87699377412e09fda3c4f16f46b/de0bd/selecting_next_runner.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:28.22085889570552%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABRElEQVQY00WO0VLiMBSGeX0vdBxfwAdwvPDOi11lnVVHZbRSQXdRK1DaCiTZgtq0afI5DaxenCTz/TnfOS0Ap18oZZsyf8bhCc6tX1WGET/Q6gFn1+x/ZhSVOkGrEGuMZ63meJ/+5PfFBVHnCFtpL3XO+ruaHRO1d0nO9tBquhLZVVYvAzrXvwjP2xiZrIR+WJ3xll2yGPU8tM5i63q97YJ60eUtuvrazq6FuCWFukE+XeIq/b2htZDLlLIs0bqkNsY3fAxjzPQfUXBCnkuu45Si1F5YFAWVceTqlVJ/fA1rKaUYjUf07x8YPA7ohl1es4wKCDZ3GO8d0jnYIDzdZ2t7AyGmzIWg1+sxGPzlrt8nnkyQUiCkpJVlGUmSkKapFzfVsJkQRMENaZIwie8Z/gl5ug2Yzec+b/7H8ZjhaOj7G9bUJ3YCwfvOF66TAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;selecting_next_runner&quot; title=&quot;selecting_next_runner&quot; src=&quot;/static/9a8ea87699377412e09fda3c4f16f46b/a6d36/selecting_next_runner.png&quot; srcSet=&quot;/static/9a8ea87699377412e09fda3c4f16f46b/222b7/selecting_next_runner.png 163w,/static/9a8ea87699377412e09fda3c4f16f46b/ff46a/selecting_next_runner.png 325w,/static/9a8ea87699377412e09fda3c4f16f46b/a6d36/selecting_next_runner.png 650w,/static/9a8ea87699377412e09fda3c4f16f46b/e548f/selecting_next_runner.png 975w,/static/9a8ea87699377412e09fda3c4f16f46b/3c492/selecting_next_runner.png 1300w,/static/9a8ea87699377412e09fda3c4f16f46b/de0bd/selecting_next_runner.png 2238w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;그러나 이러한 알고리즘의 문제는 최적의 조합이 나오지 않는다는 점에 있습니다. 성능을 위해 정확도를 희생시켰기 때문입니다.
실제로 사내 테스트 결과 &amp;quot;추천을 받았더니 오히려 점수가 떨어졌으며, 직접 만든 조합보다 못하다&amp;quot;는 피드백이 있었다고 합니다.&lt;/p&gt;&lt;p&gt;이에 대한 해결책으로 저희 팀은 &lt;strong&gt;적어도 유저의 기존 조합보다는 좋은 조합&lt;/strong&gt;을 만들어내기 위해
그리디 탐색과 유저의 기존 조합을 섞는 방법을 취했습니다.
간단히 말하자면 유저가 기존에 떼탈출에서 사용했던 최고의 조합을 기준으로
i번째 주자까지는 해당 유저의 조합을 그대로 사용하고,
i+1번째 주자부터만 그리디 알고리즘을 적용하는 것입니다.
이 경우 첫 번째 주자부터 그리디 알고리즘을 적용한 경우부터, 유저가 기존에 사용한 최고 점수 조합까지 총 21가지 경우의 수가 나옵니다.
이 중 가장 점수가 높은 결과를 추천할 경우 &lt;strong&gt;적어도 유저의 점수가 이전보다 떨어지는 일은 발생하지 않습니다.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/cc118ee4843810c5997c9fbc76c920b4/e2cbf/better_than_before.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:30.67484662576687%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABkklEQVQY022QwWvTYByG8284POrFizAREfHkyYPgf6AXvXnczYsIMtilUOZgIh5EcTAQD4Kwi9hFmpluQdy6aW3sSJqvSb42TZsvWZP0kdSrD7y33/vC89PWD9o4vs9oKAnCkDRNqSjLkvl8vkhFNI4pk4i67rJc3+faxj6bhkMwzbi5aXH39Q+yvEB7H+4hJxGZSonjmKIo+B/DcUQxSqm5n7j0bovLq23qX21ErLi6bnL7lUWW52jVsUoUfa+PlBI/8BFC4LgOYiBQSi0GZTRkPpqxKt+yZD3k/Mttnu04BHHGxbU9rm+YpLMcrRLyhKDT6eAJD9u26fX+cHh0SLfbZeAPFvoqSymmZ+xEFo/lC9ZOGnz5NeZUSZ42Tqg1HGZFiVYVmkYT0zRptVpYloVhNNnVdzEMA13XCYKAiZpCPOO5/MhS+z7bk89kJCzbj7jRXeHO1jfkNENLkuSfouPguu5CtXfaw+27hGFIFEXkec6o+vNgwhPvDdr3W9T8D4RnMRd+PuDc0T2uHK9w3P/NX/apoduZfMEVAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;better_than_before&quot; title=&quot;better_than_before&quot; src=&quot;/static/cc118ee4843810c5997c9fbc76c920b4/a6d36/better_than_before.png&quot; srcSet=&quot;/static/cc118ee4843810c5997c9fbc76c920b4/222b7/better_than_before.png 163w,/static/cc118ee4843810c5997c9fbc76c920b4/ff46a/better_than_before.png 325w,/static/cc118ee4843810c5997c9fbc76c920b4/a6d36/better_than_before.png 650w,/static/cc118ee4843810c5997c9fbc76c920b4/e548f/better_than_before.png 975w,/static/cc118ee4843810c5997c9fbc76c920b4/3c492/better_than_before.png 1300w,/static/cc118ee4843810c5997c9fbc76c920b4/e2cbf/better_than_before.png 2138w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;다만, 실제 라이브에서는 추천 알고리즘이 기존 조합을 그대로 반환되는 경우가 빈번했고,
이 때문에 커뮤니티 반응도 부정적이었다고 합니다.
해당 추천 알고리즘은 이전 주자가 쓰러진 위치를 기준으로 일정 범위의 기록들에서 다음 주자를 찾는데,
문제는 이 &lt;em&gt;일정 범위&lt;/em&gt;가 충분히 충분히 크지 않아 그리디 탐색이 중단되는 경우가 빈번했다고 합니다.
이로 인해 기존 조합이 그대로 반환되는 비율이 6.20%나 되었는데,
탐색 범위 설정 값을 늘림으로써 0.46%로 비율을 줄였다고 합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/fe45b2a86401e429cc31fe8a1d90ec6d/7de01/greedy_fail.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:44.78527607361963%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB8ElEQVQoz33Qz2sTURDA8fwHgigetEel4qUiKF5MPRREoaAgtjRpwJ89WJQK5iaCPdhSD4aCSCOCCCpVIxijUqilaCShGA00rW1vSaTEZLOb7Nt9+yP5SvbSaNV5DAOPmQ/D+FLpFLrQEYZACEGj0aAVzSYYhoFtSeK5CpFPBe6ni9xNFsmVDGg6PI+9IPpwinjiNY7bxLJdfPFEnKpaRdNUr26ATVRNwxJ1gi+zbL89x+6Jz2y7McOTTBEakhOneuns2kvwbABNd6jpFj7+Ei2s9bSahlWXXC1NcmB+Ev/EEkeP+Um8iXl9ofODdPf4uXJtmJpwqAsbX2sjD2hLD20Dh4oR9mXCHH4fZf/IOLFkFpo2Z0L9HDxyiEuXL3pgTbfx/Yb8AdaFjm1Ibq0/42T+JoEfY/gfL5L4Xvd6wiPXGQj0Mzo+ijBdDOlsgJuS1pEtGrbLW22Bez8TPCrPIi1JQZSYKr/jgTpDNDnNq6fTGNLGshubb9i+oaJWMTVBX36MLbnTdK4OYbsWabHC1sU+Ogrn2BXp4Xiwl/VKDcN0/w+WlQqiWmMwf4cdSwN0rQ0jHYsFfZWdyyH2rF6gYzlE91oY6VrenE9Kyb/SNE1saZFRV5itfOGjkvX+SkLhQyXDvPKNOeUrKTWHYZrezC+LgW7ofIiLqwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;greedy_fail&quot; title=&quot;greedy_fail&quot; src=&quot;/static/fe45b2a86401e429cc31fe8a1d90ec6d/a6d36/greedy_fail.png&quot; srcSet=&quot;/static/fe45b2a86401e429cc31fe8a1d90ec6d/222b7/greedy_fail.png 163w,/static/fe45b2a86401e429cc31fe8a1d90ec6d/ff46a/greedy_fail.png 325w,/static/fe45b2a86401e429cc31fe8a1d90ec6d/a6d36/greedy_fail.png 650w,/static/fe45b2a86401e429cc31fe8a1d90ec6d/7de01/greedy_fail.png 794w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;비즈니스적 가치&lt;/h2&gt;&lt;p&gt;추천 시스템의 도입에 따른 비즈니스 가치는 다음과 같습니다.&lt;/p&gt;&lt;p&gt;기존에 유저들은 떼탈출에서 높은 점수를 획득하기 어려웠습니다.
때문에 최고 등급 달성에 따른 보상을 한 번도 수령해본 적이 없는 유저들이 거의 대부분이었습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/f7e259936b9079d885346b3df77aaf80/906b5/before_best_rate_ratio.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:42.331288343558285%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABm0lEQVQoz42RS2/TQBSF/e+QUIGKSggWXbBi0b/QBUsW/BvEKxIbqi6qCCW4TWInfqhBsZtHjUn8nNeHPKGFJUc6c8+duTr3SOPoKECenyG+9DC7HdKfUGYZQilmsylJkhDFEVfjK5J0wdgbW3pTj0WyIIxDBu4ArTUdHFMU6OwWk+fo/CemqtgKgVYKIQRSSlvrukYpRdu2Vgup6DyEaKmqCmPM3rA7pNb8KgsaKa1BMxmzf+Z+s4X5R6oC1S7/9sZYOnRCa5QQdl4MB7QvjhBxZAfbur7f3qFpG6TU7HYpWTZDCGUT38G5c7ZpMIjXp/DoAc3bN3TZ2qbZGzUNWZYxmozof+szdF2+X464HLlc9C9Yr9dUdYVTliXldksJ5O/fURweUB4/Z3f0mPzsK7kQVEXBZrPB932u59d4vofnT5gF+0+L44gwCknTFOcmTblZr1n4Pj9eHpMcHpA8e0ry5CHzk1fMo4hFkrBaLq1pl2SzubW642q1+nO3104YBIRxzGw4wP/4gWnvM9PeJ1tt77oEUUQQBP/F38ssTE6oX0zrAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;before_best_rate_ratio&quot; title=&quot;before_best_rate_ratio&quot; src=&quot;/static/f7e259936b9079d885346b3df77aaf80/a6d36/before_best_rate_ratio.png&quot; srcSet=&quot;/static/f7e259936b9079d885346b3df77aaf80/222b7/before_best_rate_ratio.png 163w,/static/f7e259936b9079d885346b3df77aaf80/ff46a/before_best_rate_ratio.png 325w,/static/f7e259936b9079d885346b3df77aaf80/a6d36/before_best_rate_ratio.png 650w,/static/f7e259936b9079d885346b3df77aaf80/906b5/before_best_rate_ratio.png 950w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;추천 시스템 도입 이후 유저들은 최선의 조합으로 떼탈출에서 높은 점수를 획득하기 쉬워졌고,
이에 따라 신규 유저들의 최고 등급 달성율은 5배나 증가하였습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/4161f2bcbc1daed569d95dc1babf968f/d5bfb/after_best_rate_ratio.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:38.036809815950924%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABb0lEQVQoz12R2W7bMBBF9f+f1DZ9arrYDmIjlmwVTZOgCCRblheJpLmfgnSSLiQOBuTM3MulIJJHjJEQwhtpnXIp/k/K++AzuY4/dUWIgUgkRankG847YgxYa3Lu1TgNY0yuOZ/PKKMIBKwz2aBIjakhCyeXl5n30gmIeO8RRvBzvOdJPPIoHrg7Lrgff1Ael0x2X1mfVthgKXxy53KA8BL/JRJ8oJMdV817rrefuOmnXLXv+NJ95qaf8bH9wHT37SJoDgd022K6Dv38jGlb9HaLbhrOTYPpd9lw0Cdm3YTl/o71ccVsN6E8LFkfKmbdlOpQXgS1UqhhQEuRkcMJoxRGyby2RmfBdBPjLC6EjDYaay3W2fzOzrn8WYXznoQPqcFxGgekUggpGYTgnMSHATOOWCmxQqDHASFEFkxCf1P0fU9iv9+z2WxYLOZUVUVd18wXCx6+13T1mrZc0lYl26rk1/yWVb1m13W571Uj8RuxfWUQL24dTwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;after_best_rate_ratio&quot; title=&quot;after_best_rate_ratio&quot; src=&quot;/static/4161f2bcbc1daed569d95dc1babf968f/a6d36/after_best_rate_ratio.png&quot; srcSet=&quot;/static/4161f2bcbc1daed569d95dc1babf968f/222b7/after_best_rate_ratio.png 163w,/static/4161f2bcbc1daed569d95dc1babf968f/ff46a/after_best_rate_ratio.png 325w,/static/4161f2bcbc1daed569d95dc1babf968f/a6d36/after_best_rate_ratio.png 650w,/static/4161f2bcbc1daed569d95dc1babf968f/e548f/after_best_rate_ratio.png 975w,/static/4161f2bcbc1daed569d95dc1babf968f/d5bfb/after_best_rate_ratio.png 1072w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;최고 등급 달성율이라는 지표가 중요한 이유는
최고 등급에 도달하기 이전에 비해 도달한 이후에 과금을 더 많이 하는 경향이 존재하기 때문입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/6e25792ba488fd0cd596e5174762654b/33e10/high_score_and_pur.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:46.012269938650306%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABtklEQVQoz12QC2/aQBCE/f9/SB9RIqpIlSpVCdCIGJuHcakEalVIQALsOxsbvw32V50j0pCVRne3uzc7O1pZlkRRRJ7nqKjr+hUqiqLgEB2IogNJEquGy5530I7HI2maos4zyduoqqoZlhYFpRr4rl6/gQpNkWR53nwqyoJ9sGez3bBzdiRp0ijM8oy0fUfeuia/beHfXLH5/IHd1Ufi1g357Rey609ktvVCqFQonKpTo1SRKCvU+5wvPMlJCipPUrgOhXAppeAoXE6epFK1OH4hPK8aHkK2uy2+7yM9ieM4jXI15Nd8zgko65owTfAOISLwCZKY7HR8XV+78KOuSeKYLEtJ04Q4jv/XqurCu6LIG0suDa3RlAJHCPwgQPo+3n5PGEXsw7DBznFwpWzyQkqk5yF8n30QEAQBQghc4SKlbKzSXNfFNg1+T38yNQ0mjz3mkwnTvs5sNMQydMxOm5k1ZmZPmFojhj86jK0x5tDEHJj09B6D0QDP89DW6zXPfZ1F74Gl3mPRbbMcDvh7951l555na8xC3Q2dp8ceTwODP9++Yltj+qZB96HLaDzCtm1WqxX/AIxGpLmtVuQPAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;high_score_and_pur&quot; title=&quot;high_score_and_pur&quot; src=&quot;/static/6e25792ba488fd0cd596e5174762654b/a6d36/high_score_and_pur.png&quot; srcSet=&quot;/static/6e25792ba488fd0cd596e5174762654b/222b7/high_score_and_pur.png 163w,/static/6e25792ba488fd0cd596e5174762654b/ff46a/high_score_and_pur.png 325w,/static/6e25792ba488fd0cd596e5174762654b/a6d36/high_score_and_pur.png 650w,/static/6e25792ba488fd0cd596e5174762654b/33e10/high_score_and_pur.png 844w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;실제로 신규 유저들의 최고 등급 달성율이 5배 증가하면서
관련 유저들 중 과금하는 유저들이 3.3배나 증가하였고,
신규 유저로부터의 매출이 79% 상승했다고 합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/0401d8b3c139a8ac06784c755601a23e/48ca3/business_impact.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:30.061349693251532%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABSUlEQVQY00WQvUoDURCFL1ZWvohFEMFaBN/BZ7CyFiy0CAERfABJGdHGRsVCsBEs7DRo/CMbdWV3TeIm7t6fXe/9ZLOaDByYOXPODDMCwDnKsHDUaNK8CcrS/vccbiya6AuuBGMI5yzOZUAGOWxunHF8+PDn0BTkZJYtdSNusmBkHMEismyfJJklSSrk+QFPzwG94ILhYIkPf444Xi09PwOiYA2vvcBbZxljXka0Cur0rucJr2b59hvFwG26XcFnJEjTGmE4YPheI3if5ulR8NVfLA7GxJdEfoXbuyna3gxZ3iTTMenzCv65wDsVSL+KsLaFc3tAnSIvfyNpezu0HtaJooPx336SE+RrFf2xizVReWx8g7yvIu+2yD+vEFo7lOIPRZ6ilCEIJV4npt83GGNQSiLjHBlq0kijUo3SEpVmyNgi+znq2/AL3K61qjItT4gAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;business_impact&quot; title=&quot;business_impact&quot; src=&quot;/static/0401d8b3c139a8ac06784c755601a23e/a6d36/business_impact.png&quot; srcSet=&quot;/static/0401d8b3c139a8ac06784c755601a23e/222b7/business_impact.png 163w,/static/0401d8b3c139a8ac06784c755601a23e/ff46a/business_impact.png 325w,/static/0401d8b3c139a8ac06784c755601a23e/a6d36/business_impact.png 650w,/static/0401d8b3c139a8ac06784c755601a23e/e548f/business_impact.png 975w,/static/0401d8b3c139a8ac06784c755601a23e/48ca3/business_impact.png 1084w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고자료&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=tzTrKEBjFFI&amp;amp;t=113s&quot;&gt;[NDC] 좋은 쿠키 있으면 소개시켜줘 - 데이터 기반 조합 추천&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;동일한 쿠키와 펫을 사용하더라도 맵의 어느 구간을 달렸는지에 따라 획득할 수 있는 점수의 차이가 큽니다.
때문에 단순히 몇 번째로 달렸는지보다는 어디서부터 어디까지 달렸는지가 추천 시스템 구현에서 중요한 정보입니다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[MySQL] B트리 인덱스와 Hash 인덱스]]></title><description><![CDATA[인덱스는 데이터를 보다 효율적으로 검색할 수 있도록 테이블에서 관리되는 자료구조입니다. 해당 글에서는 MySQL에서 제공되는 B 트리 기반 인덱스와 Hash 인덱스의 특징과 주의사항에 대해 가볍게 정리해보고자 합니다.]]></description><link>https://bugoverdose.github.io/computer-science/btree-index-and-hash-index/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/btree-index-and-hash-index/</guid><pubDate>Wed, 03 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;인덱스는 데이터를 보다 효율적으로 검색할 수 있도록 테이블에서 관리되는 자료구조입니다.
해당 글에서는 MySQL에서 제공되는 B 트리 기반 인덱스와 Hash 인덱스의 특징과 주의사항에 대해 가볍게 정리해보고자 합니다.&lt;/p&gt;&lt;h2&gt;스토리지별 인덱스 구조&lt;/h2&gt;&lt;p&gt;우선 기본적으로 MySQL 스트리지 엔진마다 허용되는 인덱스 종류들에 차이가 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://dev.mysql.com/doc/refman/8.0/en/innodb-storage-engine.html&quot;&gt;InnoDB&lt;/a&gt; : B 트리&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://dev.mysql.com/doc/refman/8.0/en/myisam-storage-engine.html&quot;&gt;MyISAM&lt;/a&gt; : B 트리&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://dev.mysql.com/doc/refman/8.0/en/memory-storage-engine.html&quot;&gt;MEMORY(HEAP)&lt;/a&gt; : Hash, B 트리&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://dev.mysql.com/doc/refman/8.0/en/mysql-cluster.html&quot;&gt;NDB&lt;/a&gt; : Hash, B 트리&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;가장 보편적으로 사용되는 스토리지 엔진인 InnoDB에서는 B 트리 기반 인덱스만 사용 가능합니다.
다른 스토리지 엔진들에서도 B 트리 기반 인덱스를 디폴트로 제공하지만, 일부 스토리지 엔진에서는 Hash 인덱스도 제공합니다.
개별 스토리지 엔진에 대해 궁금하다면 위의 링크를 참고하시기 바랍니다.&lt;/p&gt;&lt;h2&gt;B 트리 인덱스&lt;/h2&gt;&lt;p&gt;B 트리는 간단히 말해 최대 2개의 자식 노드만을 지니는 이진검색트리를 일반화하여
2개 이상의 자식 노드를 지닐 수 있도록 확장한 균형 트리입니다.
B 트리 자료구조의 특성과 DB 인덱스에 적합한 이유에 대한 기본 설명은&lt;/p&gt;&lt;div to=&quot;/computer-science/why-use-btree-for-db-index&quot;&gt;이전 게시글&lt;/div&gt;을 참고하기 바랍니다.&lt;p&gt;예를 들어, &lt;code&gt;fruit_name&lt;/code&gt;, &lt;code&gt;price&lt;/code&gt;, &lt;code&gt;stock&lt;/code&gt;라는 3가지 컬럼으로 구성된 테이블이 있다고 합시다.
이때 문자열 타입의 &lt;code&gt;fruit_name&lt;/code&gt; 컬럼에 대해 B 트리 인덱스를 생성할 경우,
기본적으로 각 노드들에는 복수의 &lt;code&gt;fruit_name&lt;/code&gt; 컬럼 값들이 인덱스 키로써 정렬되어 관리됩니다.
루트 노드에와 각 레벨의 브랜치 노드들에는 각 인덱스 키에 대응되는 자식 노드의 주소가 함께 관리되고,
이를 따라 내려가면 리프 노드에서는 최종적으로 각 컬럼에 해당되는 로우가 저장된 위치 혹은 그에 대응되는 클러스터드 인덱스를 가리키게 됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/1ab345380806b71dac2d35719cddae28/c7ddf/b-tree-index.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:61.963190184049076%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAChklEQVQoz3WQS28cRRRG51/xh8gCiRUrlF0WWcAKIYECkRJFiRQgCWCFwXYSx8H2MHhsz6t7uruqn9VV1d3ziMfg+JFsDuqObZEFi6O6KtX56t7bstZijOHyrNHGYvOEH9Zcrn835uF6yO0VwU8vYrQ2V+/+69R1TeuyqC+LoqAsS6w1HC+ntHcSvn3sEUjL2DMkak5VFlSlpSzsB0EfBF6GxXGM53lEiWYiFa4f4XghKtekacbAETh+gisUQaT+v0N9MaZSGUNH8OlXA+4+ldz/zeduO0HGmu9/9fj81phfNiLuPI1Y7+YUtavNhW+aumWMbUaYTwsO52Uz8q0nDkNXkaaGLCuZV4b2lmDlVUyW5kSRJs1ss5rau2QxK2iNxyP6TkR3mNLph6xtu7h+TK4N3UHCH7s+nX7M7iilKCxOkNE5kEyCmEDGbP7ls70v+XOQsLUf05pWlpv3HG7ccWlvxTxYrWXNRjfg4y8OeLga8PhFzM+bCiETPvt6j48+2eabR2M2uoJrX/Z59Czkx3XJk5c5rfrXzV7CTl+h8oosn6F1ycjLWOsqlF5gikO0XZCbkt93Um6vSLb2E0Z+xmonbRylZ+R6Wu/QoOyCIFsyFFOcaIHM/0HmR7hCM/ByeqOY9vMOOz2PidT4UiHSOZE5JrF/I9QRQcPyfaDIXhPkJ0zSIw78GeNoiRsf4k4CRqMxYRgha2SIECGBkATprHECdYzI31zRBIbqNZE9IynPkPpNExzqY5bLQ6ZVwbu355yfnXB+dtrw9vyEanFKaE6Ji1Ni+57QnNCydYfpjL3JjJ5bsTep6E0qDvwprsgYuiFRWiITe0WYWkZBye7F+8ZxK4Zixr9Tg1HkykdOjgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;b-tree-index&quot; title=&quot;b-tree-index&quot; src=&quot;/static/1ab345380806b71dac2d35719cddae28/a6d36/b-tree-index.png&quot; srcSet=&quot;/static/1ab345380806b71dac2d35719cddae28/222b7/b-tree-index.png 163w,/static/1ab345380806b71dac2d35719cddae28/ff46a/b-tree-index.png 325w,/static/1ab345380806b71dac2d35719cddae28/a6d36/b-tree-index.png 650w,/static/1ab345380806b71dac2d35719cddae28/e548f/b-tree-index.png 975w,/static/1ab345380806b71dac2d35719cddae28/3c492/b-tree-index.png 1300w,/static/1ab345380806b71dac2d35719cddae28/c7ddf/b-tree-index.png 2810w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이처럼 B 트리 기반 인덱스는 값들이 정렬되어있기 때문에
&lt;code&gt;=&lt;/code&gt;, &lt;code&gt;&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;gt;=&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;lt;=&lt;/code&gt;, &lt;code&gt;BETWEEN&lt;/code&gt; 등의 문법과 함께 활용하여
동일 조건과 범위 조건에 대한 검색 성능을 높일 수 있습니다.
이때 B 트리는 꾸준히 균형이 유지되므로 데이터 조회, 생성, 삭제시 &lt;code&gt;O(log N)&lt;/code&gt;의 시간복잡도를 유지합니다.&lt;/p&gt;&lt;h3&gt;유의사항&lt;/h3&gt;&lt;p&gt;&lt;code&gt;WHERE&lt;/code&gt; 조건절에서 인덱스가 설정된 컬럼을 사용한다고 무조건 조회 성능이 개선되는 것은 아닙니다.
특히 B 트리의 구조적 특성으로 인해 일부 문법은 인덱스를 타지 않을 수도 있습니다.
혹은 문법적으로는 인덱스를 탈 수 있더라도 B 트리 인덱스로 인한 성능 향상을 보기 어려운 경우도 존재합니다.&lt;/p&gt;&lt;h4&gt;LIKE와 와일드카드&lt;/h4&gt;&lt;p&gt;대표적인 예로 &lt;code&gt;LIKE&lt;/code&gt; 문의 경우 검색 조건이 와일드카드(%)로 시작하지 않거나
상수가 아닌 경우 컬럼에 적용된 인덱스가 활용될 수 없습니다.
예를 들어, 아래 네 가지 &lt;code&gt;SELECT&lt;/code&gt; 문들 중 첫 번째와 두 번째에서만 인덱스가 활용됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-sql line-numbers&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;-- &amp;#x27;Patrick&amp;#x27; &amp;lt;= key_col &amp;lt; &amp;#x27;Patricl&amp;#x27; 범위의 로우들만 탐색&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; tbl_name &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; key_col &lt;span class=&quot;token operator&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;Patrick%&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;-- &amp;#x27;Pat&amp;#x27; &amp;lt;= key_col &amp;lt; &amp;#x27;Pau&amp;#x27; 범위의 로우들만 탐색&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; tbl_name &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; key_col &lt;span class=&quot;token operator&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;Pat%_ck%&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;-- 와일드카드로 시작&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; tbl_name &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; key_col &lt;span class=&quot;token operator&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;%Patrick%&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;-- 상수가 아님&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; tbl_name &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; key_col &lt;span class=&quot;token operator&quot;&gt;LIKE&lt;/span&gt; other_col&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;같지 않다 조건&lt;/h4&gt;&lt;p&gt;또한 &lt;code&gt;&amp;lt;&amp;gt;&lt;/code&gt;, &lt;code&gt;NOT IN&lt;/code&gt;, &lt;code&gt;NOT BETWEEN&lt;/code&gt;, &lt;code&gt;IS NOT NULL&lt;/code&gt;와 같은
같지 않다 조건에서는 인덱스를 통한 성능 향상을 기대할 수 없습니다.
인덱스는 특정 값 혹은 특정 데이터 범위에 접근하는 데에만 빠르기 때문입니다.&lt;/p&gt;&lt;h4&gt;원본 데이터의 가공&lt;/h4&gt;&lt;p&gt;원본 데이터를 가공한 경우에도 인덱스를 활용할 수 없습니다.
&lt;code&gt;SUBSTRING(index, 1, 1)&lt;/code&gt;의 경우 인덱스 키의 특정 문자열을 잘라서 활용하기 때문에 인덱스를 탈 수 없습니다.
&lt;code&gt;DAYOFMONTH(index)&lt;/code&gt;의 경우 인덱스 키를 가공한 결과물을 사용하므로 인덱스를 탈 수 없으며,
가공한 결과물에 대해 다시 인덱스를 생성해줘야만 다시 인덱스로 활용 가능합니다.&lt;/p&gt;&lt;h4&gt;인덱스와 다른 타입의 조건&lt;/h4&gt;&lt;p&gt;인덱스와 다른 타입으로 조건 검색하는 경우 기본적으로 인덱스를 활용할 수 없습니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;WHERE char_index = 10&lt;/code&gt;와 같이 문자열 컬럼을 정수와 비교할 경우 인덱스를 타지 않습니다.
그 이유는 숫자 10이 될 수 있는 문자열의 종류가 너무 다양하기 때문입니다.
&lt;code&gt;&amp;#x27;10&amp;#x27;&lt;/code&gt;, &lt;code&gt;&amp;#x27; 10&amp;#x27;&lt;/code&gt;, &lt;code&gt;&amp;#x27;0010&amp;#x27;&lt;/code&gt;와 같이 공백이나 leading zero가 포함된 경우도
전부 숫자 &lt;code&gt;10&lt;/code&gt;과 일치한다고 판단됩니다.&lt;/p&gt;&lt;p&gt;다만, &lt;code&gt;WHERE int_index = &amp;#x27;10&amp;#x27;&lt;/code&gt;의 경우 인덱스를 탑니다.
문자열 &lt;code&gt;&amp;#x27;10&amp;#x27;&lt;/code&gt;이 될 수 있는 숫자는 &lt;code&gt;10&lt;/code&gt;밖에 없기 때문입니다.&lt;/p&gt;&lt;h4&gt;복합 인덱스&lt;/h4&gt;&lt;p&gt;복합 인덱스의 경우 인덱스의 &lt;code&gt;AND&lt;/code&gt;로 묶인 모든 조건들에 &lt;strong&gt;첫 번째 컬럼이 포함되어있지 않은 경우&lt;/strong&gt; 인덱스를 활용할 수 없습니다.&lt;/p&gt;&lt;p&gt;예를 들어, &lt;code&gt;(first_column, second_column)&lt;/code&gt;와 같이 복합 인덱스가 설정된 경우
무조건 &lt;code&gt;first_column&lt;/code&gt;이 &lt;code&gt;WHERE&lt;/code&gt;절에 포함되어 있어야 인덱스를 탑니다.
아래 아래 네 가지 &lt;code&gt;WHERE&lt;/code&gt;절 중 첫 번째와 두 번째에서만 인덱스가 활용됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-sql line-numbers&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;-- first_column 컬럼 포함&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; first_column &lt;span class=&quot;token operator&quot;&gt;IN&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;a&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;b&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;AND&lt;/span&gt; second_column &lt;span class=&quot;token operator&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;some_value&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;-- OR로 구분된 각 조건들에서 모두 first_column 컬럼 포함&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; first_column &lt;span class=&quot;token operator&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;a%&amp;#x27;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;OR&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;A &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;AND&lt;/span&gt; first_column &lt;span class=&quot;token operator&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;b%&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;-- first_column 컬럼 누락&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; second_column &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;some_value&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;-- first_column 컬럼 누락된 조건 존재&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;WHERE&lt;/span&gt; first_column &lt;span class=&quot;token operator&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;a%&amp;#x27;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;OR&lt;/span&gt; A &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;랜덤I/O와 순차I/O&lt;/h4&gt;&lt;p&gt;옵티마이저가 인덱스를 활용하는 것보다
순차I/O로 테이블 전체를 탐색(Full Table Scan)하는 것이 더 효율적이라고 판단하면,
B 트리 인덱스를 활용하지 않습니다.&lt;/p&gt;&lt;p&gt;대표적인 예로 테이블에서 대량의 로우를 조회하는 경우,
인덱스를 활용할 경우 대량의 랜덤I/O가 발생하여 성능이 오히려 낮아질 수 있습니다.
이 경우 디스크에 순차적으로 접근하는 테이블 전체를 탐색하는 방식이 오히려 효율적입니다.&lt;/p&gt;&lt;h4&gt;데이터 크기로 인한 성능 저하&lt;/h4&gt;&lt;p&gt;위의 그림에서 알 수 있듯이 기본적으로 B 트리 인덱스의 각 노드에는 복수의 컬럼 데이터와 주소 정보가 저장됩니다.
그런데 이 노드는 페이지, 즉 디스크에서 읽어오는 데이터의 단위와 일치합니다.
이러한 특성 때문에 노드에 저장되는 컬럼의 개수와 데이터의 크기는 성능에 큰 영향을 미칩니다.&lt;/p&gt;&lt;p&gt;만일 B 트리 인덱스로 관리하는 컬럼의 &lt;strong&gt;데이터 크기가 너무 클 경우&lt;/strong&gt;
인덱스를 타더라도 전반적으로 성능이 저하될 수 있습니다.
컬럼 데이터의 크기가 너무 커지면 &lt;strong&gt;하나의 페이지에 담을 수 있는 컬럼 데이터의 개수가 감소&lt;/strong&gt;하고,
자연스럽게 각 노드의 자녀 노드 개수는 감소하고, 전체적으로 &lt;strong&gt;노드의 개수가 증가&lt;/strong&gt;하며, 트리의 높이도 커집니다.&lt;/p&gt;&lt;p&gt;검색 과정에서 하나의 페이지만으로 처리가 안된다면 다른 페이지를 디스크에서 읽어와 메모리에 올려야 합니다.
이러한 디스크 I/O로 인해 일차적으로 성능이 떨어집니다.
또한 개별 데이터 크기의 증가로 페이지 자체의 크기가 커지면서 메모리에 캐싱해둘 수 있는 페이지 수도 줄어들고
이로 인해 메모리를 효율적으로 사용하지 못하게 될 수 있습니다.&lt;/p&gt;&lt;p&gt;이러한 문제를 고려했을 때 B 트리 인덱스를 설정하는 컬럼에 저장되는 데이터의 크기가 어느 정도인지 기본적으로 유의할 필요가 있으며,
가급적 최대한 작게 유지하는 것이 이상적입니다.&lt;/p&gt;&lt;h2&gt;Hash 인덱스&lt;/h2&gt;&lt;p&gt;Hash 인덱스의 경우 해시 테이블 자료구조로 컬럼 값과 메모리 주소를 관리합니다.
특정 컬럼에 대해 Hash 인덱스를 설정할 경우, 해당 컬럼의 값에 해시 함수를 적용하여 해쉬 값을 얻고,
이 해쉬 값에 해당하는 위치에 컬럼 값 원본과 해당 로우가 저장된 위치 정보가 저장됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/e5c709d2bd6f8065772b61872c5a4ced/0faf1/hash-index.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:34.96932515337423%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABiUlEQVQoz22Ru47TUBRF82N8Ar9CRQF/QEEJogaExBSUTDEIEBoyGjKJ8yDxK7ZzfV+2E+dph3ahawaJgmJJ+5ziSGevnjEarTXqHpfdrl5btps/uOyoCoOQhkAciNUZLyj5cuOzyPZE8ky4qum5A9YYNpVlUxmq0iKV5sPnmNcfI95eBlxcxVx8SvgxXSFUib86EYgjP5OacVgyT3dE+YnBYk2vKCyp0Dx/N+XpK4/rYYJWgv5I0h+XXH71ubqOuVvsmAWSYCkZTgIGQ4+hN8ObzBmMpownM77fBfTSJOLWC3n4pM+DRze8fD/AqpRMbBByRybqDmUbclkwnqeYYo3VkuZ05HjYd5zbA/Gqci9LokTw7M2Exy9GfBskXVfz0OIva2Z+wcy3LMWJTBTEqWYp9ySyRpZNR16cMOuWabyhZ4zBWted6Q4V1s2ux4pcVRTlHlvu0HaLtSVZXhKpX0SqJcwbQtkS5A1LfWYY3Ev5H860k2W06vJfnOVQHIlVS6yaf2gJV1t+A09G9R92gglDAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;hash-index&quot; title=&quot;hash-index&quot; src=&quot;/static/e5c709d2bd6f8065772b61872c5a4ced/a6d36/hash-index.png&quot; srcSet=&quot;/static/e5c709d2bd6f8065772b61872c5a4ced/222b7/hash-index.png 163w,/static/e5c709d2bd6f8065772b61872c5a4ced/ff46a/hash-index.png 325w,/static/e5c709d2bd6f8065772b61872c5a4ced/a6d36/hash-index.png 650w,/static/e5c709d2bd6f8065772b61872c5a4ced/e548f/hash-index.png 975w,/static/e5c709d2bd6f8065772b61872c5a4ced/3c492/hash-index.png 1300w,/static/e5c709d2bd6f8065772b61872c5a4ced/0faf1/hash-index.png 1956w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;Hash 인덱스는 &lt;code&gt;=&lt;/code&gt;, &lt;code&gt;&amp;lt;=&amp;gt;&lt;/code&gt;을 활용한 동일 조건 검색에 사용될 수 있으며,
이때 &lt;code&gt;O(1)&lt;/code&gt;의 시간복잡도로 극한으로 빠른 성능을 보일 수 있습니다.&lt;/p&gt;&lt;h3&gt;한계&lt;/h3&gt;&lt;p&gt;일반적으로 Hash 인덱스 대신 B 트리 기반의 인덱스를 사용하는 이유는 Hash 인덱스가 지닌 한계 때문입니다.&lt;/p&gt;&lt;p&gt;당연히 각 컬럼들의 값에 따라 &lt;strong&gt;정렬되어 있지 않기 때문&lt;/strong&gt;에
&lt;code&gt;&amp;lt;&lt;/code&gt;와 같이 범위 조건 검색에서는 사용될 수 없습니다.
또한 정렬되어 있지 않기 때문에 &lt;code&gt;ORDER BY&lt;/code&gt; 작업의 성능을 올리기 위해 옵티마이저가 해쉬 인덱스를 활용할 수는 없습니다.&lt;/p&gt;&lt;p&gt;또한 &lt;strong&gt;해시 충돌 발생&lt;/strong&gt;할 경우 성능 저하가 발생한다는 해시 테이블의 본질적인 문제는 Hash 인덱스에도 동일하게 존재합니다.
이로 인해 해시 인덱스를 활용하더라도 탐색에 걸리는 시간이 증가할 수 있습니다.&lt;/p&gt;&lt;p&gt;마지막으로 Hash 인덱스는 B 트리에 비해 데이터 저장 방식이 비효율적입니다.
B 트리의 각 노드를 페이지 단위로 저장되지만,
Hash 인덱스의 값들은 페이지 단위로 관리하기 까다롭습니다.&lt;/p&gt;&lt;p&gt;그 이외의 한계에 대해 알고 싶다면
해당 &lt;a href=&quot;https://dev.mysql.com/doc/refman/8.0/en/index-btree-hash.html#hash-index-characteristics&quot;&gt;공식문서&lt;/a&gt;를
참고하시기 바랍니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://dev.mysql.com/doc/refman/8.0/en/create-index.html#create-index-storage-engine-index-types&quot;&gt;MySQL - Index Types Per Storage Engine&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://dev.mysql.com/doc/refman/8.0/en/index-btree-hash.html&quot;&gt;MySQL - Comparison of B Tree and Hash Indexes&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://dev.mysql.com/doc/refman/8.0/en/innodb-adaptive-hash.html&quot;&gt;MySQL - Adaptive Hash Index&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://mangkyu.tistory.com/286&quot;&gt;MangKyu&amp;#x27;s Diary - [MySQL] B-Tree로 인덱스에 대해 쉽고 완벽하게 이해하기&lt;/a&gt;&lt;/li&gt;&lt;li&gt;우아한테크코스 백엔드 강의 자료&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[왜 DB 인덱스로 B 트리를 사용하는가 (feat. 이진탐색트리)]]></title><description><![CDATA[MySQL에서는 일반적으로 B 트리 기반의 인덱스가 사용됩니다. 이진탐색트리과의 비교를 통해 B 트리 자료구조를 이해하고, 왜 DB 인덱스에 적절한지에 대해 정리해보고자 합니다.]]></description><link>https://bugoverdose.github.io/computer-science/why-use-btree-for-db-index/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/why-use-btree-for-db-index/</guid><pubDate>Tue, 02 Jan 2024 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;MySQL에서는 일반적으로 B 트리 기반의 인덱스가 사용됩니다.
이진탐색트리과의 비교를 통해 B 트리 자료구조를 이해하고, 왜 DB 인덱스에 적절한지에 대해 정리해보고자 합니다.&lt;/p&gt;&lt;h2&gt;B 트리는 이진탐색트리의 일반화&lt;/h2&gt;&lt;p&gt;기본적으로 B 트리는
&lt;a href=&quot;https://en.wikipedia.org/wiki/Binary_search_tree&quot;&gt;이진탐색트리(Binary Search Tree)&lt;/a&gt;와 유사합니다.&lt;/p&gt;&lt;p&gt;BST에서 모든 노드의 왼쪽 서브트리는 해당 노드 값보다 작은 값을 지니고,
모든 노드의 오른쪽 서브트리가 해당 노드 값보다 큰 값을 지닙니다.
예를 들어, 아래 트리에서 루트 노드의 값은 20입니다.
그러므로 그 왼쪽 서브트리의 노드들은 전부 20 미만의 값을 지니고,
그 오른쪽 서브트리는 전부 20 이상의 값을 지닙니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/f31da7c589df34f4cbd294dab693490a/062c8/bst.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:109.20245398773005%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEHUlEQVQ4y42U20+UVxTFv7+iTSoz892vAzI3cC7cZmiHiwgMisAIbRGroVIUFW1aKIlaDBgNpKlY23ipiTVNk5bE1sQH00vSV/vQ2AdT+5/8mnNmhhKMpg9r5ps5e6+z915rf4rvBrwKnu3TUN/A9PkJzt04Ri6fxjHcl8YrryILvCim6vDWYAf3//qMB//cZvrSIfSQRdSP4jn+/yOsBQZ+FD1s0NmVZ/3BEl/8uszk3BiW5uDarrxQxG4nVl5GJmDqFvn2Anu7+kik4qSycVrSrQz2l4g3JuT5zjzlBTIvwHU8bNOhu9hNT7EH23JwTBfH9LAMm9juuCTtaMvL367tbVWr7CRzLI+oW09/3wCFtjymVq3C+2+ujuVKFN/sor+vn4agEVt3CLxqhbVyXcsjCHxOzs9SaO9Ej+iSYHvM9pEYukk6leHMuVM0Z1KSVPG3kcXjMc7fneP67xfYf7QXW3erlfkvzFlUYxsu7cUc648+Ye3RIu09uWrLXiCVa+3McOfJZb57do35jfcwI/bWbPwdFhEOMMIWo8cH2Xz+FT88+5LRE/tQKrdFpQjZdI7Tq9Ms3DpOeWpYiiAu2+m3Wo6l2/Tu7WHhxixz64eJp2IoUgjbpaF+N6WBIRzDQ63T6WjJk+8oyDkF20wsyfwopm6SzeTo7dqLFjIq3rQ8FPHhmQHjIxPSW8KwYgss02ZsuEw6mcXQrK3W5fboFqnGZsoj49JiNfWlD4X849PDHJubRI+Y8kBACxuURvqZWZwiiPpyp2X7tk8QBMwsHGF/eUDG1TqQPizPDHHryQqf/7ZE577W6lp5JJsSrHx/jntP1zh59TCmZlcqVx1OXTnCN0/XWdk8S6IpVpl1bfXePXuQe3+ucfePKxQPtGOqtpxFUzrBtccX2Pz7JmevH8USxhWEmsOHG9M8eH6HjV8ukkzH5dxr4in10XoOnSgxONkt3S/+FIonY02MTR1gYr7E0MEB6TnhR9twaEqnGD8zyOiR/TLONm2ZJ+apiGStzkAPm5JQtCuUzWVy8kVQ93qYnmIvnuNJwQQE6a7XwrRm28ikM1JxkedarhDFwXMqgeJZfEd2qZT6hsg25wjtClHaN8SeRBo9rG+RmtW1E2ci3hP5poNiGzZbMB2MiMGeliQnV6coDrXjOi5HFw9Rnh3EMiz5dqnEmXQfKDC7MklTLi5/i9YV4SkJowJDNfng8jtc//lTFm7OMPnxMGsPF7ny8CM6+rNE6jR01SSWbOTi/dNsPF5mZvVttIgu8xVDM6lBtKGGdMonBlj/aYn3L03QM5Zn+dt5Fr+eIdUSQw1p6JqB57vMXZ1i7cclucORkCrzFV012A41XLkpXUjhRV3Cb6g0tyVobG6oVmdIQvEc1HukC0kMw0AL6/LsXwGM6I+0OXL2AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;bst&quot; title=&quot;bst&quot; src=&quot;/static/f31da7c589df34f4cbd294dab693490a/a6d36/bst.png&quot; srcSet=&quot;/static/f31da7c589df34f4cbd294dab693490a/222b7/bst.png 163w,/static/f31da7c589df34f4cbd294dab693490a/ff46a/bst.png 325w,/static/f31da7c589df34f4cbd294dab693490a/a6d36/bst.png 650w,/static/f31da7c589df34f4cbd294dab693490a/e548f/bst.png 975w,/static/f31da7c589df34f4cbd294dab693490a/3c492/bst.png 1300w,/static/f31da7c589df34f4cbd294dab693490a/062c8/bst.png 1386w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;BST는 이진트리이므로 각 노드들은 자녀 노드를 최대 두 개까지만 지닐 수 있습니다.
만일 BST와 유사하게 정렬되었지만 각 노드가 3개 이상의 자식 노드를 지닐 수 있는
트리를 구현하려면 어떻게 해야 할까요?&lt;/p&gt;&lt;p&gt;자식 노드가 2개일 때는 부모노드에서 관리되는 하나의 키만을 기준으로 서브트리의 노드들을 관리하였습니다.
만일 자식 노드가 3개라면 부모노드에서는 아래와 같이 2개의 키, &lt;code&gt;k1&lt;/code&gt;와 &lt;code&gt;k2&lt;/code&gt;를 활용하여 3가지 서브트리를 관리해야 합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/ed1792633ac64525dfb31a09fd0490a9/2d048/bst-to-btree.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:31.901840490797547%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABlElEQVQY0yWQTWsTURiF52comprJ3Ll37sckmSQ1VKm1YAstVSqGFBQiRdtSW2gajUSEFFJbqKCmYl10ExBc6E4q6MZNEf+GuvVPPDLTxYHDeT/Oe15PK4M1jmAsZPH+HEc/Bux/6lKtJyihMZEl7UlxxjXWJmy/PmXv8z/urB4gfB+rY7SyeEZbUmhpudWcp/3yAev9FtemJomkzszSRSnSoVS7PH6F5Sfv2XjxhcV7HWLjiJTL6p4sKMJ8RL0ygZEO/2JAIScouwqVuJZxLdPrDMFYjsRZqsUYkTtPUfr4F84xUatiwoDQ9/GmZq/SP27z9M06Sa2M1S6LOnt7mv0Pz9jcXSaOXRZnaWNI9+0v5pa63N06ojP8yUyjTevxMZ3hKddvruDNN2/w6uQ5g4/b1CfHUSJC5CWNhwscftuhP9qiVC4SScvq4ITe6DfNzXesDL7SG/2h8eiQtb3v9EZ/WWjt4AWXBLG2OGUQfogKFUooUr1kLCaMEAWJDEJUEFCNY1TBp6QjEuewoUALcfaGfJ7/lp3ZdYqfT4QAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;bst-to-btree&quot; title=&quot;bst-to-btree&quot; src=&quot;/static/ed1792633ac64525dfb31a09fd0490a9/a6d36/bst-to-btree.png&quot; srcSet=&quot;/static/ed1792633ac64525dfb31a09fd0490a9/222b7/bst-to-btree.png 163w,/static/ed1792633ac64525dfb31a09fd0490a9/ff46a/bst-to-btree.png 325w,/static/ed1792633ac64525dfb31a09fd0490a9/a6d36/bst-to-btree.png 650w,/static/ed1792633ac64525dfb31a09fd0490a9/e548f/bst-to-btree.png 975w,/static/ed1792633ac64525dfb31a09fd0490a9/3c492/bst-to-btree.png 1300w,/static/ed1792633ac64525dfb31a09fd0490a9/2d048/bst-to-btree.png 3066w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;B 트리는 이처럼 BST와 구조적으로 유사하지만
자녀 노드의 최대 개수를 마음대로 지정할 수 있다는 점에서 차이를 지닙니다.
이에 따라 B 트리에 대해 BST를 일반화한 트리라고도 합니다.&lt;/p&gt;&lt;h2&gt;B 트리의 키와 자녀 노드&lt;/h2&gt;&lt;p&gt;B 트리는 부모 노드에 한 개 이상의 키를 저장함으로써 두 개 이상의 자녀 노드를 정렬하여 관리합니다.
이때 부모 노드의 키들은 오름차순으로 정렬되고,
이 정렬 순서에 따라 자녀 노드들이 해당되는 키 값의 범위가 결정됩니다.&lt;/p&gt;&lt;p&gt;이때 최대 M개의 자녀 노드를 지닐 수 있는 B 트리는 M차 B 트리라고 부르며,
M차 B 트리의 구성은 아래와 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;M&lt;/code&gt; : 각 노드의 최대 자녀 노드 수&lt;/li&gt;&lt;li&gt;&lt;code&gt;M-1&lt;/code&gt; : 각 노드의 최대 키 수&lt;/li&gt;&lt;li&gt;&lt;code&gt;⌈M/2⌉&lt;/code&gt;&lt;div num=&quot;1&quot;&gt;&lt;/div&gt; : 각 노드의 최소 자녀 노드 수 (루트 노드와 리프 노드 제외)&lt;/li&gt;&lt;li&gt;&lt;code&gt;⌈M/2⌉-1&lt;/code&gt; : 각 노드의 최소 키 수 (루트 노드 제외)&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;예를 들어, 아래와 같은 3차 B 트리의 경우 기본적으로
각 노드에 최소 1개(⌈3/2⌉-1)에서 최대 2개(3-1)의 키가 관리됩니다.
이에 따라 각 노드의 자녀 노드는 최소 2개(⌈3/2⌉)에서 최대 3개가 됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/3bea38a25b9ba05a47bbaca516b39fb2/f3abf/b-tree.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:73.00613496932516%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC8ElEQVQ4y5WTS28TZxSG/Tto7Nqe+3jsxPbYnsmMbZzECc7FQUkKcWpzSQM0CddAFEQUSkMXgHBULgsEqloUQQuUVdTuEDtE1T0rdtwqVV2QP/AgT3BJuIrF0ffp6D2P3nPO9/l0NcJHQzOQBZGtE+c4fOFvps8/ZPToMoqkvFfv+xBIU3TvjGgGQjDIruM3WFpZZeG3l4z/cB/1c4BNWCNkUcFtd8nmeogl8pT6K1hO0ct7GmWj3vcpWM7Nk3VyKKKMIkposkJnvkDazLyBrqtbB9S9ZESLoqsGsqRRyHfg2u6bQs1Ae+2okC/gtGeRRRW9UaNFvbyvSW8IG3cpFEQJh9js2GSS5ntdNE5F0nAyGbJWBjkURAqF3nLYgKoGvdWTVI9eY+rULexiDUUU15yth2oGiiCSLY1zYPEOXx+5SvfoCc/UhpYlKcL88hPO/An1e1CZ+ZlwyyYieuz/Vr2x6DHCLV8wPn+bnx7A4gocvvIYRdLxNdtQJZVE3GTL0BT9lVl6K7MU+6reErR3FmagSjLd/TsYGJv1winWNjpUZY2ujiKKIGCbSaKqQiqRxPUGv/HNKZJKMm7iWjZCIEDOtpDDzRk2foKkYqXbvWIhLJPLFkiZlrfpzkIRI9K61nITKOtYaRsr43iazflOWmOJNYdiMIgqhMm32947C/n92CmTtohOKBCgzTBw0inC/hbvCzY0QsDvuVJFgfCXQZKxKOlEnJC/BV/c7qN3+Fv6vprCaHOJWyXKo/vpKk8QjeeIZ3oYrs2QK+0glsgRbbVwu6sMVg6Szg5itDp09O+mvH0a0x3Ed2DpIXPXn3Pq1n+Udp5h6tx9Tiz/w+m7qwxM1Nm7+AcLv/7L97+vUv7mLMXhQ9RXVvnu5lOOXf6LUm2Rs3dfMPfLM6YvP8LXMzZPeU+d4ckLpDsqdG+fY+u+JUamL2F11egamWFo8keGJi9id45hOgNs23+RoX11+qoLpArbGJmsU95zni2107wCnJcPAE3iOyQAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;b-tree&quot; title=&quot;b-tree&quot; src=&quot;/static/3bea38a25b9ba05a47bbaca516b39fb2/a6d36/b-tree.png&quot; srcSet=&quot;/static/3bea38a25b9ba05a47bbaca516b39fb2/222b7/b-tree.png 163w,/static/3bea38a25b9ba05a47bbaca516b39fb2/ff46a/b-tree.png 325w,/static/3bea38a25b9ba05a47bbaca516b39fb2/a6d36/b-tree.png 650w,/static/3bea38a25b9ba05a47bbaca516b39fb2/e548f/b-tree.png 975w,/static/3bea38a25b9ba05a47bbaca516b39fb2/3c492/b-tree.png 1300w,/static/3bea38a25b9ba05a47bbaca516b39fb2/f3abf/b-tree.png 1474w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;또한 루트 노드와 리프 노드를 제외한 내부 노드(브랜치 노드)의 경우
최소 1개의 키를 지니며, 키의 개수가 x개면 자녀 노드는 항상 x+1개입니다.
즉, 몇 차 B 트리인지와 상관 없이 모든 내부 노드는 최소 두 개의 자녀 노드, 즉 서브 트리를 지닙니다.&lt;/p&gt;&lt;h2&gt;B 트리의 시간복잡도&lt;/h2&gt;&lt;p&gt;B 트리의 중요한 특징은 모든 리프 노드들은 같은 레벨에 있다는 점입니다.
즉, B 트리에 새로운 노드가 추가되거나 기존 노드가 삭제될 때, 서브트리들의 균형을 유지하기 위해 조정 작업이 일어납니다.
그러한 면에서 B 트리는 자가 균형 트리(self-balancing tree)의 일종으로 볼 수 있습니다.&lt;/p&gt;&lt;p&gt;그리고 이처럼 균형이 유지되기 때문에
B 트리에서 조회, 삽입, 삭제 작업의 시간복잡도는 평균 케이스와 최악의 케이스에서 언제나 &lt;code&gt;O(log N)&lt;/code&gt;로
성능이 일정하게 유지됩니다.
이러한 조정 작업이 일어나지 않는 BST의 경우
편향 이진 트리(Skewed Binary Tree)가 될 수 있고 최악의 경우 시간복잡도가 &lt;code&gt;O(N)&lt;/code&gt;이 될 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/db66210672e7cb8adf86742d2b42acb9/f3abf/balanced-unbalanced-tree.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:39.877300613496935%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABO0lEQVQoz22SUU+DMBDH9/2/iE8+6IvRJ40mUxMnYwgTgY6xoMJgG2xrYZS/6c2qY/6T63Hl+uvdQQ8A2rYlU4pCF451j7/S77SfpzGGg1t0zyrf04GUDaQEZtEbPHeA3a6hvS60KAqMzCEY8+G67hG0p5Y8z2HbNiohCLq3Br7vYzqdHgC32y3lq1ABPc87gBIwyzICdqthjGEymRztazVNg/F4jDAMf1uO4xjKqqqC7TgoihJSSliWhbIs6TJ1oK7rg0pUjhLnHKZpIkmSfctBEBBQJbxYI2zWJdpWwngeQHCOxWJBbQkhjualpcZgGAbSNN23rBNm7zlYlIKLGquSk+9+Zf283giwKEGarSheLpc0cwLK76TrvoOTsz7Or55w9/iK+CP/99dQ+pyvcHrxgMubIapq91PtF7zwZhxwmOfYAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;balanced-unbalanced-tree&quot; title=&quot;balanced-unbalanced-tree&quot; src=&quot;/static/db66210672e7cb8adf86742d2b42acb9/a6d36/balanced-unbalanced-tree.png&quot; srcSet=&quot;/static/db66210672e7cb8adf86742d2b42acb9/222b7/balanced-unbalanced-tree.png 163w,/static/db66210672e7cb8adf86742d2b42acb9/ff46a/balanced-unbalanced-tree.png 325w,/static/db66210672e7cb8adf86742d2b42acb9/a6d36/balanced-unbalanced-tree.png 650w,/static/db66210672e7cb8adf86742d2b42acb9/e548f/balanced-unbalanced-tree.png 975w,/static/db66210672e7cb8adf86742d2b42acb9/3c492/balanced-unbalanced-tree.png 1300w,/static/db66210672e7cb8adf86742d2b42acb9/f3abf/balanced-unbalanced-tree.png 1474w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;참고로 편향되었을 때 성능이 떨어진다는 점은 BST의 치명적인 단점이고,
&lt;a href=&quot;https://ko.wikipedia.org/wiki/AVL_%ED%8A%B8%EB%A6%AC&quot;&gt;AVL 트리&lt;/a&gt;,
&lt;a href=&quot;https://ko.wikipedia.org/wiki/%EB%A0%88%EB%93%9C-%EB%B8%94%EB%9E%99_%ED%8A%B8%EB%A6%AC&quot;&gt;레드-블랙 트리&lt;/a&gt;와
같은 자가 균형 이진탐색트리에서는 이러한 단점이 개선되었습니다.&lt;/p&gt;&lt;p&gt;이러한 자가 균형 이진탐색트리들과 B 트리 기반의 B+ 트리와 B&lt;sup&gt;*&lt;/sup&gt; 트리들 모두
조회, 삽입, 삭제 작업의 시간복잡도가 평균 케이스, 최악의 케이스에서 &lt;code&gt;O(log N)&lt;/code&gt;입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/f8e933c7b76c1376d4e5614f645c3ec7/7cad8/time-complexity.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:36.19631901840491%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABy0lEQVQoz1XKS08TYQCF4fkp2plOmfmmc2mn09JSbkEI2JsFhAqNJm25aO0AKiUxwMKdbYxRaliYYGKMGxe4AFTcGo07F/4WXZi8hIGNiycn5+RIjtC4WdvB7/1mpfOd9Rc/uffsB6vdX7T23rK8X6DxqkytV2Rlf4bNgzqPDmq03zRYe12l1itQ7xVZ2i9zu5NHsiIhFv2XbH+E3Q9/6B7/48nhXzbfw+PDb2wclXhwVGHntMHWpyoPjytsnVRpnyyyc1pn9+sS219qtD8vsPKuiGQJg8nSHRb8PSp3O8wuP+VWs8vc6nPm77eZ8ceZbU0x7+eZ83NMtyYoN8e50bxGZb1AZa0YmN/Ik6uPIo1kMowOZMgk4qTdGJYeCTLtOqRdj4HEEFlvCFuP0x/LBN2NenhmisHkMI5wSdr9ZL1hEmYKKZtKMZIdRAgLy4zh2C62FUfXoiTcJGbURNd0okYUoQtM08K2bGzbwRBGQOgGuiaClFJxl7SXpE/VGBsZI3+9QDFXRO8TRIWJFtFQZRVVuTCUHWZyYorp0jSO5aCEFCJKBDWgItnCIOHEUOQw8lWFsKISllVCV2SEZgTH810OXTr/yBef//ZLZ3LDC1dgtQftAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;time-complexity&quot; title=&quot;time-complexity&quot; src=&quot;/static/f8e933c7b76c1376d4e5614f645c3ec7/a6d36/time-complexity.png&quot; srcSet=&quot;/static/f8e933c7b76c1376d4e5614f645c3ec7/222b7/time-complexity.png 163w,/static/f8e933c7b76c1376d4e5614f645c3ec7/ff46a/time-complexity.png 325w,/static/f8e933c7b76c1376d4e5614f645c3ec7/a6d36/time-complexity.png 650w,/static/f8e933c7b76c1376d4e5614f645c3ec7/e548f/time-complexity.png 975w,/static/f8e933c7b76c1376d4e5614f645c3ec7/3c492/time-complexity.png 1300w,/static/f8e933c7b76c1376d4e5614f645c3ec7/7cad8/time-complexity.png 3240w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;왜 DB 인덱스에 적합한가&lt;/h2&gt;&lt;p&gt;사실 엄격히 균형이 유지된다는 점이나 시간복잡도가 &lt;code&gt;O(log N)&lt;/code&gt;라는 점에서
B 트리나 AVL 트리나 큰 차이가 없다고 생각할 수 있습니다.
그럼에도 불구하고 MySQL에서 인덱스로 AVL 트리가 아니라 B 트리가 사용되는 이유는
각 노드가 지니는 자녀 노드 수가 더 많기 때문입니다.&lt;/p&gt;&lt;p&gt;이진탐색트리는 자녀 노드의 개수가 2개 이하이므로 각 노드에서 탐색 범위를 절반씩만 줄여나갈 수 있지만,
B 트리는 탐색 범위를 더 빠르게 좁힐 수 있으며, 루트노드에서 리프노드까지의 거리도 더 짧습니다.&lt;/p&gt;&lt;p&gt;예를 들어, 5차 B 트리의 경우 각 노드의 자녀 노드의 개수가 3~5개이며,
AVL 트리의 각 노드는 자녀 노드의 개수가 2개 이하입니다.
이 때문에 고작 10개의 데이터를 관리하기 위해 AVL 트리의 높이는 3이나 되지만,
B 트리는 1밖에 되지 않습니다.
이러한 격차는 B 트리의 각 노드에서 관리하는 키의 개수가 늘어날수록 기하급수적으로 커집니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/5025e600c782deb7649e31c7e4a65190/28d13/avl-tree-vs-btree.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:41.104294478527606%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABuklEQVQoz02Ry2oUQRSG+zlESZxLd126p2/Vc0tPMplLJpJxHPCeTATJREEhZBNFRTcSEQz6FO7cu8oiiM/1SVfHkMXhcOp89Z+/6jhKaIqQriQKDVlzg9TkNFt94qSN9BT/Gct5isAPSExk6ySLiNPoinOug1oGKKFQnkQLjVYB0tOoS1iKS3Gp0VozX26RtuLyXJYaTgmWl4ps2kOyTgGO0Sq8mnw9uxVJGhueHN0l3+ii6gFeVVjR0qH0Ea4gbBheffnN8Y+/HJ6eE2cDRN21/YITrrJuDj49wpiUys061VsuDw+nTPdHtnaKv/Nqrn2mSQxhENvpJmkSNSLbE3UP6ZYOur0OO7sj60wrTRTGjOd9tu8PLe/4fkyUdFhf3yIIUsIwYy0f4AcpxnTo9UbEaRcpItq9jOXnB9RWXF6cPrbLWJzcIx+3rOjiZI6zs/eB198ubEx2P/Ls7U+Ovv9h8e4Xk6fvOT475+XXC2bLM6qrFfqTnDgN7TLyzTZB4DO400MKgVIKx3M1UkZIGeJ5GiEati5y0RMiLGsZsHLjNrPnQ9a2M9qbhtnBEOEJ9t5Mcesu1dUa/wCy8wo6jAglTwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;avl-tree-vs-btree&quot; title=&quot;avl-tree-vs-btree&quot; src=&quot;/static/5025e600c782deb7649e31c7e4a65190/a6d36/avl-tree-vs-btree.png&quot; srcSet=&quot;/static/5025e600c782deb7649e31c7e4a65190/222b7/avl-tree-vs-btree.png 163w,/static/5025e600c782deb7649e31c7e4a65190/ff46a/avl-tree-vs-btree.png 325w,/static/5025e600c782deb7649e31c7e4a65190/a6d36/avl-tree-vs-btree.png 650w,/static/5025e600c782deb7649e31c7e4a65190/e548f/avl-tree-vs-btree.png 975w,/static/5025e600c782deb7649e31c7e4a65190/3c492/avl-tree-vs-btree.png 1300w,/static/5025e600c782deb7649e31c7e4a65190/28d13/avl-tree-vs-btree.png 3210w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;나아가 컴퓨터 구조 관점에서 생각해봅시다.
메인 메모리에는 실행 중인 프로그램의 코드와 코드 실행과 관련된 데이터가 존재하는 위치이고,
보조기억장치(secondary storage)에는 프로그램과 데이터가 영구적으로 저장되는 곳으로 데이터 처리 속도가 가장 느리고, 용량이 가장 크다는 특징을 지닙니다.
이때 보조기억장치는 페이지 단위&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;로 데이터를 읽고 씁니다.
때문에 메인 메모리에서 보조기억장치의 데이터가 필요할 때 특정 데이터만 추출하여 조회하는게 아니라
데이터가 속한 페이지 전체를 메인 메모리에 올려야 합니다. 즉, 불필요한 데이터까지 읽어올 가능성이 기본적으로 존재합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/a8bd13c6f582247e4e53c97308d55fff/748b0/computer-architecture.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:76.07361963190185%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC5klEQVQ4y4WT3U9TZxzH+Q800RvJjLSl5zzntF2x2PIitad4Aem2oLQhvrHRdW7lpeVVjAYafIFkyAQFjbQFjQQTl5gZ/QOmm0sImd5tam92M22jNTHxxruP6TlSNRa9+OZ5npPP75vv+T7nlKnCRikpsqqv3tpmtPoWGhv2UuPahZCEwcil58rWM5QlgctZw/jgbeYnVkiO36e7/SwWswmb4mC9uU8YylQ7a5kZucPVmX9Yms4wELmExVxRNFT0pGppQ0V+71UVG6qi4rA7aWmK0BdJED14jN3eVoQsY1PtH9SyTkK1CMgWBes2gWwSbNqwhfTkD4RDGps3liPMKtZtMoqkljT9KKFcqVDnd/PNT40EIj6awj66x4IcGgrQFPby1WEfgbCPL6scCOkTCQuGNtWG5QuZ/ccDjK12ML0yzMzqMKfudjH5Vz/nVoc5fS/KyB/tNDS7kUzCqOezhiMBTqyGGf29g6mVAZIPxrjw9win73WSuBtm9M9v8QY8pQ3fdWDXy5YqFAJhP7GlNn6c30NscR/9ix0MXPmOznQr0fReoqlW3F4XorJwgXZ9dq1PPWHhYxWVEsJqSDJb9bMqCbaWVzA11s6hoMbWchM2SSCbJWSLtcgXWEVW1hIqOKtqqPb4cbk1XdUejaodxl5xNJA41sOB/W0Ix062uzVdLo9W5F0eP3b7dt20zKbYiYzfoefif3TNPqZrNkPnbIYjSUNDyQzxuX+JXXjEYOFZKkP8osF0zWXoPP+QeOoJX39/BslkosyuOumefUT/lZf0Ljyjb/E58YXnjF7LM3Uzz/StPJO/vWDixgt9f+ZmnqNXDabA9qZzDC2/JhhbMAwLv1H0l/v0LeaJJ5/Sm8rSm87SPZ8lcS3HxK85EstZTl7P8fONHEcuP6UnmdW5eCpLbP5/Bpde0RKdw2qqMG7ZXd9MfWMbdf4Q9WtqDFGrhajxvV21IB5fqMjUFRXUZ6tcO1EkwRvmaUNzsC55XwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;computer-architecture&quot; title=&quot;computer-architecture&quot; src=&quot;/static/a8bd13c6f582247e4e53c97308d55fff/a6d36/computer-architecture.png&quot; srcSet=&quot;/static/a8bd13c6f582247e4e53c97308d55fff/222b7/computer-architecture.png 163w,/static/a8bd13c6f582247e4e53c97308d55fff/ff46a/computer-architecture.png 325w,/static/a8bd13c6f582247e4e53c97308d55fff/a6d36/computer-architecture.png 650w,/static/a8bd13c6f582247e4e53c97308d55fff/748b0/computer-architecture.png 868w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이걸 DB 관점에서 확장해봅시다. DB는 기본적으로 보조기억장치에 저장되어 있습니다.
메인 메모리에서 DB의 데이터를 조회할 때 보조기억장치에 최대한 적게 접근하는 것이 성능면에서 좋습니다.
또한 연관된 데이터를 함께 모아서 저장하면 페이지 단위로 데이터를 조회할 때 불필요한 데이터가 포함될 가능성이 줄어듭니다.&lt;/p&gt;&lt;p&gt;B 트리 인덱스의 각 노드가 서로 다른 페이지에 존재하는 경우
인덱스 탐색 과정에서 기본적으로 더 적은 개수의 노드가 조회되므로
보조기억장치에 대한 접근 빈도가 훨씬 줄어듭니다.
또한 각 노드에는 서로 연관된 데이터들이 함께 저장되기 때문에
페이지 단위로 데이터를 조회할 때 불필요한 데이터가 포함될 가능성이 줄어듭니다.
즉, 페이지 단위에 대한 저장 공간 활용도가 더 높습니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고자료&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/B-tree&quot;&gt;Wikepedia - B-tree&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=bqkcoSm_rCs&quot;&gt;쉬운코드 - B 트리의 개념과 특징&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=liPSnc6Wzfk&quot;&gt;쉬운코드 - B tree가 왜 DB 인덱스로 사용되는지를 설명합니다&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;&lt;code&gt;⌈⌉&lt;/code&gt;는 올림 기호입니다. &lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;⌈0.9⌉=1&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;⌈1⌉=1&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;⌈1.1⌉=2&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;페이지(page) 혹은 블록(block)은 파일 시스템이 디스크 및 메모리에서 데이터를 읽고 쓰는 논리적인 단위입니다.
대표적으로 4KB, 8KB, 16KB 등의 크기를 지닙니다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[Redis] ZSet으로 랭킹 시스템 구현하기 (feat. 점수 갱신, 동점자 처리)]]></title><description><![CDATA[레디스 ZSet을 활용하여 온라인 게임의 랭킹 시스템을 구현하는 방법에 대해 정리해보겠습니다. 세부적인 요구사항에 따라 점수 갱신 로직과 동점자들을 어떻게 관리할 수 있는지에 대해 알아봅니다.]]></description><link>https://bugoverdose.github.io/development/redis-ranking-system-with-zset/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/redis-ranking-system-with-zset/</guid><pubDate>Wed, 22 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;레디스에서 제공하는 자료구조를 사용하면 다양한 비즈니스 로직을 구현할 수 있습니다.&lt;/p&gt;&lt;p&gt;해당 글에서는 &lt;div to=&quot;/development/redis-zset-basics&quot;&gt;지난 게시글에서 다룬 ZSet&lt;/div&gt;을 활용하여
온라인 게임의 랭킹 시스템을 단계적으로 구현해보겠습니다.&lt;/p&gt;&lt;h2&gt;리더보드 구현&lt;/h2&gt;&lt;p&gt;요구사항은 아래와 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;모든 플레이어는 고유한 ID로 식별되며, 각 ID는 3글자짜리 문자열입니다.&lt;/li&gt;&lt;li&gt;모든 플레이어는 게임을 한 번 플레이할 때마다 자신의 점수를 리더보드에 등록할 수 있습니다. 점수는 정수입니다.&lt;/li&gt;&lt;li&gt;리더보드를 통해 &lt;strong&gt;가장 점수가 높은 랭커들을 상위 3명까지 조회&lt;/strong&gt;할 수 있습니다.&lt;/li&gt;&lt;li&gt;리더보드에 노출되지 않더라도 각 플레이어는 &lt;strong&gt;자신이 몇 위&lt;/strong&gt;이며, &lt;strong&gt;상위 몇 프로&lt;/strong&gt;인지 확인할 수 있습니다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;이 모든 기능을 구현하는 데 필요한건 ZSet 하나입니다.&lt;/p&gt;&lt;p&gt;기본적으로 각 플레이어가 게임을 한 판씩 플레이하며 자신의 점수를 &lt;code&gt;players&lt;/code&gt;라는 키에
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zadd/&quot;&gt;ZADD&lt;/a&gt;&lt;/strong&gt;로 등록한다고 생각해봅시다.
각 플레이어의 ID를 멤버(member)로 삼고, 현재 게임에서 얻은 점수 각 멤버에 대응되는 점수(score)로 사용할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZADD players &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;900&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;BCD&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;800&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;CDE&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;700&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;DEF&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;600&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;EFG&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;FGH&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;400&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;GHI&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;300&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;HIJ&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;IJK&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;JKL&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 리더보드에서 최상위 랭커 3명을 조회하고 싶으면
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zrange/&quot;&gt;ZRANGE&lt;/a&gt;&lt;/strong&gt;를 활용하면 됩니다.
점수가 높을수록 등수가 높도록 &lt;code&gt;REV&lt;/code&gt; 옵션을 주면 ABC, BCD, CDE가 각각 1위, 2위, 3위임을 알 수 있습니다.
랭커의 점수를 함께 확인하고 싶으면 &lt;code&gt;WITHSCORES&lt;/code&gt; 옵션을 함께 주면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZRANGE players &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; REV WITHSCORES
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;BCD&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;900&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;CDE&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;800&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;리더보드에 노출되지 않은 플레이어가 자신의 순위를 궁금해할 수도 있습니다.
이때 &lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zrevrank/&quot;&gt;ZREVRANK&lt;/a&gt;&lt;/strong&gt;를 사용하면
반환값을 통해 특정 플레이어가 리더보드상 몇 번째(0~n-1)인지 알 수 있습니다.
예를 들어, 플레이어 EFG는 4가 반환되었으므로 5위임을 알 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZREVRANK players EFG
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 &lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zcard/&quot;&gt;ZCARD&lt;/a&gt;&lt;/strong&gt;를 사용하면 전체 플레이어 수를 알 수 있습니다.
이를 통해 플레이어 EFG는 10명 중 5위로 상위 50% 이내에 위치했다고 말할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZCARD players
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;점수 갱신&lt;/h2&gt;&lt;p&gt;그런데 1000점으로 1위였던 플레이어 ABC가 다시 플레이했을 때 10점을 받았다고 생각해봅시다.&lt;/p&gt;&lt;p&gt;만일 &lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zadd/&quot;&gt;ZADD&lt;/a&gt;&lt;/strong&gt; 명령어로 점수를 그대로 갱신할 경우
1위였던 ABC는 꼴찌가 되고 리더보드에서 사라집니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZRANGE players &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; REV WITHSCORES
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;BCD&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;900&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;CDE&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;800&amp;quot;&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
ZRANGE players &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; REV WITHSCORES
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;BCD&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;900&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;CDE&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;800&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;DEF&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;700&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;세부적인 요구사항에 따라 다르겠지만, 이건 저희가 일반적으로 예상하는 리더보드의 동작방식이 아닙니다.
일단 위의 작업을 다시 원상복구시키고 해결방안에 대해 생각해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZADD players &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
ZRANGE players &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; REV WITHSCORES
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;BCD&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;900&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;CDE&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;800&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;GT 옵션&lt;/h3&gt;&lt;p&gt;모든 플레이어들이 여러 번 플레이할 수 있으며,
그 중 &lt;strong&gt;가장 높은 점수만 리더보드에 등록&lt;/strong&gt;하는 것이 요구사항일 수 있습니다.
이러한 요구사항에서 플레이어 ABC는 기존 점수가 1000점이기 때문에 그보다 낮은 점수로 갱신할 수 없어야 합니다.&lt;/p&gt;&lt;p&gt;그리고 이는 &lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zadd/&quot;&gt;ZADD&lt;/a&gt;&lt;/strong&gt;의 &lt;code&gt;GT&lt;/code&gt; 옵션으로
쉽게 구현할 수 있습니다.
&lt;code&gt;GT&lt;/code&gt; 옵션은 &lt;code&gt;Greater Than&lt;/code&gt;을 의미합니다.
즉, ZSet에 이미 존재하는 멤버의 점수를 갱신하려는 경우
새로운 값이 기존 값보다 더 큰 경우에만 새로운 값으로 갱신합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZADD players GT &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
ZRANGE players &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; REV WITHSCORES
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;BCD&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;900&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;CDE&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;800&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;NX 옵션&lt;/h3&gt;&lt;p&gt;모든 플레이어들이 애초에 여러 번 플레이할 수 없으며,
이미 점수를 등록했으면 &lt;strong&gt;더 이상 해당 점수를 갱신할 수 없는 것&lt;/strong&gt;이 요구사항일 수 있습니다.
이러한 요구사항에서 플레이어 ABC는 이미 점수를 등록했기 때문에 10점으로 갱신할 수 없어야 합니다.&lt;/p&gt;&lt;p&gt;그리고 이는 &lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zadd/&quot;&gt;ZADD&lt;/a&gt;&lt;/strong&gt;의 &lt;code&gt;NX&lt;/code&gt; 옵션으로
쉽게 구현할 수 있습니다.
&lt;code&gt;NX&lt;/code&gt; 옵션은 간단히 말해 &lt;strong&gt;점수 갱신 금지 옵션&lt;/strong&gt;입니다.
ZSet에 존재하지 않는 멤버를 추가할 때에만 점수를 갱신하고,
이미 존재하는 멤버인 경우 점수를 갱신하지 않습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZADD players NX &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
ZRANGE players &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; REV WITHSCORES
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;BCD&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;900&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;CDE&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;800&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;동점자 처리&lt;/h2&gt;&lt;p&gt;마지막으로 동점자가 존재할 때 어떻게 처리할 것인지에 대해 생각해봅시다.&lt;/p&gt;&lt;p&gt;동점자 처리가 그다지 중요하지 않은 경우, ZSet의 디폴트 정렬 기준을 활용하는 것도 괜찮을 수 있습니다.
ZSet에서는 점수가 동일한 멤버들을 멤버 문자열 기준으로 알파벳순으로 나열되며,
이 정렬 기준은 결정론적(deterministic)이므로 조회할 때마다 변경되지 않습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZADD players GT &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;BCD&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
ZADD players GT &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;CDE&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
ZRANGE players &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; REV WITHSCORES
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;CDE&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;BCD&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1000&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;하지만 구체적인 기준에 따라 동점자를 정렬해야 하는 경우가 있을 수 있습니다.
이때 &lt;strong&gt;ZRANGE&lt;/strong&gt;로 ZSet 전체를 조회하고 애플리케이션 레벨에서 재정렬한다면 굳이 ZSet을 쓰는 효용이 없어진다고 볼 수 있습니다.&lt;/p&gt;&lt;h3&gt;점수의 소수부 활용&lt;/h3&gt;&lt;p&gt;결론부터 말하자면 ZSet의 각 멤버에 연관된 점수는 실수(float) 타입이므로
&lt;strong&gt;정수부를 1차 정렬 기준으로, 소수부를 2차 정렬 기준으로 활용&lt;/strong&gt;할 수 있습니다.&lt;/p&gt;&lt;p&gt;예를 들어, 같은 점수에 &lt;strong&gt;먼저 도달한 플레이어&lt;/strong&gt;가 다른 동점자들보다 순위가 높은 것이 요구사항이라고 합시다.&lt;/p&gt;&lt;p&gt;1차 정렬 기준은 &lt;strong&gt;게임에서 얻은 점수&lt;/strong&gt;이므로 이는 정수부에서 관리하고,
2차 정렬 기준은 &lt;strong&gt;해당 점수에 도달한 시점&lt;/strong&gt;이므로 이는 소수부에서 관리하면 됩니다.&lt;/p&gt;&lt;p&gt;이때 고민해야할 점은 이 시점 정보를 어떻게 가공할 것인가입니다.
시간 정보 자체는 &lt;a href=&quot;https://ko.wikipedia.org/wiki/%EC%9C%A0%EB%8B%89%EC%8A%A4_%EC%8B%9C%EA%B0%84&quot;&gt;유닉스 시간&lt;/a&gt;을 활용하면 됩니다.
그런데 저희 게임에서는 높은 점수가 높은 등수가 되는 구조이므로 동점자들 중 먼저 플레이한 사람의 점수가 높아야 합니다.
즉, 이는 &lt;strong&gt;먼저 플레이했을수록 점수의 소수부 값이 높아야 함을 의미&lt;/strong&gt;합니다.&lt;/p&gt;&lt;p&gt;다양한 방법이 있겠지만 개인적으로 선호하는 방법은 아래 코드와 같습니다.
정리하자면 먼미래의 특정 시점을 지정하고, &lt;strong&gt;현재 시점으로부터 해당 미래 시점까지 몇 초 걸리는지&lt;/strong&gt;를 소수부로 활용하는 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-python line-numbers&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;future &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100000000000&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 5138년 11월 16일 18시 46분 40초&lt;/span&gt;

year2010 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1262304000&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 2010년 1월 1일 0시 0분 0초&lt;/span&gt;
year2020 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1577836800&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 2020년 1월 1일 0시 0분 0초&lt;/span&gt;
year2030 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1893456000&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 2030년 1월 1일 0시 0분 0초&lt;/span&gt;

year2010_converted &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;future&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;year2010&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;future&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 0.98737696&lt;/span&gt;
year2020_converted &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;future&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;year2020&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;future&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 0.984221632&lt;/span&gt;
year2030_converted &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;future&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;year2030&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;future&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 0.98106544&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 위에서 계산한 값을 활용해봅시다.
플레이어들 ABC, CDE, BCD가 각각 2010년, 2020년, 2030년도에
모두 2000점을 기록했다면 각 기록은 아래와 같이 관리할 수 있습니다.
각 점수의 소수부 덕분에 각 플레이어들의 순위는 명백하게 구분되며,
이 소수부는 향후 플레이어들에게 보여줄 리더보드에서만 제거해주면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZADD players &lt;span class=&quot;token number&quot;&gt;2000.98737696&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;2000.984221632&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;CDE&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;2000.98106544&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;BCD&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
ZRANGE players &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; REV WITHSCORES
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ABC&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;2000.9873769599999&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;CDE&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;2000.9842216320001&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;BCD&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;2000.9810654400001&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;사실 위의 로직은 전부 RDBMS로도 구현할 수 있습니다.
현재 서비스에서 레디스를 사용하지 않는 팀의 경우
굳이 해당 스펙 하나만을 위해 레디스를 도입할 것인지 말 것인지는 각자 판단하면 좋을 듯합니다.&lt;/p&gt;&lt;p&gt;데이터의 갱신 빈도와 조회 빈도, 세부적인 요구사항 등에 따라
RDBMS와 로컬 캐쉬 등을 최대한 잘 활용하는 것이 오히려 적절할 수도 있을 것입니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://redis.io/docs/data-types/sorted-sets/&quot;&gt;Redis sorted sets&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Redis] ZSet 자료구조 개요]]></title><description><![CDATA[레디스에서 제공하는 Sorted Set 자료구조에 대해 정리해보겠습니다. ZSet을 활용하면 온라인 게임의 랭킹 시스템이나 투표 시스템 등을 쉽게 구현할 수 있습니다.]]></description><link>https://bugoverdose.github.io/development/redis-zset-basics/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/redis-zset-basics/</guid><pubDate>Tue, 21 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;이번 글에서는 레디스에서 제공하는 Sorted Set 자료구조에 대해 간략하게 정리해보겠습니다.
레디스 Sorted Set을 줄여서 레디스 ZSet이라고도 부릅니다.&lt;/p&gt;&lt;h2&gt;Sorted Set&lt;/h2&gt;&lt;p&gt;일반적인 집합(Set)은 요소들의 순서가 보장되지 않고 중복을 허용하지 않는다는 특성을 지닙니다.
이 점을 고려했을 때 정렬된 집합(Sorted Set)이란 중복을 허용하지는 않지만
개별 요소들이 특정한 기준에 따라 정렬되어있는 자료 구조라고 볼 수 있습니다.&lt;/p&gt;&lt;p&gt;사실 엄밀하게 따지자면 Sorted Set이라는 이름의 추상자료형(ADT)은 공식적으로 존재한다고 보기 어렵습니다.
그러나 개별 요소들의 고유성을 보장하면서 정렬되어있는 자료구조에 대한 필요성은
다양한 애플리케이션 및 프로그래밍 언어들에서 대두된 것으로 보입니다.
자바에서도 &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/util/SortedSet.html&quot;&gt;SortedSet&lt;/a&gt;라는
클래스가 기본적으로 제공되고 있고,
Go 언어에서도 (비공식적이지만)
&lt;a href=&quot;https://pkg.go.dev/github.com/wangjia184/sortedset&quot;&gt;sortedset&lt;/a&gt; 라이브러리가 존재합니다.&lt;/p&gt;&lt;h2&gt;Redis Sorted Set&lt;/h2&gt;&lt;p&gt;레디스 Sorted Set (이하, ZSet)은 순서가 보장되는 고유한 문자열들의 컬렉션입니다.
이 고유한 문자열 하나를 멤버(member)라고 부르며, 각 멤버에 연관된 점수(score)를 기준으로 멤버들이 정렬됩니다.&lt;/p&gt;&lt;p&gt;개별 멤버들이 중복되지 않고 고유하다는 점에서 ZSet은 Set 자료구조와 같습니다.
각 멤버들이 특정한 값과 1:1로 연관된다는 점에서 ZSet은 Hash 자료구조와 유사합니다.&lt;/p&gt;&lt;p&gt;해당 자료구조들과의 차이점은 각 멤버들이 실수(float) 타입인 점수를 기준으로 1차적으로 정렬되고,
점수가 같을 때에는 멤버에 따라 알파벳 순으로 정렬된다는 점입니다.
각 멤버는 고유한 문자열이기 때문에 이러한 정렬 방식은 결정론적(deterministic)인 성질을 지닙니다.&lt;/p&gt;&lt;p&gt;ZSet은 아래와 같은 상황들에서 활용가능합니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;리더보드: 온라인 게임에서 가장 점수가 높은 최상위 랭커들의 기록을 정렬하여 관리할 수 있습니다.&lt;/li&gt;&lt;li&gt;처리율 제한 장치(Rate Limiter): 슬라이딩 윈도우 방식의 처리율 제한 장치를 구현하여 과도한 API 요청을 방지할 수 있습니다.&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;기본 명령어&lt;/h2&gt;&lt;p&gt;ZSet 명령어들은 기본적으로 Z로 시작합니다. 기본 명령어들은 아래와 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zadd/&quot;&gt;ZADD&lt;/a&gt;&lt;/strong&gt; : 새로운 멤버와 그에 연관된 점수를 추가합니다. 이미 멤버가 존재하는 경우 점수를 업데이트합니다. &lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zrange/&quot;&gt;ZRANGE&lt;/a&gt;&lt;/strong&gt; : 정렬되어있는 멤버들 중 특정 범위를 반환합니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zrank/&quot;&gt;ZRANK&lt;/a&gt;&lt;/strong&gt; : 오름차순 기준으로 특정 멤버가 몇 번째에 위치해있는지 순위를 반환합니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zrevrank/&quot;&gt;ZREVRANK&lt;/a&gt;&lt;/strong&gt; : 내림차순 기준으로 특정 멤버가 몇 번째에 위치해있는지 순위를 반환합니다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;모든 ZSet 명령어들의 목록은 &lt;a href=&quot;https://redis.io/commands/?group=sorted-set&quot;&gt;이 링크&lt;/a&gt;에서 확인할 수 있습니다.&lt;/p&gt;&lt;h2&gt;성능 및 대안&lt;/h2&gt;&lt;p&gt;대부분의 ZSet 연산은 O(log(n))으로 상당히 효율적입니다. n은 ZSet 내에서 정렬된 멤버들의 개수입니다.&lt;/p&gt;&lt;p&gt;다만, &lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zrange/&quot;&gt;ZRANGE&lt;/a&gt;&lt;/strong&gt;로 너무 넓은 범위를 반환하는 경우는 주의해야 합니다.
해당 연산의 시간복잡도는 O(log(n) + m)로, m은 반환받는 멤버들의 개수입니다.
따라서 만일 수만 개 이상 혹은 모든 멤버들을 전부 조회하는 경우 성능면에서 병목 지점이 생겨날 수 있습니다.&lt;/p&gt;&lt;p&gt;또한 단순히 범용성이 높다는 이유만으로 Set 대신 ZSet을 쓰면 안 됩니다.
집합 연산의 경우 기본적으로 Set 명령어들이 ZSet 명령어들보다 효율적이므로,
멤버들이 정렬되어 관리되어야 할 이유가 없는 경우 Set을 사용하는 것이 더 권장됩니다.&lt;/p&gt;&lt;h2&gt;사용 예시&lt;/h2&gt;&lt;p&gt;로컬에 레디스를 설치하고 &lt;code&gt;redis-cli&lt;/code&gt;를 활용하여 몇 가지 명령어를 실행해보겠습니다.&lt;/p&gt;&lt;p&gt;우선 &lt;code&gt;players&lt;/code&gt;라는 키에 멤버를 추가하고 제거해보겠습니다.
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zadd/&quot;&gt;ZADD&lt;/a&gt;&lt;/strong&gt;로 멤버를 추가하고,
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zrem/&quot;&gt;ZREM&lt;/a&gt;&lt;/strong&gt;로 멤버를 제거할 수 있습니다.
반환값을 통해 새로 추가되거나 제거된 멤버들의 수를 알 수 있으며,
기존에 존재하는 멤버의 점수를 덮어쓰는 경우는 반환값에 포함되지 않습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZADD players &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player1&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;150&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player2&amp;quot;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;300&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player3&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player2&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
ZADD players &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;abuser1&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
ZREM players &lt;span class=&quot;token string&quot;&gt;&amp;quot;abuser1&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zrange/&quot;&gt;ZRANGE&lt;/a&gt;&lt;/strong&gt;를 활용하면 멤버들을 정렬하여 조회할 수 있습니다.
&lt;code&gt;WITHSCORES&lt;/code&gt; 옵션을 활용하면 점수와 함께 조회할 수 있으며,
&lt;code&gt;REV&lt;/code&gt; 옵션을 활용하면 내림차순으로 정렬하여 조회할 수 있습니다.
아래 예시에서는 0번째부터 -1번째까지, 즉 모든 멤버들을 조회하고 있으나
실무에서는 성능을 고려하여 개별 옵션과 범위 정보를 적절하게 활용하여 조회해야 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZRANGE players &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-1&lt;/span&gt; WITHSCORES
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player1&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player2&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;200&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player3&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;300&amp;quot;&lt;/span&gt;
ZRANGE players &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-1&lt;/span&gt; WITHSCORES REV
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player3&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;300&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player2&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;200&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player1&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;예를 들어, &lt;code&gt;BYSCORE&lt;/code&gt; 옵션을 활용하면 점수가 특정 범위 이내에 있는 멤버들만을 필터링하여 조회할 수 있습니다.
아래 예시들은 각각 &lt;code&gt;100 &amp;lt;= score &amp;lt;= 300&lt;/code&gt;, &lt;code&gt;100 &amp;lt; score &amp;lt;= 300&lt;/code&gt;, &lt;code&gt;100 &amp;lt;= score &amp;lt; 300&lt;/code&gt; 조건으로
필터링한 결과들입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZRANGE players &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;300&lt;/span&gt; BYSCORE
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player1&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player2&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player3&amp;quot;&lt;/span&gt;
ZRANGE players &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;300&lt;/span&gt; BYSCORE
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player2&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player3&amp;quot;&lt;/span&gt;
ZRANGE players &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;300&lt;/span&gt; BYSCORE
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player1&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player2&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;특정 멤버의 순위를 알아야 하는 경우도 있습니다.
스피드런과 같이 점수가 낮을수록 좋은 경우에는 오름차순 정렬을 기준으로 삼는
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zrank/&quot;&gt;ZRANK&lt;/a&gt;&lt;/strong&gt;를 사용하며,
점수가 높을수록 순위가 높은 경우에는 내림차순 정렬을 기준으로 삼는
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/zrevrank/&quot;&gt;ZREVRANK&lt;/a&gt;&lt;/strong&gt;를 사용합니다.
순위 정보는 0부터 n-1까지의 값이 반환됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ZRANK players &lt;span class=&quot;token string&quot;&gt;&amp;quot;player1&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
ZREVRANK players &lt;span class=&quot;token string&quot;&gt;&amp;quot;player1&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;실습을 끝내기 전에 생성했던 모든 키를 제거합시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;flushall
OK&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://redis.io/docs/data-types/sorted-sets/&quot;&gt;Redis sorted sets&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Redis] Hash 자료구조 개요]]></title><description><![CDATA[레디스에서 객체를 관리하는 방법인 Hash 자료구조에 대해 간략하게 정리해보겠습니다. 레디스 공식문서와 레디스 공식 유튜브의 영상을 참고하였습니다.]]></description><link>https://bugoverdose.github.io/development/redis-hash-basics/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/redis-hash-basics/</guid><pubDate>Sat, 18 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;이번 글에서는 레디스에서 객체를 관리하는 방법인 Hash 자료구조에 대해 간략하게 정리해보겠습니다.
레디스 공식문서와 레디스 공식 유튜브의 영상을 참고하였습니다.&lt;/p&gt;&lt;h2&gt;Redis Hash&lt;/h2&gt;&lt;p&gt;레디스 hash는 필드-값 페어들의 컬렉션입니다.
하나의 레디스 키에 대해 다양한 필드를 지닌 객체를 하나 관리하는 구조라고 생각하면 이해하기 쉽습니다.&lt;/p&gt;&lt;p&gt;레디스 hash는 JSON 객체, 자바 HashMap, 파이썬 dictionary와 유사합니다.
차이점이 있다면 필드-값 페어를 문자열로 관리한다는 점입니다.
만일 중첩된 객체(nested object)를 관리해야 한다면
hash 대신 &lt;a href=&quot;https://redis.io/docs/data-types/json/&quot;&gt;Redis JSON&lt;/a&gt;을 고려해볼 수 있습니다.&lt;/p&gt;&lt;p&gt;hash 생성 시점에 필드-값에 대해 정의할 필요가 없습니다.
스키마가 없으므로 자유롭게 새로운 필드를 추가하거나 제거할 수 있으며, 값을 수정할 수 있습니다.&lt;/p&gt;&lt;h2&gt;기본 명령어&lt;/h2&gt;&lt;p&gt;hash 명령어들은 전부 h로 시작합니다. 기본 명령어들은 아래와 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hset/&quot;&gt;HSET&lt;/a&gt;&lt;/strong&gt; : 해쉬의 특정 필드에 특정 값을 할당합니다. 이미 값이 존재하면 덮어씁니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hget/&quot;&gt;HGET&lt;/a&gt;&lt;/strong&gt; : 특정 필드의 값을 반환합니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hmget/&quot;&gt;HMGET&lt;/a&gt;&lt;/strong&gt; : 특정 필드들의 값들을 반환합니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hincrby/&quot;&gt;HINCRBY&lt;/a&gt;&lt;/strong&gt; 특정 필드의 숫자 값을 증가 혹은 감소시킵니다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;모든 hash 명령어들의 목록은 &lt;a href=&quot;https://redis.io/commands/?group=hash&quot;&gt;이 링크&lt;/a&gt;에서 확인할 수 있습니다.&lt;/p&gt;&lt;h2&gt;성능 및 메모리&lt;/h2&gt;&lt;p&gt;하나의 레디스 hash에 저장할 수 있는 필드-값 페어의 최대 개수는 2^32 - 1입니다.
즉, 하나의 키에 대해 최대 4,294,967,295가지 필드-값을 관리할 수 있습니다.&lt;/p&gt;&lt;p&gt;레디스에서는 소규모 hash들을 메모리 차원에서 효율적으로 관리할 수 있도록 특별한 방식으로 인코딩합니다.
이를 위해 각 hash에서 관리하는 필드-값 페어의 개수를 적게 유지하고, 각 필드에서 관리하는 값의 크기도 작게 유지하는 것이 이상적입니다.&lt;/p&gt;&lt;p&gt;대부분의 hash 명령어는 O(1)으로 굉장히 효율적입니다.
다만, &lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hkeys/&quot;&gt;HKEYS&lt;/a&gt;&lt;/strong&gt;,
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hvals/&quot;&gt;HVALS&lt;/a&gt;&lt;/strong&gt;,
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hgetall/&quot;&gt;HGETALL&lt;/a&gt;&lt;/strong&gt;의 경우 O(n)이므로
주의해야 합니다. 이때 &lt;em&gt;n&lt;/em&gt;은 hash에서 관리 중인 필드의 총 개수입니다.
만일 필드가 수천 개인 경우 &lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hget/&quot;&gt;HGET&lt;/a&gt;&lt;/strong&gt;이나
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hscan/&quot;&gt;HSCAN&lt;/a&gt;&lt;/strong&gt;을 활용하여
꼭 필요한 필드들만을 조회하는 것이 적절할 수 있습니다.&lt;/p&gt;&lt;h2&gt;사용 예시&lt;/h2&gt;&lt;p&gt;로컬에 레디스를 설치하고 &lt;code&gt;redis-cli&lt;/code&gt;를 활용하여 몇 가지 명령어를 실행해보겠습니다.
&lt;a href=&quot;https://www.youtube.com/watch?v=-KdITaRkQ-U&quot;&gt;레디스 공식 유튜브&lt;/a&gt;에서
소개하는 RPG 게임 예시를 활용하겠습니다.&lt;/p&gt;&lt;p&gt;id가 42인 플레이어를 생성해봅시다.
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hset/&quot;&gt;HSET&lt;/a&gt;&lt;/strong&gt;을 활용하면
&lt;code&gt;player:42&lt;/code&gt;라는 키에 대해
&lt;code&gt;name&lt;/code&gt;, &lt;code&gt;race&lt;/code&gt;, &lt;code&gt;level&lt;/code&gt;, &lt;code&gt;hp&lt;/code&gt;, &lt;code&gt;gold&lt;/code&gt;라는 5가지 필드와 그에 대응하는 값을 설정할 수 있습니다.
HSET은 해당 hash에 저장된 필드들의 개수를 반환합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;HSET player:42 name jinwoo race human level 10 hp 100 gold 30
(integer) 5&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hget/&quot;&gt;HGET&lt;/a&gt;&lt;/strong&gt;을 통해 특정 키의 특정 필드 값을 조회할 수도 있고,
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hgetall/&quot;&gt;HGETALL&lt;/a&gt;&lt;/strong&gt;을 통해
특정 키에 대해 저장된 모든 필드-값 페어들을 조회할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;HGET player:42 level
&amp;quot;10&amp;quot;
HGETALL player:42
 1) &amp;quot;name&amp;quot;
 2) &amp;quot;jinwoo&amp;quot;
 3) &amp;quot;race&amp;quot;
 4) &amp;quot;human&amp;quot;
 5) &amp;quot;level&amp;quot;
 6) &amp;quot;10&amp;quot;
 7) &amp;quot;hp&amp;quot;
 8) &amp;quot;100&amp;quot;
 9) &amp;quot;gold&amp;quot;
10) &amp;quot;30&amp;quot;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;player:42&lt;/code&gt;라는 키에서 관리 중인 hash에 대해 새로운 필드-값 페어를 추가하고 제거할 수 있습니다.
플레이어에게 상태이상이 생긴 경우
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hset/&quot;&gt;HSET&lt;/a&gt;&lt;/strong&gt;으로 &lt;code&gt;status&lt;/code&gt;라는 새로운 필드를 추가할 수 있고
상태이상이 해제되었을 때는
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hdel/&quot;&gt;HDEL&lt;/a&gt;&lt;/strong&gt;로 &lt;code&gt;status&lt;/code&gt; 필드를 제거할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;HSET player:42 status dazed
(integer) 1
HDEL player:42 status
(integer) 1&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;플레이어는 골드를 획득하거나 소모할 수 있습니다.
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/hincrby/&quot;&gt;HINCRBY&lt;/a&gt;&lt;/strong&gt;를 활용하면
특정 필드의 값을 일정 수치만큼 증가 혹은 감소시킬 수 있습니다.
반환값은 해당 명령어가 적용되어 최종적으로 해당 필드에서 관리하는 값과 동일합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;HGET player:42 gold
&amp;quot;30&amp;quot;
HINCRBY player:42 gold 100
(integer) 130
HGET player:42 gold
&amp;quot;130&amp;quot;
HINCRBY player:42 gold -10
(integer) 120
HGET player:42 gold
&amp;quot;120&amp;quot;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;실습을 끝내기 전에 생성했던 모든 키를 제거합시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;flushall
OK&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr/&gt;&lt;div&gt;참고자료&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://redis.io/docs/data-types/hashes/&quot;&gt;Redis hashes&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=-KdITaRkQ-U&quot;&gt;Redis Hashes Explained&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Redis] Set 자료구조 개요]]></title><description><![CDATA[셋과 리스트의 차이를 설명하고 레디스에서 제공하는 Set 자료구조에 대해 정리해보겠습니다. 레디스의 set을 활용하면 게시글별 좋아요 기능이나 친구 요청 기능을 쉽게 구현할 수 있습니다.]]></description><link>https://bugoverdose.github.io/development/redis-set-basics/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/redis-set-basics/</guid><pubDate>Fri, 17 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;이번 글에서는 레디스에서 제공하는 Set 자료구조에 대해 간략하게 정리해보겠습니다.
레디스의 set을 활용하면 게시글별 좋아요 기능이나 친구 요청 기능을 쉽게 구현할 수 있습니다.&lt;/p&gt;&lt;h2&gt;Set&lt;/h2&gt;&lt;p&gt;기본적으로 집합(set)은 리스트(list)와 마찬가지로 복수의 데이터를 관리하는 추상자료형(ADT)입니다.
이 둘의 차이는 순서 보장 여부와 중복 허용 여부에 있습니다.&lt;/p&gt;&lt;p&gt;리스트는 각 요소의 순서가 보장되고, 중복을 허용합니다.
즉, 특정 위치에 값을 저장하고 이 위치 정보를 활용하여 리스트의 값들에 접근할 수 있습니다.
또한 리스트 내 다른 위치에 동일한 값을 중복으로 저장하는 것도 가능합니다.
단점은 특정 값이 해당 리스트에 존재하는지의 여부를 판단하는 데 시간이 걸릴 수 있다는 점입니다.&lt;/p&gt;&lt;p&gt;집합은 반대로 순서가 보장되지 않고, 중복을 허용하지 않습니다.
기본적으로 셋의 모든 요소를 순회했을 때 어떤 순서로 값들이 조회될지 보장할 수 없습니다.
또한 이미 셋에 추가된 값을 중복으로 셋에 추가하는 경우 아무런 변화가 없습니다.
일반적으로 해당 셋에 특정 값이 존재하는지의 여부를 판단하는 Contains 연산의 성능을 높이는 방식으로 구현됩니다.&lt;/p&gt;&lt;h2&gt;Redis Set&lt;/h2&gt;&lt;p&gt;레디스에서도 집합 자료구조를 제공합니다. 레디스 set은
순서가 보장되지 않는 고유한 문자열들의 컬렉션입니다. 이 고유한 문자열 하나를 멤버라고 부릅니다.&lt;/p&gt;&lt;p&gt;공식문서에 따르면 레디스 set을 활용하여 아래와 같은 작업을 효율적으로 할 수 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;고유한 값들의 관리: 특정 사이트에 접근하는 모든 IP들의 목록을 중복 없이 관리&lt;/li&gt;&lt;li&gt;관계 표현: 크리에이터 계정과 일반 계정과 같이 역할에 따라 사용자들의 목록 분류&lt;/li&gt;&lt;li&gt;일반적인 집합 관련 연산 수행: 교집합, 합집합, 차집합 등&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;기본 명령어&lt;/h2&gt;&lt;p&gt;set 명령어들은 전부 s로 시작합니다. 기본 명령어들은 아래와 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/sadd/&quot;&gt;SADD&lt;/a&gt;&lt;/strong&gt; : 집합에 새로운 멤버를 추가합니다. 이미 집합에 존재하는 멤버의 경우 변화가 없습니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/srem/&quot;&gt;SREM&lt;/a&gt;&lt;/strong&gt; : 집합에서 멤버를 제거합니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/sismember/&quot;&gt;SISMEMBER&lt;/a&gt;&lt;/strong&gt; : 특정 문자열이 집합에 존재하는지의 여부를 반환합니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/sinter/&quot;&gt;SINTER&lt;/a&gt;&lt;/strong&gt; : 교집합 연산입니다. 복수의 집합들에 공통적으로 존재하는 멤버들의 집합을 반환합니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/scard/&quot;&gt;SCARD&lt;/a&gt;&lt;/strong&gt; : 카디날리티(cardinality), 즉 집합의 크기를 반환합니다. &lt;/li&gt;&lt;/ul&gt;&lt;p&gt;모든 set 명령어들의 목록은 &lt;a href=&quot;https://redis.io/commands/?group=set&quot;&gt;이 링크&lt;/a&gt;에서 확인할 수 있습니다.&lt;/p&gt;&lt;h2&gt;성능 및 대안&lt;/h2&gt;&lt;p&gt;레디스 set의 최대 크기는 2^32 - 1입니다.
최대 4,294,967,295가지 멤버들이 집합에 포함될 수 있습니다.&lt;/p&gt;&lt;p&gt;대부분의 집합 연산은 O(1)으로 굉장히 효율적입니다.&lt;/p&gt;&lt;p&gt;다만, 하나의 응답에 집합 전체를 조회하는
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/smembers/&quot;&gt;SMEMBERS&lt;/a&gt;&lt;/strong&gt;의 경우 O(N)이므로
주의해야 합니다.
꼭 집합의 모든 멤버가 필요한 경우 개별 멤버를 순회하는 방식으로 조회할 수 있는
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/sscan/&quot;&gt;SSCAN&lt;/a&gt;&lt;/strong&gt;을 대안으로 고려해볼 수 있습니다.&lt;/p&gt;&lt;p&gt;한편, 정확도를 희생함으로써 메모리 사용량을 줄이고 싶은 경우
레디스 set의 대안으로 &lt;a href=&quot;https://redis.io/docs/data-types/probabilistic/bloom-filter/&quot;&gt;Bloom 필터&lt;/a&gt;
혹은 &lt;a href=&quot;https://redis.io/docs/data-types/probabilistic/cuckoo-filter/&quot;&gt;Cuckoo 필터&lt;/a&gt;를 고려해볼 수 있습니다.&lt;/p&gt;&lt;h2&gt;사용 예시&lt;/h2&gt;&lt;p&gt;로컬에 레디스를 설치하고 &lt;code&gt;redis-cli&lt;/code&gt;를 활용하여 몇 가지 명령어를 실행해보겠습니다.&lt;/p&gt;&lt;p&gt;우선 &lt;code&gt;players:korea&lt;/code&gt;와 &lt;code&gt;players:usa&lt;/code&gt;라는 키들에 멤버를 추가하고 제거해보겠습니다.
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/sadd/&quot;&gt;SADD&lt;/a&gt;&lt;/strong&gt;로 멤버를 추가하고,
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/srem/&quot;&gt;SREM&lt;/a&gt;&lt;/strong&gt;로 멤버를 제거할 수 있습니다.
반환값을 통해 집합에 실제로 추가되거나 제거된 멤버들의 수를 알 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;SADD players:korea player101
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
SADD players:korea player101
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
SREM players:korea player101
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
SREM players:korea player101
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
SADD players:korea player101 player102 player201
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;
SADD players:usa player101 player301
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/smembers/&quot;&gt;SMEMBERS&lt;/a&gt;&lt;/strong&gt;를 통해
각 키에 추가된 모든 멤버들을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;SMEMBERS players:korea
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player101&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player201&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player102&amp;quot;&lt;/span&gt;
SMEMBERS players:usa
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player101&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player301&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/sscan/&quot;&gt;SSCAN&lt;/a&gt;&lt;/strong&gt;을 활용하면
MATCH 옵션을 통해 집합에서 특정 패턴의 멤버들만 필터링하여 조회하거나,
COUNT 옵션을 통해 최대 n개의 멤버들만을 조회할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;SSCAN players:korea &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; MATCH player1*
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;0&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player101&amp;quot;&lt;/span&gt;
   &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player102&amp;quot;&lt;/span&gt;
SSCAN players:korea &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; MATCH player1* COUNT &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player101&amp;quot;&lt;/span&gt;
SSCAN players:korea &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; MATCH player2*
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;0&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;player201&amp;quot;&lt;/span&gt;
SSCAN players:korea &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; MATCH player3*
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;0&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;empty array&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;특정 멤버가 집합에 존재하는지 확인하고 싶으면
&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/sismember/&quot;&gt;SISMEMBER&lt;/a&gt;&lt;/strong&gt;을 활용하면 됩니다.
반환값을 통해 &lt;code&gt;player201&lt;/code&gt;라는 멤버가 &lt;code&gt;players:korea&lt;/code&gt; 집합에는 존재하지만
&lt;code&gt;players:usa&lt;/code&gt; 집합에는 없음을 알 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span data-user=&quot;root&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;SISMEMBER players:korea player201
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
SISMEMBER players:usa player201
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/sinter/&quot;&gt;SINTER&lt;/a&gt;&lt;/strong&gt;를 활용하면
&lt;code&gt;players:korea&lt;/code&gt;와 &lt;code&gt;players:usa&lt;/code&gt; 키의 집합들에 공통적으로 존재하는 멤버는
&lt;code&gt;player101&lt;/code&gt;가 유일함을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;SINTER players:korea players:usa
1) &amp;quot;player101&amp;quot;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;마지막으로 &lt;strong&gt;&lt;a href=&quot;https://redis.io/commands/scard/&quot;&gt;SCARD&lt;/a&gt;&lt;/strong&gt;를 통해 집합의 크기를 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;SCARD players:korea
(integer) 3
SCARD players:usa
(integer) 2&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;실습을 끝내기 전에 생성했던 모든 키를 제거합시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;flushall
OK&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://redis.io/docs/data-types/sets/&quot;&gt;Redis sets&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Spring] @ControllerAdvice로 에러 처리하기]]></title><description><![CDATA[HTTP 상태코드 400, 401, 403, 404, 500에 대해 설명하고, HTTP API를 구현할 때 @ControllerAdvice와 @ExceptionHandler 어노테이션으로 에러를 처리하는 방법에 대해 정리합니다.]]></description><link>https://bugoverdose.github.io/development/spring-exception-handling-with-controlleradvice/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/spring-exception-handling-with-controlleradvice/</guid><pubDate>Sun, 12 Nov 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;HTTP 상태코드 400, 401, 403, 404, 500에 대해 설명하고,
스프링 애플리케이션에서 HTTP API를 구현할 때 &lt;code&gt;@ControllerAdvice&lt;/code&gt;와 &lt;code&gt;@ExceptionHandler&lt;/code&gt; 어노테이션으로
에러를 처리하는 방법에 대해 정리합니다.&lt;/p&gt;&lt;p&gt;개인적인 취향이 다소 가미되었으나, HTTP 컨벤션에 부합합니다.&lt;/p&gt;&lt;h2&gt;프로젝트 셋업&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://start.spring.io/&quot;&gt;Spring Initiaizr&lt;/a&gt;로 프로젝트를 만들고 Spring Web만 선택하겠습니다.
그 외에 &lt;code&gt;build.gradle&lt;/code&gt;에 특별한 의존성을 추가할 필요는 없습니다.
자바 버전은 11입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    implementation &amp;#x27;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;spring&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;starter&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;web&amp;#x27;
    testImplementation &amp;#x27;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;spring&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;boot&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;starter&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;test&amp;#x27;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;HTTP 상태코드별 에러 클래스 정의&lt;/h2&gt;&lt;p&gt;HTTP 상태코드에서 4XX번대는 에러의 원인이 클라이언트 측에 있음을 의미하고, 5XX번대는 에러의 원인이 서버 측에 있음을 의미합니다.&lt;/p&gt;&lt;p&gt;저희 서버에서는 가볍게 400, 401, 403, 404, 500 정도를 사용하기로 하고,
이에 따라 에러 클래스를 정의해봅시다.&lt;/p&gt;&lt;h3&gt;400 Bad Request&lt;/h3&gt;&lt;p&gt;400은 클라이언트에서 &lt;strong&gt;잘못된 요청&lt;/strong&gt;을 보냈기 때문에 요청을 처리할 수 없거나, 처리하지 않을 것임을 의미합니다.
클라이언트가 문제인 것은 확실한데 적절한 상태코드를 찾을 수 없을 때 디폴트로 사용합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BadRequestException&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BadRequestException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BadRequestException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;잘못된 요청입니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;401 Unauthorized&lt;/h3&gt;&lt;p&gt;401은 엄밀히 말해서 인가되지 않은 경우(unauthorized)가 아니라 &lt;strong&gt;인증되지 않은(unauthenticated) 요청&lt;/strong&gt;이 들어왔을 때 사용합니다.
즉, 클라이언트에서 해당 요청을 보내기 위해서는 자신이 누구인지 알려주는 인증 정보가 필요한데, 인증 정보가 누락된 경우에 사용합니다.
간단히 말하자면 로그인을 한 다음에 해당 요청을 다시 보내라는 의미입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UnauthenticatedException&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UnauthenticatedException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UnauthenticatedException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;로그인이 필요합니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;403 Forbidden&lt;/h3&gt;&lt;p&gt;403은 &lt;strong&gt;인가되지 않은(unauthorized) 요청&lt;/strong&gt;이 들어왔을 때 사용합니다.
401과는 달리 클라이언트가 누구인지 서버에서 판단할 수 있는 상황에서,
해당 사용자에게 해당 요청을 보내기 위해 필요한 적절한 권한이 없음을 의미합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ForbiddenException&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ForbiddenException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ForbiddenException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;권한이 없습니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;404 Not Found&lt;/h3&gt;&lt;p&gt;404는 클라이언트가 &lt;strong&gt;존재하지 않는 자원을 요청&lt;/strong&gt;했을 때 사용합니다.
실제로는 존재하는 자원이더라도 권한이 없는 사용자에게 해당 자원을 존재를 숨기고 싶을 때 403 대신 404를 사용할 때도 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotFoundException&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RuntimeException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotFoundException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotFoundException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;존재하지 않습니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;세부 케이스별 에러 클래스&lt;/h3&gt;&lt;p&gt;위에서 정의한 4가지 클래스를 그대로 사용하는 대신, 비즈니스 로직적으로 다시 세부 케이스를 구분하고 개별적으로 에러 클래스를 정의할 수도 있습니다.&lt;/p&gt;&lt;p&gt;예를 들어, 조회하려는 회원이 존재하지 않는 상황에서 404 에러를 발생시키기 위해 아래와 같이 정의할 수 있을 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberNotFoundException&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotFoundException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberNotFoundException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;존재하지 않는 회원입니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;@ExceptionHandler&lt;/h2&gt;&lt;p&gt;&lt;code&gt;@ExceptionHandler&lt;/code&gt; 어노테이션을 활용하면 개별 컨트롤러 메서드에서 명시적으로 &lt;code&gt;throw-catch&lt;/code&gt;문을 작성하지 않더라도
컨트롤러 내부에서 발생한 에러를 적절하게 처리할 수 있습니다.
해당 기능의 장점은 해당 컨트롤러에서 처리하는 모든 HTTP 요청에 대해 에러 처리 로직을 공통적으로 등록할 수 있다는 점입니다.&lt;/p&gt;&lt;p&gt;예를 들어 아래와 같이 매개변수로 &lt;code&gt;NotFoundException&lt;/code&gt; 타입의 에러를 받는 &lt;code&gt;handleException&lt;/code&gt; 메서드가
&lt;code&gt;@Controller&lt;/code&gt; 어노테이션이 붙은 &lt;code&gt;MemberController&lt;/code&gt; 클래스 내부에 정의되어있다고 합시다.
이제 회원과 관련된 API들에서 내부적으로 &lt;code&gt;NotFoundException&lt;/code&gt;이 &lt;code&gt;throw&lt;/code&gt;될 경우
&lt;code&gt;handleException&lt;/code&gt; 메서드가 호출되고 적절한 메시지와 함께 상태코드 404을 응답하게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Controller&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/api/members&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@ExceptionHandler&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;NotFoundException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOT_FOUND&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 404&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;예를 들어, 아래와 같이 에러가 발생할 경우 저희 애플리케이션은 주석과 같이 JSON 형식의 메시지를 응답 바디에 담아서 상태코드 400으로 응답합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotFoundException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// {&amp;quot;message&amp;quot;:&amp;quot;존재하지 않습니다.&amp;quot;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NotFoundException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;존재하지 않는 회원입니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// {&amp;quot;message&amp;quot;:&amp;quot;존재하지 않는 회원입니다.&amp;quot;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberNotFoundException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// {&amp;quot;message&amp;quot;:&amp;quot;존재하지 않는 회원입니다.&amp;quot;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;@ControllerAdvice&lt;/h2&gt;&lt;p&gt;복수의 컨트롤러가 존재할 경우 각 컨트롤러에 대해 동일한 &lt;code&gt;@ExceptionHandler&lt;/code&gt; 메서드들을 중복으로 작성할 필요가 없습니다.&lt;/p&gt;&lt;p&gt;특정 클래스에 &lt;code&gt;@ControllerAdvice&lt;/code&gt;를 붙이고 그 내부에
각 컨트롤러에 공통적으로 적용하고 싶은 &lt;code&gt;@ExceptionHandler&lt;/code&gt; 메서드들을 전부 작성하면 됩니다.&lt;/p&gt;&lt;p&gt;400, 401, 403, 404 에러는 위에서 작성한 &lt;code&gt;@ExceptionHandler&lt;/code&gt; 메서드와 동일한 구성입니다.
그 이외의 모든 에러는 500 에러로 간주하기 위해 &lt;code&gt;Exception&lt;/code&gt;을 매개변수로 받아 처리하는 메서드를 추가하고,
에러 원인을 클라로 내려보내지 않도록 &lt;code&gt;{&amp;quot;message&amp;quot;:&amp;quot;Server Error&amp;quot;}&lt;/code&gt;라는 응답 메시지를 보냅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@ControllerAdvice&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ControllerExceptionAdvice&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@ExceptionHandler&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 에러 원인에 대한 로깅 추가&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Server Error&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;INTERNAL_SERVER_ERROR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 500&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@ExceptionHandler&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;BadRequestException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;BAD_REQUEST&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 400&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@ExceptionHandler&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;UnauthenticatedException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;UNAUTHORIZED&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 401&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@ExceptionHandler&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ForbiddenException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;FORBIDDEN&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 403&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@ExceptionHandler&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;NotFoundException&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HttpStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;NOT_FOUND&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 404&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;ErrorResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; message&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;사실 응답 바디 메시지에 &lt;code&gt;status&lt;/code&gt;와 같은 필드를 추가하고 그곳에 HTTP 상태코드를 추가하거나,
특정 개발 팀만의 내부적인 약속에 따라 커스텀 상태코드를 만들어 사용하는 등의 방법도 존재합니다.&lt;/p&gt;&lt;p&gt;이 모든 방법은 기본적으로 위의 구조를 기반으로 &lt;code&gt;@ExceptionHandler&lt;/code&gt; 메서드들의 내용을 수정하면 됩니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTTP/Status&quot;&gt;MDN - HTTP response status codes&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://http.cat/&quot;&gt;HTTP Cats&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html&quot;&gt;@ExceptionHandler&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/5.0.0.M1/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html&quot;&gt;@ControllerAdvice&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Bash] 10초만에 파일 수백 개 대조하기]]></title><description><![CDATA[휴먼 에러 방지를 위해 파일 수백 개를 대조하는 작업을 자동화하였습니다. bash, makefile, 깃헙 액션을 어떻게 활용했는지 튜토리얼 형식으로 정리해보았습니다.]]></description><link>https://bugoverdose.github.io/development/bash-compare-files/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/bash-compare-files/</guid><pubDate>Fri, 20 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;회사 업무 중 불-편한게 있어서 반나절만에 자동화시킨 작업에 대해 기록합니다.
간단히 설명하자면 파일 수백 개의 내용을 자동으로 대조해주는 스크립트를 만들어 휴먼 에러를 감지할 수 있도록 하였습니다.&lt;/p&gt;&lt;p&gt;기왕 하는 김에 튜토리얼 형식으로 정리합니다.&lt;/p&gt;&lt;h2&gt;요구사항&lt;/h2&gt;&lt;p&gt;해결해야 하는 문제는 아래와 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;data&lt;/code&gt; 디렉터리에는 다양한 확장자의 파일이 존재한다. &lt;code&gt;a.md&lt;/code&gt;와 같은 다른 확장자의 파일들은 무시한다.&lt;/li&gt;&lt;li&gt;&lt;code&gt;.txt&lt;/code&gt; 확장자의 파일들의 첫 줄에는 언제나 &lt;code&gt;숫자;&lt;/code&gt; 형식의 고유한 식별 번호가 붙어있다. (ex. &lt;code&gt;00000;&lt;/code&gt;)&lt;/li&gt;&lt;li&gt;&lt;code&gt;data&lt;/code&gt; 디렉터리의 &lt;code&gt;.txt&lt;/code&gt; 파일들 간의 &lt;strong&gt;식별 번호 중복 여부를 쉽게 검증&lt;/strong&gt;할 수 있어야 한다.&lt;/li&gt;&lt;li&gt;식별번호가 중복되는 경우 해당 파일들을 출력한다.&lt;/li&gt;&lt;li&gt;&lt;code&gt;data/dir&lt;/code&gt;와 같은 하위 디렉터리에도 파일들이 존재한다. 예를 들어, &lt;code&gt;data/a.txt&lt;/code&gt;와 &lt;code&gt;data/dir/e.txt&lt;/code&gt;의 식별 번호는 중복되면 안 된다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;정리하자면 &lt;code&gt;data/**/*.txt&lt;/code&gt; 파일들의 첫 줄에 특정 문자열이 식별자로 명시되어있습니다.
휴먼 에러로 인해 식별자들끼리 서로 겹치게 되는 경우가 업무 중 종종 발생하는데,
아무리 늦어도 다른 부서로 데이터를 넘기기 전에 문제를 인지할 수 있어야 합니다.&lt;/p&gt;&lt;h2&gt;배쉬 스크립트&lt;/h2&gt;&lt;p&gt;우선 아래와 같이 &lt;code&gt;duplicate-id-check.sh&lt;/code&gt; 파일을 생성하고, 배쉬 스크립트를 작성합시다.
자세한 설명은 아래 섹션을 참고하기 바랍니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;touch&lt;/span&gt; duplicate-id-check.sh&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token shebang important&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;declare&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-A&lt;/span&gt; id_to_file_path
&lt;span class=&quot;token builtin class-name&quot;&gt;declare&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-A&lt;/span&gt; duplicate_file_paths

&lt;span class=&quot;token builtin class-name&quot;&gt;shopt&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-s&lt;/span&gt; globstar nullglob
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token for-or-select variable&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; data/**/*.txt &lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;token assign-left variable&quot;&gt;first_line&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token assign-left variable&quot;&gt;file_id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;${first_line&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:-&lt;/span&gt;1}&lt;/span&gt;&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token assign-left variable&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dirname&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;/&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;basename&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;${id_to_file_path&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;$file_id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
    id_to_file_path&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$file_id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file_path&lt;/span&gt;&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;token builtin class-name&quot;&gt;continue&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;${duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;$file_id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
    duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$file_id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;- &lt;span class=&quot;token variable&quot;&gt;${id_to_file_path&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;$file_id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt;&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;
  duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file_id&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;$&amp;#x27;&lt;span class=&quot;token entity&quot; title=&quot;\n&quot;&gt;\n&lt;/span&gt;&amp;#x27;&lt;/span&gt;
  duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file_id&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;- &lt;span class=&quot;token variable&quot;&gt;$file_path&lt;/span&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;shopt&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-u&lt;/span&gt; nullglob

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;${&lt;span class=&quot;token operator&quot;&gt;#&lt;/span&gt;duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;@&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
  &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;No Duplication found&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token builtin class-name&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token for-or-select variable&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;${&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;@&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt;
  &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ERROR: Duplicate id &lt;span class=&quot;token variable&quot;&gt;${id}&lt;/span&gt; found&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;${duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;$id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;실행 예시&lt;/h3&gt;&lt;p&gt;아래 명령어를 통해 스크립트를 실행하기 위해 &lt;code&gt;bash&lt;/code&gt;가 깔려있으며 버전이 4.0 이상인지 확인해봅시다.
&lt;code&gt;bash&lt;/code&gt;가 없거나 버전이 낮은 경우 운영환경에 따라 대응하기 바랍니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bash&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--version&lt;/span&gt;
GNU bash, version &lt;span class=&quot;token number&quot;&gt;5.2&lt;/span&gt;.15&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;-release &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;aarch64-apple-darwin21.6.0&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
Copyright &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;C&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2022&lt;/span&gt; Free Software Foundation, Inc.
License GPLv3+: GNU GPL version &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; or later &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;http://gnu.org/licenses/gpl.html&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;

This is &lt;span class=&quot;token function&quot;&gt;free&lt;/span&gt; software&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; you are &lt;span class=&quot;token function&quot;&gt;free&lt;/span&gt; to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음으로 검증할 파일들을 생성하면서 첫 줄에 데이터를 추가해봅시다. 한줄 한줄 복붙하는게 귀찮다면 &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt;로 연결하여 한 줄로 실행해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; data/dir
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;10001;&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; data/a.txt
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;10002;&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; data/b.txt
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;10003;&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; data/c.txt
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;10001;&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; data/d.txt
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;10001;&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; data/a.md
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;10001;&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; data/dir/e.txt
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;10002;&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; data/dir/f.txt&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 본격적으로 스크립트를 실행하면 아래와 같은 에러 문구가 출력됩니다.
문제가 되는 파일들은 식별자 단위로 함께 출력되었으며,
&lt;code&gt;data/dir&lt;/code&gt; 디렉터리의 파일들도 검증 대상으로 포함되어있음을 알 수 있습니다.
이때 &lt;code&gt;data/a.md&lt;/code&gt;에도 &lt;code&gt;10001&lt;/code&gt;라는 식별자가 존재하지만 확장자명이 다르기 때문에 출력되지 않았습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bash&lt;/span&gt; ./duplicate-id-check.sh

ERROR: Duplicate &lt;span class=&quot;token function&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10002&lt;/span&gt; found
- data/b.txt
- data/dir/f.txt

ERROR: Duplicate &lt;span class=&quot;token function&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10001&lt;/span&gt; found
- data/a.txt
- data/d.txt
- data/dir/e.txt&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;식별자 중복을 제거하기 위해 식별자별로 파일을 하나씩만 남기고 지워보겠습니다.
이제 스크립트를 다시 실행해보면 문제가 없다는 문구가 출력됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-f&lt;/span&gt; data/b.txt data/d.txt data/dir/e.txt
&lt;span class=&quot;token function&quot;&gt;bash&lt;/span&gt; ./duplicate-id-check.sh
No Duplication found&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;Makefile 활용&lt;/h2&gt;&lt;p&gt;그런데 주의할 점은 저희가 작성한 스크립트는 반드시 4.0 버전 이상의 &lt;code&gt;bash&lt;/code&gt;로 실행해야 한다는 점입니다.
예를 들어 아래와 같이 스크립트를 그대로 실행하면 &lt;strong&gt;연관 배열 문법&lt;/strong&gt;에서 문제가 발생합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;chmod&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;755&lt;/span&gt; ./duplicate-id-check.sh
./duplicate-id-check.sh
./duplicate-id-check.sh: line &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;: declare: -A: invalid option
declare: usage: &lt;span class=&quot;token builtin class-name&quot;&gt;declare&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;-afFirtx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;-p&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이러한 맥락과 해당 스크립트를 실행하는 방법에 대한 명세를 &lt;code&gt;README.md&lt;/code&gt;에 작성할 수도 있지만,
아래와 같이 &lt;code&gt;Makefile&lt;/code&gt;을 활용하는 방법도 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;touch&lt;/span&gt; Makefile&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;Makefile&lt;/code&gt;에 &lt;code&gt;validate-data&lt;/code&gt;라는 커맨드를 작성해봅시다.
해당 커맨드의 첫 번째 줄은 터미널에 출력되지 않는 주석입니다. 해당 커맨드에 대한 부가적인 정보를 적어둡시다.
두 번째 줄은 &lt;code&gt;echo&lt;/code&gt;로 터미널에 어떠한 작업이 수행되고 있는지에 대한 문구를 출력합니다.
세 번째 줄에서 본격적으로 &lt;code&gt;bash&lt;/code&gt;로 저희가 작성한 스크립트를 실행합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;makefile&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-makefile line-numbers&quot;&gt;&lt;code class=&quot;language-makefile&quot;&gt;&lt;span class=&quot;token target symbol&quot;&gt;validate-data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
	&lt;span class=&quot;token operator&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;#requirements: bash 4.0 버전 이상&lt;/span&gt;
	&lt;span class=&quot;token operator&quot;&gt;@&lt;/span&gt;echo &lt;span class=&quot;token string&quot;&gt;&amp;quot;data 디렉터리의 모든 .txt 파일들에 대해 첫 줄에 서로 중복된 식별자가 존재하는지 검증한다.&amp;quot;&lt;/span&gt;
	bash ./duplicate-id-check.sh&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 &lt;code&gt;make&lt;/code&gt;로 저희가 작성한 커맨드를 실행하면 아래와 같이 출력됩니다.
앞에 &lt;code&gt;@&lt;/code&gt;가 없는 경우 해당 줄에서 어떠한 커맨드가 실행되었는지도 함께 출력됨을 알 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; validate-data
data 디렉터리의 모든 .txt 파일들에 대해 첫 줄에 서로 중복된 식별자가 존재하는지 검증한다.
&lt;span class=&quot;token function&quot;&gt;bash&lt;/span&gt; ./duplicate-id-check.sh
No Duplication found&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;물론 지금은 굉장히 커맨드가 굉장히 짧고 간단하므로 효용이 애매하다고 느껴질 수 있습니다.
그러나 &lt;code&gt;Makefile&lt;/code&gt;은 마치 함수를 정의하는 것과 같으며, 장기적인 유지보수 차원에서 효용이 있습니다.&lt;/p&gt;&lt;p&gt;특히 커맨드가 복잡하거나, 프로젝트에서 관리해야 하는 커맨드가 많거나,
동일한 커맨드를 여러 곳에서 그대로 재활용하거나,
일련의 커맨드를 반드시 순차적으로 실행해야 하는 경우
이처럼 &lt;code&gt;Makefile&lt;/code&gt;을 활용하여 커맨드를 관리하는 방법을 생각해볼 수 있습니다.&lt;/p&gt;&lt;h2&gt;깃헙 액션 기반 자동화&lt;/h2&gt;&lt;p&gt;마지막으로 이러한 검증 스크립트가 자동으로 실행되도록 셋업해봅시다.
깃헙 저장소에서 &lt;code&gt;.github/workflows&lt;/code&gt; 경로에 &lt;code&gt;yml&lt;/code&gt; 파일을 추가하는 방식으로 저희는 쉽게
깃헙 액션을 추가할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; .github
&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; .github/workflows
&lt;span class=&quot;token function&quot;&gt;touch&lt;/span&gt; .github/workflows/data-validation.yml&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;data-validation.yml&lt;/code&gt; 파일을 아래와 같이 작성해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Validate data
&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;data/**.txt&amp;#x27;&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;validate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Duplicate id check
    &lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
    &lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v3
      &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run validation script
        &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; make validate&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;data&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;우선 &lt;strong&gt;Validate data&lt;/strong&gt;라는 이름의 워크플로우는 깃헙 저장소에서
&lt;code&gt;data&lt;/code&gt; 디렉터리의 &lt;code&gt;.txt&lt;/code&gt; 파일들에 변경 사항이 있을 때마다 트리거됩니다.&lt;/p&gt;&lt;p&gt;해당 워크플로우에는 *&lt;em&gt;Duplicate id check&lt;/em&gt;라는 이름의 잡 하나만 실행됩니다.
해당 잡은 깃헙에서 제공하는 &lt;code&gt;ubuntu&lt;/code&gt; 환경의 서버에서
저희의 깃헙 저장소를 클론(clone) 받고,
현재 워크플로우가 트리거된 브랜치로 전환(checkout)한 이후,
&lt;code&gt;make validate-data&lt;/code&gt;라는 명령어를 실행합니다.&lt;/p&gt;&lt;p&gt;참고로 이때 &lt;code&gt;make validate-data&lt;/code&gt; 대신 &lt;code&gt;bash ./duplicate-id-check.sh&lt;/code&gt;를 그대로 실행해도 상관 없으나,
그 경우 스크립트 파일명이나 실행할 커맨드의 내용이 변경되었을 때 깃헙 액션과 &lt;code&gt;Makefile&lt;/code&gt; 양쪽 모두 수정해야 합니다.
또한 상황에 따라 &lt;a href=&quot;https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idstepsshell&quot;&gt;shell&lt;/a&gt; 옵션을
지정할 수도 있으나 지금은 불필요하여 생략하였습니다.&lt;/p&gt;&lt;p&gt;이제 &lt;code&gt;data&lt;/code&gt; 폴더에 &lt;code&gt;.txt&lt;/code&gt; 파일들을 수정하여 깃헙 저장소로 푸쉬할 때마다 검증 스크립트가 자동으로 실행됩니다.
이제 깃헙 액션의 성공/실패 여부에 따라 커밋에는 체크(V) 혹은 실패(X) 표시가 추가되며,
해당 워크플로우를 확인해보면 성공/실패 여부에 따라 아래와 같이 로그가 찍힙니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9bd64955018b0e4b780ecdd5d0645f2c/21482/github-success.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:58.89570552147239%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABc0lEQVQoz42T2VaDQBBE51c0C2FJWGeAGXYS3I764pv//x3l6Q6YEOXow6WbkNQUXR0RSgNTn6BMg7zqEUiDe2uPte0zq90BWzeEG6SMEyjsDskMer5xQq4iyWu0wwuyskfRDkiLDhsnmAk6voQ0HZPoFvtYX5HzIe6IWNk+dvsYlhcx61GMhK5FyfUE3U9Mz8/4EOQmLXtI3TD2+ArE9Zcn8bnABdIhQ4IcBarEIc55flFaIckbqKJj57diizgBiwpfGrx/fKLsntA9vKEdXlEdn8+HJBq+LBYwlz4xbCLOagiyGaYlOyq7R+hmgK4HDskLMx4BhfITBXvsLS/mtyEEDXnrRoizikV0feJe6pZd02GhKr5rNNWs4hGRMzI1hSXoQh8o0yKvjrw2adHzD2kNaC6/hbCUNIcSqpIFyBlVSjvRDfeU9l/BzFO2fcR5zSnToKnyjMZFnRz+R5D/KdRQSiRGrkjwbuvNlvh20ZcFI3wB+sF2DMsbxAgAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;github-success&quot; title=&quot;github-success&quot; src=&quot;/static/9bd64955018b0e4b780ecdd5d0645f2c/a6d36/github-success.png&quot; srcSet=&quot;/static/9bd64955018b0e4b780ecdd5d0645f2c/222b7/github-success.png 163w,/static/9bd64955018b0e4b780ecdd5d0645f2c/ff46a/github-success.png 325w,/static/9bd64955018b0e4b780ecdd5d0645f2c/a6d36/github-success.png 650w,/static/9bd64955018b0e4b780ecdd5d0645f2c/e548f/github-success.png 975w,/static/9bd64955018b0e4b780ecdd5d0645f2c/3c492/github-success.png 1300w,/static/9bd64955018b0e4b780ecdd5d0645f2c/21482/github-success.png 1350w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/b0b9345612f7012daff8829d98f5a381/3d405/github-fail.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:89.57055214723925%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACL0lEQVQ4y41U2XKjMBDkU7biA2MsxCVziNsO3lRl//9zeqvHFuskJLUPbalk0fR0z+CppEDZTsjKFmc7IDEWm0OEbaAF3O/CBEFkEEQ5DlEOX2UfsDvGC7ys7DDd3mGHGd3lDabuPxEqBNrg3FxQtFcYOyHK6wUqq3GMzwjjQuDxoX2YwD+lspLMwZE6pWvnz/9xL4TGjjD1gLMdcdRGpJP88+U1cgc+Q1He9hAhLjqRr3OLtOxAG4pmwkFlq4rWFG6dh6e8xs00aPoZw/wHw/wuXiZFJ/5o00Ab+xX5v32UW+TVgKRo4e1PKXRkpNx2eoMdbhJQ2V6g0lICoelH/Qx3dl+ZNNNnRd7GV9IWLLPqrkKWV7142oy/kZwbsSM2VpAWrZzxfnxu5C79fvGVlO7xh2aSgBeprB7mxUeWQaIoq0TRWijPfi6ELDmregmFJFTCl5CYDe3a6rtQlrbhhhepwpVLL2gDz5ncT4o+JO0IaajKKlGn2f1pKYpIzPULAR/+BkIYqFwCacab+EZCFwADocr/IbsTBhHYOqe0RNW/in98ya9deMf+JAm6FDcs7wd4oa9QnhJcsgqzHTG1V3RVD2salHxJVslaG4sk0NC+gj5E9/UJsa9ALm8XaKQsL6+RZJV8vgxbph5R2BFhlGN/jHFgSIHGjnO7Ap+zHCYsWSMtexkhhkLvZAIeU8AZfXlOea3UxyyzK+Rrw6ZlugxBpdXimfPtx4TdR/hB+BdG0y4aR3dqoAAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;github-fail&quot; title=&quot;github-fail&quot; src=&quot;/static/b0b9345612f7012daff8829d98f5a381/a6d36/github-fail.png&quot; srcSet=&quot;/static/b0b9345612f7012daff8829d98f5a381/222b7/github-fail.png 163w,/static/b0b9345612f7012daff8829d98f5a381/ff46a/github-fail.png 325w,/static/b0b9345612f7012daff8829d98f5a381/a6d36/github-fail.png 650w,/static/b0b9345612f7012daff8829d98f5a381/e548f/github-fail.png 975w,/static/b0b9345612f7012daff8829d98f5a381/3c492/github-fail.png 1300w,/static/b0b9345612f7012daff8829d98f5a381/3d405/github-fail.png 1348w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;배쉬 문법 해설&lt;/h2&gt;&lt;h3&gt;shebang&lt;/h3&gt;&lt;p&gt;스크립트의 첫 줄에 작성되는 &lt;code&gt;#!&lt;/code&gt;는 주석이 아니라 &lt;strong&gt;쉬뱅(shebang)&lt;/strong&gt;이라는 것입니다.
스크립트를 실행하면 기본적으로 &lt;code&gt;#!&lt;/code&gt; 뒤에 있는 문구가 실행됩니다.
일반적으로 스크립트에서는 &lt;code&gt;#!/bin/bash&lt;/code&gt;, &lt;code&gt;#!/bin/sh&lt;/code&gt;와 같은 형식으로
해당 스크립트를 실행시킬 인터프리터를 지정하는 방식으로 사용됩니다.&lt;/p&gt;&lt;p&gt;저희의 스크립트를 &lt;code&gt;./duplicate-id-check.sh&lt;/code&gt;처럼 실행시키면 아래와 같은 쉬뱅을 만나면서 &lt;code&gt;/bin/bash&lt;/code&gt;를 실행시킵니다.
이때 &lt;code&gt;/bin/bash&lt;/code&gt;의 인자로 스크립트의 나머지 부분이 넘겨지면서 저희의 스크립트가 해석되는 구조입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token shebang important&quot;&gt;#!/bin/bash&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그런데 저의 경우 아래와 같이 맥북에 &lt;code&gt;homebrew&lt;/code&gt;로 설치한 또 다른 배쉬가 존재합니다.
해당 배쉬 프로그램의 경로를 쉬뱅으로 지정할 경우,
&lt;code&gt;./duplicate-id-check.sh&lt;/code&gt;는 &lt;code&gt;/bin/bash&lt;/code&gt; 대신 해당 경로의 배쉬 프로그램으로 스크립트를 실행시킵니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token shebang important&quot;&gt;#!/opt/homebrew/bin/bash&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 동작원리를 제대로 확인하고 싶으면 실험삼아 아래와 같이 수정해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token shebang important&quot;&gt;#!/opt/homebrew/bin/bash --version&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 경우 실행되는 &lt;code&gt;/opt/homebrew/bin/bash&lt;/code&gt; 프로그램의 버전 정보만 출력되고,
스크립트의 나머지 부분은 제대로 넘겨지지 않음을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;./duplicate-id-check.sh
GNU bash, version &lt;span class=&quot;token number&quot;&gt;5.2&lt;/span&gt;.15&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;-release &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;aarch64-apple-darwin21.6.0&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
Copyright &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;C&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2022&lt;/span&gt; Free Software Foundation, Inc.
License GPLv3+: GNU GPL version &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; or later &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;http://gnu.org/licenses/gpl.html&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;

This is &lt;span class=&quot;token function&quot;&gt;free&lt;/span&gt; software&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; you are &lt;span class=&quot;token function&quot;&gt;free&lt;/span&gt; to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;set&lt;/h3&gt;&lt;p&gt;&lt;code&gt;set&lt;/code&gt; 빌트인은 쉘 옵션을 설정할 때 쓰입니다.
&lt;code&gt;-e&lt;/code&gt; 옵션의 경우 스크립트 실행 도중에 문제가 발생하면 별도의 처리 없이 해당 위치에서 스크립트를 종료시켜주므로 디버깅에 용이합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;shopt&lt;/h3&gt;&lt;p&gt;&lt;code&gt;shopt&lt;/code&gt;은 쉘 관련 옵션을 활성화 및 비활성화할 때 사용합니다.
기본적으로 &lt;code&gt;-s&lt;/code&gt;는 특정 옵션을 활성화(set)시키고, &lt;code&gt;-u&lt;/code&gt;는 특정 옵션을 비활성화(unset)시킵니다.&lt;/p&gt;&lt;p&gt;저희 스크립트에서는 &lt;code&gt;globstar&lt;/code&gt; 옵션과 &lt;code&gt;nullglob&lt;/code&gt; 옵션을 활성화시킨 상태에서
&lt;code&gt;data&lt;/code&gt; 디렉터리 내부의 텍스트 파일들을 순회하고,
순회 작업이 끝난 이후에 &lt;code&gt;nullglob&lt;/code&gt; 옵션만 비활성화시키고 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;shopt&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-s&lt;/span&gt; globstar nullglob
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token for-or-select variable&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; data/**/*.txt &lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;token assign-left variable&quot;&gt;first_line&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
  &lt;span class=&quot;token assign-left variable&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dirname&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;/&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;basename&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;shopt&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-u&lt;/span&gt; nullglob&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;globstar&lt;/code&gt; 옵션은 &lt;code&gt;data/**/*.txt&lt;/code&gt;와 같이 &lt;code&gt;**&lt;/code&gt; 패턴을 사용할 수 있게 해줍니다.
이 덕분에 저희는 &lt;code&gt;data/a.txt&lt;/code&gt;, &lt;code&gt;data/dir/e.txt&lt;/code&gt;, &lt;code&gt;data/dir/subdir/g.txt&lt;/code&gt;와 같이
&lt;code&gt;data&lt;/code&gt; 디렉터리 내부의 모든 &lt;code&gt;.txt&lt;/code&gt; 파일들을 재귀적으로 탐색할 수 있습니다.
해당 옵션을 키지 않았을 때에는 실질적으로 &lt;code&gt;data/*.txt&lt;/code&gt;과 동일합니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;nullglob&lt;/code&gt; 옵션은 쉘에서 찾으려는 패턴에 부합하는 대상이 존재하지 않았을 때 &lt;code&gt;null&lt;/code&gt;을 반환하도록 만듭니다.
해당 옵션을 키지 않을 경우 스크립트에서는 &lt;code&gt;data/**/*.txt&lt;/code&gt; 패턴에 부합하는 파일이 하나도 없을 때
&lt;code&gt;data/**/*.txt&lt;/code&gt;이 그대로 반환되며, 마치 &lt;code&gt;data/**/*.txt&lt;/code&gt;라는 파일이 실제로 존재하는 것처럼 반복문 내부 로직이 실행됩니다.
해당 옵션이 활성화되면 &lt;code&gt;data&lt;/code&gt; 디렉터리가 비어있을 때, 반복문을 즉시 탈출하게 됩니다.&lt;/p&gt;&lt;h3&gt;연관 배열&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;연관 배열(associative array)&lt;/strong&gt;은 &lt;code&gt;bash&lt;/code&gt; 4.0버전부터 지원되는 키-값 형식의 자료구조입니다.
저희의 스크립트에서는 두 개의 연관 배열을 선언하여 사용했습니다.&lt;/p&gt;&lt;p&gt;우선 &lt;code&gt;data&lt;/code&gt; 디렉터리 내부의 모든 &lt;code&gt;.txt&lt;/code&gt; 파일들을 순회하며 각 텍스트 파일의 식별자를 읽어들였습니다.
&lt;code&gt;id_to_file_path&lt;/code&gt;에서는 각 식별자에 대응되는 파일의 경로를 관리하고,
혹시라도 동일한 식별자가 다른 파일에서 발견되면 &lt;code&gt;duplicate_file_paths&lt;/code&gt;에 해당 파일들의 경로를 추가해주었습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 연관 배열 선언&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;declare&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-A&lt;/span&gt; id_to_file_path
&lt;span class=&quot;token builtin class-name&quot;&gt;declare&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-A&lt;/span&gt; duplicate_file_paths

&lt;span class=&quot;token builtin class-name&quot;&gt;shopt&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-s&lt;/span&gt; globstar nullglob
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token for-or-select variable&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; data/**/*.txt &lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;token assign-left variable&quot;&gt;first_line&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token assign-left variable&quot;&gt;file_id&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;${first_line&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:-&lt;/span&gt;1}&lt;/span&gt;&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token assign-left variable&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dirname&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;/&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;basename&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&amp;quot;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;# 해당 key에 대응되는 값이 아직 없는 경우 빈 문자열 반환&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;${id_to_file_path&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;$file_id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
    id_to_file_path&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$file_id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file_path&lt;/span&gt;&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;token builtin class-name&quot;&gt;continue&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;${duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;$file_id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
    duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$file_id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;- &lt;span class=&quot;token variable&quot;&gt;${id_to_file_path&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;$file_id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt;&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;# 해당 key에 값으로 에러 메시지 할당. 하나의 문자열에 에러 메시지를 길게 연결(concat)&lt;/span&gt;
  duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file_id&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;$&amp;#x27;&lt;span class=&quot;token entity&quot; title=&quot;\n&quot;&gt;\n&lt;/span&gt;&amp;#x27;&lt;/span&gt;
  duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;$file_id&lt;/span&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;- &lt;span class=&quot;token variable&quot;&gt;$file_path&lt;/span&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;shopt&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-u&lt;/span&gt; nullglob&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;${#associative_array[@]}&lt;/code&gt; 문법은 연관 배열의 길이를 반환합니다.
&lt;code&gt;duplicate_file_paths&lt;/code&gt;의 연관 배열의 길이가 0인 경우, 모든 식별자가 고유한 것으로 간주하고
종료 상태(exit code) 0과 함께 스크립트를 탈출합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;${&lt;span class=&quot;token operator&quot;&gt;#&lt;/span&gt;duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;@&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
  &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;No Duplication found&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token builtin class-name&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;마지막으로 연관 배열을 순회하는 문법입니다.
아래 코드에서는 식별자가 중복된 케이스들에 대해 식별자별로 에러 메시지 문자열을 출력한 이후,
종료 상태(exit code) 1과 함께 스크립트를 탈출합니다. &lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 순회&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token for-or-select variable&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;${&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;@&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt;
  &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;ERROR: Duplicate id &lt;span class=&quot;token variable&quot;&gt;${id}&lt;/span&gt; found&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&lt;span class=&quot;token variable&quot;&gt;${duplicate_file_paths&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;$id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;}&lt;/span&gt;&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;깃헙 액션에서는 스크립트가 0을 반환했으면 성공한 것으로,
그 이외의 종료 상태를 반환하면 에러가 발생한 것으로 간주합니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;회사에서 다양한 기술과 백오피스 툴을 활용하다보면 의외로 실수하기 쉬운 간단한 업무를 수작업으로 해야 할 때가 있습니다.
개인적으로 이런게 보일 때마다 적절한 위치에서 적절한 스크립트를 실행시키는 방식으로 휴먼 에러를 막고 있습니다.&lt;/p&gt;&lt;p&gt;스크립트 실행 속도는 대체로 10초 이내로 굉장히 빠르고,
휴먼 에러 예방에 따라 업무 효율도 증가하는 것을 확실히 실감하고 있습니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.gnu.org/software/make/&quot;&gt;GNU Make&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html&quot;&gt;Bash Reference Manual - Set Builtin&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html&quot;&gt;Bash Reference Manual - Shopt Builtin&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://phoenixnap.com/kb/bash-associative-array&quot;&gt;Bash Associative Array&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://losskatsu.github.io/os-kernel/bash/#%EB%A6%AC%EB%88%85%EC%8A%A4-bash%EC%9D%98-%EB%AA%A8%EB%93%A0-%EA%B2%83-binbash%EC%9D%98-%EC%9D%98%EB%AF%B8&quot;&gt;블로그 - bash의 모든 것&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[OS] 멀티쓰레딩 모델]]></title><description><![CDATA[유저 쓰레드와 OS 쓰레드 간의 관계가 Many-to-One, One-to-One, Many-to-Many일 때 각각 어떠한 차이를 지니는지 압축적으로 정리합니다. 고루틴, 코루틴, 쓰레드풀, 자바의 가상 쓰레드 등의 아키텍처를 이해하는 데 필요한 배경지식을 다룹니다.]]></description><link>https://bugoverdose.github.io/computer-science/multi-threading-models/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/multi-threading-models/</guid><pubDate>Sun, 15 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;멀티쓰레딩 모델(Multi-Threading Model)이란
유저 쓰레드 구현체에서 유저 쓰레드와 OS 쓰레드 사이의 관계를 어떻게 설정했는지를 의미합니다.
기본적으로 프로그래밍 언어마다 다른 쓰레딩 모델에 기반을 두고 있으며,
그로 인한 차이는 특히 대량의 트래픽을 처리하는 서버 애플리케이션들에서 유의미하게 드러납니다.&lt;/p&gt;&lt;p&gt;유저 쓰레드와 OS 쓰레드에 대한 내용은
&lt;strong&gt;&lt;div to=&quot;/computer-science/thread-types&quot;&gt;지난 게시글&lt;/div&gt;&lt;/strong&gt;를 참고하기 바랍니다.&lt;/p&gt;&lt;h2&gt;Many-to-One 모델&lt;/h2&gt;&lt;p&gt;우선 복수의 유저 쓰레드가 하나의 OS 쓰레드와 연결된 구조입니다.
대표적으로 &lt;a href=&quot;https://docs.oracle.com/cd/E19455-01/806-3461/ch2mt-41/index.html&quot;&gt;자바 초창기 버전&lt;/a&gt;이 Many-to-One 모델이었습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:474px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/6ceed619c372448d20b233f6da41737b/5595f/many-to-one.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:131.2883435582822%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAABYlAAAWJQFJUiTwAAAES0lEQVRIx41V7U+bVRTvv8FW1vZ5f2kLUzK2WWjpC30FCisdhY7BkL2wsGxgncJGxpsDhrLIJFEZGwVdNJEsGmOiX/ZJnTCoZup/YGKMXzSa6Jefuac8XenA8OHmnufee37nd+75nfuYVFmDpujQVTt0zQ5d1enbWBdtMhRJhSwqZBfvPfOxF9ZNzNBkHYJFBHdIhGCVaFNTdUichFh7AGMPBjC6egWhE36InEx77Aw7Sz6WbR9Fh4mhMgYtXSGcH0uTkywokAUVR2uOYP7RCFa25pDNzWLuy+uoOlIFRVShiDJibX70jZ1GUzoMRVCImIlFab/SjOXvp3BvcwrvP55ELBWEpYxDKBHAu9+O45ONRTxYX8DCN+Pwhd2wlvFoORPB3Y2bWHoyjcWtaSTPNkK0SHmGI6v9yG7extrGMpY238DA7MuwmQVUVDpx48PLuL81hfu5aVy72w+H7gBvEZFZ6MXy5izW1rO492QGw+9dhMyrMIk2CX2Tp7Dy01vIrs9h+YcZtPc1072okg7nC4fRO3QKvVc74KxwQJE1uu/OTALZp28iu3Ebqz/Oonc4RT4mRdRQediJC5MduPVwGJ2DrdAUjSrGKshZeLiqa2nwVoHWVEmDpuvoHkpi5uHrOHejA3annWpBVVYkDVYzB5/Hj/q6YN5xWwoiL8FX54PX4yVbV+yFCod8EbhdHtjMXD6IUWXSlGYnh4ZoAyKhKHibALvmgMCJBOZ1e8lmgdjcGG1EJBiBxIJoJTo0QCkyJyIajiEYCJHNghiAzGZrsXAM4fowBFs+E1XRSDJsNhlApaCMKQM9ZLbAV+eHz+MjOxqOIhQIUQbFHVIQdr5TtOc2GJt4YzM8tXVwHa+h4fcGiB1jVkqEzc9abw9QSZAp/WTiJNKpNEL1YQq0G9hOhiWjuPnNB8ox//YdTN+cxsEyMxVqB0gR2J6AhgMD5Kw8VTQWaSjcm1oCsm9ATbVT2rXHa+B2ucnemaK2D8Dty6WUFTssB8sR9IcQ8AdhNZcXGO7F8jlA1bBVJnQBqfNX8c7nP2P+s6do7boEkRNor7QY/8uQUuUE1HijyH79O9a2/sRa7m8sPfoF1cc8kAWpALoPQFZdBwSrDeF4Gh989xe+yP2KT7d+w8rjP+Crj0O08XlR78VwN+r518aJ0cWv8HHuH3yU+xfX76ztClKMsRNw+1+R//k4oIoKKpwvoq3nFbR2XYbDXglZkAuS2rX1jA/2V2M6Y9Jg2mM26wqRF1FedoAG6VBzkLjZGTaKpUStp6v5Z6uzoxNDrw2jI5VGvDGOpoY4tdpLx1zoPn2G2q/W5UbriST6L15CS1MLkokk9boBSgwNwJOtbcgMZpAZyGB8dAI93T2YGJtAwFeP3p6zGLk2gkRLAqlkCpnBV3HhXB9mpm6hKdaUf3i30y+kTKlaeKLN0mejuqqa1g0G7Fljz7zxGrF149tI+T+vSH/IrQcwXwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;many-to-one&quot; title=&quot;many-to-one&quot; src=&quot;/static/6ceed619c372448d20b233f6da41737b/5595f/many-to-one.png&quot; srcSet=&quot;/static/6ceed619c372448d20b233f6da41737b/222b7/many-to-one.png 163w,/static/6ceed619c372448d20b233f6da41737b/ff46a/many-to-one.png 325w,/static/6ceed619c372448d20b233f6da41737b/5595f/many-to-one.png 474w&quot; sizes=&quot;(max-width: 474px) 100vw, 474px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이 구조의 가장 큰 장점은 멀티 쓰레딩 작업이 유저 스페이스에서 이루어짐에 따라 &lt;strong&gt;컨텍스트 스위칭이 빠르다&lt;/strong&gt;는 점입니다.
기본적으로 &lt;strong&gt;유저 쓰레드 간의 컨텍스트 스위칭 과정에 커널이 개입하지 않습니다.&lt;/strong&gt;
즉, 유저 모드와 커널 모드 사이의 전환 등의 비용이 발생하는 OS 쓰레드 간의 컨텍스트 스위칭에 비해
유저 쓰레드 간의 컨텍스트 스위칭 비용은 훨씬 적으며, 이로 인한 성능적 이점을 볼 수 있습니다.&lt;/p&gt;&lt;p&gt;한편 *OS 레벨에서 단 하나의 작업만 실행**될 수 있다는 점이 이 구조의 가장 큰 특징입니다.
애플리케이션은 런타임에 무수히 많은 유저 쓰레드를 생성하여 동시에 작업을 진행시킬 수 있으나,
결과적으로 OS 쓰레드에서 동시에 실행될 수 있는 것은 이 중 단 하나의 유저 쓰레드밖에 없습니다.&lt;/p&gt;&lt;p&gt;이로 인한 장점은 &lt;strong&gt;OS 레벨에서의 데이터 경합(race condition)이 발생할 가능성은 적다&lt;/strong&gt;는 점입니다.&lt;/p&gt;&lt;p&gt;그러나 단점으로는 우선 &lt;strong&gt;멀티코어의 이점을 누릴 수 없다&lt;/strong&gt;는 점이 치명적입니다.
하나의 OS 쓰레드는 하나의 코어 위에서 실행되기 때문입니다.
하드웨어의 발전으로 인해 오늘날의 애플리케이션들은 웬만하면 멀티코어 환경에서 실행되는데,
어떤 환경에서든 무조건 하나의 코어만 활용한다면 해당 애플리케이션은 성능상의 이점을 보지 못합니다.&lt;/p&gt;&lt;p&gt;또한 특정 유저 쓰레드에서 블록킹 시스템 콜을 호출할 경우,
&lt;strong&gt;OS 쓰레드가 블록됨에 따라 그에 연결된 모든 사용자 쓰레드들이 블록킹된다는 점&lt;/strong&gt;도 문제입니다.
해당 이슈를 우회하기 위해 유저 쓰레드 구현체들에서는 일반적으로 별도의 I/O API를 프로그래밍 언어 레벨에서 제공합니다.
이러한 API를 호출하면 프로세스 전체가 아니라 해당 API를 호출한 사용자 쓰레드만을 블록킹시키고,
내부적으로 논블록킹 I/O를 호출하고, 그 사이에 다른 사용자 쓰레드가 실행되도록 스케줄링하는 등의 작업을 내부적으로 실행합니다.&lt;/p&gt;&lt;h2&gt;One-to-One 모델&lt;/h2&gt;&lt;p&gt;다음은 각 유저 쓰레드마다 독립된 OS 쓰레드 하나와 연결되는 구조입니다.
자바8과 자바11 등 대부분의 서비스에서 사용 중인 자바 버전들이 One-to-One 모델입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:538px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/3121fe65663e077208bfd7b4f07a0d6c/9516f/one-to-one.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:114.11042944785277%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAABYlAAAWJQFJUiTwAAAD9ElEQVQ4y7WV208cZRjG9/8wsMz5sDu7y84uBxFYll0QW4VCsbYXpTE0mEqK0kpraxVbEgFpgVKkjYlWTTlVoVAKNSY23mgak7ZLOSR66X9gPJD24mfm2+XgnSXx4pv55p33e97D88w7Psu0sc0AumwQKQwTKYygS4aweUuTdUKRENFoFF2ysI1t/3DIIeYWir1lZP19tuUdMmhoeZGLS+8yuHSWfS0vYSimcNxzMEX/wmkufXuGA2316IqJoVikGyrpneti8LtzHDrejK5YWUBTtwk5YXrnTjL9+Co3Ho3QN3+aUDCMbdqcn+pgInOFqcwYA3fP4MajaJLB+18dZ2pljImHo1y+9wHxkhiGauKzDJuA7dA92cHN1WuMPx7h/NTbBC0HS7c5e/0YkysjTK+M8dFsl2iJJmmcutbG1Nook5lRUVnUjWJqVrZkU7aoqnuBc1+00/1lB8m6CkzFFhErUiW891k73Tc6STdUZUvWTIor4py6+gY9k53UNadEezysbIZWEMWvUhIvIVmRRM5XhM1b3r68tJyKsgrkvKzd65Uq6bjhGOlkGkn4B/CwfJtsGrpJafHzVFel0FV9m2VVJ1GeoLI8gaFus2/qFsXxYmpTtSLjrN3GZ+UcdNXIAVajKTsAFV2AeWun3QMpihVTU10jzm7atzLcFaD7nwBTz5ZhqvZ/B7R3D+gWkd5tyYlnJcXQrS1Sdjp4+2yGleiquUM29hagoWW/Y6FD72ILAfspLS4lmaimIM+/JWwpzy9E7WUo5eXnhB1ELZCJRWOkU7VI+f7tDD0HTVapa2ph6JsHDM8+Yk/TEXRFQ1M0UnsPcnH6Z0ZuZWg41IYma0LgiZp6+sZ/5MrCGs1H3kKXVZGYz9ItnGCYwZmHLKxuML+ywfBsBifgYBkWveM/Mb/6hNsrfzJ65xei0RIUSebC5/dYWHvK7eU/+PT734jHy0WgHGCEwZll7q79zeLaBsO3lgkFQmKY9k3c5876E5bW/uKTxV+JuVnAnus/sLT+lMXV37OARTlAr2RdUnm5+ShDMxmGZjO88loruqJjKgZ1DYe59PUDhudWaDz8JqaqYaoGybr9fDx5n8sL6xxoPSHali05N9I1SSHkFBKwHPKfyxOy8AaA4pcEo8FAGNlfgCprgnmlQBbkhEOuOLupZ98m3d6Q9aZMWWkZzU2v4hbGiEXjxN0iqhPVuBGXmFtEY0MjVZVJ8c6zeYE3R9r2+MrNRC/yvvpGLnzYQ/uxdvp7+6nfW0/XyS7eOdHF/sZmOjs6xfNA3wCtrx9FldQtwH8JezNC0HZE5IAZEHdTM7dsXtOj4SiO7RBxIuK/45EqzuYy/AeR8jg1nTSffgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;one-to-one&quot; title=&quot;one-to-one&quot; src=&quot;/static/3121fe65663e077208bfd7b4f07a0d6c/9516f/one-to-one.png&quot; srcSet=&quot;/static/3121fe65663e077208bfd7b4f07a0d6c/222b7/one-to-one.png 163w,/static/3121fe65663e077208bfd7b4f07a0d6c/ff46a/one-to-one.png 325w,/static/3121fe65663e077208bfd7b4f07a0d6c/9516f/one-to-one.png 538w&quot; sizes=&quot;(max-width: 538px) 100vw, 538px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;기본적으로 One-to-One 모델의 장점은 Many-to-One 모델의 단점이며, 반대로 전자의 단점은 후자의 장점입니다.&lt;/p&gt;&lt;p&gt;이 구조에서 유저 쓰레드는 실질적으로 OS 쓰레드와 동일한 대상으로 간주됩니다.
즉, 유저 쓰레드의 개수만큼 OS 쓰레드가 존재해야 하며, 서로 다른 유저 쓰레드는 반드시 독립적인 OS 쓰레드에서 실행됩니다.
이로 인한 장점은 &lt;strong&gt;멀티코어의 이점&lt;/strong&gt;을 볼 수 있으며,
&lt;strong&gt;특정 유저 쓰레드에서 블록킹 시스템 콜을 호출하더라도 다른 사용자 쓰레드에 영향을 미치지 않는다&lt;/strong&gt;는 점입니다.&lt;/p&gt;&lt;p&gt;그러나 문제는 많습니다.
우선 하나의 프로세스 내에서 복수의 OS 쓰레드가 메모리, 파일 등 동일한 자원을 공유한다는 점은
&lt;strong&gt;OS 레벨에서의 데이터 경합(race condition)이 발생할 가능성이 높음&lt;/strong&gt;을 의미합니다.&lt;/p&gt;&lt;p&gt;나아가 *OS 쓰레드 간의 컨텍스트 스위칭의 비용은 유저 쓰레드 간의 컨텍스트 스위칭에 비해 훨씬 큽니다.&lt;strong&gt;
컨텍스트 스위칭이 한 번 발생할 때마다 커널 모드로 전환되는 등 커널이 개입하기 때문에 이는 당연합니다.
또한 커널 개입 여부와는 별개로 애초에 &lt;/strong&gt;OS 쓰레드는 유저 쓰레드에 비해 훨씬 무겁습니다.**
OS 쓰레드의 개수가 늘어날수록 프로세스는 무거워지며, 어느 지점부터는 리소스 사용량만 과하게 증가하고 성능은 오히려 저하됩니다.&lt;/p&gt;&lt;p&gt;이 때문에 스프링과 같은 프레임워크들에서는
유저 쓰레드를 무한정 만들지 않고 제한된 개수의 OS 쓰레드를 최대한 효율적으로 사용하기 위해 노력합니다.
대표적인 기술이 바로 &lt;strong&gt;쓰레드풀&lt;/strong&gt;에 적정한 개수의 쓰레드만을 관리하고 재활용하는 방법입니다.
이때 OS 쓰레드를 생성하고 제거하는 작업 자체도 비용이 드는 작업이므로
일반적으로 쓰레드풀에서는 애플리케이션 구동 시점에 최소한의 쓰레드를 미리 생성하여 대기합니다.&lt;/p&gt;&lt;h2&gt;Many-to-Many 모델&lt;/h2&gt;&lt;p&gt;마지막으로 복수의 유저 쓰레드들이 복수의 OS 쓰레드들에 연결되는 구조입니다.
고 언어의 고루틴, 코틀린의 코루틴, 자바21의 가상 쓰레드에서 지원됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:506px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/a4c84ba09e5031bf5310771901224a60/29f4e/many-to-many.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:123.92638036809815%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEtElEQVQ4y3WV+1OUZRTH+SdqvMCy+97fd3cRl10uK4iwsEDCLuBykVtDKCorIHkhQzSxBsUyTXPGKa9EZnmppplq/KFfsmlGQVH7B+rHfmimGaecyfk0z7OyLGQ/PLvve57nfJ/vOd9zzptlmw6O5cVre/E6Phzbi22KlbKbmo3mstByTQzFlDaxl/ZzfHhtX9qetbChe0yUbA1TseS7BFNtQiVBBo50MXy8jw3RMIaiy0sXLlNyNDS3kfbJEj+GalHVsJ6ekU2UR0oxnoPals2Bi4PMPD7J9MMTTH39BoGCfCzDkZcVhgvoGmqkvi2KrdsphrrbpL4jyrmfJrgwN8mZHw6zoXY9Wq5BsDDA+7fHuH7/Iz6/d44P7xwiUl+OmqMTKg5y9Kt90ufC7FG6h1sk0yzFpfH66deYmT/FjbsX5YEtB7pRXQaWYTF0vIfLD45x+cEU45eGyPP7JWBTbx0fz01ya/YKl++9y8TVYZnLLNWl0bkrzpVHJ5ieO8n52UlinXUI5lIcx6FzoIlt+7vJy8/DlOFalFWFOfvjBJ/cP8XML+8xOPmq1CEliu3QsSvOO1dHad0alzmVSbZFfk3W+oNUlkZQ3VpKUWFXLKKJCG/PjNI/3sna/Hws3U6JIph4slVKgmHqaxpkci3Dls6mblFcVEJttBZdM6RN7OuqQU2kjorSCjyrVWwjVS3psvE5PulQtq6MRFNCOgpQ07ApChUTraqRIKlyMYnVx6mOVGOIS5yMOnQsJ/0iQDRFpzhUTKI5gd+bh+rRKS4soba6Vu6Jc42xJirKK9E8eioFpje1LCcVsmMuBRVMgoEQbYk2fI6fUEFhmuGmpk2UhdejK3o6/IWiThd25loENQmsCdDS3MK6klIiFVWSWbh4nWT6IrAXAmaCihwKlffu3sfU0Sl8z0VaDpb5vAi47MACoFjDg8OMj42nVc8EtIUG5jKGdkYOU4rnYeo2oYIi2lra8dl+DM2UOS0KlWDoljyzhN3z/xTgMtqeHBcBfx7xVzZKpQVLsS9CjtVtJOBfI89kRmQvCTmDoW3YdPSPcuzS9yS6k2huRYYoS8qj0No7wtSl27T37cbSrf9haIoB60fN9dCVPMT1R8+4NveET+/+Sax1C7qioXtU4p1Jrs4+kXtfzD+lfete6SN8/xNyCtDNwbPfcHP+b76d/Y1bj/5h5/gHKK5cVJeb4YnzfPn4Gd/N/sqN+b948+Q1VFcuXscvSS0RRQBqbg+J3l2Swc2HT5m+8zvR+nYMVcdQNOqaepj++Q+599m9JzR3DqRT4pgvUNmxRFmYxDf3M3jwDDUN7XLki24R/WqoGrWNXSTHTxNr7cPSrFS4GRhZix8jU3aA6M+cFatY9dLLuLNdskRUjyaXUDt3dQ45K1aSvXLVEnt6OCz0bl9vH/v2jMq6Ey3W3JigOhKlrqaOnq4eOVlqqmp46+BhtvZtozHWTLyhkYaNMQrWBmXBS4YLE2ZzWwfb+3dw5PARktuTDGxPktyxU06V0T2j8sLK8kpGhkZI7kjKc90d3YztH6M0XJYebYufUdVAcavyWXSFyNsafz66YqQHrrB7XB7JRtjEeyC/YEmn/QtSBXNjON1vYwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;many-to-many&quot; title=&quot;many-to-many&quot; src=&quot;/static/a4c84ba09e5031bf5310771901224a60/29f4e/many-to-many.png&quot; srcSet=&quot;/static/a4c84ba09e5031bf5310771901224a60/222b7/many-to-many.png 163w,/static/a4c84ba09e5031bf5310771901224a60/ff46a/many-to-many.png 325w,/static/a4c84ba09e5031bf5310771901224a60/29f4e/many-to-many.png 506w&quot; sizes=&quot;(max-width: 506px) 100vw, 506px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이 구조는 위에서 소개한 두 모델의 장점들만을 합쳤다는 점에서 가장 이상적인 멀티쓰레딩 모델이라고 불립니다.&lt;/p&gt;&lt;p&gt;우선 One-to-One 모델과 마찬가지로 복수의 OS 쓰레드를 활용하므로 &lt;strong&gt;멀티코어의 이점&lt;/strong&gt;을 누릴 수 있으며,
혹시라도 특정 OS 쓰레드가 블록되어도 나머지 OS 쓰레드들은 그대로 활용할 수 있습니다.&lt;/p&gt;&lt;p&gt;나아가 Many-to-One 모델과 마찬가지로
&lt;strong&gt;가벼운 무게의 유저 쓰레드&lt;/strong&gt;를 무한정 만들어도 프로세스에 무리가 가지 않으며,
유저 쓰레드 간의 &lt;strong&gt;컨텍스트 스위칭은 유저 레벨에서 발생하므로 굉장히 빠릅니다&lt;/strong&gt;.
Many-to-Many 모델의 구현체는 적절한 개수의 유저 쓰레드들만을 OS 쓰레드들에 연결시키는 등 최적화 작업을 내부적으로 수행하며,
커널에서는 OS 쓰레드 간의 컨텍스트 스위칭 없이 그때 그때 OS 쓰레드에 연결되는 유저 쓰레드들의 코드를 실행하면 됩니다.&lt;/p&gt;&lt;p&gt;Many-to-Many 모델의 유일한 문제점은 바로 프로그래밍 언어를 구현하는 엔지니어들 입장에서 구현하기 힘들다는 점입니다.
즉, Many-to-Many 모델이 지원되는 언어는 희소합니다.
예를 들어, 자바의 경우 자바21에서 드디어
&lt;a href=&quot;https://docs.oracle.com/en/java/javase/20/core/virtual-threads.html#GUID-15BDB995-028A-45A7-B6E2-9BA15C2E0501&quot;&gt;가상 쓰레드(Virtual Thread)&lt;/a&gt;가
도입되었습니다.
그러나 자바8이나 자바11과 같은 낮은 버전을 사용하는 것이 국룰인 자바 진영에서,
특히 WebFlux 기반의 애플리케이션들에서 자바 버전을 굳이 업데이트를 할지 의문입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:500px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/524ed57d99622b52b6502161fab43804/b0a15/java-version-update-meme.webp&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:100%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/webp;base64,UklGRvYAAABXRUJQVlA4IOoAAABwBQCdASoUABQAPtFgqU+oJSOiKAgBABoJQAB8aHoAZjLn3iSbj15o8dnwoSBXFOF4/dkAAP4LPiDkUz4PZfxn0JZ+VCxqYJ06EuRXxJDXja4fHCJpuiJqI5g6BqyA0O0AKaHODHU0PuwFf6YGj1mGi8hWWMLpWLS7bVF9R7VWe0EL1M+Xleh2zEje0d2I+YbYiDdajgZloFlXEvK0upCDZiMlQEngjbOlofROt9PbyToevk4cCQj2RAREfWY+Jhiwmm/pOwzNq6D1tKZsunmRjqmp3aKlPsdJILrPcOLw2JcBIA6au7uAAAA=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;java-version-update-meme&quot; title=&quot;java-version-update-meme&quot; src=&quot;/static/524ed57d99622b52b6502161fab43804/b0a15/java-version-update-meme.webp&quot; srcSet=&quot;/static/524ed57d99622b52b6502161fab43804/94563/java-version-update-meme.webp 163w,/static/524ed57d99622b52b6502161fab43804/647a8/java-version-update-meme.webp 325w,/static/524ed57d99622b52b6502161fab43804/b0a15/java-version-update-meme.webp 500w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;개인적으로 Many-to-Many 모델 기반의 언어 및 버전을 팀에 도입해야만 하는 상황은
대규모 트래픽이 발생하고 있거나, 게임 서버와 같은 특수한 케이스밖에 없다고 생각합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://docs.oracle.com/cd/E19620-01/805-4031/6j3qv1oej/index.html&quot;&gt;Orcale - Multithreading Models&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.geeksforgeeks.org/multi-threading-models-in-process-management/&quot;&gt;Geeks for Geeks - Multi Threading Models in Process Management&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Thread_(computing)&quot;&gt;Wikipedia - Thread&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=vorIqiLM7jc&quot;&gt;유튜브 - 쉬운코드&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[OS] 쓰레드의 종류]]></title><description><![CDATA[하드웨어, OS 커널, 유저 레벨에서의 쓰레드들이 서로 어떻게 다른지 가볍게 정리합니다.]]></description><link>https://bugoverdose.github.io/computer-science/thread-types/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/thread-types/</guid><pubDate>Sat, 14 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;기본 구조&lt;/h2&gt;&lt;p&gt;저희가 프로그래밍 언어로 개발된 사용자 애플리케이션은 OS 커널을 통해 하드웨어 위에서 실행됩니다.
커널이란 운영체제의 핵심으로 시스템의 전반을 관리하며 하드웨어와 관련된 작업을 수행합니다.
하드웨어란 메모리 및 CPU만이 아니라 키보드, 스피커 등의 디바이스를 지칭합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/f988dc20ebc02f5c046776aa85bade39/e6c84/basic-structure.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:51.533742331288344%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACqElEQVQoz02M/0/MARzG709p9EVF0lWcnFRSwmpyZNaQFH7wddiky7fUtcYPbEzlZopNdR/3qfTtirvPddI3h+vuukut6y4qEqVf2F7m02x+ePY8z/v9PI8iXhnLfd0lDDUVPHtQRkNVGcZqHWK1TubGqnKZ/7/9Q0NVudxprNahv12CWqVCcfX8CVgYgs89MPMapm14xrsZnTDj85ll/zUgMeOX8E284qvfwqzfwlxAghnbcudvd8nOndILKCq1Z2G6l6WRTn6NdrHgMfFy0MiLfhGbvYWx4VbEPoE+ewvP3giYh0TMgyI9b5tZ9Jj4PdrNkrsDZnp5eEuLouzyKRYDnUw6DXwaMfJ5RGTWIzLnEZn3NjHlFpkeEfnmbWLUKch63tvMF0+TnJ9yG/E7BX5OmbhbcXF5cH6ynTFHA5MuQYbfJeD4UI/9fT3eYYGPTgHvsIGA+zljTgMuR6Oc87kM+JwGxh0NfPe3Lw9WFJ+BH3bwSeC3wqQVAjYcHhNGewsudyevHW10f+hg0NmBYG+m190FU7blvL8HJiyw8I6aymIUWzerMYn36LfW0md5zIBUy5D1CVJzNV2tenqkOswvH9HWpcdmfYqpXS//BiyP6Zdq6ZfqGLDWYevUk5meiiIiVon6RB4p5wqJO5aDsmAv0Uezid2dztrsVKKOZJF8Op+U00dYk5dJlCaVdbtSUJ88TFxhDjEFGuKP72f1oSxC4tahiErexJ5rRRyrvMWBayXsv6pFU1JE2tnjBGkSicnXkHvjuozovGyC9iYRmZvBwZulHNVVkHPlMjnaIvbd0BK5NQHFytAwgrYoWbFNRXDaRoK3qYjclUyUagMr10cTmqEmPCORkLQEWYckKAmLWUto+ibCd2xh1fbNRO5MImJ7IsHh4fwBexg1M06/pQMAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;basic-structure&quot; title=&quot;basic-structure&quot; src=&quot;/static/f988dc20ebc02f5c046776aa85bade39/a6d36/basic-structure.png&quot; srcSet=&quot;/static/f988dc20ebc02f5c046776aa85bade39/222b7/basic-structure.png 163w,/static/f988dc20ebc02f5c046776aa85bade39/ff46a/basic-structure.png 325w,/static/f988dc20ebc02f5c046776aa85bade39/a6d36/basic-structure.png 650w,/static/f988dc20ebc02f5c046776aa85bade39/e548f/basic-structure.png 975w,/static/f988dc20ebc02f5c046776aa85bade39/e6c84/basic-structure.png 1148w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이때 중요한 점은 쓰레드라는 용어가
사용자 프로그램, 운영체제, 하드웨어 중 어떤 레벨에서 쓰이는지에 따라
전혀 다른 대상을 지칭한다는 점입니다.&lt;/p&gt;&lt;p&gt;이번 글에서는 이러한 쓰레드의 종류에 대해 이야기해보고자 합니다.&lt;/p&gt;&lt;h2&gt;하드웨어 쓰레드&lt;/h2&gt;&lt;p&gt;하드웨어 쓰레드나 &lt;a href=&quot;https://www.intel.com/content/www/us/en/gaming/resources/hyper-threading.html&quot;&gt;인텔의 하이퍼쓰레드&lt;/a&gt;는
개별 물리적인 코어의 사용률을 극대화하기 위해 사용되는 &lt;strong&gt;논리적인 코어&lt;/strong&gt;를 지칭합니다.&lt;/p&gt;&lt;p&gt;프로그램의 실행이란 결과적으로 CPU 코어에서 연산 작업이 수행됨을 의미합니다.
문제는 이러한 연산 작업을 수행하는 과정에서 코어가 쉬는 시간(idle time)이 생긴다는 점입니다.
특히 메모리에서 데이터를 가져오고, 연산 결과를 메모리에 저장하기 위해 메모리에 접근하는 동안 코어는 대기해야 합니다.&lt;/p&gt;&lt;p&gt;이때 하나의 물리적인 코어에서 복수의 하드웨어 쓰레드를 관리하는 구조를 생각해봅시다.
특정 코어에서 동시에 실행될 수 있는 하드웨어 쓰레드는 한 개이지만,
특정 하드웨어 쓰레드가 대기하는 동안 다른 하드웨어 쓰레드가 실행되는 방식으로
코어를 훨씬 효율적으로 사용할 수 있게 됩니다.&lt;/p&gt;&lt;p&gt;그런데 OS 커널 입장에서는 물리적인 코어에 OS 쓰레드 하나를 할당하든, 하드웨어 쓰레드 하나마다 OS 쓰레드 하나씩 할당하든 차이가 없습니다.
때문에 실질적으로 하드웨어 쓰레드는 &lt;strong&gt;논리적인 코어&lt;/strong&gt;라고 볼 수 있습니다.
즉, 예를 들어 싱글 코어 CPU에 하드웨어 쓰레드가 2개인 경우,
OS는 이 CPU를 듀얼 코어로 인식하고 듀얼 코어에 맞춰서 OS 쓰레드들을 스케줄링하게 됩니다.&lt;/p&gt;&lt;h2&gt;OS 쓰레드&lt;/h2&gt;&lt;p&gt;OS 쓰레드란 &lt;strong&gt;OS 커널 레벨에서 생성되고 관리되는 쓰레드&lt;/strong&gt;로
저희가 일반적으로 쓰레드라고 했을 때 지칭하는 대상이 바로 OS 쓰레드입니다.
특히 운영체제 관련 문서에서 쓰레드라고 지칭하면 높은 확률로 OS 쓰레드를 의미합니다.&lt;/p&gt;&lt;p&gt;OS 쓰레드는 네이티브(native) 쓰레드 혹은 커널(kernel) 쓰레드 등의 용어로도 불립니다.
개발자가 작성한 사용자 코드와
시스템 콜로 인해 커널 코드로 전환된 후에 실행되는 커널 코드 모두 실질적으로 OS 쓰레드에서 실행되는데,
특히 후자의 경우를 지칭하기 위해 커널 쓰레드라는 용어가 사용됩니다.&lt;/p&gt;&lt;p&gt;이때 OS 쓰레드가 프로세스와 마찬가지로 커널 스케줄링의 단위라는 점이 중요합니다.
예를 들어, OS 쓰레드 간에 컨텍스트 스위칭이 발생할 때마다
유저 모드에서 커널 모드로 전환되고,
커널 코드가 CPU에서 실행되며 CPU의 리소스를 사용되고,
다시 유저 모드로 전환된 다음에 본격적으로 사용자 프로그램이 실행됩니다.
물론 상대적으로 OS 쓰레드가 프로세스보다는 가볍습니다.
그러나 여전히 &lt;strong&gt;OS 쓰레드들 간의 컨텍스트 스위칭&lt;/strong&gt;은
커널의 개입을 동반하므로 여전히 &lt;strong&gt;시간적인 비용과 CPU 연산에 따른 비용&lt;/strong&gt;을 발생시킵니다.&lt;/p&gt;&lt;h2&gt;유저 쓰레드&lt;/h2&gt;&lt;p&gt;유저 쓰레드 혹은 &lt;strong&gt;그린 쓰레드&lt;/strong&gt;&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;란
간단히 말해 OS 스레드 개념을 &lt;strong&gt;프로그래밍 레벨에서 추상화한 것&lt;/strong&gt;입니다.
프로그래밍 언어들은 각자 자신만의 방식으로 유저 쓰레드를 구현하여 개발자들에게 제공합니다.&lt;/p&gt;&lt;p&gt;예를 들어, 자바에서 &lt;code&gt;Thread&lt;/code&gt; 인스턴스를 하나 생성하면 사용자 스페이스에서 유저 쓰레드가 하나 생성됩니다.
그리고 &lt;code&gt;start&lt;/code&gt; 메서드를 호출하면 해당 유저 쓰레드에 작성한 코드는 OS 레벨의 쓰레드에서 실행됩니다.
아래의 경우 &lt;code&gt;&amp;quot;Hello world!&amp;quot;&lt;/code&gt;라고 출력될 것입니다.
그 외에도 고 언어의 &lt;code&gt;go&lt;/code&gt; 키워드와 같이 별도의 문법을 제공하는 경우도 존재합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 유저 쓰레드 하나를 생성&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Thread&lt;/span&gt; thread &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Thread&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Hello world!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 시스템 콜을 통해 OS 레벨의 쓰레드를 하나를 생성하여 코드 실행&lt;/span&gt;
thread&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] Hello world!&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;유저 쓰레드 구현체의 주요 특징은 OS 커널이 아니라 유저 스페이스에서 관리 및 스케줄링된다는 점입니다.
즉, &lt;strong&gt;유저 쓰레드 간의 컨텍스트 스위칭은 커널이 개입하지 않기 때문에 OS 쓰레드 간의 컨텍스트 스위칭에 비해 압도적으로 효율적&lt;/strong&gt;입니다.&lt;/p&gt;&lt;p&gt;그러나 모든 프로그래밍 언어에서 이러한 이점을 누리는 것은 아닙니다.
유저 쓰레드 구현체에 따라 유저 쓰레드 간의 컨텍스트 스위칭이 발생하지 않을 수도 있기 때문입니다.
반대로 구현체에 따라 유저 쓰레드 간의 컨텍스트 스위칭은 발생하지만
멀티코어의 이점은 누리지 못할 수도 있습니다.&lt;/p&gt;&lt;p&gt;이러한 차이는 특히 유저 쓰레드 구현체마다 유저 쓰레드를 OS 쓰레드에 연결시키는 방법,
즉 &lt;strong&gt;&lt;div to=&quot;/computer-science/multi-threading-models&quot;&gt;멀티쓰레딩 모델(Multi-Threading Model)&lt;/div&gt;&lt;/strong&gt;의
차이에서 옵니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Thread_(computing)&quot;&gt;Wikipedia - Thread&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.intel.com/content/www/us/en/gaming/resources/hyper-threading.html&quot;&gt;Intel - Hyper-Threading&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=vorIqiLM7jc&quot;&gt;유튜브 - 쉬운코드&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;문서에 따라 그린 쓰레드는 다르게 정의됩니다.&lt;/p&gt;&lt;p&gt;Many-to-One 모델과 Many-to-Many 모델에서의 사용자 스레드만을 그린 쓰레드라고 정의하는 경우도 있고,
가상머신에서 구현된 유저 쓰레드를 그린 쓰레드라고 정의하는 경우도 있습니다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[서킷 브레이커 패턴의 필요성과 구조]]></title><description><![CDATA[재시도 패턴과 연쇄적 실패 문제를 토대로 서킷 브레이커 패턴의 필요성에 대해 설명하고, 서킷 브레이커의 기본 구조에 대해 간략히 정리하겠습니다.]]></description><link>https://bugoverdose.github.io/computer-science/circuit-breaker-pattern/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/circuit-breaker-pattern/</guid><pubDate>Thu, 12 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;서킷 브레이커 패턴이란 말 그대로 회로 차단기의 원리를 활용한 소프트웨어 디자인 패턴입니다.
분산 시스템 및 MSA 환경에서 주로 사용되며, 시스템의 전체적인 신뢰성과 내결함성(fault tolerance)을 향상시킬 수 있습니다.&lt;/p&gt;&lt;p&gt;해당 글에서는 서킷 브레이커 패턴의 필요성과 기본 구조에 대해 간략히 정리하겠습니다.&lt;/p&gt;&lt;h2&gt;재시도 패턴&lt;/h2&gt;&lt;p&gt;애플리케이션이 다른 마이크로서비스 혹은 DB과 통신할 때에는 다양한 문제가 발생할 수 있습니다.
순간적으로 네트워크 연결이 끊기거나, 서비스의 일시적인 장애가 대표적입니다.
전자의 경우 다시 한 번 요청을 보내면 거의 무조건 성공하고,
후자의 경우 시간이 지나면 장애가 자동으로 해결될 수도 있습니다.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;재시도 패턴(Retry Pattern)&lt;/strong&gt;이란 이러한 예외적인 상황에 대응하기 위해
애플리케이션이 요청이 성공할 때까지 동일한 요청을 몇 번씩 보내는 설계 패턴입니다.
대상 서비스의 장애가 해결될 때까지 걸리는 시간을 고려하여 1~5초 정도 대기한 다음에 재시도할 수도 있습니다.&lt;/p&gt;&lt;p&gt;그러나 요청의 실패 원인이 일시적인 이슈가 아닌 경우, 재시도 패턴은 문제가 오히려 해가 될 수 있습니다.
애플리케이션은 재시도 횟수를 전부 채울 때까지 당연히 실패할 요청을 반복적으로 재시도하기 때문입니다.
서버 애플리케이션의 경우 각 요청마다 장애가 발생한 서비스로 수차례씩 통신을 재시도하다보면,
제대로 처리하지 못한 요청들이 서버에 점차 쌓이게 됩니다.&lt;/p&gt;&lt;h2&gt;연쇄적 실패 문제&lt;/h2&gt;&lt;p&gt;이러한 문제는 MSA 환경에서 심화됩니다.&lt;/p&gt;&lt;p&gt;예를 들어, 특정 작업을 수행하기 위해 서비스A는 서비스B에 통신하고,
서비스B는 서비스C에 통신하고, 서비스C는 서비스D에 통신하는 경우를 생각해봅시다.
만일 서비스D에서 치명적인 장애가 발생한다면,
서비스D로 요청을 보내는 서비스C도 실패하고, 서비스B도 실패하고, 서비스A도 실패하게 됩니다.
이것이 바로 &lt;strong&gt;연쇄적 실패(Cascading Failure)&lt;/strong&gt; 문제입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/2ee407eda681312304a3d7d597f26dc1/e6b69/cascade-failure.webp&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:57.668711656441715%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/webp;base64,UklGRm4AAABXRUJQVlA4IGIAAABwAwCdASoUAAwAPtFWo0uoJKMhsAgBABoJZwAAW+qrkrLJTQAA/u/k85QocQ2UYb+BYtk58lIDlYNoXEco24HGCQli1Hz5XbZa6DMywIPbANs8kPvxWksMw14ZK6AbIAAAAA==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;cascade-failure&quot; title=&quot;cascade-failure&quot; src=&quot;/static/2ee407eda681312304a3d7d597f26dc1/c1dc5/cascade-failure.webp&quot; srcSet=&quot;/static/2ee407eda681312304a3d7d597f26dc1/94563/cascade-failure.webp 163w,/static/2ee407eda681312304a3d7d597f26dc1/647a8/cascade-failure.webp 325w,/static/2ee407eda681312304a3d7d597f26dc1/c1dc5/cascade-failure.webp 650w,/static/2ee407eda681312304a3d7d597f26dc1/1e975/cascade-failure.webp 975w,/static/2ee407eda681312304a3d7d597f26dc1/e6b69/cascade-failure.webp 1122w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;여기에 더해 각 서비스에 재시도 패턴이 적용되었다고 생각해봅시다.
우선 서비스C에서 서비스D로 요청을 5번 재시도한다면, 그 사이에 서비스B와 서비스A는 대기하게 됩니다.
그런데 서비스B에서 서비스C로 요청을 5번 재시도하는 경우, 결과적으로 서비스C는 25번 재시도하게 됩니다.
여기에 더해 서비스A에서 서비스B로 요청을 5번 재시도하는 경우, 결과적으로 서비스C는 무지성으로 125번 재시도하게 됩니다.&lt;/p&gt;&lt;h2&gt;서킷 브레이커의 도입&lt;/h2&gt;&lt;p&gt;이러한 문제를 해결하는 방법 중 하나가 바로 서킷 브레이커 패턴입니다.&lt;/p&gt;&lt;p&gt;서킷 브레이커는 기본적으로 일정 기간 동안 특정 작업이 실패한 비율이 과하게 높으면
&lt;strong&gt;해당 작업은 어차피 실패할 것이라고 간주&lt;/strong&gt;하고 &lt;strong&gt;작업을 수행하지 않고 즉시 에러를 반환&lt;/strong&gt;합니다.
즉, 일정 기간 동안 재시도 작업을 하지 않는 방식으로 재시도 패턴이 가져오는 기본적인 성능 이슈는 해결될 수 있습니다.
여기에 더해 서킷 브레이커에서 장애 알림을 발송하거나, 장애 대응 스크립트를 실행하는 등의 작업을 추가로 구현할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/90d1bc890e049b488275f57f9ea1eb47/e6b69/circuit-breaker-routing.webp&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:57.668711656441715%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/webp;base64,UklGRnYAAABXRUJQVlA4IGoAAAAQBACdASoUAAwAPtFUo0uoJKMhsAgBABoJaQAD45ISPigivBpJdRz6AAD+7+R1ZZrYF3IlVMv4g/hXfG/Gd7T+myu7tP/tSOLW3KmjrqqaCIcwwWKY42nU05v3hBBwPAPDVMd+/7/k4AAA&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;circuit-breaker-routing&quot; title=&quot;circuit-breaker-routing&quot; src=&quot;/static/90d1bc890e049b488275f57f9ea1eb47/c1dc5/circuit-breaker-routing.webp&quot; srcSet=&quot;/static/90d1bc890e049b488275f57f9ea1eb47/94563/circuit-breaker-routing.webp 163w,/static/90d1bc890e049b488275f57f9ea1eb47/647a8/circuit-breaker-routing.webp 325w,/static/90d1bc890e049b488275f57f9ea1eb47/c1dc5/circuit-breaker-routing.webp 650w,/static/90d1bc890e049b488275f57f9ea1eb47/1e975/circuit-breaker-routing.webp 975w,/static/90d1bc890e049b488275f57f9ea1eb47/e6b69/circuit-breaker-routing.webp 1122w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;서킷 브레이커 아키텍처&lt;/h2&gt;&lt;p&gt;서킷 브레이커란 간단히 말해서 세 가지 상태 사이를 오가는 유한 상태 기계(finite-state machine)입니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;Closed&lt;/code&gt;: 외부 서비스와 연결된 상태&lt;/li&gt;&lt;li&gt;&lt;code&gt;Open&lt;/code&gt;: 일정 기간 동안 작업의 실패율이 너무 높아서 외부 서비스와의 연결을 일시적으로 끊은 상태&lt;/li&gt;&lt;li&gt;&lt;code&gt;Limited Closed&lt;/code&gt; / &lt;code&gt;Half Open&lt;/code&gt;: 외부 서비스로의 연결을 제한적으로 시도하는 상태&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/348e9c528011de57d01be07e8c728197/5c263/circuit-breaker-architecture.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:49.69325153374233%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABXUlEQVQoz31Sa5OCMAzk//85Hc8PflAUSovyULCFFl97szlhuLu560xIS5LNdtMoeI+iKNA0Ddq2FbPW4vV6iT2fTzjncLlcUNf19H+0+eI5ejwekrzdbmG0xuFwQAjDlBRCQJKmyLLsHQu/QO73+wQe8eO9R5qmuN1u0FpLoKoqOGunGItOp5OwJ+OiLAWc57ZphBRzIgYJ0jmH8/mMvu+R5zmWyyU+ViuYPJdYXdXwPog86/Uai8UCSZIIoNFGmlyvV0RMIAC1U0oJILsNwyDsGGcRm1rrhCWLmXc8HkX7zWYjZASQP7ghGEGMMd/E5p4NCMLGSn3pud/vpYaDojz0cmUCdl2HOI6FDf2P4cni8OZN5k0JSMYylLIshQGZ6SwTXRik4LzyaPMz97wNPQdJdjwLoHsPgzrx6vRsQOZkrFIlU4538fRWGR9trJ3eIf5Z8+Lm/TRI4K9FwE87MP+KoGO4ZgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;circuit-breaker-architecture&quot; title=&quot;circuit-breaker-architecture&quot; src=&quot;/static/348e9c528011de57d01be07e8c728197/a6d36/circuit-breaker-architecture.png&quot; srcSet=&quot;/static/348e9c528011de57d01be07e8c728197/222b7/circuit-breaker-architecture.png 163w,/static/348e9c528011de57d01be07e8c728197/ff46a/circuit-breaker-architecture.png 325w,/static/348e9c528011de57d01be07e8c728197/a6d36/circuit-breaker-architecture.png 650w,/static/348e9c528011de57d01be07e8c728197/e548f/circuit-breaker-architecture.png 975w,/static/348e9c528011de57d01be07e8c728197/3c492/circuit-breaker-architecture.png 1300w,/static/348e9c528011de57d01be07e8c728197/5c263/circuit-breaker-architecture.png 1636w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;기본적으로 서킷 브레이커는 &lt;code&gt;Closed&lt;/code&gt; 상태에서 외부 서비스와 통신하며
작업을 수행하고 전체적인 요청 횟수, 성공 횟수, 실패 횟수에 대해 기록합니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;Closed&lt;/code&gt; 상태에서 일정 기간 동안의 실패 비율이 너무 높거나, 연속적으로 모든 요청이 실패하는 등의 문제가 발생하면 서킷 브레이커는 &lt;code&gt;Open&lt;/code&gt; 상태로 전환됩니다.
&lt;code&gt;Open&lt;/code&gt; 상태에서는 외부 서비스로 요청을 보내봤자 어차피 실패할 것이라는 판단 하에,
무조건 해당 작업을 실패 처리하거나 외부 서비스 대신 다른 방식으로 작업을 수행합니다.
핵심은 &lt;code&gt;Open&lt;/code&gt; 상태가 일정 기간 동안만 유지된다는 점입니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;Open&lt;/code&gt; 상태에서 충분한 시간이 지난 이후 서킷 브레이커는 &lt;code&gt;Limited Closed&lt;/code&gt; 상태가 되고
&lt;code&gt;Closed&lt;/code&gt;였을 때와 동일한 방식으로 외부 서비스로 통신을 시도합니다.
이때 실험적으로 시도해본 요청이 성공하면 서비스에 문제가 없다고 판단하고 다시 &lt;code&gt;Open&lt;/code&gt; 상태가 됩니다.
그러나 실험적으로 시도해본 요청들이 여전히 실패한다면 다시 &lt;code&gt;Closed&lt;/code&gt;가 되어 대상 서비스와 연결을 끊습니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://digitalvarys.com/what-is-circuit-breaker-design-pattern/&quot;&gt;What is Circuit Breaker Design Pattern?&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://medium.com/@mertcakmak2/circuit-breaker-implementation-in-golang-efdfa40e49dc&quot;&gt;Circuit Breaker Implementation in GoLang&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://learn.microsoft.com/en-us/azure/architecture/patterns/retry&quot;&gt;Retry Pattern&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Couchbase] CAS 기반 낙관적 락킹]]></title><description><![CDATA[낙관적 락킹과 비관적 락킹에 대해 정리하고, 카우치베이스에서 제공하는 CAS 기반 낙관적 락킹에 대해 실습 코드와 함께 정리해봅니다.]]></description><link>https://bugoverdose.github.io/computer-science/optimistic-locking-with-cas/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/optimistic-locking-with-cas/</guid><pubDate>Tue, 10 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;낙관적 락킹과 비관적 락킹&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;낙관적 락킹(Optimistic Locking)&lt;/strong&gt;과 &lt;strong&gt;비관적 락킹(Pessimistic Locking)&lt;/strong&gt;은
데이터베이스에서 사용되는 동시성 제어 방법입니다.&lt;/p&gt;&lt;p&gt;낙관적 락킹의 경우 애초에 여러 사용자가 동일한 데이터를 동시에 수정할 일이 웬만하면 없을 것이라 가정하고,
데이터 접근 시점에 락을 걸지 않습니다.
각 사용자는 데이터에 접근하여 일련의 비즈니스 로직을 수행하고,
최종적으로 데이터 수정 작업을 DB에 반영하려는 시점에 해당 데이터가 다른 사용자에 의해 변경되었는지를 검증합니다.
만일 그 사이에 해당 데이터가 수정되지 않았다면 변경 사항을 반영(commit)하고,
다른 사용자에 의해 데이터가 수정되었다면 비즈니스 로직을 롤백(rollback)해줘야 합니다.
개인적으로 &lt;strong&gt;낙관적인 동시성 제어(OCC; Optimistic Concurrency Control)&lt;/strong&gt;라는 용어가 더 적절하다고 생각합니다.&lt;/p&gt;&lt;p&gt;비관적 락킹의 경우 특정 사용자는 수정하려는 데이터에 접근했을 때 해당 데이터에 배타 락(exclusive lock)을 겁니다.
락이 걸린 데이터를 수정하고 싶은 사용자들은 락을 건 쪽에서 락을 풀어줄 때까지 계속 대기해야 합니다.
비관적인 락킹은 락이 해제될 때까지 비즈니스 로직을 수행하지 못하고 대기해야 한다는 점에서 비용이 발생하지만,
롤백으로 인한 비용이 더 크다고 판단될 때 적절한 방식입니다.&lt;/p&gt;&lt;p&gt;낙관적 락킹의 경우 특정 데이터에 접근할 수 있는 사용자/클라이언트가 한 명밖에 안 되는 등
데이터 경합(race condition)이 거의 발생하지 않는 비즈니스 로직에서는 확실히 성능상 이점이 있습니다.
그러나 그 외의 경우에서는 오히려 전체적인 성능이 훨씬 저하될 수도 있습니다.
데이터 경합이 발생할 때마다 한 명을 제외하고 전원에게 롤백이 발생하기 때문입니다.&lt;/p&gt;&lt;p&gt;정리하자면 낙관적 락킹은 데이터 경합이 발생하는 빈도가 매우 낮은 경우에 적절하며,
이러한 상황은 세션 서버, 플레이어의 상태가 꾸준히 변화하는 게임 서버, 사용자 프로필 수정 로직 등의 경우가 대표적입니다.&lt;/p&gt;&lt;h2&gt;카우치베이스와 CAS&lt;/h2&gt;&lt;p&gt;카우치베이스(Couchbase)는 Document 기반 Key-Value 스토리지입니다.
카우치베이스에 저장되는 모든 문서는 세 가지 메타데이터를 지닙니다.
이는 각각 &lt;strong&gt;CAS 값&lt;/strong&gt;, &lt;strong&gt;TTL&lt;/strong&gt;, &lt;strong&gt;플래그&lt;/strong&gt;로 개발자가 별도로 작업하지 않아도
카우치베이스에서 자체적으로 문서 생성 시점에 생성하고 관리해줍니다.&lt;/p&gt;&lt;p&gt;이 중 CAS는 &lt;strong&gt;Compare And Swap&lt;/strong&gt;의 약어이며, 낙관적 락킹에 사용됩니다.
운영체제에서 사용되는 CAS 알고리즘과 동일합니다.&lt;/p&gt;&lt;p&gt;카우치베이스에서 CAS는 특정 문서의 현재 상태를 나타내는 값이며, 문서가 수정될 때마다 문서의 CAS도 변화합니다.
만일 특정 문서를 수정하거나 삭제하고자 할 때 서버로 CAS 값을 넘길 경우,
서버에서는 문서의 현재 CAS와 해당 CAS 값을 비교하게 됩니다.
이때 CAS가 일치한다면 수정/삭제 작업은 성공적으로 서버에 반영하고
불일치한다면 수정/삭제 작업은 실패합니다.&lt;/p&gt;&lt;p&gt;참고로 CAS 기반 낙관적 락킹을 희망하지 않는 경우 수정 및 삭제 작업에서 CAS를 넘기지 않으면 됩니다.
또한 카우치베이스에서도 (권장되지는 않지만) 비관적 락킹을 지원하니 궁금할 경우
&lt;a href=&quot;https://docs.couchbase.com/go-sdk/current/howtos/concurrent-document-mutations.html#pessimistic-locking&quot;&gt;공식문서&lt;/a&gt;를
참고하기 바랍니다.&lt;/p&gt;&lt;h2&gt;실습&lt;/h2&gt;&lt;p&gt;카우치베이스 서버를 구동시키고, Go 언어로 연동하여 CAS 기반 낙관적 락킹을 실습해보겠습니다.&lt;/p&gt;&lt;h3&gt;서버 셋업 및 연동&lt;/h3&gt;&lt;p&gt;카우치베이스 서버 구동 및 셋업은
&lt;strong&gt;&lt;div to=&quot;/development/couchbase-setup-dockerfile&quot;&gt;지난 게시글&lt;/div&gt;&lt;/strong&gt;을 참고하기를 바랍니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;Connect&lt;/code&gt; 함수는 클러스터에 연결하고 클러스터 내부의 &lt;code&gt;user-bucket&lt;/code&gt; 버켓에 연결된 컬렉션을 반환합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&amp;quot;log&amp;quot;&lt;/span&gt;

	&lt;span class=&quot;token string&quot;&gt;&amp;quot;github.com/couchbase/gocb/v2&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	username       &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;
	password       &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;pw1234&amp;quot;&lt;/span&gt;
	bucketName     &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;user-bucket&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Collection &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	cluster&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;couchbase://localhost&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ClusterOptions&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		Authenticator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;PasswordAuthenticator&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			Username&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
			Password&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Fatal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; cluster&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Bucket&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bucketName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;DefaultCollection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;스키마 및 데이터 조작 함수 정의&lt;/h3&gt;&lt;p&gt;버켓에 저장할 문서의 스키마로 &lt;code&gt;User&lt;/code&gt; 구조체를 정의하고,
이를 조회(&lt;code&gt;GetUser&lt;/code&gt;), 생성(&lt;code&gt;UpsertUser&lt;/code&gt;), 수정(&lt;code&gt;ReplaceUser&lt;/code&gt;, &lt;code&gt;ReplaceUserWithCas&lt;/code&gt;)하는 함수들을 정의합시다.
해당 함수들 모두 매개변수로 컬렉션을 받아 카우치베이스에 접속하며,
해당 문서의 CAS를 반환한다는 공통점을 지닙니다.&lt;/p&gt;&lt;p&gt;수정 작업 중 &lt;code&gt;ReplaceUser&lt;/code&gt;은 CAS 값을 활용하지 않고 문서를 현재 상태로 무조건 덮어씌우며,
&lt;code&gt;ReplaceUserWithCas&lt;/code&gt;는 CAS 값을 활용하여 서버의 CAS 값과 다르면 수정하지 않고 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;github.com/couchbase/gocb/v2&amp;quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; User &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	Name  &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;`json:&amp;quot;name&amp;quot;`&lt;/span&gt;
	Score &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;  &lt;span class=&quot;token string&quot;&gt;`json:&amp;quot;score&amp;quot;`&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;GetUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;col &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Collection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Cas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	getResult&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; col&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	content &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	err &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; getResult&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Content&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;content&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; content&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; getResult&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Cas&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// type Cas uint64&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// UpsertUser inserts or updates the User&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;UpsertUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;col &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Collection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Cas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; col&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Upsert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Cas&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ReplaceUser updates the User document&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReplaceUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;col &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Collection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Cas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; col&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Cas&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ReplaceUserWithCas updates the User document only when CAS matches&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReplaceUserWithCas&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;col &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Collection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cas gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Cas&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Cas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; col&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;gocb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReplaceOptions&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Cas&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; cas&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Cas&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;CAS 변화 테스트&lt;/h3&gt;&lt;p&gt;아래 테스트 코드에서는 우선 &lt;code&gt;User&lt;/code&gt; 하나를 생성하여 &lt;code&gt;user/1&lt;/code&gt; 문서에 저장합니다.
이후 &lt;code&gt;ReplaceUser&lt;/code&gt; 함수를 통해 &lt;code&gt;Score&lt;/code&gt; 필드의 값을 &lt;code&gt;0 =&amp;gt; 10 =&amp;gt; 20&lt;/code&gt;으로 수정해가며 문서를 업데이트합니다.
이때 업데이트 시점에 CAS를 넘기지 않고 있음에도 불구하고 카우치베이스에서는
기본적으로 CAS 값을 수정해준다는 점을 알 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&amp;quot;testing&amp;quot;&lt;/span&gt;

	&lt;span class=&quot;token string&quot;&gt;&amp;quot;github.com/stretchr/testify/assert&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TestReplaceUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
		collection &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		key        &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;user/1&amp;quot;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	initialUser &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;John&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Score&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	initialCas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;UpsertUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;collection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; initialUser&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NoError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	updatedUser &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;John&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Score&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	updatedCas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReplaceUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;collection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; updatedUser&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NoError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;updated content and CAS&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NotEqualValues&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; initialUser&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; updatedUser&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NotEqualValues&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; initialCas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; updatedCas&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	updatedUser2 &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;John&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Score&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	updatedCas2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReplaceUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;collection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; updatedUser&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NoError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;updated content and CAS&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NotEqualValues&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; updatedUser&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; updatedUser2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NotEqualValues&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; updatedCas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; updatedCas2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;낙관적 락킹 테스트&lt;/h3&gt;&lt;p&gt;아래 테스트 코드에서는 &lt;code&gt;User&lt;/code&gt; 하나를 생성하여 &lt;code&gt;user/2&lt;/code&gt; 문서에 저장합니다.
그 대신 이번에는 10개의 고루틴을 활용하여 동시에 &lt;code&gt;user/2&lt;/code&gt; 문서를 수정해봅시다.
각 고루틴에서는 거의 동시에 문서의 현재 상태를 조회하고, 10초 동안 대기한 이후에
&lt;code&gt;Score&lt;/code&gt; 필드의 값을 각각 &lt;code&gt;10&lt;/code&gt;, &lt;code&gt;20&lt;/code&gt;, ..., &lt;code&gt;100&lt;/code&gt;으로 수정하고자 합니다.&lt;/p&gt;&lt;p&gt;이때 &lt;code&gt;ReplaceUserWithCas&lt;/code&gt; 함수의 매개변수로 &lt;code&gt;Score&lt;/code&gt; 값이 &lt;code&gt;0&lt;/code&gt;일 때의 CAS 값이 넘겨질 것이라는 점에 유의해야 합니다.
이는 각 고루틴에서 문서를 &lt;code&gt;0 =&amp;gt; 10&lt;/code&gt;, &lt;code&gt;0 =&amp;gt; 20&lt;/code&gt;, ..., &lt;code&gt;0 =&amp;gt; 100&lt;/code&gt;으로 수정하는 요청을
카우치베이스 서버로 보내는 것과 같습니다.
그러나 10개의 고루틴 중 하나가 성공하면 &lt;code&gt;user/2&lt;/code&gt; 문서의 CAS 값은 변경됩니다.
때문에 그 이후의 고루틴 9개에서는 CAS 불일치로 인해 에러가 발생하고 수정 내역이 반영되지 않습니다.&lt;/p&gt;&lt;p&gt;예를 들어, 10개의 고루틴 중 &lt;code&gt;0 =&amp;gt; 20&lt;/code&gt;로의 수정 작업이 최초로 성공한다고 생각해봅시다.
마지막 고루틴에서는 문서를 &lt;code&gt;0 =&amp;gt; 100&lt;/code&gt;로 수정할 것을 요청하지만,
카우치베이스 서버 입장에서 해당 문서는 &lt;code&gt;20 =&amp;gt; 100&lt;/code&gt;으로 수정될 것이므로 에러를 반환합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&amp;quot;sync&amp;quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&amp;quot;testing&amp;quot;&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&amp;quot;time&amp;quot;&lt;/span&gt;

	&lt;span class=&quot;token string&quot;&gt;&amp;quot;github.com/stretchr/testify/assert&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TestOptimisticLockWithCas&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
		collection &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		key        &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;user/2&amp;quot;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	initialUser &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;User&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;John&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Score&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	initialCas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;UpsertUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;collection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; initialUser&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NoError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
		wg               sync&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;WaitGroup
		casMisMatchCount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		updateScore &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		wg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			curUser&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; curCas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;GetUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;collection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NoError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

			&lt;span class=&quot;token comment&quot;&gt;// 일련의 작업&lt;/span&gt;
			time&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Sleep&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;time&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Second &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

			curUser&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Score &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; updateScore
			&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReplaceUserWithCas&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;collection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; curUser&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; curCas&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
				casMisMatchCount &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
			&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
			wg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Done&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	wg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Wait&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; casMisMatchCount&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 최초로 성공한 고루틴 이외에는 전부 실패&lt;/span&gt;

	curUser&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; curCas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;GetUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;collection&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NotEqual&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; initialUser&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; curUser&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NotEqual&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; initialCas&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; curCas&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;CAS 기반 낙관적 락킹을 권장하며, 개발자가 아니라 카우치베이스 내부에서 자체적으로 CAS 값을 관리해준다는 점은
카우치베이스가 다른 데이터베이스과 특히나 구분되는 지점이라고 볼 수 있습니다.&lt;/p&gt;&lt;p&gt;그리고 바로 이 점 때문에 카우치베이스는 범용적인 솔루션이라기 보다는
굉장히 제한된 상황에서 강점을 지니는 솔루션이 된다고 생각합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://docs.couchbase.com/go-sdk/current/howtos/concurrent-document-mutations.html&quot;&gt;Couchbase Doc - Concurrent Document Mutations&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://docs.couchbase.com/go-sdk/current/howtos/kv-operations.html&quot;&gt;Couchbase Doc - Data Operations&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Lock_(computer_science)&quot;&gt;Lock (computer science)&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Optimistic_concurrency_control&quot;&gt;Optimistic concurrency control&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.yes24.com/Product/Goods/17128930&quot;&gt;카우치베이스 실전 가이드&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Couchbase] 도커 컨테이너 기반 환경 셋업]]></title><description><![CDATA[실습 및 테스트 환경 셋업을 위해 카우치베이스 서버 구동, 클러스터 및 버켓 생성 작업을 자동화시켜주는 Dockerfile 및 배쉬 스크립트를 정리하였습니다. 배쉬 스크립트에서는 쉘옵션 설정 및 작업 제어(job control) 등의 기능을 활용하였습니다.]]></description><link>https://bugoverdose.github.io/development/couchbase-setup-dockerfile/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/couchbase-setup-dockerfile/</guid><pubDate>Mon, 09 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;카우치베이스(Couchbase)는 Document 기반 Key-Value 스토리지이며,
MongoDB보다 6배 이상 빠르다고 스스로 주장하는 NoSQL 솔루션입니다.&lt;/p&gt;&lt;p&gt;실습 및 테스트 환경 셋업을 위해
도커 컨테이너 실행 시점에 Couchbase 클러스터 생성, 버킷 생성, 유저 생성까지의 작업을 자동으로 수행해주는
Dockerfile 및 셋업 스크립트를 정리하였습니다.&lt;/p&gt;&lt;h2&gt;필요성&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://docs.couchbase.com/server/current/getting-started/do-a-quick-install.html&quot;&gt;공식문서&lt;/a&gt;에서는
아래 명령어와 같이 &lt;code&gt;couchbase/server&lt;/code&gt; 이미지를 그대로 활용하여 컨테이너를 실행하는 방법을 소개합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; run &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--name&lt;/span&gt; db &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8091&lt;/span&gt;-8096:8091-8096 &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;11210&lt;/span&gt;-11211:11210-11211 couchbase/server:enterprise-7.2.0&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이렇게 실행된 카우치베이스 서버는 완전히 초기 상태이므로
웹 콘솔에 접근하여 클러스터 셋업, 버켓 셋업 등의 작업을 일일이 수동으로 해줘야 합니다.
그래도 해당 컨테이너를 종료하고 재실행하더라도 기본적인 셋업은 유지되므로
개인이 간단한 실습을 할 때에는 이것만으로도 충분합니다.&lt;/p&gt;&lt;p&gt;그러나 여러 명이 동일한 개발환경을 공유하고 싶거나, 깃헙 액션 등에서 테스트를 실행하는 등의 상황에서는
이와 같은 수작업은 한계가 있으므로 별도로 Dockerfile을 만들어 셋업 과정을 자동화할 필요가 있습니다.&lt;/p&gt;&lt;h2&gt;Dockerfile 작성&lt;/h2&gt;&lt;p&gt;우선 프로젝트의 도커 관련 파일들을 관리할 수 있도록 루트 경로에 &lt;code&gt;docker&lt;/code&gt; 디렉터리를 만들겠습니다.
&lt;code&gt;docker&lt;/code&gt; 디렉터리 내부에는 Dockerfile 파일과
도커 이미지에서 사용할 &lt;code&gt;setup.sh&lt;/code&gt; 파일을 미리 생성하겠습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;touch&lt;/span&gt; Dockerfile
&lt;span class=&quot;token function&quot;&gt;touch&lt;/span&gt; setup.sh&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Dockerfile의 내용은 아래와 같습니다. 자세한 내용은 주석을 참고 바랍니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;dockerfile&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-dockerfile line-numbers&quot;&gt;&lt;code class=&quot;language-dockerfile&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# FROM: 베이스 이미지 지정&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;FROM&lt;/span&gt; couchbase/server:enterprise-7.2.0&lt;/span&gt;

&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;MAINTAINER&lt;/span&gt; Jinwoo Jeong &amp;lt;jwjeong96@gmail.com&amp;gt;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# COPY: 빌드 시점에 setup.sh 파일을 도커 이미지 내부로 복사&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;COPY&lt;/span&gt; setup.sh /&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# CMD: 컨테이너 실행(docker run) 시점에 해당 명령어 실행&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;CMD&lt;/span&gt; [&lt;span class=&quot;token string&quot;&gt;&amp;quot;/setup.sh&amp;quot;&lt;/span&gt;]&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# EXPOSE: 해당 포트를 컨테이너 외부로 노출&lt;/span&gt;
&lt;span class=&quot;token instruction&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;EXPOSE&lt;/span&gt; 8091-8093&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;셋업 스크립트&lt;/h2&gt;&lt;p&gt;배쉬 스크립트 &lt;code&gt;setup.sh&lt;/code&gt;의 전문은 아래와 같습니다. 구조에 대한 자세한 설명은 아래 하부 섹션을 참고하기 바랍니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token shebang important&quot;&gt;#!/bin/bash&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-exm&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-f&lt;/span&gt; /opt/couchbase/bin/couchbase-cli &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
    &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Invalid installation of Couchbase&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;token builtin class-name&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;

/entrypoint.sh couchbase-server &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;

&lt;span class=&quot;token assign-left variable&quot;&gt;USERNAME&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;PASSWORD&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;pw1234&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;BUCKET_NAME&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;user-bucket&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;BUCKET_USERNAME&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;bucket_username&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;BUCKET_PASSWORD&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;bucket_pw&amp;quot;&lt;/span&gt;

&lt;span class=&quot;token assign-left variable&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;000&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$response&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;200&amp;quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;token assign-left variable&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; --write-out &lt;span class=&quot;token string&quot;&gt;&amp;quot;%{http_code}&amp;quot;&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--head&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--silent&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--output&lt;/span&gt; /dev/null &lt;span class=&quot;token string&quot;&gt;&amp;quot;http://localhost:8091/pools&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Waiting for Couchbase...&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;sleep&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Initializing Cluster&amp;quot;&lt;/span&gt;
/opt/couchbase/bin/couchbase-cli cluster-init &lt;span class=&quot;token parameter variable&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;127.0&lt;/span&gt;.0.1:8091 &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
	--cluster-username&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$USERNAME&lt;/span&gt; --cluster-password&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$PASSWORD&lt;/span&gt; --cluster-port&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8091&lt;/span&gt; --cluster-ramsize&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1500&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Create bucket (&lt;span class=&quot;token variable&quot;&gt;$BUCKET_NAME&lt;/span&gt;)&amp;quot;&lt;/span&gt;
/opt/couchbase/bin/couchbase-cli bucket-create &lt;span class=&quot;token parameter variable&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;127.0&lt;/span&gt;.0.1:8091 &lt;span class=&quot;token parameter variable&quot;&gt;--bucket&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$BUCKET_NAME&lt;/span&gt; --bucket-ramsize&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; --bucket-type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;couchbase --bucket-replica&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-u&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$USERNAME&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$PASSWORD&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Create RBAC user profile for bucket access&amp;quot;&lt;/span&gt;
/opt/couchbase/bin/couchbase-cli user-manage &lt;span class=&quot;token parameter variable&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;127.0&lt;/span&gt;.0.1:8091 &lt;span class=&quot;token parameter variable&quot;&gt;--username&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$USERNAME&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--password&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$PASSWORD&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--set&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
	--rbac-username&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$BUCKET_USERNAME&lt;/span&gt; --rbac-password&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$BUCKET_PASSWORD&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--roles&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;bucket_full_access[*]&amp;quot;&lt;/span&gt; --auth-domain&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;local

&lt;span class=&quot;token function&quot;&gt;fg&lt;/span&gt; %1&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;쉘 옵션 설정&lt;/h3&gt;&lt;p&gt;&lt;code&gt;set&lt;/code&gt; 빌트인은 쉘 옵션 설정을 위해 필요합니다.
저희 스크립트의 경우 아래와 같이 3가지 옵션을 활용하였습니다.
이때 &lt;code&gt;-exm&lt;/code&gt; 자체가 하나의 옵션이 아니라 &lt;code&gt;-e&lt;/code&gt;, &lt;code&gt;-x&lt;/code&gt;, &lt;code&gt;-m&lt;/code&gt;라는 개별적인 옵션들의 조합이라는 점에 유의해야 합니다.
이 점을 모르면 구글링 자체가 불가능해집니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-exm&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;-e&lt;/code&gt; 옵션은 파이프라인에서 0 이외의 값이 반환될 경우 스크립트를 즉시 exit할 수 있도록 해줍니다. 즉, 스크립트 실행 도중에 문제가 발생하면 별도의 처리 없이 해당 위치에서 스크립트를 종료시켜줍니다.&lt;/li&gt;&lt;li&gt;&lt;code&gt;-x&lt;/code&gt; 옵션의 경우 스크립트 내부에서 실행되는 개별 명령어들에 대한 로그를 출력해줍니다. 필수사항은 아니지만 디버깅에 굉장히 도움이 됩니다.&lt;/li&gt;&lt;li&gt;&lt;code&gt;-m&lt;/code&gt; 옵션은 &lt;a href=&quot;https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Job-Control&quot;&gt;Job control&lt;/a&gt;을 활성화해줍니다. 예를 들어, 백그라운드에서 실행 중인 작업을 포그라운드(foreground)로 전환시키는
&lt;code&gt;fg&lt;/code&gt; 명령어를 실행시키기 위해 필요합니다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;보다 자세한 내용은
&lt;a href=&quot;https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#The-Set-Builtin&quot;&gt;공식문서&lt;/a&gt;를
참고하기 바랍니다.&lt;/p&gt;&lt;h3&gt;서버 실행&lt;/h3&gt;&lt;p&gt;사실 위의 스크립트 중 카우치베이스 서버 실행에 필수적인 코드는
&lt;code&gt;/entrypoint.sh couchbase-server&lt;/code&gt;밖에 없습니다.
해당 코드를 포그라운드에서 그대로 실행하면 서버를 구동시키고 요청이 올 때까지 대기하게 됩니다.
이 경우 스크립트의 나머지 부분은 실행되지 않습니다.&lt;/p&gt;&lt;p&gt;현재 저희는 실행 중인 카우치베이스 서버에 대해 조작을 가하고 싶은 상황입니다.
그러므로 우선 &lt;code&gt;&amp;amp;&lt;/code&gt;로 백그라운드에서 서버를 실행시키고, 클러스터 및 버켓 셋업이 끝난 이후에
&lt;code&gt;fg&lt;/code&gt;로 백그라운드에서 실행 중인 서버를 포그라운드로 가져올 것입니다.
만일 구동 중인 서버를 포그라운드로 가져오지 않을 경우 컨테이너는 그대로 종료합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# set -m # Enable Job Control&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 백그라운드에서 서버 실행&lt;/span&gt;
/entrypoint.sh couchbase-server &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 클러스터 및 버켓 셋업&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# jobs # 디버깅용: job(1)이 백그라운드에서 실행 중인 카우치베이스 서버라는 점 확인 가능&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;fg&lt;/span&gt; %1 &lt;span class=&quot;token comment&quot;&gt;# 서버 실행 job을 포그라운드로 가져오기&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;참고로 &lt;code&gt;entrypoint.sh&lt;/code&gt; 스크립트는 &lt;code&gt;couchbase/server:enterprise-7.2.0&lt;/code&gt; 이미지에 포함되어있으며,
아래와 같이 이미지를 그대로 컨테이너로 실행할 때 ENTRYPOINT로 실행되는 것으로 보입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; run &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--name&lt;/span&gt; db &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8091&lt;/span&gt;-8096:8091-8096 &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;11210&lt;/span&gt;-11211:11210-11211 couchbase/server:enterprise-7.2.0&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;혹시 내용이 궁금하다면 아래와 같이 컨테이너에 대해 &lt;code&gt;cat&lt;/code&gt; 명령어로 파일 내용을 출력해보는 것을 추천합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ps&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-it&lt;/span&gt; 컨테이너ID &lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; entrypoint.sh&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;클러스터 및 버켓 셋업&lt;/h3&gt;&lt;p&gt;이제부터 본격적으로 카우치베이스에 클러스터, 버켓 등을 생성하겠습니다.
카우치베이스 클러스터를 조작하려면 &lt;code&gt;couchbase-cli&lt;/code&gt;와 같은 CLI 툴을 활용해야 합니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;couchbase/server&lt;/code&gt; 이미지를 활용하여 실행되는 컨테이너의 경우
내부적으로 &lt;code&gt;couchbase-cli&lt;/code&gt; 등의 프로그램이 설치되어 있겠지만
혹시 모르니 제대로 설치가 되어있는지 검증합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# couchbase-cli 설치 여부 확인&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-f&lt;/span&gt; /opt/couchbase/bin/couchbase-cli &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
    &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Invalid installation of Couchbase&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;token builtin class-name&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음으로는 백그라운드에서 실행 중인 카우치베이스 서버가 제대로 구동될 때까지 대기합니다.
외부로부터의 요청을 처리할 수 있는 상태가 될 때까지 생각보다 시간이 걸리는데,
아래의 경우 5초마다 한 번씩 재시도합니다.
무한루프에 빠지는 것이 우려되는 경우, 일정 횟수 이상 재시도했을 때 &lt;code&gt;exit&lt;/code&gt;하는 코드를 추가해주는 것이 권장됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 백그라운드에서 실행 중인 카우치베이스 서버가 구동될 때까지 재시도 &lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;000&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$response&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;200&amp;quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;token assign-left variable&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; --write-out &lt;span class=&quot;token string&quot;&gt;&amp;quot;%{http_code}&amp;quot;&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--head&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--silent&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--output&lt;/span&gt; /dev/null &lt;span class=&quot;token string&quot;&gt;&amp;quot;http://localhost:8091/pools&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Waiting for Couchbase...&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;sleep&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;드디어 본격적으로 카우치베이스 서버에 클러스터와 버켓을 생성합니다.
사용자명, 비밀번호, 버켓 용량 등을 옵션으로 명시적으로 지정하여 넘길 수 있는데
자세한 사항은 &lt;a href=&quot;https://docs.couchbase.com/server/current/cli/cbcli/couchbase-cli.html&quot;&gt;couchbase-cli 공식문서&lt;/a&gt;를
참고하기 바랍니다.&lt;/p&gt;&lt;p&gt;주요 환경변수의 경우 별도로 변수로 관리하는 것이 가독성 차원에서 유용합니다.
혹시 필요하다면 &lt;code&gt;/setup.sh&lt;/code&gt; 스크립트 실행 시점에 인자로 넘겨받는 방법도 존재합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;USERNAME&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;admin&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;PASSWORD&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;pw1234&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;BUCKET_NAME&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;user-bucket&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;BUCKET_USERNAME&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;bucket_username&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;BUCKET_PASSWORD&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;bucket_pw&amp;quot;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 환경에 따라 수정 및 내용 추가&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Initializing Cluster&amp;quot;&lt;/span&gt;
/opt/couchbase/bin/couchbase-cli cluster-init &lt;span class=&quot;token parameter variable&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;127.0&lt;/span&gt;.0.1:8091 &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
	--cluster-username&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$USERNAME&lt;/span&gt; --cluster-password&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$PASSWORD&lt;/span&gt; --cluster-port&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8091&lt;/span&gt; --cluster-ramsize&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1500&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Create bucket (&lt;span class=&quot;token variable&quot;&gt;$BUCKET_NAME&lt;/span&gt;)&amp;quot;&lt;/span&gt;
/opt/couchbase/bin/couchbase-cli bucket-create &lt;span class=&quot;token parameter variable&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;127.0&lt;/span&gt;.0.1:8091 &lt;span class=&quot;token parameter variable&quot;&gt;--bucket&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$BUCKET_NAME&lt;/span&gt; --bucket-ramsize&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt; --bucket-type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;couchbase --bucket-replica&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-u&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$USERNAME&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$PASSWORD&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Create RBAC user profile for bucket access&amp;quot;&lt;/span&gt;
/opt/couchbase/bin/couchbase-cli user-manage &lt;span class=&quot;token parameter variable&quot;&gt;-c&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;127.0&lt;/span&gt;.0.1:8091 &lt;span class=&quot;token parameter variable&quot;&gt;--username&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$USERNAME&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--password&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$PASSWORD&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--set&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
	--rbac-username&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$BUCKET_USERNAME&lt;/span&gt; --rbac-password&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$BUCKET_PASSWORD&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--roles&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;bucket_full_access[*]&amp;quot;&lt;/span&gt; --auth-domain&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;local&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;혹시 이외의 CLI 툴들에 대해 궁금하다면 &lt;a href=&quot;https://docs.couchbase.com/server/current/cli/cli-intro.html&quot;&gt;공식문서&lt;/a&gt;를
참고하고, 현재 사용 중인 이미지에 제대로 추가되어있는지 궁금하다면 아래 명령어로 확인하기를 바랍니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ps&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-it&lt;/span&gt; 컨테이너ID &lt;span class=&quot;token function&quot;&gt;ls&lt;/span&gt; /opt/couchbase/bin/&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;이미지 빌드 및 컨테이너 실행&lt;/h2&gt;&lt;p&gt;이제 본격적으로 도커 이미지를 빌드하고 컨테이너를 실행하겠습니다.
위에서 작성한 &lt;code&gt;Dockerfile&lt;/code&gt;과 &lt;code&gt;setup.sh&lt;/code&gt; 파일들이 있는 디렉터리에 있다고 가정하겠습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;ll
total &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;
-rw-r--r--  &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; devsisters  staff   387B Oct  &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;23&lt;/span&gt;:36 Dockerfile
-rwxr-xr-x  &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; devsisters  staff   &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;.7K Oct  &lt;span class=&quot;token number&quot;&gt;9&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt;:00 setup.sh&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;우선 &lt;code&gt;local_couchbase&lt;/code&gt;라는 태그로 이미지를 빌드합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; build &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; local_couchbase &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 &lt;code&gt;local_couchbase&lt;/code&gt; 이미지를 활용하여 &lt;code&gt;couchbase&lt;/code&gt;라는 컨테이너를 실행합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; run &lt;span class=&quot;token parameter variable&quot;&gt;--name&lt;/span&gt; couchbase &lt;span class=&quot;token parameter variable&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8091&lt;/span&gt;-8096:8091-8096 &lt;span class=&quot;token parameter variable&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;11210&lt;/span&gt;-11211:11210-11211 local_couchbase&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;실행 여부와 무관하게 &lt;code&gt;couchbase&lt;/code&gt; 컨테이너를 종료하고 제거하고 싶은 경우 아래 명령어를 실행하면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;rm&lt;/span&gt; couchbase &lt;span class=&quot;token parameter variable&quot;&gt;-f&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;개선사항&lt;/h2&gt;&lt;p&gt;현재 구조에서는 실행 중인 &lt;code&gt;couchbase&lt;/code&gt; 컨테이너를 아래와 같이 종료하고 재실행하는 경우
이미 클러스터 및 버켓이 셋업되어있기 때문에 문제가 발생합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; stop couchbase
&lt;span class=&quot;token function&quot;&gt;docker&lt;/span&gt; start couchbase&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;혹시 이 점이 불만이라면 아래와 같이 카우치베이스 서버 상태를 체크하는 시점에
조건에 따라 일찍 &lt;code&gt;exit&lt;/code&gt;하도록 개선할 수 있습니다.
이때 백그라운드에서 실행 중인 서버를 포그라운드로 가져오는 것을 잊으면 안 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;000&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$response&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;200&amp;quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;token assign-left variable&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;curl&lt;/span&gt; --write-out &lt;span class=&quot;token string&quot;&gt;&amp;quot;%{http_code}&amp;quot;&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--head&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--silent&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--output&lt;/span&gt; /dev/null &lt;span class=&quot;token string&quot;&gt;&amp;quot;http://localhost:8091/pools&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$response&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;401&amp;quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
      &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Using previous setup&amp;quot;&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;fg&lt;/span&gt; %1
      &lt;span class=&quot;token builtin class-name&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;
    &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Waiting for Couchbase...&amp;quot;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;sleep&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;현재 구조의 경우 이미 클러스터가 셋업되어있을 때 상태코드 200 대신 401이 응답되므로
위와 같은 방식으로 대응할 수 있습니다.
그러나 서버 상태를 체크하는 방법이나 클러스터 셋업 작업을 어떻게 했는지 등 스크립트 내용이 달라지면
다른 방식으로 대응해야 할 수 있습니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;제 경우 Couchbase 관련 실습을 위해 최소한의 설정과 Dockerfile 하나만으로 충분했습니다.
추가적인 설정이 필요한 경우
&lt;a href=&quot;https://docs.couchbase.com/server/current/cli/cbcli/couchbase-cli.html&quot;&gt;couchbase-cli 공식문서&lt;/a&gt;를
참고하여 스크립트를 수정하면 됩니다.
카우치베이스만이 아니라 복수의 컨테이너를 동시에 셋업하고 싶은 경우,
위의 Dockerfile과 스크립트를 활용하되 Docker Compose를 사용하기를 권장합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#The-Set-Builtin&quot;&gt;Bash Reference Manual - Set Builtin&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Job-Control&quot;&gt;Bash Reference Manual - Job Control&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://docs.couchbase.com/server/current/cli/cbcli/couchbase-cli.html&quot;&gt;Couchbase Doc - couchbase-cli&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Go] defer문의 원리 및 활용]]></title><description><![CDATA[defer 키워드에 대해 제대로 이해하지 못하고 무지성으로 쓰고 있다는 생각이 들어 핵심 내용을 정리합니다.]]></description><link>https://bugoverdose.github.io/development/go-defer-basics/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/go-defer-basics/</guid><pubDate>Sun, 08 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;code&gt;defer&lt;/code&gt; 키워드에 대해 제대로 이해하지 못하고 무지성으로 쓰고 있다는 생각이 들어 핵심 내용을 정리합니다.
&lt;strong&gt;Effective Go&lt;/strong&gt;와 &lt;strong&gt;Go 101&lt;/strong&gt;의 내용을 주로 참고하였습니다.&lt;/p&gt;&lt;h2&gt;defer문 기초&lt;/h2&gt;&lt;p&gt;defer란 영어로 지연하다는 의미입니다. 즉, defer문은 특정 함수의 실행 시점을
자신이 선언된 함수를 탈출하기 직전까지 지연시키는 문법입니다.&lt;/p&gt;&lt;p&gt;defer문(defer statement)은 &lt;code&gt;defer&lt;/code&gt; 키워드 뒤에 지연된 함수(deferred function)를 호출하는 방식으로 구성됩니다.
예를 들어, 아래의 &lt;code&gt;fmt.Println(&amp;quot;2&amp;quot;)&lt;/code&gt;는 &lt;code&gt;print&lt;/code&gt; 함수의 반환/종료 직전까지 호출이 지연됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// [출력]&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// 1&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// 2&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;특히 defer문은 특정 자원을 해제해야 하는 상황에서 유용하게 사용됩니다.&lt;/p&gt;&lt;p&gt;예를 들어, 아래 코드는 &lt;code&gt;os.Open(filename)&lt;/code&gt;을 통해 파일을 열고,
&lt;strong&gt;파일 관련 작업이 종료된 이후,&lt;/strong&gt; 함수를 탈출하기 전에 &lt;code&gt;f.Close()&lt;/code&gt;로 파일을 닫아야 합니다.
이때 return문을 통해 함수가 반환되는 각 지점에 일일이 &lt;code&gt;f.Close()&lt;/code&gt;를 호출한다면
번거로우며 휴먼 에러가 발생할 가능성이 높습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Contents returns the file&amp;#x27;s contents as a string.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Contents&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    f&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 자원 할당&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; result &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;byte&lt;/span&gt;
    buf &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Read&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buf&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;n&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EOF &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;			f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 지원 해제&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;/span&gt;        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;	f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 지원 해제&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 상황에서 아래와 같이 defer문을 사용할 경우 defer문 아래쪽에 어떠한 코드가 실행되는지와 무관하게
&lt;code&gt;f.Close()&lt;/code&gt;의 호출을 보장할 수 있습니다.
이 방식은 단순히 코드 중복을 줄이는 것 이상의 효용을 지닙니다.
defer문을 사용하면 자원을 할당받는 코드와 자원을 해제하는 코드가 서로 가까이 위치하며,
향후 return하는 분기가 늘어나거나 줄어들더라도 자원 해제 코드를 잊어버릴 일이 없습니다.
뿐만 아니라, &lt;strong&gt;panic이 발생하더라도&lt;/strong&gt;
defer문이 호출될 것이라는 점에서 위의 코드와 아래 코드는 &lt;strong&gt;기능적으로 다릅니다.&lt;/strong&gt;&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Contents returns the file&amp;#x27;s contents as a string.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Contents&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    f&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 자원 할당&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// 함수 종료 시점에 자원 해제&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; result &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;byte&lt;/span&gt;
    buf &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Read&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buf&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;n&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; io&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;EOF &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err  &lt;span class=&quot;token comment&quot;&gt;// f.Close() 호출&lt;/span&gt;&lt;/span&gt;        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// f.Close() 호출&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;지연된 함수는 선입후출 구조로 관리&lt;/h2&gt;&lt;p&gt;프로그램은 실행 도중 &lt;code&gt;defer&lt;/code&gt; 키워드를 만나면 defer문에 대한 평가가 즉시 일어나고,
defer문에서 지연시키려는 함수를 &lt;strong&gt;지연된 호출 큐(deferred call queue)&lt;/strong&gt;에 추가합니다.
지연된 호출 큐에서는 지연된 함수들을 선입후출, 즉 스택 구조로 관리하다가 한 번에 순차적으로 호출됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(4) The fourth line.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// deferred: [(4)]&lt;/span&gt;
	fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(1) The first line.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 즉시 호출&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(3) The third line.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// deferred: [(4), (3)]&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(2) The second line.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// deferred: [(4), (3), (2)]&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// (2) =&amp;gt; (3) =&amp;gt; (4) 순으로 호출&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (1) The first line.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (2) The second line.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (3) The third line.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (4) The fourth line.&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;지연된 함수의 인자 평가 시점&lt;/h2&gt;&lt;p&gt;지연된 함수로 넘겨지는 인자는 실질적으로 해당 함수가 호출되는 시점이 아니라
defer문이 평가된 시점에 평가됩니다.
이에 대해 잘못 이해할 경우 예상치 못한 버그가 발생할 수 있습니다.&lt;/p&gt;&lt;p&gt;예를 들어, 아래와 같이 반복문 내부에서 &lt;code&gt;i&lt;/code&gt;의 값은 변경됩니다.
그러나 지연되는 함수의 인자로 넘겨지는 &lt;code&gt;i&lt;/code&gt;의 값은 각 defer문이 평가되는 시점에 즉시 평가되며,
지연된 함수가 호출되는 시점에는 이때 평가된 값을 그대로 활용하게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;argumentEvaluation1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 경고 문구: Possible resource leak, &amp;#x27;defer&amp;#x27; is called in the &amp;#x27;for&amp;#x27; loop&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Printf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;%d \n&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// deferred: [0, 1, 2]&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// 2 =&amp;gt; 1 =&amp;gt; 0 순으로 호출&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 2&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 1&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 0&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;반대로 지연된 함수의 &lt;strong&gt;인자&lt;/strong&gt;가 아닌 경우에는 이야기가 달라집니다.
예를 들어, 아래와 같이 &lt;code&gt;i&lt;/code&gt;가 매개변수로 넘겨지지 않고 익명 함수 내부에서 활용되는 경우
&lt;code&gt;i&lt;/code&gt;는 인자가 아니므로 &lt;code&gt;defer&lt;/code&gt;가 실행되는 시점에 평가되지 않습니다.
아래의 경우 &lt;code&gt;argumentEvaluation2&lt;/code&gt; 함수의 종료 직전,
지연된 함수들이 호출되는 시점의 &lt;code&gt;i&lt;/code&gt; 값을 활용하는 것을 알 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;argumentEvaluation2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// i=3이 되면서 반복문을 탈출하므로 함수 종료 직전에 i=3으로 평가됨&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;token comment&quot;&gt;// 경고 문구: loop variables captured by &amp;#x27;func&amp;#x27; literals in &amp;#x27;defer&amp;#x27; statements might have unexpected values&lt;/span&gt;
			fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Printf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;%d \n&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 3&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 3&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 3&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;심화 예시&lt;/h3&gt;&lt;p&gt;제대로 이해하기 위한 마지막 예시입니다.
&lt;code&gt;returnArg()&lt;/code&gt;는 지연된 함수 &lt;code&gt;deferredFunc&lt;/code&gt;의 호출과 함께 이루어지지 않고,
defer문이 평가되는 시점에 호출됩니다.
&lt;code&gt;deferredFunc&lt;/code&gt;의 인자로 &lt;code&gt;!!!&lt;/code&gt;라는 문자열이 넘겨져야 한다는 점은
해당 함수가 &lt;strong&gt;지연된 호출 큐(deferred call queue)&lt;/strong&gt;에 추가되기 전에 확정되어야 하기 때문입니다.&lt;/p&gt;&lt;p&gt;이에 따라 &lt;code&gt;(1) =&amp;gt; (2) =&amp;gt; (3)&lt;/code&gt; 대신
&lt;code&gt;(2) =&amp;gt; (1) =&amp;gt; (3)&lt;/code&gt; 순으로 출력되는 것을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;deferredFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;returned value from returnArg():&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(3)&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;returnArg&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(2)&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;!!!&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;deferredFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;returnArg&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// returnArg() 즉시 호출 =&amp;gt; 인자로 &amp;quot;!!!&amp;quot;를 넘겨야 한다는 점 확인&lt;/span&gt;
	fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(1)&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 즉시 호출&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// 지연된 함수 deferredFunc(&amp;quot;!!!&amp;quot;) 호출&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (2)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (1)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// returned value from returnArg(): !!!&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (3)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러한 점에서 위의 &lt;code&gt;main&lt;/code&gt; 함수는 실질적으로 아래와 동일합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	r &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;returnArg&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 즉시 호출&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;deferredFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(1)&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 즉시 호출&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// 지연된 함수 deferredFunc(&amp;quot;!!!&amp;quot;) 호출&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;만일 &lt;code&gt;deferredFunc(returnArg())&lt;/code&gt;를 통째로 함수 종료 시점에 실행하고 싶다면
아래와 같이 인자가 없는 익명 함수의 내부에 해당 코드를 위치시키면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// 인자가 없으므로 defer 실행 시점에 실행되는 함수는 없음&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;deferredFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;returnArg&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(1)&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// 지연된 익명 함수를 그대로 호출&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력] &lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (1)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (2)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// returned value from returnArg: !!!&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (3)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;지연된 함수들은 함수 호출의 탈출 단계에 실행&lt;/h2&gt;&lt;p&gt;&lt;code&gt;defer&lt;/code&gt; 키워드로 지연된 함수들은 해당 defer문이 작성된 함수의 &lt;strong&gt;탈출 단계(exiting phase)&lt;/strong&gt;에 실행됩니다.&lt;/p&gt;&lt;p&gt;함수를 호출하면 최종적으로 아래 3가지 이유 중 하나로 인해
&lt;strong&gt;탈출 단계(exiting phase)&lt;/strong&gt; (혹은 &lt;strong&gt;반환 단계(returning phase)&lt;/strong&gt;)를 거치게 됩니다.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;code&gt;return&lt;/code&gt;을 만나거나 함수를 끝까지 실행하여 정상적으로 함수를 탈출하는 경우&lt;/li&gt;&lt;li&gt;실행 도중에 함수 내부에서 panic이 발생하는 경우&lt;/li&gt;&lt;li&gt;&lt;code&gt;runtime.Goexit&lt;/code&gt;이 호출되는 경우&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;여기서 핵심은 panic이 발생했을 때에도 지연된 함수들은 반드시 호출된다는 점입니다.
때문에 &lt;code&gt;defer&lt;/code&gt; 키워드는 &lt;code&gt;panic&lt;/code&gt; 및 &lt;code&gt;recover&lt;/code&gt; 메커니즘에서 필수적인 역할을 수행합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleInnerPanic&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(4) reachable&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(1) reachable&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		v &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;recover&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(3) recovered:&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;(2) reachable&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// panic 발생 후 recover 전이어도 실행&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;panic&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;panic의 원인&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// panic 아래 쪽 코드는 실행 X&lt;/span&gt;
	fmt&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;unreachable&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [출력]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (1) reachable&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (2) reachable&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (3) recovered: panic의 원인&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// (4) reachable&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;지연된 함수로 반환값 수정하기&lt;/h2&gt;&lt;p&gt;지연된 함수는 자신이 정의된 함수의 반환값을 수정할 수도 있습니다.
이때 주의할 점은 반환 값의 식별자가 함수의 시그니처에 정의되어있어야 한다는 점입니다.
예를 들어, 아래 &lt;code&gt;returnNamedResult&lt;/code&gt; 함수는
&lt;code&gt;namedResult&lt;/code&gt;라는 식별자(&lt;em&gt;named return result&lt;/em&gt;)를 반환하고 있습니다.
이때 defer문 내부에서 &lt;code&gt;namedResult&lt;/code&gt;의 값을 재할당할 경우
&lt;code&gt;returnNamedResult&lt;/code&gt; 함수의 반환값을 수정할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;returnNamedResult&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;namedResult &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	namedResult &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;original namedResult&amp;quot;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		namedResult &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;modified namedResult&amp;quot;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; namedResult
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// &amp;quot;modified namedResult&amp;quot; 반환&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;한편 &lt;code&gt;returnLocalVar&lt;/code&gt; 함수와 같이 지역변수를 반환하는 경우,
defer문 내부에서 지역변수 &lt;code&gt;localVariable&lt;/code&gt;의 값을 재할당하여도 &lt;code&gt;returnLocalVar&lt;/code&gt; 함수의 반환값에는 영향을 미치지 않습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;returnLocalVar&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	localVariable &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;not modified local variable&amp;quot;&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		localVariable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;modified local variable&amp;quot;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; localVariable
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;token comment&quot;&gt;// &amp;quot;not modified local variable&amp;quot; 반환&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;또한 &lt;code&gt;returnInsideDeferredFunc&lt;/code&gt; 함수와 같이 defer문 내부에서 반환하는 값은
전체 함수의 반환값에 영향을 미치지 않습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;returnInsideDeferredFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;return from deferred function&amp;quot;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;local variable&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;token comment&quot;&gt;// &amp;quot;local variable&amp;quot; 반환&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;실무 관점에서 필수적으로 알아야 하는 내용 위주로 정리했으니,
더 자세한 내용이 궁금한 경우 참고문서를 확인하기 바랍니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://go.dev/doc/effective_go#defer&quot;&gt;Effective Go - defer&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://go101.org/article/control-flows-more.html#defer&quot;&gt;GO 101 - Deferred Function Calls&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://go101.org/article/panic-and-recover-more.html#exiting-phase&quot;&gt;Go 101 - Exiting Phases of Function Calls&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://go.dev/blog/defer-panic-and-recover&quot;&gt;Go Blog - Defer, Panic, and Recover&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[2023년도 개정 토플 홈 에디션 응시 후기]]></title><description><![CDATA[토플 알못의 토플 응시 후기입니다. 토플 홈 에디션 응시 경험이 없는 사람들과 미래의 저 자신을 위해 기록을 남깁니다.]]></description><link>https://bugoverdose.github.io/essay/toefl-home-edition-retrospective/</link><guid isPermaLink="false">https://bugoverdose.github.io/essay/toefl-home-edition-retrospective/</guid><pubDate>Tue, 03 Oct 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;토플 알못의 토플 응시 후기입니다.
토플 홈 에디션 응시 경험이 없는 사람들과 미래의 저 자신을 위해 기록을 남깁니다.
아직 점수를 모르는 상황이라 고득점 자랑글 같은게 아니라 진짜 후기입니다.&lt;/p&gt;&lt;h2&gt;2023년도 토플 시험 주요 특징&lt;/h2&gt;&lt;p&gt;2023년도 여름에 토플 시험이 개정되었습니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;An Enhanced TOEFL iBT® Test. Starting July 26, 2023, TOEFL iBT tests have a shorter test time and enhanced experience. TOEFL iBT® prep materials are also being updated to reflect these changes.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;전반적으로 문항의 수가 줄어들었고 그에 따라 응시 기간도 3시간에서 2시간 정도로 줄어들었다고 합니다.
그 외에도 일부 섹션에서는 문제 유형이 조금씩 변화했는데, 개별 섹션에 대한 자세한 사항은
&lt;a href=&quot;https://www.ets.org/toefl/test-takers/ibt/about/content.html&quot;&gt;공식 홈페이지&lt;/a&gt;를 참고하시기 바랍니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/2b1e6cdba9d2b1411d6015644a6ead3b/5a190/test-structure.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:61.34969325153374%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABcElEQVQoz3WT2arCYAyE+/7P5IUoIrhveNE7963uWrVV5/AFUvRgAyH+k2SShjHQD7vf72q1WqrVamo2m6pWq2q326rX6/Y+n8/Ks+BwOGg6nWo+n2symVgcDodGgHe7XSOErNFo2JDBYKDlcqnZbGb1RN7v91sBQLFYtEKISY5GI2vGK5WKSqWS+v2+ttutDSuXy4bhhUJBvV5Pm81Gr9dLQZqmVni9Xr9WPx6PYvv9fq/b7abn82l4HMeG4UmS6PF4ZDnbEIB1IWACSbAoimwqpBR6jvvtdjtbgmUwzxkhU2imwMFPQiI4TeROp5PVgtML7p5tuF6vbao3Uujb8dtx/HK5ZBv+JEQiq9XKivgEQCJvl4c3QMytuZ/X5xISMZqYvFgsrMkHEDEI+Vzuztf5oK8bQggB98kzP41vlytsyNAgmkNr6HA8HpvI0SURLAxDq0FznU4ny3tNJmzkwnZMJ3rRp/s/iOE04v/zTvgHJwSMIJdtEb8AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;개정 토플 구성&quot; title=&quot;개정 토플 구성&quot; src=&quot;/static/2b1e6cdba9d2b1411d6015644a6ead3b/a6d36/test-structure.png&quot; srcSet=&quot;/static/2b1e6cdba9d2b1411d6015644a6ead3b/222b7/test-structure.png 163w,/static/2b1e6cdba9d2b1411d6015644a6ead3b/ff46a/test-structure.png 325w,/static/2b1e6cdba9d2b1411d6015644a6ead3b/a6d36/test-structure.png 650w,/static/2b1e6cdba9d2b1411d6015644a6ead3b/5a190/test-structure.png 800w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;개인적으로 이보다 훨씬 중요한 점은 바로 &lt;strong&gt;홈 에디션&lt;/strong&gt;의 존재였습니다.
2023년도에 생겨난 것은 아니고 코로나 시기 때 생겨난 듯한데 아직 그대로 남아있었습니다.
기존 토플 시험장의 경우 &lt;strong&gt;말하기 섹션 때 다른 응시자들이 단체로 말하면서 저를 방해한다&lt;/strong&gt;는 치명적인 문제가 있었는데,
홈 에디션은 이 문제를 말끔히 해결해줍니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9f09e29e163d6ddf10ff60e543a0dd46/0486e/register-for-test.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:58.282208588957054%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACaklEQVQoz22Ry2oUQRSGZ6OuRBBBxDyEKzXufAFx5cJVFgH1ERSMkBgSg6KQYBINuFAMAcFXCMGlCqJJEKLoMH2Z6elbVfX0pbr6k+4eLxALDqf69H8+zn+q07kzw6G4fZcjM7OcXlji1PwDTswtcHx2npP3F8f/D+vrfHRmls751WdMrm1wce15kyfXN7iw9pzLGy+YevOW61tvuPLyNVdfbXJtc4tL663236hr51ZWOXZvjk4sBN2eheW4WI6D7faxXZeu4xKkKSIvmpBFwagsKUxFUedxZFpTn59hxJnFh3QwhiiKkFKipCSOIoQQRIGP7/WJQ5/QHyKjABIJWcr/jislE0uP6Pwu1JNato1SqvmulKCUAs9xGFgWwWBAJgSVjBmlKf3+gOHQx3ZcTFFgC8HZB2NgZQxJkjSiRCkMYKSgyHO6Q5/PB9/46Q1J85xKSUxtNcuakPUAxmDHgonfwIEQBFHUCqQk17pprO8yTRuQSlOyNAUl8JRq9CKOSUajxlEN/DNhLwyxHJsoDEkSRTW27AQ+nh+0u62blWz2OBCSnm1jWT284bCZsBfFf3f4deDhxxIhJHnevlptOYgjenaPOPIRIiJLRw3QqR9NJkiZkI313TDi7e5eCyy0xuiESidQjsbAmFiNcIMcLyzwhaHUVVMvjaHSo1ZvstoPuiybvhYY7DLYniZ4dxN/Zxod72OyuvkHcn8ZtfcEtfuYUhxgUkMpvuPt3MB/d4vh9hTa/0iNy3XRAkudUSgXnbho5WAqjRECbX0heP8U8XGF+MMyhfWJKhYYU1Akrb5IHCqdoU2FNiW/AN7MSq2/jIBhAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;응시 화면&quot; title=&quot;응시 화면&quot; src=&quot;/static/9f09e29e163d6ddf10ff60e543a0dd46/a6d36/register-for-test.png&quot; srcSet=&quot;/static/9f09e29e163d6ddf10ff60e543a0dd46/222b7/register-for-test.png 163w,/static/9f09e29e163d6ddf10ff60e543a0dd46/ff46a/register-for-test.png 325w,/static/9f09e29e163d6ddf10ff60e543a0dd46/a6d36/register-for-test.png 650w,/static/9f09e29e163d6ddf10ff60e543a0dd46/e548f/register-for-test.png 975w,/static/9f09e29e163d6ddf10ff60e543a0dd46/3c492/register-for-test.png 1300w,/static/9f09e29e163d6ddf10ff60e543a0dd46/0486e/register-for-test.png 2008w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;또한 홈 에디션의 경우 다양한 날짜와 시간대를 선택할 수 있으므로 컨디션 관리와 일정 관리에 도움이 됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9f09e29e163d6ddf10ff60e543a0dd46/0486e/register-home-edition.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:58.282208588957054%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACaklEQVQoz22Ry2oUQRSGZ6OuRBBBxDyEKzXufAFx5cJVFgH1ERSMkBgSg6KQYBINuFAMAcFXCMGlCqJJEKLoMH2Z6elbVfX0pbr6k+4eLxALDqf69H8+zn+q07kzw6G4fZcjM7OcXlji1PwDTswtcHx2npP3F8f/D+vrfHRmls751WdMrm1wce15kyfXN7iw9pzLGy+YevOW61tvuPLyNVdfbXJtc4tL663236hr51ZWOXZvjk4sBN2eheW4WI6D7faxXZeu4xKkKSIvmpBFwagsKUxFUedxZFpTn59hxJnFh3QwhiiKkFKipCSOIoQQRIGP7/WJQ5/QHyKjABIJWcr/jislE0uP6Pwu1JNato1SqvmulKCUAs9xGFgWwWBAJgSVjBmlKf3+gOHQx3ZcTFFgC8HZB2NgZQxJkjSiRCkMYKSgyHO6Q5/PB9/46Q1J85xKSUxtNcuakPUAxmDHgonfwIEQBFHUCqQk17pprO8yTRuQSlOyNAUl8JRq9CKOSUajxlEN/DNhLwyxHJsoDEkSRTW27AQ+nh+0u62blWz2OBCSnm1jWT284bCZsBfFf3f4deDhxxIhJHnevlptOYgjenaPOPIRIiJLRw3QqR9NJkiZkI313TDi7e5eCyy0xuiESidQjsbAmFiNcIMcLyzwhaHUVVMvjaHSo1ZvstoPuiybvhYY7DLYniZ4dxN/Zxod72OyuvkHcn8ZtfcEtfuYUhxgUkMpvuPt3MB/d4vh9hTa/0iNy3XRAkudUSgXnbho5WAqjRECbX0heP8U8XGF+MMyhfWJKhYYU1Akrb5IHCqdoU2FNiW/AN7MSq2/jIBhAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;날짜 선택 화면&quot; title=&quot;날짜 선택 화면&quot; src=&quot;/static/9f09e29e163d6ddf10ff60e543a0dd46/a6d36/register-home-edition.png&quot; srcSet=&quot;/static/9f09e29e163d6ddf10ff60e543a0dd46/222b7/register-home-edition.png 163w,/static/9f09e29e163d6ddf10ff60e543a0dd46/ff46a/register-home-edition.png 325w,/static/9f09e29e163d6ddf10ff60e543a0dd46/a6d36/register-home-edition.png 650w,/static/9f09e29e163d6ddf10ff60e543a0dd46/e548f/register-home-edition.png 975w,/static/9f09e29e163d6ddf10ff60e543a0dd46/3c492/register-home-edition.png 1300w,/static/9f09e29e163d6ddf10ff60e543a0dd46/0486e/register-home-edition.png 2008w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;결과적으로 저는 10월 3일 개천절에 토플 홈 에디션을 응시하였습니다.
저의 경우 9월 말에 결제를 시도하니 이미 대부분의 시간대들이 선점되어서 2시 30분이라는 애매한 시간대를 골라야 했습니다.
만일 여러분이 시간이 없는 직장인이나 학생이라면 사전에 적절한 공휴일들을 파악하고 미리 결제해놓는 것을 추천드립니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/97b9fcc56a61e00d3a06396aea45e7dc/0486e/view-all-tests.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:44.171779141104295%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB00lEQVQoz5XRS2sTURjG8XHr0kUXuvMT+BncWy/4BbSluBI3EqWhBtSalgQEQVeCtE3MxtasbYzNRRBRBF3UFtM0aSYTk5lJ5n45k79kqtiVxQd+iwMP5z0vRzqZuo90++6hxDzSneShxDwnkilOpzNMLS5zZinD1KNlTj1IIyWSf3tHTPrSuSdPubqS4/JKjku5Quzi2ksurOa5ki8ws15kdqPI7HqR6+uvufZqg+nVPNNrR0y6uQJns4+R0uUt8Fwc18V1nBhRxJ+MAcU0GY/HHJeFzbdI2WodPJ+BpqPrQzRNxzAMbNvGtp1Y3zT/fdPvYck3JaR0pUpb7fO102K7J7Oj9mlaIxqGzje5HWuZQ7rCRw49DnyHXbXHnqGxP+kNVfbsEZ2RxsOtClKmVqdnW3xRunxXB3Qtk52ujGwZNNU+P3oKTXVAS9fis2LbNFSdbbmH7Lg0RiqK5/HTC+kYJlK29j5+ru0HBEIQRRG+5yNCgRCCMAxjQRAQBCEicHFHbWxtH2HJhNYBkdVl7ChEwkN69uEj/5VIgc834dMthvUb6LU51OocamUGZ7iLdP75CxbfVeIfulcqHytVKrOwWWKpUqFrjIjGAl9MtgsJo4hf9L9fyKiZOWgAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;날짜 선택 화면&quot; title=&quot;날짜 선택 화면&quot; src=&quot;/static/97b9fcc56a61e00d3a06396aea45e7dc/a6d36/view-all-tests.png&quot; srcSet=&quot;/static/97b9fcc56a61e00d3a06396aea45e7dc/222b7/view-all-tests.png 163w,/static/97b9fcc56a61e00d3a06396aea45e7dc/ff46a/view-all-tests.png 325w,/static/97b9fcc56a61e00d3a06396aea45e7dc/a6d36/view-all-tests.png 650w,/static/97b9fcc56a61e00d3a06396aea45e7dc/e548f/view-all-tests.png 975w,/static/97b9fcc56a61e00d3a06396aea45e7dc/3c492/view-all-tests.png 1300w,/static/97b9fcc56a61e00d3a06396aea45e7dc/0486e/view-all-tests.png 2008w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;준비물&lt;/h2&gt;&lt;h3&gt;응시료 및 할인&lt;/h3&gt;&lt;p&gt;시험장에서 응시하든 홈 에디션이든 공통적으로 꼭 필요한 준비물은 우선 30만원 정도의 현금입니다.
엄밀히 말하자면 $220인데 환율에 따라 변동합니다.&lt;/p&gt;&lt;p&gt;이 점이 불만이면 &lt;a href=&quot;https://www.toeflresources.com/?s=voucher&quot;&gt;이런 사이트&lt;/a&gt;들에 가끔씩 공유되는
할인 코드를 찾아서 적용해보는 것을 추천드립니다.
저의 경우 5% 정도 할인받을 수 있었는데, &lt;em&gt;&amp;#x27;내가 뭐하고 있는거지&amp;#x27;&lt;/em&gt;라는 생각과 함께 굉장히 현타가 왔습니다. &lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/05d36f11ace14cadc8e96ec0cf6622fa/30d16/discount.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:74.84662576687117%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB8klEQVQ4y42TX28SQRTF91v4ZqTxpQ/SL+G3NGoa+9RqEx/7WKOxL/JPaC2KuLBAWwgLu+y/mZ35mRmwBSKUm5zcmbkzZ8/sPeMorRF5vgopETJfglzLi/HaOcPlKKVIsowkEyRC2HEm5U5IhSBOU4soTcmVwtFa03Fd2u02g8GA0XDIo6G1TUEQUCqVubq84vq6SZ7nc8IoimwxyzKMYrO2K+I4xvd9ptOpndsr393d0Wq1LPFcwHzzdpELlVFErd7gZ6v1oHAymRCGIdMgsGPzkWXi/2JRT0Yj5GxG5vsoQ2gO9/t9+r0ePc/D8zxyKdk1Zt0u8e0toeuiLaHW5FojlbLZIF10MBWPdNlYBxBKIzQPtjEeWic1lzY22EZo9yplz2VCzAm10jSbTUrfSnyv1aiUyzTqdaqVKpeNBlrl5m8tsBrGMufnn6hUqrhuBykEjtkYJxnjScQ0TJkEiYWZh5G4p9JrTfrnQ2OZIAiRUtpmOvNSCtID0QfZX8o9SLqQuCBGK6beZCuHbMj47CXe8T43p0U6x0UGH15YeCdFu9Z7f8DwdB91c7YgyzfayiHpMfp4wK/DpzQP96i92uP3uwJ/jp7ReF3gx9sCjTfP8Y6eoLoncyIlNyu0y3EHxp/Bv4DJV/DX8QWC2n1btr2iv9SfeHrR4uUYAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;최종 결제 금액 화면&quot; title=&quot;최종 결제 금액 화면&quot; src=&quot;/static/05d36f11ace14cadc8e96ec0cf6622fa/a6d36/discount.png&quot; srcSet=&quot;/static/05d36f11ace14cadc8e96ec0cf6622fa/222b7/discount.png 163w,/static/05d36f11ace14cadc8e96ec0cf6622fa/ff46a/discount.png 325w,/static/05d36f11ace14cadc8e96ec0cf6622fa/a6d36/discount.png 650w,/static/05d36f11ace14cadc8e96ec0cf6622fa/30d16/discount.png 672w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h3&gt;노트북&lt;/h3&gt;&lt;p&gt;본인의 전자기기로 시험을 제대로 응시할 수 있는지 의문이라면
&lt;a href=&quot;https://www.ets.org/at-home-equipment-check.html&quot;&gt;공식 홈페이지&lt;/a&gt;에서
&lt;em&gt;ETS Secure Browser&lt;/em&gt;라는 앱을 미리 설치하여 &lt;em&gt;Run Equipment Check&lt;/em&gt;을 돌려보는 것을 권장합니다.
마이크, 웹캠 등의 조건만 충족된다면 데스크탑으로도 시험을 응시할 수 있을 듯하지만 저는 민간인이라 확실하지는 않습니다.&lt;/p&gt;&lt;p&gt;한편 가능하다면 맥북보다는 윈도우 노트북을 사용하는 것이 좋을 것 같습니다.
시험 당일이 되면 감독관님이 원격으로 저희의 컴퓨터를 조작하는데,
제가 만난 감독관님의 경우 맥북이 생소하신 듯 하여 트러블이 다소 있었습니다.
프로그램을 Dock에서 제거하면 해당 프로그램이 삭제되는 것으로 착각하셨는데,
잘못하면 셋업 과정에서 치명적인 문제가 발생할 수 있을 듯합니다.&lt;/p&gt;&lt;h3&gt;필기 도구&lt;/h3&gt;&lt;p&gt;다음으로 꼭 알아둬야 하는 점이 있는데, &lt;strong&gt;홈 에디션의 경우 A3 사이즈의 화이트보드를 하나 구매해야 합니다.&lt;/strong&gt;
토플 양반들은 시험 내용이 외부로 유출되는 것을 최대한 방지하고 싶어합니다.
때문에 저희는 종이가 아니라 화이트보드 같은 곳에 필기를 하고,
시험 종료 후 감독관이 보는 앞에서 해당 화이트보드에 아무런 필기도 남아있지 않음을 보여줘야 합니다.
&lt;a href=&quot;https://www.ets.org/toefl/test-takers/ibt/test-day/at-home-test-day.html#accordion-d4ef864fdd-item-a420251217&quot;&gt;필기 도구&lt;/a&gt;에 관한 자세한 사항은 아래와 같습니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;Acceptable note-taking materials, such as a whiteboard or plastic transparency sheet, that can be erased in view of the proctor&lt;/em&gt;&lt;/p&gt;&lt;p&gt;물론 여러분도 저와 같이 응시료 30만원보다 화이트보드 1~2만원이 아깝게 느껴지실 수 있습니다.
그렇지만 필기 도구에서 돈을 아끼려고 하면 안됩니다.
왜냐하면 4가지 섹션 중 3가지 섹션들(듣기, 말하기, 쓰기)에서 필기가 필요하기 때문입니다.
미리 구매해놓고 적어도 시험 응시 하루 전날에는 필기 연습을 해보는 것을 추천드립니다.&lt;/p&gt;&lt;h3&gt;신분증&lt;/h3&gt;&lt;p&gt;다음은 권장사항인데, 가급적이면 신분증으로 &lt;strong&gt;여권&lt;/strong&gt;을 준비해놓는 것을 추천드립니다.
시험 초반부에 감독관이 신분증의 이름이 제가 기재한 이름과 일치하는지 체크하는 과정이 있습니다.
이때 &lt;strong&gt;영어 이름이 기재되어있는 신분증&lt;/strong&gt;이 있어야 이 과정이 스무스하게 진행됩니다.&lt;/p&gt;&lt;p&gt;저의 경우 여권이 만료된 상태였는데,
&lt;a href=&quot;https://www.ets.org/toefl/test-takers/ibt/register/id.html?country-ID=republic-of-korea&quot;&gt;공식 홈페이지&lt;/a&gt;를
보면 유효한 신분증 목록에 분명 &lt;strong&gt;운전면허증&lt;/strong&gt;도 포함되어있고,
결제 과정에서 운전면허증의 번호를 입력하도록 안내하고 있지만 솔직히 이 홈페이지를 어디까지 믿을 수 있을지 다소 불안합니다.&lt;/p&gt;&lt;h2&gt;공부&lt;/h2&gt;&lt;p&gt;저의 경우 대비할 수 있는 시간이 별로 없었지만
딱히 115점 이상의 고득점이 필요한 상황이 아니라서 일단 무지성으로 결제하고 시험 전날 벼락치기를 감행했습니다.&lt;/p&gt;&lt;p&gt;영단어 공부의 경우
&lt;a href=&quot;https://play.google.com/store/apps/details?id=com.belugaedu.amgigorae&amp;amp;hl=ko&quot;&gt;암기고래&lt;/a&gt;라는
모바일 어플이 굉장히 좋았습니다.
저의 경우 토플 영단어 목록을 제대로 훑어보지는 못했으나, 각 잡고 영어 공부하는 분들에게 꽤 도움이 될 듯합니다.&lt;/p&gt;&lt;p&gt;문제 유형 파악을 위해 &lt;a href=&quot;https://toeflgo.ets.org/dashboard&quot;&gt;TOEFL Go!&lt;/a&gt;의 문제들을 풀었는데,
다 풀지는 못했으나 상당히 도움이 되었습니다.
한편 퀄리티는 모르겠으나
&lt;a href=&quot;https://www.ets.org/toefl/test-takers/ibt/prepare/practice-tests.html&quot;&gt;공식 홈페이지의 무료 테스트&lt;/a&gt;도
있으며,
&lt;a href=&quot;https://tstprep.com/&quot;&gt;TST Prep&lt;/a&gt;, &lt;a href=&quot;https://www.toeflresources.com/&quot;&gt;TOEFL Resources&lt;/a&gt; 등의
사이트들에서 무료 자료를 얻을 수 있는 것으로 보입니다.&lt;/p&gt;&lt;p&gt;그 외에도
&lt;a href=&quot;https://www.youtube.com/@TSTPrep&quot;&gt;TST Prep TOEFL&lt;/a&gt;이라는 유튜브 채널의 영상을 몇 개 보았습니다.
2023년도 개정 토플에 대한 영상은 아직 만드는 중으로 보입니다.
옛날 영상들의 내용도 부분적으로 참고할 가치는 있어보입니다.&lt;/p&gt;&lt;h2&gt;시험 당일 TIP&lt;/h2&gt;&lt;p&gt;저도 토플 알못이라 뭔 마인드셋을 어떻게 하느니 그런 훈수는 딱히 없습니다.
그래도 저의 경우 시험 직전에 집중력 강화를 위해 1시간 정도 산책하고 샤워를 했는데 꽤 도움이 되었습니다.&lt;/p&gt;&lt;p&gt;또한 시험 시작 5분 전부터 감독관과의 연결을 시도할 수 있으며,
시험 시작 20분 이내에 셋업이 완료되지 못하면 시험이 무효처리될 수 있다는 점을 염두에 두면 좋을 듯합니다.&lt;/p&gt;&lt;p&gt;저의 경우 시험 시작 5분 전에
&lt;em&gt;Guardian Browser&lt;/em&gt;라는 프로그램을 다운로드해야 한다는 점을 깨달았는데,
놀랍게도 해당 프로그램을 설치하는데 10분 넘게 걸렸습니다.
그 외에도 셋업에 시간이 조금씩 들어서 시험 시작 8분 후에 감독관과 연결될 수 있었습니다.
네트워크 상태에 따라 아슬아슬할 수 있을 듯하니 가급적이면 5분 전부터 접속을 시도하는 것을 권장합니다.&lt;/p&gt;&lt;p&gt;마지막으로 시험 도중에는 물을 마시는 것도 허용되지 않습니다.
과거에는 휴식 시간도 있던 것 같은데,
확실하지는 않지만 2023 개정부터는 시험 시간이 줄어들면서 휴식 시간이 제거된걸로 추측됩니다.&lt;/p&gt;&lt;h2&gt;난이도에 대한 평가&lt;/h2&gt;&lt;p&gt;사실 아직 점수가 나오지 않은 상황입니다.
또한 저는 2023년도 개정 토플이 과거에 비해 어떻게 개선되었는지 모릅니다.
그러나 전반적으로 느낀 바는 있습니다.&lt;/p&gt;&lt;p&gt;우선 억지 문제로 점수를 깎아 변별력을 내려는 시험들과는 거리가 멀다는 점입니다.
다양한 영역에서의 영어 능력을 측정하고자 하되,
점수를 깎으려는 시험이 아니라 말 그대로 제 역량을 최대한 합리적으로 측정하려고 하는 느낌을 받았습니다.&lt;/p&gt;&lt;p&gt;읽기 섹션과 듣기 섹션의 경우 전반적으로 텝스에 비해 난이도가 낮다고 생각합니다.
다만, 듣기 섹션의 경우
5분이 넘는 강의를 딱 한번만 말해준 다음에 문제들을 순차적으로 알려주기 때문에
기억력과 필기 능력이 굉장히 중요하다는 생각을 받았습니다.
또한 난이도 자체는 낮지만 문제의 개수가 너무 적어서 작은 실수가 그만큼 큰 타격이 된다는 생각이 들었습니다.&lt;/p&gt;&lt;p&gt;말하기와 쓰기 섹션의 경우 서술형 문제들이다보니 제대로 한게 맞는지 잘 모르겠습니다.
참고로 말하기 섹션의 첫 번째 문제의 경우 특정 주제에 대한 개인의 의견을 물어보는데,
이와 관련하여 참고할 수 있는 자료가 하나도 주어지지 않습니다.
본인이 전혀 생각해본 적이 없는 주제가 나오면 굉장히 불리할 듯합니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;이번이 제 인생 두 번째 토플입니다.
초등학생 때 딱 한 번 토플을 응시했었는데, 말하기 섹션에서 비정상적으로 낮은 점수를 받은 기억이 있습니다.
말하기 섹션 때 다른 응시자들의 목소리가 신경 쓰여서 제대로 답변을 못했기 때문입니다.
이 때문에 저는 토플 시험장에 대해 부정적인 인식을 가졌고,
공인 어학 점수가 필요할 때마다 토플 대신 텝스만 응시해왔습니다.&lt;/p&gt;&lt;p&gt;그러나 토플 홈 에디션의 경우 해볼만 하다는 생각이 듭니다.
물론 음료 금지, 화이트보드 필기, 감독관 이슈 등 별로라고 느껴지는 점도 있으나
예전에 비하면 선녀라고 생각합니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[[Go] 의존성 역전 원칙]]></title><description><![CDATA[SOLID 중 D에 해당하는 의존성 역전 원칙에 대해 가볍게 설명하겠습니다. Go 코드에서 DIP를 적용할 경우 어떤 상황이 발생하는지를 예시 코드로 설명합니다.]]></description><link>https://bugoverdose.github.io/development/dip-in-go/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/dip-in-go/</guid><pubDate>Fri, 22 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;DIP의 정의&lt;/h2&gt;&lt;p&gt;최범균(2013)은 &lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788969090010&quot;&gt;개발자가 반드시 정복해야 할 객체 지향과 디자인 패턴&lt;/a&gt;에서
의존성 역전 원칙(Dependency Inversion Principle)을 다음과 같이 정의합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;의존 역전 원칙의 정의는 다음과 같다... 고수준 모듈은 저수준 모듈의 구현에 의존해서는 안 된다. 저수준 모듈이 고수준 모듈에서 정의한 추상 타입에 의존해야 한다.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;그리고 조영호(2019)는
&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;amp;mallGb=KOR&amp;amp;barcode=9791158391409&quot;&gt;오브젝트&lt;/a&gt;에서
아래와 같이 설명합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;상위 수준의 모듈은 하위 수준의 모듈에 의존해서는 안 된다. 둘 모두 추상화에 의존해야 한다. 추상화는 구체적인 사항에 의존해서는 안 된다. 구체적인 사항은 추상화에 의존해야 한다. 이를 의존성 역전 원칙이라고 부른다.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;상위 모듈과 하위 모듈이란 표현이 난해할 수 있습니다.
간단히 말해서 외부에서 호출될 코드가 작성된 쪽이 하위 모듈이고, 하위 모듈의 코드를 호출하는 쪽이 상위 모듈입니다.
즉, 이 원칙의 핵심은 구현이 아니라 추상화에 의존해야 한다는 점이며,
이때 의존 &amp;quot;역전&amp;quot; 원칙이라고 부르는 이유는 이 추상화가 코드를 호출하는 상위 모듈 쪽에 정의되어야 하기 때문입니다.&lt;/p&gt;&lt;h2&gt;하위 모듈의 구현에 대한 의존&lt;/h2&gt;&lt;p&gt;예를 들어, 아래와 같이 파일로부터 데이터를 읽는 &lt;code&gt;FileReader&lt;/code&gt; 구조체가 있다고 합시다.
이 구조체에는 파일로부터 데이터를 읽어들이기 위한 &lt;code&gt;ReadData&lt;/code&gt; 메서드가 정의되어 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; fs

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; FileReader &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;f &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;FileReader&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;한편 데이터를 읽어들이고 처리하는 &lt;code&gt;ProcessData&lt;/code&gt;라는 함수는 다른 패키지에 정의되어있습니다.
파일로부터 데이터를 읽는 기능을 위해 &lt;code&gt;FileReader&lt;/code&gt; 타입을 외부로부터 import하여
함수의 매개변수로 사용하고 있습니다.
이게 바로 &amp;quot;상위 모듈(&lt;code&gt;application&lt;/code&gt;)이 하위 모듈(&lt;code&gt;fs&lt;/code&gt;)에 의존하는 구조&amp;quot;입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; application

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;fs&amp;quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reader fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FileReader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; source &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; reader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 에러 처리&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 데이터 처리&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그런데 요구사항의 변경으로 인해 파일이 아니라 데이터베이스로부터
데이터를 읽고 처리해야 하는 상황이 되었다고 합시다.
이에 따라 새로운 하위 모듈 &lt;code&gt;db&lt;/code&gt;와 함께 &lt;code&gt;Database&lt;/code&gt;라는 구조체를 추가했습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; db

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Database &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Database&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그런데 문제는 상위 모듈(&lt;code&gt;application&lt;/code&gt;)에서 하위 모듈(&lt;code&gt;fs&lt;/code&gt;)에 직접 의존하고 있었기 때문에
이번에는 다른 하위모듈(&lt;code&gt;db&lt;/code&gt;)에 의존하도록 &lt;strong&gt;상위 모듈의 코드까지 수정&lt;/strong&gt;해줘야 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; application

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;db&amp;quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reader db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Database&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; source &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; reader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 에러 처리&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 데이터 처리&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;현재 구조의 문제는 앞으로 기능 수정이 필요할 때마다
상위 모듈과 하위 모듈 모두를 고쳐야 한다는 점입니다.
이는 하위 모듈의 구현을 의존하기 때문에 발생하는 문제입니다.&lt;/p&gt;&lt;h2&gt;추상화에 대한 의존&lt;/h2&gt;&lt;p&gt;현재의 구조를 개선할 방법은 간단합니다.
바로 상위 모듈 쪽에서 특정한 하위 모듈의 구현 대신 상위 모듈의 &lt;strong&gt;추상화에 의존&lt;/strong&gt;하도록 하면 됩니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;DataReader&lt;/code&gt;라는 인터페이스를 정의하고 &lt;code&gt;ProcessData&lt;/code&gt;의 매개변수 타입으로 정의합시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; application

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; DataReader &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reader DataReader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; source &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; reader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 에러 처리&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 데이터 처리&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 이제 하위 모듈의 &lt;code&gt;FileReader&lt;/code&gt;와 &lt;code&gt;Database&lt;/code&gt; 객체를 &lt;code&gt;ProcessData&lt;/code&gt;의 인자로 넘길 수 있습니다.
두 구조체 모두 &lt;code&gt;DataReader&lt;/code&gt; 인터페이스의 구현체로써 사용할 수 있기 때문입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;fileReader &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FileReader&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
dataReader &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Database&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fileReader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;a.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fileReader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;b.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fileReader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;c.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dataReader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dataReader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dataReader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 구조의 장점은 &lt;code&gt;ProcessData&lt;/code&gt;로 어떤 구현체를 만들어 넘기는지에 따라
기능을 쉽게 추가, 수정, 제거할 수 있다는 점입니다.
이와 같은 확장성을 지니기 때문에 본질적으로 DIP는 OCP에 근간을 두고 있다고 볼 수 있습니다.&lt;/p&gt;&lt;h2&gt;한계&lt;/h2&gt;&lt;p&gt;다만, Go의 경우 이처럼 DIP를 적용했을 때 &amp;quot;의존성이 역전&amp;quot;된다고 표현하기 애매합니다.
각 모듈들 사이에 아무런 의존성도 존재하지 않기 때문입니다.
실제로 서로 import를 하지 않기 때문에 한쪽 패키지가 지워져도 전부 문제 없이 컴파일됩니다.
이는 Go에서 인터페이스를 구현하기 위해 상위 모듈의 인터페이스에 의존할 필요가 없기 때문에 발생한 상황입니다.&lt;/p&gt;&lt;p&gt;예를 들어, 아래와 같이 자바의 경우 인터페이스를 구현하기 위해 상위 모듈의 인터페이스에 직접적으로 의존할 필요가 있습니다.
그러한 점에서 DIP는 대부분의 OOP 이론들이 이러한 클래스 기반의 OOP 언어를 기준으로 발전했음을 보여주는 전적인 예라고 생각합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;fs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;application&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DataReader&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FileReader&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DataReader&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; string &lt;span class=&quot;token function&quot;&gt;readData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename string&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그럼에도 불구하고, DIP의 본질이 &amp;quot;상위 모듈이 하위 모듈의 구현이 아니라 상위 모듈의 추상화에 의존하는 데 있다&amp;quot;고 생각된다면
저희는 Go에서도 DIP를 적용할 수 있다고 충분히 해석할 수 있습니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;사실 인터페이스를 해당 인터페이스가 사용되는 패키지에 정의하는 것은
&lt;a href=&quot;https://github.com/golang/go/wiki/CodeReviewComments&quot;&gt;Go 공식 위키&lt;/a&gt;에도 나와있는 컨벤션입니다.
그러한 맥락에서 Go 언어에서는 DIP는 굉장히 적극적으로 적용해도 된다고 생각할 수 있습니다.
그러나 이는 인터페이스를 사용하는 방법에 대한 컨벤션이지, 인터페이스 자체를 과하게 남용하라는 의미는 아닙니다.
즉, 저희는 시스템의 복잡도를 높이지 않는 선에서 필요에 따라 추상화에 대한 의존을 적용할 수 있으며
그러할 때 DIP와 OCP는 좋은 가이드라인이 될 것입니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788969090010&quot;&gt;개발자가 반드시 정복해야 할 객체 지향과 디자인 패턴&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;amp;mallGb=KOR&amp;amp;barcode=9791158391409&quot;&gt;오브젝트&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Go] 개방 폐쇄 원칙]]></title><description><![CDATA[SOLID 중 O에 해당하는 개방 폐쇄 원칙에 대해 가볍게 설명하겠습니다. Go 코드에서 OCP를 적용하는 방법을 예시 코드로 설명합니다.]]></description><link>https://bugoverdose.github.io/development/ocp-in-go/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/ocp-in-go/</guid><pubDate>Thu, 21 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;OCP의 정의&lt;/h2&gt;&lt;p&gt;최범균(2013)은 &lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788969090010&quot;&gt;개발자가 반드시 정복해야 할 객체 지향과 디자인 패턴&lt;/a&gt;에서
개방 폐쇄 원칙(Open-Closed Principle)을 다음과 같이 정의합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;개방 폐쇄 원칙은 다음과 같다... 기능을 변경하거나 확장할 수 있으면서 그 기능을 사용하는 코드는 수정하지 않는다... (사용되는 기능의) 확장에는 열려 있어야 하고, (기능을 사용하는 코드의) 변경에는 닫혀 있어야 한다.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;그리고 조영호(2019)는
&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;amp;mallGb=KOR&amp;amp;barcode=9791158391409&quot;&gt;오브젝트&lt;/a&gt;에서
아래와 같이 설명합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;이처럼 기존 코드에 아무런 영향도 미치지 않고 새로운 객체 유형과 행위를 추가할 수 있는 객체지향의 특성을 개방-폐쇄 원칙이라고 부른다. 이것이 객체지향 설계가 전통적인 방식에 비해 변경하고 확장하기 쉬운 구조를 설계할 수 있는 이유다.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;정리하자면, 개방 폐쇄 원칙이란 &lt;strong&gt;기존 코드를 변경하지 않고도 새로운 기능을 자유롭게 추가할 수 있는 구조&lt;/strong&gt;를 말합니다.
그리고 이 원칙의 핵심은 바로 &lt;strong&gt;추상화에 대한 의존&lt;/strong&gt; 그리고 &lt;strong&gt;다형성&lt;/strong&gt;에 있습니다.&lt;/p&gt;&lt;h2&gt;확장성과 변경의 여파&lt;/h2&gt;&lt;p&gt;예를 들어, 아래와 같이 파일로부터 데이터를 읽는 &lt;code&gt;FileReader&lt;/code&gt; 구조체가 있다고 합시다.
해당 구조체에는 파일로부터 데이터를 읽고 처리하기 위한 &lt;code&gt;ReadData&lt;/code&gt;와 &lt;code&gt;ProcessFile&lt;/code&gt; 메서드가 정의되어 있다고 합시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; FileReader &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;f &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;FileReader&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;f &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;FileReader&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ProcessFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; reader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 에러 처리&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 데이터 처리&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그런데 위의 &lt;code&gt;ProcessFile&lt;/code&gt; 메서드와 동일한 방식으로 데이터를 처리하되,
파일이 아니라 RDBMS에서 데이터를 조회해올 필요가 생겨났다고 생각해봅시다.
&lt;em&gt;기존 코드를 전혀 건드리지 않고&lt;/em&gt; 이러한 신규 스펙을 구현하기 위해서는 아래와 같이 &lt;code&gt;Database&lt;/code&gt; 구조체에
&lt;code&gt;ReadData&lt;/code&gt;와 &lt;code&gt;ProcessData&lt;/code&gt; 메서드가 필요할 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Database &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Database&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Database&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 에러 처리&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 데이터 처리&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 구조에는 여러 가지 문제가 있습니다.
우선 &lt;code&gt;ProcessFile&lt;/code&gt;과 &lt;code&gt;ProcessData&lt;/code&gt; 메서드의 내부 로직이 사실상 동일하다는 점입니다.
때문에 데이터 처리 관련 로직을 수정해야 할 때 저희는 &lt;code&gt;ProcessFile&lt;/code&gt;와 &lt;code&gt;ProcessData&lt;/code&gt;의 메서드를 둘 다 수정해야 하며,
그렇지 않을 경우 예상치 못한 버그가 발생할 수 있습니다.&lt;/p&gt;&lt;p&gt;뿐만 아니라 결과적으로 이렇게 새로 구현한 기능을 호출하는 쪽도 수정이 필요합니다.
즉, 파일을 읽는 곳에서는 &lt;code&gt;ProcessFile&lt;/code&gt; 메서드를 호출하고,
데이터베이스를 사용하는 곳에서는 &lt;code&gt;ProcessData&lt;/code&gt; 메서드가 호출되도록 수정해줘야 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;fileReader &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;FileReader&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
fileReader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ProcessFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;a.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
fileReader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ProcessFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;b.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
fileReader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ProcessFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;c.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

dao &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;Database&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
dao&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
dao&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
dao&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;새로운 기능을 추가하는 과정에서 코드가 추가되는 점은 어쩔 수 없습니다.
그러나 위와 같이 코드가 수정되었을 때 변경의 여파가 시스템 전체로 전파된다면
해당 구조는 확장성이 낮으며, 개방 폐쇄 원칙을 위배한다고 볼 수 있습니다.&lt;/p&gt;&lt;h2&gt;추상화에 대한 의존&lt;/h2&gt;&lt;p&gt;이번에는 각 구조체에 정의된 &lt;code&gt;ProcessFile&lt;/code&gt;와 &lt;code&gt;ProcessData&lt;/code&gt; 메서드를 지워봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; FileReader &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;f &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;FileReader&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Database &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;db &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Database&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그 대신 &lt;code&gt;DataReader&lt;/code&gt;라는 인터페이스를 구현하고,
매개변수로 &lt;code&gt;DataReader&lt;/code&gt; 인터페이스를 받는 &lt;code&gt;ProcessData&lt;/code&gt;라는 함수를 만들어봅시다.&lt;/p&gt;&lt;p&gt;위에서 정의한 두 구조체 모두 &lt;code&gt;ReadData&lt;/code&gt; 메서드가 정의되었기 때문에
&lt;code&gt;DataReader&lt;/code&gt; 인터페이스의 구현체로 사용될 수 있습니다.
이제 어떠한 객체를 매개변수로 넘기는지에 따라
&lt;code&gt;reader.ReadData&lt;/code&gt;는 다른 타입에 정의된 &lt;code&gt;ReadData&lt;/code&gt; 메서드를 호출하며,
공통된 방식으로 데이터를 처리합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; DataReader &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reader DataReader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; source &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; reader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ReadData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 에러 처리&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 데이터 처리&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 함수를 호출하는 쪽에서는 &lt;code&gt;ProcessData&lt;/code&gt;의 매개변수로 어떠한 객체가 넘겨지는지에 따라 실행되는 기능을 통제할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;fileReader &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;FileReader&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
dao &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;Database&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fileReader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;a.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fileReader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;b.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fileReader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;c.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dao&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dao&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dao&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;해당 구조에서 저희는 &lt;code&gt;DataReader&lt;/code&gt;와 &lt;code&gt;ProcessData&lt;/code&gt;를 수정할 필요 없이
&lt;code&gt;DataReader&lt;/code&gt;라는 추상타입의 구현체를 새로 추가하거나, 기존 구현체를 수정 및 제거하는 방식으로
프로그램의 기능을 수정할 수 있습니다.&lt;/p&gt;&lt;p&gt;그러한 맥락에서 이러한 구조는 기능의 확장에 대해 개방되어있으며,
기존 코드의 변경에 대해서는 폐쇄되어 있다고 볼 수 있습니다.&lt;/p&gt;&lt;h2&gt;함수 타입에 대한 의존&lt;/h2&gt;&lt;p&gt;그런데 사실 위의 &lt;code&gt;ProcessData&lt;/code&gt;는
넘겨받은 객체에 대해 &lt;code&gt;ReadData&lt;/code&gt; 메서드를 딱 한번 호출하는 작업만 수행하고 있습니다.
그렇다면 매개변수로 객체가 아니라 함수를 넘겨받아 호출하는 방법도 생각해볼 수 있습니다.&lt;/p&gt;&lt;p&gt;이에 따라 저희는 아래와 같이 &lt;code&gt;ReadData&lt;/code&gt;라는 함수 타입(function type)을 정의하고
&lt;code&gt;ProcessData&lt;/code&gt;의 매개변수로 넘길 것입니다.
&lt;code&gt;ReadData&lt;/code&gt; 함수의 매개변수와 반환값의 타입 및 개수는
&lt;code&gt;FileReader&lt;/code&gt;와 &lt;code&gt;Database&lt;/code&gt;의 &lt;code&gt;ReadData&lt;/code&gt; 메서드들과 동일합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; ReadData &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;readData ReadData&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; source &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;readData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 에러 처리&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 데이터 처리&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 &lt;code&gt;ProcessData&lt;/code&gt; 함수의 인자로 어떠한 함수를 넘기는지에 따라 실행되는 기능을 자유롭게 확장할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;fileReader &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;FileReader&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
dao &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;Database&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fileReader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReadData&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;a.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fileReader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReadData&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;b.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fileReader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReadData&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;c.txt&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dao&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReadData&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dao&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReadData&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;ProcessData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dao&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ReadData&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;참고로 자바의 경우 함수형 인터페이스를 매개변수로 받는 방식으로 위와 거의 동일한 구조를 만들 수 있습니다.
즉, 인자로 함수를 넘기더라도 결국 인터페이스에 의존하므로 &amp;quot;추상화에 대한 의존&amp;quot;에 해당한다고 볼 수 있습니다.&lt;/p&gt;&lt;p&gt;그러나 Go 언어의 경우 함수가 1급 객체(first-class citizen)인 것을 넘어, 함수 자체가 타입으로 사용될 수 있습니다.
그리고 위에서 &lt;code&gt;ProcessData&lt;/code&gt;는 인터페이스가 아니라 함수 타입에 의존하고 있으므로
&amp;quot;추상화에 대한 의존&amp;quot;이라고 부르기 다소 애매한 측면이 있습니다.
오히려 위의 구조는 OOP보다는 함수형 프로그래밍과 관련지어서 보는 것이 더 적절할 수 있습니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;개인적으로 SOLID 중 가장 중요한 원칙은 OCP이라고 생각합니다.
추상화, 다형성, 메시지 패싱 등 OOP의 핵심 개념을 기반으로
확장 가능한 구조를 구축하는 방법을 제시하기 때문입니다.&lt;/p&gt;&lt;p&gt;그러나 변경이 예상되는 지점에 OCP를 적용함에 있어 저희는 신중해야 합니다.
특정 부분의 확장성은 증가하더라도 시스템의 전체적인 복잡도가 증가하기 때문입니다.
특히 예상한 곳이 아닌 다른 곳에서 요구사항 변경이 발생할 경우,
결과적으로 OCP는 제대로 된 효용 없이 시스템 전체의 복잡도만을 높일 수 있습니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788969090010&quot;&gt;개발자가 반드시 정복해야 할 객체 지향과 디자인 패턴&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;amp;mallGb=KOR&amp;amp;barcode=9791158391409&quot;&gt;오브젝트&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Go] 인터페이스 분리 원칙]]></title><description><![CDATA[SOLID 중 I에 해당하는 인터페이스 분리 원칙에 대해 가볍게 설명하겠습니다. Go 코드에서 ISP를 적용하는 방법을 예시 코드로 설명합니다.]]></description><link>https://bugoverdose.github.io/development/isp-in-go/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/isp-in-go/</guid><pubDate>Wed, 20 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;ISP의 정의&lt;/h2&gt;&lt;p&gt;최범균(2013)은 &lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788969090010&quot;&gt;개발자가 반드시 정복해야 할 객체 지향과 디자인 패턴&lt;/a&gt;에서
인터페이스 분리 원칙(Interface Segregation Principle)을 다음과 같이 정의합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;인터페이스는 그 인터페이스를 사용하는 클라이언트를 기준으로 분리해야 한다.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;그리고 이 원칙에 대해 로버트 마틴(2013)은
&lt;a href=&quot;https://www.amazon.com/Software-Development-Principles-Patterns-Practices/dp/0135974445&quot;&gt;Agile Software Development, Principles, Patterns, and Practices&lt;/a&gt;에서
아래와 같이 설명합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;클라이언트는 자신이 실제로 호출하는 메서드에만 의존해야만 한다. 이것은 이 비대한 클래스의 인터페이스를 여러 개의 클라이언트에 특화된 인터페이스로 분리함으로써 성취될 수 있다... 이렇게 하면 호출하지 않는 메서드에 대한 클라이언트의 의존성을 끊고, 클라이언트가 서로에 대해 독립적이 되게 만들 수 있다.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;정리하자면 다양한 메서드가 정의된 커다란 타입을 여러 맥락에서 사용하는 것보다는,
각 맥락에 따라 실제로 호출해도 되는 메서드들로만 구성된 소규모 인터페이스를 개별적으로 정의하여 사용해야 한다는 원칙입니다.&lt;/p&gt;&lt;h2&gt;불필요한 퍼블릭 인터페이스의 존재&lt;/h2&gt;&lt;p&gt;예를 들어, &lt;code&gt;MessageQueue&lt;/code&gt;라는 구조체가 있다고 합시다.
&lt;code&gt;Push&lt;/code&gt; 메서드로 문자열 데이터를 적재하고,
&lt;code&gt;Pop&lt;/code&gt; 메서드를 통해 먼저 들어온 데이터부터 하나씩 순차적으로 제거할 수 있는 선입선출 구조입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; queue

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; MessageQueue &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  list list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;q &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;MessageQueue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  q&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 리스트 오른쪽에 메시지 추가&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;q &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;MessageQueue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; q&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 리스트 왼쪽의 메시지 제거 및 반환&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;Client&lt;/code&gt;에서는 아래와 같이 메시지 큐 객체를 지니며,
&lt;code&gt;SendMessage&lt;/code&gt; 함수에서는 &lt;code&gt;Push&lt;/code&gt; 메서드를 통해 메시지 큐에 데이터를 추가합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; client 

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Client &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  queue queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MessageQueue
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;c &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Client&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SendMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;반대로 &lt;code&gt;Server&lt;/code&gt;에서는 &lt;code&gt;HandleMessage&lt;/code&gt; 함수 내부적으로
&lt;code&gt;Pop&lt;/code&gt; 메서드를 통해 메시지 큐에 적재된 데이터를 하나씩 제거하며 처리합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; server 

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Server &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  queue queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MessageQueue
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Server&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HandleMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  msg &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;실무적인 관점에서 이 구조는 굉장히 간결하며, 딱히 치명적인 문제는 없다고 볼 수 있습니다.&lt;/p&gt;&lt;p&gt;다만, &lt;code&gt;Client&lt;/code&gt;에서는 무조건 메시지를 전송&lt;strong&gt;만&lt;/strong&gt; 해야 하고, &lt;code&gt;Server&lt;/code&gt;에서는 무조건 메시지 수신&lt;strong&gt;만&lt;/strong&gt; 해야 하는 경우,
그리고 이 조건이 깨졌을 때 굉장히 치명적인 문제가 발생할 수 있는 상황이라면 이야기가 달라질 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;Client&lt;/code&gt;와 &lt;code&gt;Server&lt;/code&gt; 내부에서 관리하고 있는 &lt;code&gt;MessageQueue&lt;/code&gt;의 &lt;code&gt;Push&lt;/code&gt;와 &lt;code&gt;Pop&lt;/code&gt; 메서드를 모두 호출할 수 있습니다.
때문에 아래의 &lt;code&gt;BadUsage&lt;/code&gt; 메서드와 같은 코드는 문법적으로 충분히 생겨날 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; client 

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Client &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  queue queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MessageQueue &lt;span class=&quot;token comment&quot;&gt;// Push &amp;amp; Pop 모두 가능&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;c &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Client&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;BadUsage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  msg &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; server

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Server &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  queue queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MessageQueue &lt;span class=&quot;token comment&quot;&gt;// Push &amp;amp; Pop 모두 가능&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; Server&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;BadUsage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;만약 서비스가 굉장히 오래되어 &lt;code&gt;Client&lt;/code&gt;와 &lt;code&gt;Server&lt;/code&gt;에 대한 맥락을 아는 사람들이 더 이상 팀에 없거나,
시스템의 복잡도가 너무 비대해진 경우 위와 같은 실수는 충분히 구조적으로 발생할 수 있습니다.&lt;/p&gt;&lt;h2&gt;퍼블릭 인터페이스의 분리&lt;/h2&gt;&lt;p&gt;위의 문제를 잘 분리해서 생각해봅시다. &lt;/p&gt;&lt;p&gt;엄밀히 말해서 &lt;code&gt;Client&lt;/code&gt;는
&lt;code&gt;Push&lt;/code&gt;와 &lt;code&gt;Pop&lt;/code&gt; 메서드가 모두 제공되는 &lt;code&gt;MessageQueue&lt;/code&gt; 타입이 필요한게 아닙니다.
그러므로 저희는 &lt;code&gt;client&lt;/code&gt; 패키지 내부에
&lt;code&gt;Push&lt;/code&gt; 메서드만을 지닌 &lt;code&gt;Pushable&lt;/code&gt; 인터페이스를 정의하고 &lt;code&gt;Client&lt;/code&gt;에서는 해당 인터페이스에 의존하도록 할 것입니다.&lt;/p&gt;&lt;p&gt;이를 통해 저희는 호출되어서는 안되는 &lt;code&gt;Pop&lt;/code&gt; 메서드에 대한 의존성을 &lt;code&gt;Client&lt;/code&gt;로부터 끊었고,
&lt;code&gt;Client&lt;/code&gt;에서는 오로지 &lt;code&gt;Push&lt;/code&gt;만 호출될 수 있게 되었습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; client 

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Pushable &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Client &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  pushable Pushable &lt;span class=&quot;token comment&quot;&gt;// Push만 가능&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;c &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Client&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SendMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pushable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;NewClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p Pushable&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; Client &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Client&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;pushable&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; p&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;마찬가지로 &lt;code&gt;server&lt;/code&gt; 패키지 내부에
&lt;code&gt;Pop&lt;/code&gt; 메서드만을 지닌 &lt;code&gt;Popable&lt;/code&gt; 인터페이스를 정의하고 &lt;code&gt;Server&lt;/code&gt;에서 해당 인터페이스에 의존하도록 할 것입니다.
이제 &lt;code&gt;Server&lt;/code&gt;는 &lt;code&gt;Push&lt;/code&gt; 메서드에 대해 의존하지 않으며
오로지 &lt;code&gt;Pop&lt;/code&gt;을 통해 데이터를 제거하는 것만이 가능해졌습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; server

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Popable &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Server &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  popable Popable &lt;span class=&quot;token comment&quot;&gt;// Pop만 가능&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Server&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HandleMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  msg &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;popable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;NewServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p Popable&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; Server &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Server&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;popable&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; p&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;여기서 핵심은 &lt;code&gt;MessageQueue&lt;/code&gt; 구조체 쪽은 조금도 수정할 필요가 없다는 점입니다.
별도의 작업 없이도 &lt;code&gt;MessageQueue&lt;/code&gt;는 다른 패키지들에 정의된 &lt;code&gt;Popable&lt;/code&gt;과 &lt;code&gt;Pushable&lt;/code&gt; 인터페이스들의 구현체로써
사용될 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; queue

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; MessageQueue &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  list list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// server.Popable 구현&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;q &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;MessageQueue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  q&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 리스트 오른쪽에 메시지 추가&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// client.Pushable 구현&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;q &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;MessageQueue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; q&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 리스트 왼쪽의 메시지 제거 및 반환&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 이에 따라 &lt;code&gt;Client&lt;/code&gt;와 &lt;code&gt;Server&lt;/code&gt; 객체에서는
아래와 같이 하나의 &lt;code&gt;MessageQueue&lt;/code&gt; 객체를 공유하여 사용할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;messageQueue &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MessageQueue&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Pushable의 구현체로 활용&lt;/span&gt;
c &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; client&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewClient&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;messageQueue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SendMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Hello&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
c&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;SendMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;World&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Popable의 구현체로 활용&lt;/span&gt;
s &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;messageQueue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;quot;Hello&amp;quot; 처리&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;HandleMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;quot;World&amp;quot; 처리&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;인터페이스 분리 원칙에서의 인터페이스란 추상 타입인 인터페이스만을 의미하는 것이 아닙니다.
클래스, 구조체, 인터페이스 등 타입에 정의되는 퍼블릭 인터페이스들을 지칭하는 것으로 해석할 수 있습니다.
즉, ISP란 같은 객체를 맥락에 따라 소규모의 인터페이스로 타입을 변환하여,
각 맥락에서 호출 가능한 메서드의 종류를 제한하는 기법으로 볼 수 있습니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788969090010&quot;&gt;개발자가 반드시 정복해야 할 객체 지향과 디자인 패턴&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Go] 추상화와 다형성]]></title><description><![CDATA[Go 인터페이스를 통해 추상화와 다형성의 정의를 가볍게 설명하겠습니다.]]></description><link>https://bugoverdose.github.io/development/abstraction-and-polymorphism-in-go/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/abstraction-and-polymorphism-in-go/</guid><pubDate>Tue, 19 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;추상화&lt;/h2&gt;&lt;p&gt;조영호(2015)의 &lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788998139766&quot;&gt;객체지향의 사실과 오해&lt;/a&gt;에서는
추상화에 대해 다음과 같이 설명합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;어떤 양상, 세부 사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법이다... 구체적인 사물들 간의 공통점은 취하고 차이점을 버리는 일반화를 통해 단순하게 만드는 것이다. ... 중요한 부분은 강조하기 위해 불필요한 세부사항을 제거함으로써 단순하게 만드는 것이다. 모든 경우에 추상화의 목적은 복잡성을 이해하기 쉬운 수준으로 단순화하는 것이라는 점을 기억하라.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;간단히 말해, 추상화란 생략을 통해 복잡성을 단순화하는 것을 의미합니다.
그리고 Go에서는 기본적으로 인터페이스를 통해 추상화를 구현할 수 있습니다.&lt;/p&gt;&lt;h3&gt;추상 타입 정의&lt;/h3&gt;&lt;p&gt;예를 들어, 비즈니스 로직에서 스택 자료구조가 필요한 경우
아래와 같이 &lt;code&gt;Stack&lt;/code&gt; 인터페이스를 정의하고,
이를 매개변수로 넘겨받아 &lt;code&gt;Push&lt;/code&gt;와 &lt;code&gt;Pop&lt;/code&gt;을 호출하는 코드를 작성할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; application

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Stack &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 데이터 추가&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 최근에 추가된 데이터부터 제거&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 인터페이스를 매개변수로&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PushAndPop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;stack Stack&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
  stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1,2]&lt;/span&gt;
  stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1,2,3]&lt;/span&gt;
  stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [1,2]&lt;/span&gt;
  stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
  stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이때 &lt;code&gt;PushAndPop&lt;/code&gt; 함수에서는 실제로 매개변수로 어떠한 구조체의 인스턴스가 들어올지 알 방법이 없습니다.
실제로 아직 &lt;code&gt;Stack&lt;/code&gt;의 구현체가 하나도 정의되지 않았기 때문입니다.
&lt;code&gt;PushAndPop&lt;/code&gt; 함수에서 &lt;code&gt;Stack&lt;/code&gt; 타입에 대해 알 수 있는 유일한 정보는
&lt;code&gt;Push&lt;/code&gt;와 &lt;code&gt;Pop&lt;/code&gt; 메서드가 존재할 것이라는 점 뿐이며,
어떠한 코드가 실행될 지는 현 시점에서 아무도 모릅니다.&lt;/p&gt;&lt;h3&gt;구현체 정의&lt;/h3&gt;&lt;p&gt;이 상태에서 &lt;code&gt;Stack&lt;/code&gt; 인터페이스의 구현체를 만드는 방법은 간단합니다.
아래와 같이 &lt;code&gt;Push&lt;/code&gt;와 &lt;code&gt;Pop&lt;/code&gt; 메서드를 호출할 수 있는 구조체를 정의하면 됩니다.
참고로 이 경우 두 메서드 모두 pointer receiver를 사용하고 있으니,
엄밀히 말하자면 &lt;code&gt;InmemoryStack&lt;/code&gt;의 reference가 바로 &lt;code&gt;Stack&lt;/code&gt; 타입의 구현체로 사용될 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; domain

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; InmemoryStack &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	values &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;InmemoryStack&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;values &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;values&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;InmemoryStack&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	l &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;values&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;values&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
	s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;values &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;values&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;values&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; l
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러면 아래와 같이 &lt;code&gt;InmemoryStack&lt;/code&gt;는 &lt;code&gt;Stack&lt;/code&gt; 타입으로써 &lt;code&gt;PushAndPop&lt;/code&gt; 함수의 매개변수로 넘겨질 수 있습니다.
이제 &lt;code&gt;PushAndPop&lt;/code&gt; 함수 내부에서 &lt;code&gt;Push&lt;/code&gt;와 &lt;code&gt;Pop&lt;/code&gt;을 호출한다면
&lt;code&gt;InmemoryStack&lt;/code&gt;에 정의된 메서드가 호출됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token function&quot;&gt;PushAndPop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;InmemoryStack&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;비교 대상으로 자바 문법을 생각해봅시다.
자바의 경우 추상타입을 구현할 때 추상 타입을 &lt;code&gt;import&lt;/code&gt;해오고 &lt;code&gt;implements&lt;/code&gt;라는 키워드를 사용하여
&amp;quot;해당 클래스는 해당 추상 타입을 구현하고 있다&amp;quot;라고 명시적으로 표현해야 합니다.&lt;/p&gt;&lt;p&gt;그러나 Go 언어에서는 인터페이스와 그 구현체가 &lt;strong&gt;서로에 대해 알 필요가 전혀 없습니다.&lt;/strong&gt;
특정 인터페이스에서 정의된 메서드들이 특정 구조체에 존재할 경우,
&lt;strong&gt;해당 인터페이스의 구현체로써 간주하여 사용&lt;/strong&gt;될 수 있다는 것이 Go 문법의 특성입니다.&lt;/p&gt;&lt;h2&gt;다형성&lt;/h2&gt;&lt;p&gt;조영호(2015)의 &lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788998139766&quot;&gt;객체지향의 사실과 오해&lt;/a&gt;에서는
다형성에 대해 다음과 같이 설명합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;다형성이란 서로 다른 유형의 객체가 동일한 메시지에 대해 서로 다르게 반응하는 것을 의미한다. 좀 더 구체적으로 말해 서로 다른 타입에 속하는 객체들이 동일한 메시지를 수신할 경우 서로 다른 메서드를 이용해 메시지를 처리할 수 있는 메커니즘을 가리킨다.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;즉, 객체로 메시지가 전달되었을 때 해당 객체가 어떤 타입이었는지에 따라 완전히 다른 메서드, 즉 완전히 다른 코드가 호출될 수 있는 특성을 의미합니다.&lt;/p&gt;&lt;h3&gt;다형성의 구현&lt;/h3&gt;&lt;p&gt;객체지향에서 다형성을 구현하기 위한 방법으로는 추상화와 상속이라는 두 가지 기법이 존재합니다.&lt;/p&gt;&lt;p&gt;이와 관련하여 &lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;amp;mallGb=KOR&amp;amp;barcode=9791158391409&quot;&gt;오브젝트&lt;/a&gt;에서는
코드의 재사용이 아니라, 다형성을 위해 상속을 사용하는 것이 상속의 올바른 사용법이라고 설명합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;상속을 사용하는 일차적인 목표는 코드 재사용이 아니라 타입 계층을 구현하는 것이어야 한다... 동일한 메시지에 대해 서로 다르게 행동할 수 있는 다형적인 객체를 구현하기 위해서는 객체의 행동을 기반으로 타입 계층을 구성해야 한다. 상속의 가치는 이러한 타입 계층을 구현할 수 있는 쉽고 편안한 방법을 제공한다는 데 있다.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;그런데 Go 언어의 경우 애초에 상속이 불가능합니다.
때문에 &lt;strong&gt;Go에서는 추상화가 다형성을 구현할 수 있는 유일한 방법&lt;/strong&gt;이며,
추상화와 다형성은 한 세트로 간주되어야 합니다.&lt;/p&gt;&lt;p&gt;이에 따라 다형성을 구현하기 위해 위에서 정의한 &lt;code&gt;Stack&lt;/code&gt; 인터페이스를 다시 한 번 사용하겠습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Stack &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 데이터 추가&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 최근에 추가된 데이터부터 제거&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 이번에는 총 3가지 방식으로 &lt;code&gt;Stack&lt;/code&gt; 인터페이스를 구현해보겠습니다.&lt;/p&gt;&lt;h3&gt;필수적인 메서드 정의&lt;/h3&gt;&lt;p&gt;첫 번째 구현체는 &lt;code&gt;Push&lt;/code&gt;와 &lt;code&gt;Pop&lt;/code&gt; 메서드만 정의된 &lt;code&gt;Stack1&lt;/code&gt; 구조체입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Stack1 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
	values &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Stack1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;	&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Stack1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이처럼 &lt;code&gt;Stack&lt;/code&gt; 인터페이스에 정의되어있는 최소한의 메서드들만 확실히 존재해도
&lt;code&gt;Stack&lt;/code&gt; 타입으로써 활용될 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; s Stack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;Stack1&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;불필요한 메서드 포함 가능&lt;/h3&gt;&lt;p&gt;다음 구현체는 &lt;code&gt;Push&lt;/code&gt;, &lt;code&gt;Pop&lt;/code&gt;을 포함한 다양한 메서드들이 정의된 &lt;code&gt;List&lt;/code&gt; 구조체입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; List &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PushLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;분명 &lt;code&gt;List&lt;/code&gt; 구조체 단독으로는 스택 자료구조로 사용될 수 없습니다.
그 이유는 불필요한 메서드들이 존재하기 때문입니다. 예를 들어 아래와 같이
&lt;code&gt;Push&lt;/code&gt;, &lt;code&gt;Pop&lt;/code&gt; 이외의 메서드가 호출될 경우
&lt;code&gt;List&lt;/code&gt;는 선입후출이라는 스택의 특성을 위배하게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;l &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [2, 3]&lt;/span&gt;
l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [3]&lt;/span&gt;
l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 &lt;code&gt;List&lt;/code&gt; 구조체는 &lt;code&gt;Stack&lt;/code&gt; 타입으로 업캐스팅하여 사용될 수 있습니다.
이 경우 &lt;code&gt;Stack&lt;/code&gt; 타입에서는 &lt;code&gt;Push&lt;/code&gt;, &lt;code&gt;Pop&lt;/code&gt; 이외의 메서드를 호출할 수 없게 되면서,
자연스럽게 스택 자료구조로써 사용될 수 있게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; s Stack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 컴파일 에러&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Unresolved reference &amp;#x27;PopLeft&amp;#x27;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;익명 필드를 통한 메서드 정의 생략&lt;/h3&gt;&lt;p&gt;마지막은 위에서 정의한 &lt;code&gt;List&lt;/code&gt; 타입을 익명 필드로 정의한 &lt;code&gt;Stack2&lt;/code&gt; 구현체입니다.
핵심은 명시적으로 &lt;code&gt;Push&lt;/code&gt;, &lt;code&gt;Pop&lt;/code&gt; 메서드를 정의할 필요 없이
&lt;code&gt;Push&lt;/code&gt;, &lt;code&gt;Pop&lt;/code&gt; 메서드가 정의된 다른 타입을 조합하는 것만으로도 &lt;code&gt;List&lt;/code&gt; 타입을 구현할 수 있다는 점입니다.
&lt;strong&gt;&lt;div to=&quot;/development/composition-in-go&quot;&gt;이전 게시글&lt;/div&gt;&lt;/strong&gt;에서 설명했듯이,
익명 필드로 다른 타입을 포함시킬 경우 서브클래싱과 유사한 간편 문법이 제공되기 때문입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Stack2 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  List &lt;span class=&quot;token comment&quot;&gt;// 익명 필드&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다시 설명하자면 &lt;code&gt;Stack2&lt;/code&gt; 인스턴스에서는 &lt;code&gt;List&lt;/code&gt; 타입을 경유하여 &lt;code&gt;List&lt;/code&gt;의 메서드들에 접근할 수도 있고,
마치 &lt;code&gt;Stack2&lt;/code&gt; 구조체 자체에 해당 메서드들이 정의되어있는 것처럼 &lt;code&gt;List&lt;/code&gt;의 메서드들에 접근할 수도 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;l &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;Stack2&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [2, 3]&lt;/span&gt;
l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [3]&lt;/span&gt;
l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 &lt;code&gt;Stack&lt;/code&gt;으로 업캐스팅하여 사용할 경우 &lt;code&gt;List&lt;/code&gt; 타입을 경유하는 것은 불가능해집니다.
&lt;code&gt;Stack&lt;/code&gt; 인터페이스에는 &lt;code&gt;List&lt;/code&gt;가 정의되어있지 않기 때문입니다.
즉 &lt;code&gt;Stack&lt;/code&gt; 인터페이스라는 추상화 뒤에 &lt;code&gt;Stack2&lt;/code&gt;의 내부구현을 안정적으로 숨길 수 있게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; s Stack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;Stack2&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 컴파일 에러&lt;/span&gt;
s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Unresolved reference &amp;#x27;List&amp;#x27;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;Go에는 추상클래스가 없으며 인터페이스를 import할 필요 없이 추상화를 구현할 수 있습니다.
또한 상속 문법의 부재로 인해 오로지 추상화를 통해서만 다형성을 구현할 수 있습니다.&lt;/p&gt;&lt;p&gt;이러한 간결한 문법으로 인해
전통적인 OOP 이론과 디자인 패턴을 Go 언어에 그대로 적용하는 데 있어 어려움이 있을 수 있습니다.
그러나 이러한 간결함은 시스템의 전체적인 복잡도를 낮추는 효과를 가져옵니다.
여기에 더해 OOP 이론을 적재적소에 적용할 경우 충분히 확장성 있는 애플리케이션을 개발할 수 있습니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788998139766&quot;&gt;객체지향의 사실과 오해&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;amp;mallGb=KOR&amp;amp;barcode=9791158391409&quot;&gt;오브젝트&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Go] 객체 조합과 필드의 종류]]></title><description><![CDATA[익명 필드, exported/unexported 필드 등 다른 타입의 객체를 조합하는 방식에 따라 발생하는 차이점에 대해 상속 대신 조합이라는 맥락에서 비교합니다.]]></description><link>https://bugoverdose.github.io/development/composition-in-go/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/composition-in-go/</guid><pubDate>Sun, 17 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Go 언어에는 상속이 없습니다. 그래도 상속의 대안은 충분합니다.
타입 계층의 구조화를 원하면 인터페이스를 쓸 수 있고, 코드 재사용을 원하면 조합(composition)을 하면 됩니다.&lt;/p&gt;&lt;p&gt;해당 글에서는 &amp;quot;상속 대신 조합&amp;quot;이라는 맥락에서
다른 타입의 객체를 조합할 때
필드를 정의하는 방식에 따라 발생하는 차이들에 대해 비교하고자 합니다.&lt;/p&gt;&lt;h2&gt;Go와 상속 대신 조합&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://go.dev/doc/faq#inheritance&quot;&gt;Go 공식문서&lt;/a&gt;에서 상속과 관련하여 다음과 같은 내용을 찾아볼 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;There are also ways to embed types in other types to provide something analogous—but not identical—to subclassing.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;번역하자면 &lt;strong&gt;타입 내부에 다른 타입을 포함&lt;/strong&gt;시킴으로써 &lt;strong&gt;서브클래싱과 유사한 것을 제공&lt;/strong&gt;할 수 있다는 내용입니다.
&lt;strong&gt;&lt;div to=&quot;/development/composition-over-inheritance&quot;&gt;이전 게시글&lt;/div&gt;&lt;/strong&gt;에서 설명했듯이
서브클래싱이란 코드 재사용 목적의 상속을 의미합니다.
즉, 해당 글은 Go에서 코드 재사용을 위해 조합을 사용할 것을 제안하고 있습니다.&lt;/p&gt;&lt;p&gt;바로 이 점 때문에 Go 진영에서 상속에 대해 구글링해보면 &amp;quot;Go에서는 상속 대신 조합을 하라&amp;quot;는 내용의 글이 아주 많이 등장합니다.
그렇지만 Go에서 문법적으로 조합만 지원한다고 무조건 이를 객체지향적이라고 볼 수는 없습니다.
구조체 내부에 다른 타입을 필드로 포함시킬 수 있는 방법은 다양하기 때문입니다.&lt;/p&gt;&lt;h2&gt;필드의 종류&lt;/h2&gt;&lt;p&gt;&lt;code&gt;List&lt;/code&gt; 구조체는 &lt;code&gt;PushLeft&lt;/code&gt;, &lt;code&gt;Push&lt;/code&gt;, &lt;code&gt;PopLeft&lt;/code&gt;, &lt;code&gt;Pop&lt;/code&gt;과 같이 배열의 왼쪽이나 오른쪽에
값을 하나 추가하거나 제거하는 메서드을 제공합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; list

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; List &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  values &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 맨 처음에 요소 추가&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PushLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 맨 끝에 요소 추가&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 첫 번째 요소 제거 후 반환&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 마지막 요소 제거 후 반환&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 안정적으로 잘 구현되어있는 &lt;code&gt;List&lt;/code&gt; 구조체의 코드를 그대로 재사용하여
스택 자료구조를 구현하고 싶은 경우
스택 구조체의 내부 필드로 &lt;code&gt;List&lt;/code&gt; 타입을 포함시킬 수 있습니다.&lt;/p&gt;&lt;p&gt;예를 들어, &lt;code&gt;Stack1&lt;/code&gt;에서는 &lt;code&gt;List&lt;/code&gt; 타입의 객체를 익명 필드로 관리하고 있고,
&lt;code&gt;Stack2&lt;/code&gt;와 &lt;code&gt;Stack3&lt;/code&gt;에서는 각각 명시적으로 exported 필드와 unexported 필드를 &lt;code&gt;List&lt;/code&gt; 타입으로 정의하고 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Stack1 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List &lt;span class=&quot;token comment&quot;&gt;// anonymous field&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Stack2 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  List list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List &lt;span class=&quot;token comment&quot;&gt;// exported field&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Stack3 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  list list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List &lt;span class=&quot;token comment&quot;&gt;// unexported field&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이러한 각 방식이 지니는 차이에 대해 간략히 비교하겠습니다.&lt;/p&gt;&lt;h2&gt;Stack1: 익명 필드&lt;/h2&gt;&lt;p&gt;익명 필드로 관리할 경우 Go에서는 문법적으로 다양한 기능이 제공됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Stack1 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List &lt;span class=&quot;token comment&quot;&gt;// anonymous field&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;기본적으로 &lt;code&gt;Stack1&lt;/code&gt; 구조체의 인스턴스들에서는
타입명인 &lt;code&gt;List&lt;/code&gt;를 경유하여 &lt;code&gt;List&lt;/code&gt;에서 제공하는 Exported 메서드와 필드들에 접근할 수 있습니다.
그리고 아래와 같이 &lt;code&gt;Push&lt;/code&gt;와 &lt;code&gt;Pop&lt;/code&gt; 메서드만 호출할 경우 선입후출(FILO)이라는 조건을 충족함에 따라
&lt;code&gt;Stack1&lt;/code&gt;은 스택 자료구조로 사용될 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;stack &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Stack1&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;간편 문법&lt;/h3&gt;&lt;p&gt;여기에 더해 익명 필드를 사용할 경우, &lt;strong&gt;마치 &lt;code&gt;Stack1&lt;/code&gt;에 &lt;code&gt;List&lt;/code&gt;의 메서드나 필드가 정의되어있는 것처럼&lt;/strong&gt;
&lt;strong&gt;&lt;code&gt;List&lt;/code&gt;를 언급하지 않고도&lt;/strong&gt; 인스턴스에서 직접 &lt;code&gt;List&lt;/code&gt;의 해당 메서드와 필드에 접근할 수 있게 됩니다.
이러한 간편 문법은 마치 &lt;code&gt;Stack1&lt;/code&gt;에서 &lt;code&gt;List&lt;/code&gt;를 상속한 것과 같은 편의성을 제공하며,
공식문서에서 언급된 서브클래싱과 유사한 것을 제공할 수 있다(&amp;quot;provide something analogous to subclassing&amp;quot;)는
내용과 관련 있다고 볼 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;stack &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Stack1&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다만, 주의할 점은 이러한 간편 문법을 실제로 상속이라고 부를 수는 없다는 점입니다.
&lt;code&gt;Stack1&lt;/code&gt;은 &lt;code&gt;List&lt;/code&gt;의 서브타입이 아니기 때문입니다.
실제로 아래와 같이 &lt;code&gt;Stack1&lt;/code&gt; 타입의 구조체를 &lt;code&gt;List&lt;/code&gt; 타입으로 업캐스팅하려는 경우 당연히 컴파일에 실패합니다.
즉, 두 타입의 관계는 철저히 has-a 관계일 뿐, is-a 관계입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; stack list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Stack1&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Cannot use &amp;#x27;Stack1{}&amp;#x27; (type Stack1) as the type list.List&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;불필요한 인터페이스 문제&lt;/h3&gt;&lt;p&gt;그런데 한편으로 이건 분명히 상속은 아닌데 서브클래싱과 유사한 편의 문법을 제공하고 있으며
동시에 서브클래싱이 지니는 단점도 그대로 공유합니다.
&lt;strong&gt;&lt;div to=&quot;/development/composition-over-inheritance&quot;&gt;이전 게시글&lt;/div&gt;&lt;/strong&gt;에서 언급되었던
코드 재사용을 목적으로 상속을 사용할 경우, &lt;strong&gt;불필요한 메서드들이 과하게 &amp;#x27;상속&amp;#x27;되는 문제&lt;/strong&gt;가 그대로 나타날 수 있습니다.&lt;/p&gt;&lt;p&gt;만일 &lt;code&gt;Push&lt;/code&gt;와 &lt;code&gt;Pop&lt;/code&gt; 메서드만 호출되었으면 선입후출을 보장할 수 있었겠지만,
아래와 같이 &lt;code&gt;PushLeft&lt;/code&gt;와 &lt;code&gt;PopLeft&lt;/code&gt; 메서드도 함께 호출될 경우 선입후출을 위배할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;stack &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Stack1&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 1, 2, 3, 4 순으로 데이터 추가&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PushLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [4, 1, 2, 3]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 3, 4, 1, 2 순으로 데이터 제거&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [4, 1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// [2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;바로 이 점 때문에 &lt;code&gt;Stack1&lt;/code&gt;은 스택 자료구조로써 신뢰하고 사용할 수 없다는 문제를 지닙니다.&lt;/p&gt;&lt;p&gt;만일 스택 자료구조에서 호출되도 되는 메서드와 필드만 &lt;code&gt;List&lt;/code&gt;에 있었으면 괜찮겠지만,
해당 예시에서는 구조가 잘못되었다고 볼 수 있습니다.&lt;/p&gt;&lt;h3&gt;변경의 여파 문제&lt;/h3&gt;&lt;p&gt;또한 타입명을 그대로 참조할 수 있다는 점이 의외로 문제를 발생시킬 수 있습니다.
내부적으로 포함하고 있는 &lt;code&gt;List&lt;/code&gt;가 &lt;code&gt;List2&lt;/code&gt;와 같이 구조체명이 수정되는 경우를 생각해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// List =&amp;gt; List2로 구조체명 수정&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; List2 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  values &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Stack1 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List2 &lt;span class=&quot;token comment&quot;&gt;// anonymous field&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 경우 간편 문법을 사용한 곳들은 문제가 없습니다.
하지만 &lt;code&gt;Stack1&lt;/code&gt; 인스턴스에서 &lt;code&gt;List&lt;/code&gt; 타입을 활용하던 코드들은 모두 &lt;code&gt;List2&lt;/code&gt;로 수정해줘야 합니다.
즉, 변경의 여파가 통제되지 못한다는 문제를 지닙니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;stack &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Stack1&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;Stack2: exported 필드&lt;/h2&gt;&lt;p&gt;다음은 다른 타입의 객체를 내부적으로 &lt;code&gt;List&lt;/code&gt;라는 이름의 exported 필드로 관리하는 경우입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Stack2 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  List list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List &lt;span class=&quot;token comment&quot;&gt;// exported field&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;당연하겠지만 &lt;code&gt;List&lt;/code&gt; 필드를 경유하면 &lt;code&gt;List&lt;/code&gt; 타입의 메서드와 필드들을 사용할 수 있습니다.
그리고 &lt;code&gt;Push&lt;/code&gt;와 &lt;code&gt;Pop&lt;/code&gt; 메서드만 호출할 경우 선입후출을 충족하며 &lt;code&gt;Stack2&lt;/code&gt;도 스택 자료구조로써 사용될 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;stack &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Stack2&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 이 경우 당연히 익명 필드로 인한 간편 문법을 사용할 수가 없습니다.
만일 &lt;code&gt;Stack2&lt;/code&gt;의 인스턴스에서 직접 &lt;code&gt;List&lt;/code&gt;의 메서드들에 접근하려는 경우 컴파일 시점에 에러가 발생합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Unresolved reference&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Unresolved reference&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;캡슐화 위배에 따른 불필요한 인터페이스 문제&lt;/h3&gt;&lt;p&gt;그런데 익명 필드로 인한 간편 문법이 없음에도 불구하고, 해당 구조는 &lt;code&gt;Stack1&lt;/code&gt;과 동일한 구조적 문제를 공유합니다.
캡슐화가 위배되어 외부에서 직접 &lt;code&gt;List&lt;/code&gt; 필드에 접근할 수 있기 때문입니다.&lt;/p&gt;&lt;p&gt;아래와 같이 &lt;code&gt;List&lt;/code&gt; 필드의 메서드들이 자유롭게 호출될 경우 선입후출을 위배할 수 있으며,
이 점 때문에 &lt;code&gt;Stack2&lt;/code&gt; 또한 스택 자료구조로써 신뢰하고 사용할 수 없다는 문제를 지닙니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;stack &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Stack2&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 1, 2, 3, 4 순으로 데이터 추가&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PushLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [4, 1, 2, 3]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 3, 4, 1, 2 순으로 데이터 제거&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [4, 1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// [2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다만, 이는 &amp;quot;상속 대신 조합&amp;quot;이라는 맥락에서 exported 필드로 조합할 경우 발생할 수 있는 문제일 뿐,
&lt;code&gt;List&lt;/code&gt;에 호출되도 되는 메서드와 필드만 있는 경우 문제가 없습니다.&lt;/p&gt;&lt;h3&gt;변경의 여파 문제&lt;/h3&gt;&lt;p&gt;한편 exported 필드를 사용하는 경우 타입명과 필드명을 별도로 관리할 수 있다는 점이 장점이 될 수 있습니다.
아래와 같이 내부적으로 포함하고 있는 &lt;code&gt;List&lt;/code&gt; 타입의 구조체명이 수정되더라도
필드명을 굳이 수정할 필요는 없습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// List =&amp;gt; List2로 구조체명 수정&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; List2 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  values &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Stack2 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  List list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List2 &lt;span class=&quot;token comment&quot;&gt;// exported field&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 경우 &lt;code&gt;Stack1&lt;/code&gt; 인스턴스에서 &lt;code&gt;List&lt;/code&gt; 필드를 활용하는 코드들은 수정될 필요가 없습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;stack &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Stack2&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 당연한 일이지만 캡슐화가 위배되었다는 문제로 인해 변경의 여파를 완전히 통제할 수는 없습니다.
우선 외부에서 &lt;code&gt;List&lt;/code&gt; 타입을 사용하는 코드가 있었다면 당연히 &lt;code&gt;List2&lt;/code&gt;로 수정해줘야 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// List =&amp;gt; List2로 타입명 수정&lt;/span&gt;
List2 list &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;또한 &lt;code&gt;List2&lt;/code&gt;의 메서드들이 수정되거나 삭제되거나 생겨나는 경우, 당연히 이를 사용하던 코드들에는 변경의 영향이 그대로 갑니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// List =&amp;gt; List2로 구조체명 수정&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; List2 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  values &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Pop =&amp;gt; PopRight으로 수정&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;PopRight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;stack &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Stack2&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopRight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;PopRight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 모든 문제는 캡슐화가 위배되었기 때문에 발생하는 문제입니다.&lt;/p&gt;&lt;h2&gt;Stack3: unexported 필드&lt;/h2&gt;&lt;p&gt;마지막으로 &lt;code&gt;list&lt;/code&gt;라는 unexported 필드로 &lt;code&gt;List&lt;/code&gt; 타입을 조합하는 경우 (패키시 수준에서의) 캡슐화가 충족됩니다.
&lt;code&gt;List&lt;/code&gt; 타입의 exported 메서드와 필드는 &lt;code&gt;Stack3&lt;/code&gt; 구조체의 인스턴스 외부에서 사용될 수 없으며,
오로지 &lt;code&gt;list&lt;/code&gt; 필드를 경유하여 내부적으로만 사용될 수 있습니다.&lt;/p&gt;&lt;p&gt;이제 &lt;code&gt;Stack3&lt;/code&gt;에 스택 자료구조에 필수적인 &lt;code&gt;Push&lt;/code&gt;, &lt;code&gt;Pop&lt;/code&gt; 메서드만 별도로 정의하고,
해당 메서드들을 내부에서 &lt;code&gt;list&lt;/code&gt; 필드를 통해 &lt;code&gt;List&lt;/code&gt;의 코드를 사용한다면
코드 재사용의 이점을 확보할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Stack3 &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  list list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;List &lt;span class=&quot;token comment&quot;&gt;// unexported field&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 맨 끝에 요소 추가&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Stack3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; 
  s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 마지막 요소 제거 후 반환&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Stack3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int64&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 &lt;code&gt;Stack3&lt;/code&gt; 구조체의 인스턴스는 외부에 불필요한 퍼블릭 인터페이스를 제공하지 않으므로
선입후출을 안정적으로 보장하며 스택 자료구조로써 신뢰하고 사용할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;stack &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Stack3&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;또한 내부적으로 &lt;code&gt;List&lt;/code&gt; 구조체에 변화가 발생하더라도 이는 &lt;code&gt;Stack3&lt;/code&gt; 내부에만 영향을 미칩니다.
이는 변경의 여파가 안정적으로 통제되고 있음을 보여줍니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;정리하자면 Go는 상속이 지원되지 않으며, 이에 대해 &amp;quot;상속 대신 조합&amp;quot;을 사용하라는 표현이 많습니다.
이때 타입을 익명 필드로 조합할 경우, 마치 상속을 한 것과 유사한 편의 문법을 부분적으로 지원받을 수 있습니다.
한편, 외부로 노출되는 퍼블릭 인터페이스를 제한하고 싶은 경우 캡슐화를 추구하는 것이 필요할 수 있습니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[[OOP] 상속 대신 조합]]></title><description><![CDATA[예시 코드를 통해 코드 재사용 목적의 상속의 문제점을 파악하고, 서브클래싱, 서브타이핑, 리스코프 치환원칙 등의 키워드를 통해 상속 대신 조합이라는 표현에 대해 정리하겠습니다.]]></description><link>https://bugoverdose.github.io/development/composition-over-inheritance/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/composition-over-inheritance/</guid><pubDate>Sat, 16 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;서브클래싱과 서브타이핑&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;상속 대신 조합(composition over inheritance)&lt;/strong&gt;이라는 표현에 대해 이해하기 위해서는 상속을 잘못 사용하는 경우에 대해 이해할 필요가 있습니다.&lt;/p&gt;&lt;p&gt;상속의 방법에 대해 조영호(2015)는
&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788998139766&quot;&gt;객체지향의 사실과 오해&lt;/a&gt;에서
다음과 같이 설명합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;상속은 서브타이핑(subtyping)과 서브클래싱(subclassing)의 두 가지 용도로 사용될 수 있다. 서브클래스가 슈퍼클래스를 대체할 수 있는 경우 이를 서브타이핑이라고 한다. 서브클래스가 슈퍼클래스를 대체할 수 없는 경우에는 서브클래싱이라고 한다. 서브타이핑은 설계의 유연성이 목표인 반면 서브클래싱은 코드의 중복 제거와 재사용이 목적이다.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;여기서 &lt;strong&gt;서브클래싱&lt;/strong&gt;에 대해 이해하기 위해 코드 재사용만을 목적으로 상속을 사용하는 경우를 예시로 살펴보겠습니다.&lt;/p&gt;&lt;h2&gt;서브클래싱: 코드 재사용 목적의 상속&lt;/h2&gt;&lt;p&gt;&lt;code&gt;List&lt;/code&gt; 클래스는 &lt;code&gt;pushLeft&lt;/code&gt;, &lt;code&gt;push&lt;/code&gt;, &lt;code&gt;popLeft&lt;/code&gt;, &lt;code&gt;pop&lt;/code&gt;과 같이 배열의 왼쪽이나 오른쪽에
값을 하나 추가하거나 제거하는 메서드을 제공합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

   &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; elements&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

   &lt;span class=&quot;token comment&quot;&gt;// 맨 처음에 요소 추가&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;pushLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

   &lt;span class=&quot;token comment&quot;&gt;// 맨 끝에 요소 추가&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

   &lt;span class=&quot;token comment&quot;&gt;// 첫 번째 요소 제거 후 반환&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;popLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

   &lt;span class=&quot;token comment&quot;&gt;// 마지막 요소 제거 후 반환&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이처럼 이미 안정적으로 잘 구현되어있는 &lt;code&gt;List&lt;/code&gt; 클래스의 코드를 그대로 재사용하여
스택과 큐 자료구조를 구현하고 싶은 경우,
아래와 같이 &lt;code&gt;List&lt;/code&gt; 클래스를 상속받아 &lt;code&gt;Stack&lt;/code&gt;와 &lt;code&gt;Queue&lt;/code&gt; 클래스를 구현할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stack&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Queue&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 &lt;code&gt;Stack&lt;/code&gt; 객체에서 오로지 &lt;code&gt;push&lt;/code&gt;와 &lt;code&gt;pop&lt;/code&gt; 메서드만 호출하면
리스트의 마지막에만 값이 추가되고 제거되면서 선입후출(FILO)을 보장할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Stack&lt;/span&gt; stack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 4]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;마찬가지로 &lt;code&gt;Queue&lt;/code&gt; 객체에서 오로지 &lt;code&gt;push&lt;/code&gt;와 &lt;code&gt;popLeft&lt;/code&gt; 메서드만 호출하면
리스트의 마지막에 값이 추가되고, 리스트의 첫 번째부터 먼저 들어온 값들이 순차적으로 제거됨에 따라
선입선출(FIFO)을 보장할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Queue&lt;/span&gt; queue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Queue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;popLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [2, 3]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [2, 3, 4]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;popLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [3, 4]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;popLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [4]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;popLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 이처럼 코드 재사용 목적으로 상속을 사용할 경우 리스코프 치환원칙(Liskov Substitution Principle)을 위배하게 됩니다.&lt;/p&gt;&lt;h2&gt;서브타이핑: 리스코프 치환 원칙&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;리스코프 치환원칙&lt;/strong&gt;이란 간단히 말해 &lt;strong&gt;&amp;quot;상속을 할 때 서브클래싱은 나쁘고 서브타이핑을 해야 한다&amp;quot;&lt;/strong&gt;라는 원칙입니다. 서브타이핑에 대해 조영호(2019)는
&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;amp;mallGb=KOR&amp;amp;barcode=9791158391409&quot;&gt;오브젝트&lt;/a&gt;에서
다음과 같이 설명합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;상속을 사용하는 일차적인 목표는 코드 재사용이 아니라 타입 계층을 구현하는 것이어야 한다... 동일한 메시지에 대해 서로 다르게 행동할 수 있는 다형적인 객체를 구현하기 위해서는 객체의 행동을 기반으로 타입 계층을 구성해야 한다. 상속의 가치는 이러한 타입 계층을 구현할 수 있는 쉽고 편안한 방법을 제공한다는 데 있다.&amp;quot;&lt;/em&gt; &lt;/p&gt;&lt;p&gt;위의 예시에서 &lt;code&gt;Stack&lt;/code&gt;과 &lt;code&gt;Queue&lt;/code&gt;는 &lt;code&gt;List&lt;/code&gt;를 상속하기 때문에 당연히
각 클래스를 통해 생성된 인스턴스는 &lt;em&gt;문법적으로&lt;/em&gt; &lt;code&gt;List&lt;/code&gt; 타입으로 업캐스팅될 수 있습니다.
이는 &lt;code&gt;Stack&lt;/code&gt;과 &lt;code&gt;Queue&lt;/code&gt;는 프로그램 내에서 &lt;code&gt;List&lt;/code&gt;로서 다뤄질 수 있어야하며,
그런 방식으로 타입계층이 설계되도록 상속을 써야 한다는 것이 바로 서브타이핑이자 리스코프 치환원칙입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt; stack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt; queue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Queue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 &lt;code&gt;stack&lt;/code&gt;과 &lt;code&gt;queue&lt;/code&gt; 객체는 &lt;code&gt;List&lt;/code&gt; 타입으로 다뤄져서는 안됩니다.&lt;/p&gt;&lt;p&gt;예를 들어, &lt;code&gt;stack&lt;/code&gt; 객체에서 아래와 같이 &lt;code&gt;pushLeft&lt;/code&gt;, &lt;code&gt;popLeft&lt;/code&gt;와 같은 메서드가 호출될 경우
더 이상 선입후출이라는 특성을 보장할 수 없게 됩니다.
이는 &lt;code&gt;Stack&lt;/code&gt;을 스택 자료구조로서 신뢰하고 사용할 수 없음을 의미합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt; stack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 1, 2, 3, 4 순으로 데이터 추가&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pushLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [4, 1, 2, 3]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 3, 4, 1, 2 순으로 데이터 제거&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [4, 1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;popLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;popLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// [2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;마찬가지로 &lt;code&gt;queue&lt;/code&gt; 객체도 &lt;code&gt;List&lt;/code&gt;로부터 상속받은 메서드들을 자유롭게 호출할 경우
선입선출이라는 특성을 보장할 수 없습니다.
즉, &lt;code&gt;Queue&lt;/code&gt;는 큐 자료구조로서 신뢰할 수 없음을 의미합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt; queue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Queue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 1, 2, 3, 4 순으로 데이터 추가&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pushLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [4, 1, 2, 3]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 3, 4, 1, 2 순으로 데이터 제거&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// [4, 1, 2]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;popLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;popLeft&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// [2]&lt;/span&gt;
queue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// []&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;정리하자면 위의 예시는 타입들 사이의 관계에 대한 고려 없이
오로지 코드 재사용만을 목적으로 상속을 사용할 경우 발생할 수 있는 문제입니다.
상속으로 인해 &lt;code&gt;Stack&lt;/code&gt;과 &lt;code&gt;Queue&lt;/code&gt;에 호출되어서는 안되는 메서드들이 불필요하게 생겨났기 때문에,
정확히 말하면 &lt;code&gt;Stack&lt;/code&gt;과 &lt;code&gt;Queue&lt;/code&gt; 타입에 불필요한 퍼블릭 인터페이스들이 과하게 상속되었기 때문에 발생한 문제입니다.&lt;/p&gt;&lt;h2&gt;상속 대신 조합&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.yes24.com/Product/Goods/17525598&quot;&gt;GoF의 디자인 패턴&lt;/a&gt;에서는
&lt;strong&gt;상속 대신 조합&lt;/strong&gt;에 대해 다음과 같이 설명합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;(코드 재사용을 위해서는) 객체 합성이 클래스 상속보다 더 좋은 방법이다... 객체 합성은 클래스 상속의 대안이다.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;이러한 조언에 따라 &lt;code&gt;List&lt;/code&gt; 클래스의 코드를 재사용하여 스택을 구현하기 위해
이번에는 상속이 아니라 조합을 사용하겠습니다. 큐는 생략합니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;Stack&lt;/code&gt; 클래스 내부에서 &lt;code&gt;List&lt;/code&gt; 객체 하나를 &lt;code&gt;list&lt;/code&gt; 필드로 관리하고,
스택 자료구조에 필수적인 &lt;code&gt;push&lt;/code&gt;와 &lt;code&gt;pop&lt;/code&gt; 메서드만 별도로 정의해봅시다.
그리고 각 메서드에서 내부적으로 &lt;code&gt;list&lt;/code&gt; 객체의 메서드를 호출하도록 구현하면
&lt;code&gt;List&lt;/code&gt;의 코드를 그대로 재사용하는 이점을 얻을 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stack&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

   &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

   &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

   &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

   &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 &lt;code&gt;Stack&lt;/code&gt;는 스택 자료구조로서 신뢰하면서 사용할 수 있습니다.
왜냐하면 &lt;code&gt;Stack&lt;/code&gt;에는 호출해서는 안되는 메서드가 존재하지 않기 때문입니다.
&lt;code&gt;stack&lt;/code&gt; 객체는 &lt;code&gt;push&lt;/code&gt; 메서드를 통해 리스트의 마지막에 데이터를 추가하고
&lt;code&gt;pop&lt;/code&gt; 메서드를 통해 리스트의 마지막 데이터를 제거하는 작업만 가능합니다.
즉, &lt;code&gt;Stack&lt;/code&gt;에 정의된 메서드들만 호출할 경우 자연스럽게 선입선출을 보장할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt; l &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Stack&lt;/span&gt; stack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 3]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2]&lt;/span&gt;
stack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1, 2, 4]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;참고로 &lt;code&gt;Stack&lt;/code&gt;과 &lt;code&gt;List&lt;/code&gt;는 완전히 별개의 타입이므로
&lt;code&gt;Stack&lt;/code&gt; 객체는 더 이상 &lt;code&gt;List&lt;/code&gt; 타입으로 업캐스팅될 수 없습니다.
그러한 면에서 상속 관계는 &amp;quot;Stack이 곧 List가 된다&amp;quot;라는 면에서 &lt;em&gt;is-a 관계&lt;/em&gt;라고 하는 반면,
이처럼 Stack이 List를 내부에 지니고 있는 조합은 &lt;em&gt;has-a 관계&lt;/em&gt;라고 부릅니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;정리하자면 &lt;strong&gt;상속 대신 조합&lt;/strong&gt;라는 말은 무조건 상속을 쓰지 말라는 의미가 아닙니다.
특정 클래스를 구현할 때 다른 클래스의 하위타입으로 새로 구현하고 싶으면 상속이 권장되며,
이처럼 리스코프 치환원칙을 충족하는 상속의 사용법을 서브타이핑이라 부릅니다.
그러나 단순히 다른 클래스의 코드만 재활용하고 싶은 경우
해당 클래스를 내부적으로 지니도록 조합하라는 것이 바로 &lt;strong&gt;상속 대신 조합&lt;/strong&gt;의 의미입니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788998139766&quot;&gt;객체지향의 사실과 오해&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;amp;mallGb=KOR&amp;amp;barcode=9791158391409&quot;&gt;오브젝트&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Go] 구조체 캡슐화하기]]></title><description><![CDATA[캡슐화의 정의를 설명하고 Go 언어에서 캡슐화를 구현할 수 있는 방법과 한계에 대해 다뤄보겠습니다. 예제 코드를 통해 Go 구조체의 내부 구현을 숨기는 방안을 단계적으로 정리하겠습니다.]]></description><link>https://bugoverdose.github.io/development/encapsulating-go-structs/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/encapsulating-go-structs/</guid><pubDate>Wed, 13 Sep 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;캡슐화&lt;/h2&gt;&lt;p&gt;조영호(2015)의 &lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788998139766&quot;&gt;객체지향의 사실과 오해&lt;/a&gt;에서는
캡슐화에 대해 다음과 같이 설명합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;&amp;quot;구현을 외부로부터 감추는 것을 캡슐화라고 한다... 객체는 상태와 행위를 한데 묶은 후 외부에서 반드시 접근해야만 하는 행위를 골라 공용 인터페이스를 통해 노출한다... 객체는 외부의 객체가 자신의 내부 상태를 직접 관찰하거나 제어할 수 없도록 막기 위해 의사소통 가능한 특별한 경로(공용 인터페이스)만 외부에 노출한다.&amp;quot;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;간단히 말해 &lt;strong&gt;캡슐화&lt;/strong&gt;란 &lt;strong&gt;객체의 내부 구현을 외부로부터 숨기는 것&lt;/strong&gt;을 말합니다.
구체적으로는 외부에서 객체의 내부에 &lt;em&gt;직접&lt;/em&gt; 접근하지 못하도록 막아놓고,
오로지 객체에서 제공하는 퍼블릭 인터페이스를 통해서만
객체의 내부 구현에 &lt;em&gt;간접적으로&lt;/em&gt; 접근할 수 있도록 하는 것을 의미합니다.&lt;/p&gt;&lt;p&gt;자바의 경우 문법적으로 4가지 접근제어자를 제공함으로써
인스턴스, 클래스, 패키지 수준에서의 캡슐화를 지원합니다.
그리고 예를 들어, public 메서드를 통해서만 private 필드에 접근가능하도록
클래스를 정의하는 방식으로 자바의 객체는 굉장히 쉽게 캡슐화를 보장할 수 있습니다.&lt;/p&gt;&lt;p&gt;그러나 Go 언어의 경우 캡슐화를 패키지 수준에서만 제공합니다.
특정 상수, 변수, 타입 등을 Exported로 지정하려면
아래와 같이 변수명, 타입명 등의 식별자가 대문자로 시작하도록 하면 되고,
unexported로 지정하려면 식별자가 소문자로 시작하도록 하면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; example

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; ExportedConst   &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; unexportedConst &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; ExportedVar   &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; unexportedVar &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ExportedFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;unexportedFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; ExportedStruct &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  ExportedField   &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;
  unexportedField &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;m &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ExportedStruct&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ExportedMethod&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;m &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ExportedStruct&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;unexportedMethod&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; unexportedStruct &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이러면 패키지 외부에서 Exported 필드 및 타입들은 문제 없이 접근할 수 있으나,
unexported 필드 및 타입들에 접근하려는 경우
아래의 주석에 명시된 에러 메시지와 함께 컴파일에 실패하게 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;example&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ExportedConst&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// println(example.unexportedConst) // Unexported constant&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;example&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ExportedVar&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// println(example.unexportedVar) // Unexported variable&lt;/span&gt;

example&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ExportedFunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// example.unexportedFunc() // Unexported function&lt;/span&gt;

instance &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; example&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ExportedStruct&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	ExportedField&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// unexportedField: 20, // Unexported field&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ExportedMethod&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// instance.unexportedMethod() // Unexported method&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// example.unexportedStruct{} // Unexported type &lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;내부 구현의 노출&lt;/h2&gt;&lt;p&gt;아래의 &lt;code&gt;Member&lt;/code&gt; 구조체에는 &lt;code&gt;Name&lt;/code&gt;이라는 Exported 필드와
&lt;code&gt;ChangeName&lt;/code&gt;이라는 Exported 메서드가 정의되어있습니다.
회원에 대해 &lt;code&gt;ChangeName&lt;/code&gt; 메서드를 호출할 경우
저희는 현재와 동일한 이름으로 수정하려고 하거나, 2~10 글자가 아닌 경우 에러를 반환함을 알 수 있습니다.&lt;/p&gt;&lt;p&gt;그런데 &lt;code&gt;Member&lt;/code&gt;의 외부에서 &lt;code&gt;Name&lt;/code&gt; 필드에 자유롭게 접근할 수 있기 때문에,
&lt;code&gt;Member&lt;/code&gt;는 내부 구현이 외부에 그대로 노출되어있고 &lt;strong&gt;캡슐화에 실패&lt;/strong&gt;했다고 말할 수 있습니다.
그리고 캡슐화의 실패로 인해 &lt;code&gt;Name&lt;/code&gt; 필드의 값을 외부에서 자유롭게 지정하고 수정할 수 있다는 점에서
문제가 발생할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; domain

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Member &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  Name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Exported field&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; name &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;is same name as before&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  nameLength &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; nameLength &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; nameLength &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;name must be 2 to 10 characters&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;예를 들어, &amp;quot;회원의 이름은 언제나 2~10글자여야 한다&amp;quot;는 규칙을 프로그램에서 지켜야한다고 합시다.
그러면 회원의 이름을 수정할 때 언제나 &lt;code&gt;ChangeName&lt;/code&gt; 메서드를 호출함으로써 이를 보장할 수 있을 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; application

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ChangeMemberName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Member 내부에서 검증 로직 적용 =&amp;gt; 2~10글자 보장&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 실제로는 &lt;code&gt;Member&lt;/code&gt; 객체를 사용하는 쪽에서는 이름을 수정하기 위해 &lt;code&gt;ChangeName&lt;/code&gt; 메서드를 호출할 수도 있지만,
이를 무시하고 아래와 같이 &lt;code&gt;Name&lt;/code&gt; 필드의 값을 직접 접근해서 조작할 수도 있습니다.
즉, &lt;code&gt;ChangeName&lt;/code&gt;과 같은 퍼블릭 인터페이스를 외부에 제공하더라도 해당 메서드의 사용을 &lt;strong&gt;강제할 수 없습니다&lt;/strong&gt;.
그리고 그에 따라 &amp;quot;회원의 이름은 언제나 2~10글자여야 한다&amp;quot; 등의 규칙을 강제할 수단이 없어집니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; application

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;CreateMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 생성 시점의 Name 필드 값 자유롭게 초기화 =&amp;gt; 2~10글자 보장 불가&lt;/span&gt;
  member &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;UpdateMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Name에 대한 직접 수정 허용 =&amp;gt; 2~10글자 보장 불가&lt;/span&gt;
  member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;퍼블릭 인터페이스 뒤에 캡슐화하기&lt;/h2&gt;&lt;p&gt;내부 구현의 노출로 인한 문제를 해결하는 방법은
외부에서 내부 구현에 직접 접근할 수 없도록 막고,
오로지 퍼블릭 인터페이스를 통해서만 내부 구현에 간접적으로 접근할 수 있도록 하는 것입니다.&lt;/p&gt;&lt;p&gt;아래와 같이 &lt;code&gt;Name&lt;/code&gt;을 &lt;code&gt;name&lt;/code&gt; 필드로 수정함으로써 unexported 필드로 만들고,
조회 및 수정 목적으로 &lt;code&gt;Name&lt;/code&gt;과 &lt;code&gt;ChangeName&lt;/code&gt; 메서드를 정의함으로써 이를 구현할 수 있습니다.
이는 자바 빈 규약과 유사한 측면이 있으나 자바와는 별개이기 때문에
굳이 메서드명을 &lt;code&gt;Get~&lt;/code&gt;/&lt;code&gt;Set~&lt;/code&gt; 형식으로 만들 필요는 없습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; domain

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Member &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Java Bean 규약의 private 멤버 변수 역할&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token comment&quot;&gt;// Java Bean 규약의 Getter 역할&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name &lt;span class=&quot;token comment&quot;&gt;// Java Bean 규약의 Setter 역할과 유사&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 외부에서 &lt;code&gt;name&lt;/code&gt; 필드에 직접 접근하려고 하면 컴파일에 실패하며,
&lt;code&gt;name&lt;/code&gt; 필드에 간접적으로 접근하기 위해서는
&lt;code&gt;Name&lt;/code&gt;이나 &lt;code&gt;ChangeName&lt;/code&gt; 메서드와 같은 퍼블릭 인터페이스의 사용이 &lt;strong&gt;강제&lt;/strong&gt;됩니다.
이러한 구조를 객체지향에서는 &lt;strong&gt;퍼블릭 인터페이스 뒤에 내부 구현이 감추어져있다&lt;/strong&gt;고 말합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; application

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;CreateMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// member := &amp;amp;domain.Member{name: name} // Unexported field &amp;#x27;name&amp;#x27; usage&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;UpdateMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// member.name = name // Unexported field &amp;#x27;name&amp;#x27; usage&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ChangeMemberName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Member 내부에서 검증 로직 적용 =&amp;gt; 2~10글자 보장&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 적어도 회원의 이름을 수정했을 때 2~10글자라는 규칙을 충족할 것임을 보장할 수 있습니다.&lt;/p&gt;&lt;h2&gt;생성자 함수&lt;/h2&gt;&lt;p&gt;그런데 Go 언어에서는 모든 필드들이 zero value로 구성된
구조체 인스턴스를 생성할 수 있는 문법들이 기본적으로 제공됩니다.
그리고 &lt;code&gt;Member&lt;/code&gt; 구조체 내부 구현은 unexported이지만,
&lt;code&gt;Member&lt;/code&gt; 구조체 자체는 Exported이므로 이러한 문법을 적용할 수 있습니다.&lt;/p&gt;&lt;p&gt;이는 아래와 같이 Member 구조체 생성 시점에는 이름이 2~10글자 사이여야 한다는 규칙이 위배될 수 있음을 의미합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// member := &amp;amp;domain.Member{name: name} // Unexported field &amp;#x27;name&amp;#x27; usage&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// zero value struct : 모든 필드가 zero value인 구조체 생성 가능&lt;/span&gt;
member &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// &amp;amp;{name:}&lt;/span&gt;
member &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;amp;{name:}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ... // 2~10글자 규칙 위배. 내부 구현이 불완전한 상태&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 2~10글자 규칙 충족&lt;/span&gt;
&lt;span class=&quot;token boolean&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 때문에 Go에서는 아래의 &lt;code&gt;NewMember&lt;/code&gt;와 같이 생성자 함수를 별도로 정의하여 외부에 제공하는 경우가 많습니다.
&lt;code&gt;NewMember&lt;/code&gt; 함수는 매개변수로 들어온 &lt;code&gt;name&lt;/code&gt;에 대해
내부적으로 검증 로직을 실행하여 2~10글자 규칙을 보장하면 &lt;code&gt;Member&lt;/code&gt; 객체를 하나 생성하여 반환하고
아니면 에러를 반환합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; domain

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Member &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 생성자 함수&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;NewMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validateName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; name &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;is same name as before&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validateName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; err
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 검증 로직&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validateName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  nameLength &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; nameLength &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; nameLength &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;name must be 2 to 10 characters&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 외부에서 생성자 함수 &lt;code&gt;NewMember&lt;/code&gt;로 객체를 생성하고,
&lt;code&gt;ChangeName&lt;/code&gt; 메서드를 통해서만 이름을 수정한다면 2~10글자 규칙은 안정적으로 보장될 수 있습니다.
때문에 실용성의 측면에서는 이처럼 생성자 함수를 정의하는 것에서 멈추는 것만으로도 충분합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&amp;quot;testing&amp;quot;&lt;/span&gt;

  &lt;span class=&quot;token string&quot;&gt;&amp;quot;github.com/stretchr/testify/assert&amp;quot;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TestNewMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  m1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;John&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// (*domain.Member, nil) 반환&lt;/span&gt;
  assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NotNil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NoError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  m2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// (nil, error) 반환&lt;/span&gt;
  assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;name must be 2 to 10 characters&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그렇지만 문제의 원인인 &lt;code&gt;Member&lt;/code&gt; 구조체는 여전히 Exported 타입입니다.
때문에 Go에서 제공하는 기본 문법을 통해
여전히 비어있는 객체가 생성 가능하다는 문제는 여전히 존재합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TestNewMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 빈 객체는 여전히 생성 가능&lt;/span&gt;
  m3 &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// &amp;amp;{name:}&lt;/span&gt;
  assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  m4 &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;amp;{name:}&lt;/span&gt;
  assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m4&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 문제를 해결하려면 추가적인 작업이 필요합니다.&lt;/p&gt;&lt;h2&gt;추상화 뒤에 캡슐화하기&lt;/h2&gt;&lt;p&gt;비어있는 객체의 생성을 방지하기 위해서는
객체 생성을 위한 수단으로 생성자 함수 &lt;code&gt;NewMember&lt;/code&gt;의 사용을 강제할 필요가 있습니다.
이를 위해 우선 패키지 외부에서 &lt;code&gt;Member&lt;/code&gt; 구조체로 빈 객체를 생성하지 못하도록
&lt;code&gt;member&lt;/code&gt; 구조체와 같이 unexported 타입으로 만들 필요가 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; domain

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; member &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
 &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validateName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 &lt;code&gt;member&lt;/code&gt; 구조체를 인터페이스의 구현체가 되도록 &lt;code&gt;Member&lt;/code&gt; 인터페이스를 정의하고,
생성자 함수 &lt;code&gt;NewMember&lt;/code&gt;에서는 &lt;code&gt;member&lt;/code&gt; 객체를 생성하여 &lt;code&gt;Member&lt;/code&gt; 타입으로 외부에 노출시켜봅니다.&lt;/p&gt;&lt;p&gt;이러한 구조에 대해 저희는 &lt;code&gt;Member&lt;/code&gt; 인터페이스라는 &lt;strong&gt;추상화 뒤에&lt;/strong&gt; 구체적인 &lt;strong&gt;구현체가 숨겨졌다&lt;/strong&gt;고 설명할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; domain

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Member &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;NewMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validateName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; err &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;member&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 외부에서는 기존의 &lt;code&gt;member&lt;/code&gt;를 사용할 수 없으므로 객체 생성을 위해 &lt;code&gt;NewMember&lt;/code&gt;를 쓰는게 강제됩니다.
그리고 이렇게 생성된 객체는 &lt;code&gt;Member&lt;/code&gt; 인터페이스 타입으로 다뤄지기 때문에
외부에서는 해당 인스턴스가 &lt;code&gt;member&lt;/code&gt; 구조체의 인스턴스임을 알 방법이 없습니다.
그리고 &lt;code&gt;Member&lt;/code&gt;에 정의된 퍼블릭 인터페이스인 &lt;code&gt;Name&lt;/code&gt;과 &lt;code&gt;ChangeName&lt;/code&gt;을 호출할 경우,
결과적으로 &lt;code&gt;member&lt;/code&gt; 구조체의 메서드들이 실행되지만 이는 패키지 외부에서는 알 수 없습니다.&lt;/p&gt;&lt;p&gt;이제 저희는 &lt;code&gt;member&lt;/code&gt; 구조체에 대해 적어도 패키지 수준에서는 완전한 캡슐화가 이뤄졌다고 볼 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Usage of the unexported type &amp;#x27;member&amp;#x27;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// m := &amp;amp;domain.member{}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; m domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Member
m&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;NewMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;John&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;m&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// John&lt;/span&gt;

&lt;span class=&quot;token boolean&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Jake&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;m&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Jake&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;물론 이처럼 캡슐화를 위해 인터페이스를 사용하는 방식은 &lt;a href=&quot;https://github.com/golang/go/wiki/CodeReviewComments#interfaces&quot;&gt;인터페이스에 관한 Go 컨벤션&lt;/a&gt;이나
전통적인 OOP 이론에 해당한다고 보기는 어렵습니다.
특히 Go 진영에는 &lt;a href=&quot;https://medium.com/@cep21/preemptive-interface-anti-pattern-in-go-54c18ac0668a&quot;&gt;&lt;em&gt;&amp;quot;accept interfaces, return structs&amp;quot;&lt;/em&gt;&lt;/a&gt;라는
격언이 있기 때문입니다.&lt;/p&gt;&lt;p&gt;그러나 접근제어자가 별도로 없는 Go 문법에서 가장 확실하게 캡슐화를 추구할 수 있는 방법은 맞다고 생각합니다.
해당 접근법은 &lt;a href=&quot;https://medium.com/@krancour/go-pointers-why-i-use-interfaces-in-go-338ae0bdc9e4&quot;&gt;이 글&lt;/a&gt;을 참고하고 있습니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;정리하자면 Go는 문법적으로 캡슐화를 지원하기 어렵습니다.
기본적으로 패키지 수준에서의 캡슐화만 지원되기 때문입니다.
또한 인터페이스는 추상화와 다형성을 위해 사용되어야 하는 것이지,
위에서와 같이 구조체 1개를 캡슐화하기 위해 인터페이스를 사용하는 접근법도 논쟁의 여지가 있습니다.&lt;/p&gt;&lt;p&gt;그러나 위와 같은 방법을 참고하여 적정 수준의 캡슐화를 추구할 수 있음을 알아두는 것은
캡슐화가 필요한 상황에서 도움이 될 것이라 생각합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788998139766&quot;&gt;객체지향의 사실과 오해&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Go] 벤치마크 테스트로 성능 측정하기]]></title><description><![CDATA[Go 언어에서 성능 측정을 위해 제공하는 벤치마크 테스트에 대해 간략히 정리하겠습니다. Set 자료구조를 다양한 방식으로 구현하고 각 구현체의 성능을 비교해보고자 합니다.]]></description><link>https://bugoverdose.github.io/development/go-benchmark/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/go-benchmark/</guid><pubDate>Sun, 13 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Go 언어에서 성능 측정을 위해 제공하는 벤치마크(Benchmark) 테스트에 대해 간략히 정리하겠습니다.&lt;/p&gt;&lt;h2&gt;Set의 다양한 구현체&lt;/h2&gt;&lt;p&gt;요소의 중복을 허용하지 않는 세트(Set) 자료구조를 구현할 수 있는 방법은 다양합니다.
내부적으로 어떻게 구현하든,
&lt;code&gt;Add&lt;/code&gt; 메서드로 넘긴 요소는 세트에 정확히 하나 존재하고,
&lt;code&gt;Remove&lt;/code&gt; 메서드로 넘긴 요소는 세트에 존재하지 않으면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Set &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;Contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;    &lt;span class=&quot;token comment&quot;&gt;// add the value to the set if it&amp;#x27;s not already added&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;Remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// remove the value from the set if it&amp;#x27;s added&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;가장 간단한 구현 방법은 모든 요소를 정렬되지 않은 슬라이스에서 관리하고,
선형탐색(linear search)를 통해 특정 요소가 세트에 존재하는지를 판별해가며
요소를 추가하거나 제거하는 방법일 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; LinearSlice &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l LinearSlice&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; element &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;range&lt;/span&gt; l &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; element &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; value &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;LinearSlice&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	list &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;l
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; list
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;LinearSlice&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	list &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;l
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; idx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; element &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;range&lt;/span&gt; list &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; element &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; value &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;idx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;idx&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; list
			&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;여기서 성능을 조금 개선시키고 싶다면 모든 요소를 정렬된 상태로 관리하고,
선형탐색 대신 이진탐색(binary search)를 사용하는 방법도 가능할 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; SortedInts &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l SortedInts&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;binarySearch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	idx &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; sort&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Search&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;=&lt;/span&gt; value &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	exists &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; idx &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;idx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; value
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; idx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; exists
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l SortedInts&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token boolean&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ok &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binarySearch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; ok
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;SortedInts&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	list &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;l
	idx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ok &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binarySearch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; ok &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;idx&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;idx&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	list&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;idx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; value
	&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; list
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;SortedInts&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	list &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;l
	idx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ok &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binarySearch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;ok &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;list&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;idx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;idx&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; list
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;마지막으로 Go 언어에서 제공하는 &lt;code&gt;map&lt;/code&gt;을 활용하는 방법이 있습니다.
&lt;code&gt;map&lt;/code&gt;의 키 부분만을 세트의 값으로 사용하고, 키에 대응되는 값 부분에는 사용하지 않을 값(&lt;code&gt;void&lt;/code&gt;)을 넣는다면
굉장히 간단하고 효율적으로 세트 구현체를 만들 수 있습니다.
이는 실제로 Java에서 &lt;code&gt;HashSet&lt;/code&gt;이 내부적으로 &lt;code&gt;HashMap&lt;/code&gt;을 활용하는 방식과 동일합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; IntHashSet &lt;span class=&quot;token keyword&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; void &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s IntHashSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token boolean&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ok &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; ok
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s IntHashSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	s&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; void
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s IntHashSet&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token function&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;자료구조 이론을 생각한다면 &lt;code&gt;LinearSlice&lt;/code&gt;, &lt;code&gt;SortedInts&lt;/code&gt;, &lt;code&gt;IntHashSet&lt;/code&gt; 순으로
더욱 효율적인 구조라고 쉽게 판단할 수 있습니다.&lt;/p&gt;&lt;p&gt;그러나 실제로는 어떤 연산이 많이 수행되고, 어떤 데이터가 들어오느냐에 따라
유의미한 수준의 성능 차이가 존재할지는 불확실하다고도 볼 수도 있습니다.&lt;/p&gt;&lt;h2&gt;Contains의 성능&lt;/h2&gt;&lt;p&gt;예를 들어, 애플리케이션 구동 시점에 일련의 데이터로 &lt;code&gt;Set&lt;/code&gt;을 하나 만들어놓고,
실제 비즈니스 로직에서는 &lt;code&gt;Contains&lt;/code&gt; 메서드만을 지속적으로 호출하는 경우
검색 연산의 성능이 중요할 것입니다.&lt;/p&gt;&lt;p&gt;아래는 각 &lt;code&gt;Set&lt;/code&gt; 구현체에 0부터 9999까지의 정수를 하나씩 추가해놓은 후,
임의의 정수로 &lt;code&gt;Contains&lt;/code&gt; 메서드를 호출하도록 설계한 Benchmark 테스트들입니다.&lt;/p&gt;&lt;p&gt;각 벤치마크 테스트에서 &lt;code&gt;rand.Seed&lt;/code&gt;로 동일한 시드를 넘기고 있으므로
세 구현체에서 &lt;code&gt;rand.Int&lt;/code&gt;로 순서대로 생성되는 정수들은 서로 동일합니다.
그리고 이렇게 생성된 값을 다시 20000으로 나눈 나머지는 50% 확률로 &lt;code&gt;Set&lt;/code&gt;에 포함되어 있는 값이 됩니다.
즉, 아래 벤치마크에서 &lt;code&gt;Contains&lt;/code&gt; 메서드는
50% 확률로 실제로 존재하는 값을 찾고(0~9999면 true)
50% 확률로 존재하지 않는 값을 내부적으로 찾게 됩니다(10000~19999면 false).&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	N &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10000&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 0~9999&lt;/span&gt;
	seed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    diff &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 50% true / 50% false&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;BenchmarkLinearSearch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;B&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Seed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;seed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; set LinearSlice
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		set&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		set&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;N &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; diff&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;BenchmarkBinarySearch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;B&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Seed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;seed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; set SortedInts
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		set&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		set&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;N &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; diff&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;BenchmarkFindKeyInMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;B&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Seed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;seed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; set IntHashSet &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		set&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		set&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;N &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; diff&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 위의 벤치마크 테스트를 실행할 수 있는 방법은 다양합니다.&lt;/p&gt;&lt;p&gt;우선 별도의 옵션을 넘기지 않고 &lt;code&gt;go test -bench .&lt;/code&gt;와 같이 해당 벤치마크 테스트가 실행됩니다.
단순히 아래 결과에서 작업당 실행시간(ns/op)만 보면 &lt;code&gt;LinearSlice&lt;/code&gt;, &lt;code&gt;SortedInts&lt;/code&gt;, &lt;code&gt;IntHashSet&lt;/code&gt; 순으로
각각 작업당 2896ns, 67.86ns, 29.14ns로 성능이 개선되었다고 볼 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;go &lt;span class=&quot;token builtin class-name&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-bench&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;
goos: darwin
goarch: arm64
pkg: go-examples/benchmark
BenchmarkLinearSearch-10          &lt;span class=&quot;token number&quot;&gt;398926&lt;/span&gt;              &lt;span class=&quot;token number&quot;&gt;2881&lt;/span&gt; ns/op
BenchmarkBinarySearch-10        &lt;span class=&quot;token number&quot;&gt;17497737&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;67.91&lt;/span&gt; ns/op
BenchmarkFindKeyInMap-10        &lt;span class=&quot;token number&quot;&gt;43119451&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;27.29&lt;/span&gt; ns/op
PASS
ok      go-examples/benchmark   &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;.372s&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그런데 위에서 각 함수에서 벤치마크 루프를 돈 횟수(&lt;code&gt;b.N&lt;/code&gt;)을 보면 각각 398926번, 17497737번, 43119451번 돌았음을 알 수 있습니다.
즉, 398926번째 루프까지는 세 함수들에서 입력값이 정확히 동일했으나 그 이후부터는 입력값에 차이가 발생했음을 알 수 있습니다.&lt;/p&gt;&lt;p&gt;만약 정확히 동일한 입력값에 대한 성능을 비교하고 싶다면 &lt;code&gt;-benchtime&lt;/code&gt; 옵션으로 실행횟수를 지정할 수 있습니다.
&lt;code&gt;-benchtime 1000000x&lt;/code&gt;와 같이 &lt;code&gt;x&lt;/code&gt;를 단위로 넘기면 실행횟수를,
&lt;code&gt;-benchtime 10s&lt;/code&gt;와 같이 &lt;code&gt;s&lt;/code&gt;를 단위로 넘기면 실행시간을 지정한다는 점에 유의해야 합니다.
이에 따라 아래와 같이 벤치마크 테스트를 실행하면 각각 작업당 2860ns, 68.63ns, 27.95ns로 역시 성능이 개선되었음을
다시 한번 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;go &lt;span class=&quot;token builtin class-name&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-bench&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-benchtime&lt;/span&gt; 1000000x
&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
BenchmarkLinearSearch-10         &lt;span class=&quot;token number&quot;&gt;1000000&lt;/span&gt;              &lt;span class=&quot;token number&quot;&gt;2860&lt;/span&gt; ns/op
BenchmarkBinarySearch-10         &lt;span class=&quot;token number&quot;&gt;1000000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;68.63&lt;/span&gt; ns/op
BenchmarkFindKeyInMap-10         &lt;span class=&quot;token number&quot;&gt;1000000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;27.95&lt;/span&gt; ns/op
&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이는 선형검색, 이진검색, HashSet에서의 검색이 각각 &lt;code&gt;O(N)&lt;/code&gt;, &lt;code&gt;O(logN)&lt;/code&gt;, &lt;code&gt;O(1)&lt;/code&gt;의 시간복잡도를 지니고 있기 때문에 당연한 결과입니다.&lt;/p&gt;&lt;h3&gt;규모와 시간복잡도&lt;/h3&gt;&lt;p&gt;그런데 한편으로 위에서 측정한 &lt;code&gt;Contains&lt;/code&gt; 메서드의 성능은
10000개의 데이터로 구성된 세트에 대해 측정한 결과입니다.
만약 데이터셋의 크기가 충분히 크지 않다면 각 구현체의 시간복잡도 차이는 유의미한 차이를 가져오지 않을 것입니다.&lt;/p&gt;&lt;p&gt;이 점을 실제 수치로 확인하고 싶다면
위에서 사용한 벤치마크 테스트를 그대로 활용하되 아래와 같이 &lt;code&gt;N&lt;/code&gt; 변수를 수정하여 데이터셋의 범위를 충분히 줄여봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	N &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 0~4&lt;/span&gt;
	&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 이전과 동일한 옵션들로 벤치마크 테스트를 실행해보면 이전과는 다른 결과가 나옵니다.
&lt;code&gt;LinearSlice&lt;/code&gt;에 비해 &lt;code&gt;SortedInts&lt;/code&gt;와 &lt;code&gt;IntHashSet&lt;/code&gt;의 성능이 수십 배는 더 빨랐던 이전 결과와는 달리
기본적으로 수치들이 대동소이합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;go &lt;span class=&quot;token builtin class-name&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-bench&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-benchtime&lt;/span&gt; 100000x
&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
BenchmarkLinearSearch-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;29.00&lt;/span&gt; ns/op
BenchmarkBinarySearch-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;38.59&lt;/span&gt; ns/op
BenchmarkFindKeyInMap-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;29.03&lt;/span&gt; ns/op
&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;벤치마크 테스트는 실행할 때마다 조금씩 수치들이 조금씩 달라지므로
이번에는 &lt;code&gt;-count&lt;/code&gt; 옵션을 통해 동일한 벤치마크 테스트를 여러번 수행해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;go &lt;span class=&quot;token builtin class-name&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-bench&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-benchtime&lt;/span&gt; 100000x &lt;span class=&quot;token parameter variable&quot;&gt;-count&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
BenchmarkLinearSearch-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;21.99&lt;/span&gt; ns/op
BenchmarkLinearSearch-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;20.12&lt;/span&gt; ns/op
BenchmarkLinearSearch-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;20.16&lt;/span&gt; ns/op
BenchmarkLinearSearch-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;20.06&lt;/span&gt; ns/op
BenchmarkLinearSearch-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;18.18&lt;/span&gt; ns/op

BenchmarkBinarySearch-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;26.60&lt;/span&gt; ns/op
BenchmarkBinarySearch-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;26.26&lt;/span&gt; ns/op
BenchmarkBinarySearch-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;24.61&lt;/span&gt; ns/op
BenchmarkBinarySearch-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;24.01&lt;/span&gt; ns/op
BenchmarkBinarySearch-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;23.70&lt;/span&gt; ns/op

BenchmarkFindKeyInMap-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;18.86&lt;/span&gt; ns/op
BenchmarkFindKeyInMap-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;18.81&lt;/span&gt; ns/op
BenchmarkFindKeyInMap-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;18.81&lt;/span&gt; ns/op
BenchmarkFindKeyInMap-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;18.97&lt;/span&gt; ns/op
BenchmarkFindKeyInMap-10          &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;18.82&lt;/span&gt; ns/op
&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;만약 위의 수치들이 유의한 수준의 차이라고 생각된다면,
데이터셋이 작을 때 &lt;code&gt;SortedInts&lt;/code&gt;, &lt;code&gt;LinearSlice&lt;/code&gt;, &lt;code&gt;IntHashSet&lt;/code&gt; 순으로 효율적이라고 말할 수 있을 것입니다.&lt;/p&gt;&lt;p&gt;유의미한 수준의 차이가 아닌 경우,
데이터셋의 크기가 작을 때에는 별도의 자료구조를 사용하지 않고 슬라이스와 선형검색을 사용하는 것이
충분히 효율적이라고 해석할 수 있을 것입니다.&lt;/p&gt;&lt;h2&gt;Add와 Remove의 성능&lt;/h2&gt;&lt;p&gt;만일 비즈니스 로직상 &lt;code&gt;Set&lt;/code&gt;에 데이터를 추가하고 제거하는 &lt;code&gt;Add&lt;/code&gt;와 &lt;code&gt;Remove&lt;/code&gt; 연산을 반복적으로 호출하는 경우,
그에 따라 성능을 측정해볼 필요가 있습니다.&lt;/p&gt;&lt;p&gt;API 호출 빈도 등을 측정하여 대략 10번의 요청 중 9번은 &lt;code&gt;Add&lt;/code&gt; 연산을, 1번은 &lt;code&gt;Remove&lt;/code&gt; 연산이 수행되는 것으로 보인다면
아래와 같이 벤치마크 테스트를 설계할 수 있을 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	seed &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;BenchmarkLinearSlice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;B&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Seed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;seed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; set LinearSlice
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			set&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			set&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;BenchmarkSortedInts&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;B&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Seed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;seed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; set SortedInts
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			set&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			set&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;BenchmarkIntHashSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;B&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Seed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;seed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; set IntHashSet &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;N&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			set&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			set&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rand&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 이번에는 메모리와 관련된 수치도 중요하므로 &lt;code&gt;-benchmem&lt;/code&gt; 옵션을 추가로 넘겨서 테스트를 실행해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;go &lt;span class=&quot;token builtin class-name&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-bench&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-benchmem&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-benchtime&lt;/span&gt; 100000x
&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
BenchmarkLinearSlice-10           &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;             &lt;span class=&quot;token number&quot;&gt;16919&lt;/span&gt; ns/op              &lt;span class=&quot;token number&quot;&gt;41&lt;/span&gt; B/op          &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; allocs/op
BenchmarkSortedInts-10            &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;              &lt;span class=&quot;token number&quot;&gt;3644&lt;/span&gt; ns/op              &lt;span class=&quot;token number&quot;&gt;41&lt;/span&gt; B/op          &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; allocs/op
BenchmarkIntHashSet-10            &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;56.04&lt;/span&gt; ns/op           &lt;span class=&quot;token number&quot;&gt;31&lt;/span&gt; B/op          &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; allocs/op
&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;우선 작업당 실행시간(ns/op)의 경우
&lt;code&gt;LinearSlice&lt;/code&gt;, &lt;code&gt;SortedInts&lt;/code&gt;, &lt;code&gt;IntHashSet&lt;/code&gt; 순으로 효율적입니다.
&lt;code&gt;Contains&lt;/code&gt; 연산과 유사하지만, 그 때에 비해 &lt;code&gt;SortedInts&lt;/code&gt;와 &lt;code&gt;IntHashSet&lt;/code&gt; 사이에 훨씬 더 유의미한 수준의 차이가 확인됨을 알 수 있습니다.&lt;/p&gt;&lt;p&gt;나아가, 작업을 수행할 때마다 평균적으로 할당되는 메모리 양(B/op)을 보면
&lt;code&gt;LinearSlice&lt;/code&gt;와 &lt;code&gt;SortedInts&lt;/code&gt;에 비해 &lt;code&gt;IntHashSet&lt;/code&gt;이 메모리를 덜 요구한다는 점을 확인할 수 있습니다.
각 작업당 메모리 할당 횟수(allocs/op)가 0이라는 점을 통해 대부분의 경우 메모리 할당이 발생하지는 않으나,
메모리 할당이 필요할 때에는 내부적으로 &lt;code&gt;map&lt;/code&gt;과 빈 구조체를 사용하는 &lt;code&gt;IntHashSet&lt;/code&gt;가
슬라이스 기반의 &lt;code&gt;LinearSlice&lt;/code&gt;와 &lt;code&gt;SortedInts&lt;/code&gt;보다 미세하게 효율적이라고 볼 수 있습니다.&lt;/p&gt;&lt;h3&gt;cpu 개수 조절&lt;/h3&gt;&lt;p&gt;마지막으로 CPU 개수에 따른 성능 차이를 한번 확인해봅시다.
여태까지 각 벤치마크 테스트에서 각 함수 옆에 붙은 &lt;code&gt;-10&lt;/code&gt;는 10개의 코어를 사용했음을 의미하며,
이는 벤치마크 테스트를 실행한 환경에서 &lt;code&gt;runtime.NumCPU()&lt;/code&gt;를 실행했을 때의 값과 동일합니다.
그리고 이 값은 &lt;code&gt;-cpu&lt;/code&gt; 옵션을 활용하여 조절할 수 있습니다.&lt;/p&gt;&lt;p&gt;만일 해당 애플리케이션이 실질적으로 실행될 환경의 코어 개수가 1개인 경우, 아래와 같이 &lt;code&gt;-cpu&lt;/code&gt; 옵션 값을 1로 설정하고 테스트해볼 필요가 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;go &lt;span class=&quot;token builtin class-name&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-bench&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-benchmem&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-benchtime&lt;/span&gt; 100000x &lt;span class=&quot;token parameter variable&quot;&gt;-cpu&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
BenchmarkLinearSlice      &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;             &lt;span class=&quot;token number&quot;&gt;17050&lt;/span&gt; ns/op              &lt;span class=&quot;token number&quot;&gt;41&lt;/span&gt; B/op          &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; allocs/op
BenchmarkSortedInts       &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;              &lt;span class=&quot;token number&quot;&gt;3632&lt;/span&gt; ns/op              &lt;span class=&quot;token number&quot;&gt;41&lt;/span&gt; B/op          &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; allocs/op
BenchmarkIntHashSet       &lt;span class=&quot;token number&quot;&gt;100000&lt;/span&gt;                &lt;span class=&quot;token number&quot;&gt;56.41&lt;/span&gt; ns/op           &lt;span class=&quot;token number&quot;&gt;31&lt;/span&gt; B/op          &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; allocs/op
&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 결과를 보면, 코어가 10개일 때나 1개일 때나 유의미한 차이가 없다고 볼 수 있습니다.
이는 실행환경의 코어 개수와 무관하게 여태껏 측정된 성능 측정 결과를 신뢰할 수 있음을 보장합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;김정민님의 &lt;a href=&quot;https://github.com/jmnote/go-test/blob/main/docs/Go_%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%9D%98_%EA%B1%B0%EC%9D%98_%EB%AA%A8%EB%93%A0_%EA%B2%83.pdf&quot;&gt;Go 테스트의 거의 모든 것&lt;/a&gt; 발표 자료&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://blog.logrocket.com/benchmarking-golang-improve-function-performance/&quot;&gt;Benchmarking in Golang: Improving function performance&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Go] 테이블 드리븐 테스트 (Table Driven Tests)]]></title><description><![CDATA[Go 언어에서 자주 사용하는 테스트 작성 방식인 테이블 드리븐(Table Driven)에 대해 간략히 정리하겠습니다. 어떤 상황에서 유용하고, 어떤 상황에서 한계를 지닐 수 있는지에 대해 예시와 함께 설명하고자 합니다.]]></description><link>https://bugoverdose.github.io/development/go-table-driven-tests/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/go-table-driven-tests/</guid><pubDate>Sat, 05 Aug 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Go 언어에서 자주 사용하는 테스트 작성 방식인 테이블 드리븐(Table-Driven)에 대해 간략히 정리하겠습니다.&lt;/p&gt;&lt;h2&gt;테이블 드리븐 단위 테스트&lt;/h2&gt;&lt;p&gt;예를 들어, 아래와 같이 매개변수와 반환값을 지닌 간단한 함수가 있다고 합시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Multiply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; b
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 경우 아래와 같은 방식으로 다양한 입력값을 넣는 방식으로 단위 테스트를 작성할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// import 문은 이후 생략&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&amp;quot;testing&amp;quot;&lt;/span&gt;

	&lt;span class=&quot;token string&quot;&gt;&amp;quot;github.com/stretchr/testify/assert&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TestMultiply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Multiply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Multiply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Multiply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;81&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Multiply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 방식이 나쁘다는 것은 아닙니다.
다만, 위와 동일한 내용을 아래와 같이 검증하는 것이 바로 테이블 드리븐 테스트라고 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TestMultiply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	testCases &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		input1   &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;
		input2   &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;
		expected &lt;span class=&quot;token builtin&quot;&gt;int&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;81&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;range&lt;/span&gt; testCases &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			actual &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Multiply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;input1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;input2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;expected&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; actual&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;경계값 검증 예시&lt;/h2&gt;&lt;p&gt;특히 이와 같은 테스트 스타일은 경계값에 대한 검증에서 유용합니다.&lt;/p&gt;&lt;p&gt;예를 들어, 아래는 사용자로부터 입력받은 한국 나이 값이 올바른지 검증하기 위한 함수입니다.
매개변수는 &lt;code&gt;uint8&lt;/code&gt; 타입이므로 0부터 255까지의 입력값이 들어올 수 있으나,
0살이나 200살 이상은 장난으로 입력한 것으로 간주해봅시다.
만 나이 통일법이라는게 실행되지 않았다고 간주하고, 태어났을 때 1살이 된다고 가정하겠습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;IsValidKoreanAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age &lt;span class=&quot;token builtin&quot;&gt;uint8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; age &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; age &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 경우 아래와 같이 0에서 1로 넘어가는 부분과 200에서 201로 넘어가는 구간을 검증하는 것이 안전하며,
실제로 &lt;code&gt;&amp;lt;&lt;/code&gt;와 &lt;code&gt;&amp;lt;=&lt;/code&gt;를 잘못 사용하는 등의 실수를 잡아낼 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TestIsValidKoreanAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	testCases &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		input    &lt;span class=&quot;token builtin&quot;&gt;uint8&lt;/span&gt;
		expected &lt;span class=&quot;token builtin&quot;&gt;bool&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token string&quot;&gt;&amp;quot;Too Young&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;   &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token string&quot;&gt;&amp;quot;Initial Age&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token string&quot;&gt;&amp;quot;Maximum Age&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token string&quot;&gt;&amp;quot;Too Old&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;201&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;range&lt;/span&gt; testCases &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			actual &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;IsValidKoreanAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;input&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;expected&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; actual&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;또한 구조체들의 슬라이스를 활용한 이전 예시와는 달리
위의 경우 &lt;code&gt;map[string]struct&lt;/code&gt;를 사용하였음을 알 수 있습니다.&lt;/p&gt;&lt;p&gt;이처럼 맵의 키에 개별 테스트 케이스에 대한 설명을 명시하고,
해당 값을 &lt;code&gt;Run&lt;/code&gt;의 첫 번째 매개변수로 넘기면서 아래와 같이 출력됩니다.
개별 테스트 케이스에 대한 설명을 주석으로 남기는 것보다는 훨씬 세련되었다고 생각합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;=== RUN   TestIsValidKoreanAge
=== RUN   TestIsValidKoreanAge/Initial_Age
=== RUN   TestIsValidKoreanAge/Maximum_Age
=== RUN   TestIsValidKoreanAge/Too_Old
=== RUN   TestIsValidKoreanAge/Too_Young
--- PASS: TestIsValidKoreanAge (0.00s)
    --- PASS: TestIsValidKoreanAge/Initial_Age (0.00s)
    --- PASS: TestIsValidKoreanAge/Maximum_Age (0.00s)
    --- PASS: TestIsValidKoreanAge/Too_Old (0.00s)
    --- PASS: TestIsValidKoreanAge/Too_Young (0.00s)&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;또한 이렇게 할 경우, Goland 같은 IDE에서는 아래와 같이 개별 테스트 케이스를 따로 실행할 수 있도록 지원해줍니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/c2d38f2810846f7564df6ee7fbd81ab8/350de/run-each-testcase.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:74.84662576687117%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACOklEQVQ4y41TSXLbMBDkb2IQ+75wlVW244oPqfz/L53CSKKkJIccusACwJ5Bd88QW4VfK6rXKJbjvCZ8via8bxGfp4j31ePrNeC8JOScsW0R0xzgU4KxDsYYeO8J1loMIRY4nyCVIpQ2Y9lOiLlCS4FTkliTRnUCLWg0O8IbBSkVxnEE5/wJg08FJlwIR8bAGMO87kRstMIeOJLh+MY4xpGDjfwPost33+sYYswoPhChEBLGWvgQkUpFDAFRMQhx+4GBX3/shWmlIvcCw1sO+FkNPUFICa0NhBwJUgsIJeli18h5D6k0rDUIIcBZg2w4vNVH18P3GvC1BUihjrZt0PDZwidDUEqhtYbaGpTWKDlhWVaUFHCKHCW6O+FHDfix+oOwb7poEIqFjYaIiaRWlFLhywzrHBUgBIUp6sOk4aN4/Fosbdx0ME5Rl51QCAEuBJHFlODKDN3TUArt9bjtUSA4S1oOOSbMV22UknS5u3kjv3R9Qde4Gye4eDjjGB/cHlzMFJv+LC1GZCuxbDtqzZRF7wzOccSUHOqyYTvtmNYV2tgHt9ldw5AK3JXwYgqHdxatVSz7Ga7r5SVaSZimiGXxmKaAUgus85QKbczRMRHaHuyu4bXKy8sLSstY9xkpBUw1YW6ZSOepYd9XrOuCXBv21ze0aSGtD8LHDvsBVTY95ArGKHinoXV3UtL8Wh9gjKU4dcefOvQxXwj7LEt5XRUYG58wPkzIDYeG7B8a9nG7O8v+Gvr/Qe/wN8yC1v0OMlZdAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;run-each-testcase&quot; title=&quot;run-each-testcase&quot; src=&quot;/static/c2d38f2810846f7564df6ee7fbd81ab8/a6d36/run-each-testcase.png&quot; srcSet=&quot;/static/c2d38f2810846f7564df6ee7fbd81ab8/222b7/run-each-testcase.png 163w,/static/c2d38f2810846f7564df6ee7fbd81ab8/ff46a/run-each-testcase.png 325w,/static/c2d38f2810846f7564df6ee7fbd81ab8/a6d36/run-each-testcase.png 650w,/static/c2d38f2810846f7564df6ee7fbd81ab8/e548f/run-each-testcase.png 975w,/static/c2d38f2810846f7564df6ee7fbd81ab8/350de/run-each-testcase.png 998w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;상태 변화 검증 예시&lt;/h2&gt;&lt;p&gt;여태까지의 예시들을 보면 아무런 사이드 이펙트 없이 병렬적으로 실행될 수 있는 순수함수만이
테이블 드리븐 테스트의 대상이라고 생각할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;이는 어떤 면에서는 맞다고 생각합니다.&lt;/strong&gt;
테이블 드리븐 테스트와 관련하여 주의해볼 사항을 몇 가지만 설명하겠습니다.&lt;/p&gt;&lt;p&gt;아래 예시에서 회원은 총 3번 이름을 수정할 수 있으며 본인의 현재 이름으로는 수정할 수 없습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; Member &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	Name            &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
	NameChangeCount &lt;span class=&quot;token builtin&quot;&gt;int8&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;m &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;Member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; name &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;same name&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NameChangeCount &lt;span class=&quot;token operator&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;can not change name anymore&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	m&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name
	m&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NameChangeCount &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위와 같은 비즈니스 로직은 아래와 같은 테이블 드리븐 테스트로 검증해볼 수 있습니다.
&lt;code&gt;testCases&lt;/code&gt; 슬라이스를 순회하며 개별 테이스 케이스를 순차적으로 실행하면
&lt;code&gt;ChangeName&lt;/code&gt; 메서드가 언제 에러를 반환하고, &lt;code&gt;Member&lt;/code&gt; 구조체의 상태는 어떻게 변화하는지를 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TestChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    member &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Member&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;john&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    testCases &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        input                   &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
        expectedName            &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
        expectedNameChangeCount &lt;span class=&quot;token builtin&quot;&gt;int8&lt;/span&gt;
        expectedError           &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;john&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;john&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;same name&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jake&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;jake&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;joe&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;joe&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jacob&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;jacob&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jason&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;jacob&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;can not change name anymore&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;range&lt;/span&gt; testCases &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;input&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;expectedError&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;expectedName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;expectedNameChangeCount&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NameChangeCount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;테이스 케이스별 실행 순서에 대한 의존&lt;/h3&gt;&lt;p&gt;그런데 만일 위와 동일한 코드를 아래와 같이 &lt;code&gt;map[string]struct&lt;/code&gt; 스타일로 수정할 경우
높은 확률로 테스트는 실패할 것입니다.
이유는 간단합니다. &lt;code&gt;range&lt;/code&gt;로 &lt;code&gt;testCases&lt;/code&gt; 맵을 순회하는 경우 개별 테스트 케이스의 실행 순서가 매번 달라지기 때문입니다.
이와 같은 점을 신경쓰기 싫다면 &lt;code&gt;[]struct&lt;/code&gt; 스타일만을 사용하는 것도 가능할 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TestChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    member &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Member&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;john&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    testCases &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        input                   &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
        expectedName            &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;
        expectedNameChangeCount &lt;span class=&quot;token builtin&quot;&gt;int8&lt;/span&gt;
        expectedError           &lt;span class=&quot;token builtin&quot;&gt;error&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&amp;quot;Same name not allowed&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;             &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;john&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;john&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;same name&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&amp;quot;Name change success1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;              &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jake&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;jake&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&amp;quot;Name change success2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;              &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;joe&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;joe&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&amp;quot;Name change success3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;              &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jacob&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;jacob&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&amp;quot;Maximum name change count reached&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jason&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;jacob&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; errors&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;can not change name anymore&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;range&lt;/span&gt; testCases &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;input&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;expectedError&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;expectedName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;expectedNameChangeCount&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NameChangeCount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;검증 로직 통일의 문제&lt;/h3&gt;&lt;p&gt;한편 위의 예시는 모든 테스트 케이스들을 동일한 검증 로직에 끼워맞추기 위해
테스트 케이스 구조체의 필드가 과하게 많아졌다고 볼 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;expectedName&lt;/code&gt;과 &lt;code&gt;expectedNameChangeCount&lt;/code&gt; 필드는 &lt;code&gt;ChangeName&lt;/code&gt; 메서드가 성공한 경우에만 필요하며,
&lt;code&gt;expectedError&lt;/code&gt; 필드는 &lt;code&gt;ChangeName&lt;/code&gt; 메서드가 에러를 반환하지 않으면 언제나 &lt;code&gt;nil&lt;/code&gt;로 동일합니다.&lt;/p&gt;&lt;p&gt;때문에 테스트 드리븐 스타일을 억지로 따르는 대신
아래와 같이 성공 케이스와 실패 케이스를 분리하여 검증하는 것도 괜찮은 방법일 것입니다.
이 경우 &lt;code&gt;NameChangeCount&lt;/code&gt; 메서드의 성공 케이스들은 오직 이름 입력값만을 필요로 하기 때문에
다양한 필드로 구성된 구조체의 슬라이스가 아닌, 문자열의 슬라이스를 순회하고 있음을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TestChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    member &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Member&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;john&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Same name not allowed&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;john&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;EqualError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;same name&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;range&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jake&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;joe&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;jacob&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Name change success&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;EqualValues&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NameChangeCount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;EqualValues&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NameChangeCount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Maximum name change count reached&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jason&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;EqualError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;can not change name anymore&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;한편, 테스트 드리븐 스타일을 고수하고 싶다면
아래와 같이 성공 케이스와 실패 케이스에 대한 검증 로직을 함수화하여 활용하는 것도 하나의 방법일 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;go&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-go line-numbers&quot;&gt;&lt;code class=&quot;language-go&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;TestChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	member &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; Member&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;john&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    testValid &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;input &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prevNameChangeCount &lt;span class=&quot;token builtin&quot;&gt;int8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;EqualValues&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prevNameChangeCount&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NameChangeCount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;input&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Equal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; input&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;EqualValues&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prevNameChangeCount&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NameChangeCount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    testError &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;inputName&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; errString &lt;span class=&quot;token builtin&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			err &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ChangeName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;inputName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
			assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;EqualError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; errString&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	testCases &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;testing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;T&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;testError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;john&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;same name&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;testValid&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jake&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;testValid&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;joe&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;testValid&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jacob&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;token function&quot;&gt;testError&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jason&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;can not change name anymore&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc &lt;span class=&quot;token operator&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;range&lt;/span&gt; testCases &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tc&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;테이블 드리븐이 적절한 상황이 있고, 그렇지 않은 상황이 있습니다.
그리고 이에 대한 판단은 개발자 본인이 해야 한다고 생각합니다.&lt;/p&gt;&lt;p&gt;특히 단순히 테스트 코드의 양을 줄이는 것을 목표로 하는 것이 아니라,
향후 요구사항의 변화로 테스트가 깨지더라도
변경의 여파를 최소화할 수 있는 구조에 대해 고민해볼 필요가 있습니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;김정민님의 &lt;a href=&quot;https://github.com/jmnote/go-test/blob/main/docs/Go_%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%9D%98_%EA%B1%B0%EC%9D%98_%EB%AA%A8%EB%93%A0_%EA%B2%83.pdf&quot;&gt;Go 테스트의 거의 모든 것&lt;/a&gt; 발표 자료&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://dev.to/boncheff/table-driven-unit-tests-in-go-407b&quot;&gt;Table Driven Unit Tests in Go&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://engineering.mercari.com/en/blog/entry/20211221-a-deep-dive-into-table-driven-testing-in-golang/&quot;&gt;A Deep Dive into Table-Driven Testing in Golang&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[넥스터즈 22기 합격 및 활동 후기]]></title><description><![CDATA[직장인 개발 동아리 넥스터즈 22기에 백엔드 개발자로 합격하고 활동하였습니다. 선발 과정부터 한 기수 동안의 활동에 대해 전반적으로 기록하고자 합니다.]]></description><link>https://bugoverdose.github.io/essay/nexters-22-retrospective/</link><guid isPermaLink="false">https://bugoverdose.github.io/essay/nexters-22-retrospective/</guid><pubDate>Sun, 12 Mar 2023 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;넥스터즈란&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://teamnexters.com/&quot;&gt;넥스터즈&lt;/a&gt;는 개발자와 디자이너를 위한 IT 연합 동아리입니다.
매 기수마다 8주라는 짧은 시간 동안 팀빌딩을 하고 하나의 서비스를 개발하고 런칭하는 것을 목표로 합니다.&lt;/p&gt;&lt;p&gt;정규 활동은 매년 두 기수씩 두 달씩 진행되며 주말에 세미나를 진행합니다.
시기는 대학교 여름방학 및 겨울방학 기간과 거의 일치하기 때문에 학생들도 참여할 수 있습니다.&lt;/p&gt;&lt;p&gt;개인적으로 주위 지인들이 지원하고 있기에 친구따라 강남 가는 기분으로 별 생각 없이 지원하였고 붙었습니다.&lt;/p&gt;&lt;h2&gt;선발&lt;/h2&gt;&lt;p&gt;개발자 포지션의 경우 웹 프론트엔드, 안드로이드, iOS, 백엔드를 상당히 균형있게 선발하는 것으로 보였습니다.
이전에 활동했던 개발 동아리 &lt;a href=&quot;https://www.wafflestudio.com/&quot;&gt;와플스튜디오&lt;/a&gt;의 경우
과반수가 서버 개발자였기 때문에 흥미로웠습니다.&lt;/p&gt;&lt;p&gt;이때 동아리에서 별도로 프로그래밍 교육이나 디자인 관련 교육을 제공하지는 않는다는 점에 유의해야 합니다.
때문에 즉시 팀 프로젝트에 투입될 수 있는 역량을 지닌 개발자/디자이너를 선발하고자 합니다.
또한 생각보다 지원자가 많습니다.&lt;/p&gt;&lt;h3&gt;선발 과정&lt;/h3&gt;&lt;p&gt;22기 개발자 선발 과정은 간단했습니다. 오로지 서류 평가와 20분짜리 짧은 면접으로 구성되었습니다.&lt;/p&gt;&lt;p&gt;면접 난이도는 중하 정도였다고 생각합니다.
면접 시간이 워낙 짧아서 질문의 수도 적었고 딱히 깊이 파고 들지 않았습니다.
면접 질문의 경우 데이터베이스나 스프링과 같은 기술적인 질문과 인성 면접 질문이 적절히 혼재되어있었습니다.
제 블로그 글 중 하나에 대해 질문했을 때
글 내용이 잘 기억이 안나서 답변을 제대로 못했는데, 그 외에는 그냥 평범하게 답변했습니다.&lt;/p&gt;&lt;p&gt;개인적으로 굉장히 특이했던 점은 면접이 다대다 면접으로 진행되었다는 점이었습니다.
면접관 3명, 백엔드 지원자 2명 비율로 각 지원자에게 조금씩 다른 질문을 돌아가면서 질문했는데
저는 &lt;a href=&quot;https://github.com/kth990303&quot;&gt;같이 지원했던 친구 중 한 명&lt;/a&gt;과 함께 면접을 보게 되었습니다.
솔직히 아는 얼굴이다 보니 면접보는 내내 신경쓰였고, 속으로 &lt;em&gt;뭐야...저리가...&lt;/em&gt;라는 생각을 하였습니다.
&lt;a href=&quot;https://kth990303.tistory.com/401&quot;&gt;이 글&lt;/a&gt;은 그 친구 입장에서의 면접 후기입니다.&lt;/p&gt;&lt;p&gt;면접자가 나타나지 않는 상황이나 면접관의 쉬는 시간 등을 생각했을 때
10분짜리 면접을 한 명씩 보는 것보다 20분짜리 면접을 두 명씩 보는게 효율적이라 다대다 면접을 진행한 것으로 추측됩니다.
다대다 면접이었기 때문에 둘을 비교하며 둘 중 한 명만 뽑으려는 의도라고 생각할 수 있는데,
그런건 아니고 결과적으로 저희 둘 다 합격했습니다.&lt;/p&gt;&lt;p&gt;저희 외에도 우테코 4기 수료생들이 꽤 지원했는데 저희 둘만 합격했고,
오히려 현재 우테코 5기인 &lt;a href=&quot;https://github.com/xxeol2&quot;&gt;친구&lt;/a&gt;가 한 명 합격했습니다.
3명 모두 당시 직장인이 아니었는데도 선발된 것을 보면
경력 유무보다는 순수하게 개발 역량을 위주로 체크하는 것으로 보입니다.&lt;/p&gt;&lt;h2&gt;아이디에이션과 팀 빌딩&lt;/h2&gt;&lt;p&gt;넥스터즈에는 별도의 기획자 포지션이 없습니다.
물론 디자이너 분들이 Figma를 다루면서 자연스럽게 기획을 주도하기는 하지만 기본적으로 모든 팀원이 기획에 참여할 수 있는 구조입니다.&lt;/p&gt;&lt;p&gt;정규 활동이 시작되는 1월이 되기 전에 프로덕트에 대한 아이디어를 디자이너와 개발자들이 내면,
온라인 투표를 통해 8개의 아이디어가 정해집니다.
이후 이 아이디어를 낸 분들이 각자 본인 팀의 PM이 되며,
1주차 세션 때 지원자를 받아 팀을 모으게 됩니다.&lt;/p&gt;&lt;p&gt;PM이 아닌 회원들은 8개의 서비스 아이디어 중에서 1~3지망을 골라서 제출하면
PM들끼리 회의(경매)를 통해 팀을 한명 한명 모읍니다.
저희 팀은 웹개발자 3명, 서버 개발자 4명, 디자이너 2명으로 구성되었습니다.&lt;/p&gt;&lt;h2&gt;개발에서 서비스 런칭까지&lt;/h2&gt;&lt;p&gt;현재 넥스터즈에서는 약 100개 정도의 서비스가 런칭되었습니다.
이 중 넥스터즈에 들어오기 전에 우테코에서 사용했던
&lt;a href=&quot;https://teamnexters.com/project#78&quot;&gt;롤링페이퍼&lt;/a&gt;라는 서비스가 대표적으로 흥했으며 법인 창립까지 이어졌다고 합니다.
솔직히 8주 간의 정규 활동만이 외적으로
각 팀에서 따로 시간을 내어 회의를 하고 개발을 진행해야 하기 때문에 시간이 굉장히 빠듯합니다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;
때문에 8주 이내에 서비스 런칭에 성공하지 못하는 팀들도 일반적입니다.&lt;/p&gt;&lt;p&gt;저희 팀의 경우 넥스터즈에서 &lt;strong&gt;QR 코드 기반 출석체크 기능을 통해 회원들의 출석과 활동점수를 관리하는 애플리케이션&lt;/strong&gt;을 개발하였습니다.
넥스터즈 회원들만이 사용하는 클라이언트 웹사이트와
운영진이 사용하는 어드민용 웹사이트를 구분하여 별도의 서브도메인으로 배포하였습니다.
다만, 넥스터즈 23기 활동이 있을 7월까지는 사용될 일이 없기 때문에
비용 절감을 위해 서버를 내려놓은 상태입니다.&lt;/p&gt;&lt;h2&gt;전반적인 평가&lt;/h2&gt;&lt;h3&gt;좋았던 점&lt;/h3&gt;&lt;p&gt;짧은 기간 동안 굉장히 즐겁게 개발할 수 있었습니다.
개발이 재밌더라도 협업은 재미가 없을 수 있는데, 넥스터즈와 현재 회사에서의 협업을 통해 꾸준히 힐링 중입니다.
취업 및 스펙을 위해 형식상 개발하는 것이 아니라, 실제로 런칭을 목표로 개발할 수 있어서 매우 즐거웠습니다.&lt;/p&gt;&lt;p&gt;회원들의 평균적인 역량은 굉장히 높은 편입니다.
가급적이면 팀 프로젝트 경험이 있으며 실제로 사용 가능한 프로덕트를 당장 찍어낼 수 있는 역량을 지닌 사람을 선발하기 때문입니다.
다만, 주말 출근을 해야 하는 등 투자할 수 있는 시간이 굉장히 제한되는 직장인들의 경우 수료하기 어려울 수 있습니다.&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;p&gt;또한 짧은 시간 동안 릴리즈에 성공하는 서비스의 비율이 굉장히 높다고 생각합니다.
개발하고 싶은 서비스에 대한 아이디어가 있다면, 넥스터즈를 통해 팀을 모으는 것은 좋은 선택이라고 생각합니다.&lt;/p&gt;&lt;h3&gt;아쉬웠던 점&lt;/h3&gt;&lt;p&gt;한편 운영적인 측면에서는 아쉬운 점이 좀 있었습니다.&lt;/p&gt;&lt;p&gt;가장 큰 문제는 동아리에 돈이 없다는 점입니다.
일반적으로 교내 동아리의 경우 동아리방이나 활동을 위한 각종 비용을 학교로부터 지원받을 수 있습니다.
그러나 넥스터즈의 경우 &amp;quot;넥스터즈 전용 건물&amp;quot;이 없으며 매번 서울 내에 있는 특정 장소를 대여하는 구조입니다.
인프라의 경우 네이버 클라우드 플랫폼(NCP)의 지원을 받고 있으나
무료로 사용할 수 있는 크레딧에 제한이 있으며 NCP 자체가 AWS에 비해 사용하기 불편했습니다.&lt;/p&gt;&lt;p&gt;또한 저희 기수의 경우 거의 동일한 아이디어의 서비스를 개발한 팀이 두 팀이나 됐습니다.
다른 후보도 많았는데 아이디어 선택지가 줄어들었다는 점이 아쉬웠고,
두 팀끼리 서로 조율하는 과정을 거쳐야했다는 점이 번거롭다고 느껴졌습니다.&lt;/p&gt;&lt;h3&gt;다음 기수에도 활동할 것인가&lt;/h3&gt;&lt;p&gt;모르겠습니다.
넥스터즈는 최소 두 기수를 수료해야 정회원이 되는 구조입니다.
그러므로 일단은 다음 기수 혹은 내년에 최소 한 번은 다시 활동해야 할 것 같은데 고민 중입니다.&lt;/p&gt;&lt;p&gt;만약 제가 아직 학생이었다면 무조건 매학기 방학 때마다 했을 것 같습니다.
그러나 넥스터즈와 회사 이외에 아무것도 하지 않아야 양쪽에 폐를 끼치지 않고 제대로 병행할 수 있을 것 같습니다.
넥스터즈와 회사 업무 사이에서 하나를 희생해야 하는 상황이 온다면 하지 않을 계획입니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;실제로 저의 경우 퇴근하고 새벽까지 코틀린으로 개발한 날들이 꽤 있었습니다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;저희 팀에도 딱 1명이 활동점수 미달로 인해 수료하지 못하였습니다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[테스트 코드로 레이어드 아키텍처 강제하기]]></title><description><![CDATA[ArchUnit이라는 라이브러리를 통해 테스트 코드로 레이어드 아키텍처 스타일을 강제하는 수단에 대해 알아봅시다. 이를 통해 컴플라이언스와 아키텍처 피트니스 함수라는 개념에 대해 이해해봅시다.]]></description><link>https://bugoverdose.github.io/development/fitness-function-for-layered-architecture/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/fitness-function-for-layered-architecture/</guid><pubDate>Sat, 04 Mar 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;모놀리틱 서버를 구축할 때 레이어드 아키텍처 스타일로 개발하는 것은 거의 표준이라고 볼 수 있습니다.
특히 작은 규모의 애플리케이션을 초기 구축할 때,
애플리케이션을 여러 계층으로 분류하고 위쪽 계층에서 인접한 아래쪽 계층에만 의존하도록 개발하는 것은 좋은 출발점입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/435a09f187760a63b504b69ff3307557/0a867/layered-architecture.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:90.18404907975462%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAEr0lEQVQ4y02UW0wTBhSG+7yXJctcyCBxW+LD9riHqdnLwGRjiZfNCupwWZxbsoctMZuozKnBC4IYFWQKDKhCAQfItVJoubSUtkBbeqEXeqd3SuUqMieUb6FsyU7y5384X/6Hc06OILEUxxNz4I+7CSQ8+OMuVDoFo3olWqMKxdgAg2oZw9oBLO5JQvO+FLMl36yTtZdrbNXm5mZKgpm4B1N4DPvsJHrvKCNTchp7RFQ2lfNYWs/DjlpETyp50FhOl7KVcZcSS3gCW8yQ8sXlBf5N3A5cfr5EeC5AbD6CN+DCZJ3EF3Ljjfhx2rV4NA0E40G8QRdOnwOH20ZoNkD0WZhIIsR6cjOVt7GZTLkgmPChdEkZ8w0xEVBgjKnpGGmmub+e9gERjY+vIO4V0SJvQOWUMRkdZWxmGI13EK1bznzch2dYh71HzUI4jsAc0NGoq6DNWEu1/BaPVOXcflLI5Zpf+PX+aW40FXKp+mcK6/KpkBRRJbuFSFnGE4uI1on72DVtWBq6MdVIiTn8CJZXF/BGp/HHXEw5jVjdJqb9VmbmAtgdWib7y/HN+vBF3di9FswOAzavBf/s1mI8/J0EU8sQ+j96iLsCCJzBVXr1Lxk0v2Jwah2FHbo1CSqb1VQ1Kqms6+Z+owrxUzty018MW5MMTW0gN6/Tr19hIRahp6yW+gt3CFpdCLT2Ra43ebjd5qWkeZobjXYK6wz8VNTJ6ZsSLjxQpfx8hZIisZXSFg83xFaKm13ca3fj0Q/TUXqPqjPF+MwOBEurG0y5ItjcYazOMBZHAJcvwkxsmWmbFYOkFm94Hn94DocnhNUVxuyYweKYwRVcYmvHknsNNF0sI7o1w+fBDlYnDvLCeIJXlq9Y0R9HIT6I9s8vGBVno6rZi7TmADLRfqwSIUlrHmumPNaMx1nW55Fcm6OjrIGas8WE7V4EC7abLEhfZ3FwF86WDCYfvY26Og1Z2Q76ytKYqH+XoYq3kN7ZgaoyDWtTOrGnO1kZeod473tExuppLamgOr+YsM2DYDnYzvz4AVZMJ5jqFaJ8fAjzUyG6TiHjbfsxtWah6zqMoeswus4vUTQfIqI+yorxGAldHi/mfTQWV1J3roSIw4fgxXyCuGWcZ3YDz+x65h0GYpYJ4nYjIU0v1qarxG2TJGz6lBYc21zCqiPhMKVmOCbuQ/172/bZhHvbsP2Yi6vge2xnTuI6d4r+74SIcj5FlJvNA+FnNBzNRnzsc8w/f4M9/ySO/G9xnj2F/fxJImPd2Fr7mXooY3Z6BsHc+Aieu5cJVJcydvMiiusFKIoKGC35DeW1Mygu/cDQ9QL6CvPR3brEwNVzWO5eIVhVgqeymKhNi7ldjuGRlDlvCMFKOEBI3kNM0UdU0UdkWEp0WEpMOYBfIsZZV0BEISOmkKZ6/3FbTGRETnJjk/VXG7xcXSO5sYHAU1mK6v3X0Hy8E/WedDR7MlDvTmdibwZVH7zJtV1vIPkwjfG9GWhS/W1mdHc62j3pLHqm+X8JQh1iBg98RHvOPjqFmfTmZPE0JwvZ0X20Cz+hS5hJ15FM+nOzkOZm0X0kE8kWcyST8a+zeR4Nbb/DZDL1D/8Bty5uRtrlz/8AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;layered-architecture&quot; title=&quot;layered-architecture&quot; src=&quot;/static/435a09f187760a63b504b69ff3307557/a6d36/layered-architecture.png&quot; srcSet=&quot;/static/435a09f187760a63b504b69ff3307557/222b7/layered-architecture.png 163w,/static/435a09f187760a63b504b69ff3307557/ff46a/layered-architecture.png 325w,/static/435a09f187760a63b504b69ff3307557/a6d36/layered-architecture.png 650w,/static/435a09f187760a63b504b69ff3307557/e548f/layered-architecture.png 975w,/static/435a09f187760a63b504b69ff3307557/0a867/layered-architecture.png 986w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;그런데 이처럼 정해진 아키텍처 규칙이 실제 프로젝트 진행 과정에서 잘 지켜지는 것을 어떻게 보장할 수 있을까요?&lt;/p&gt;&lt;p&gt;급하게 개발하는 과정에서 이러한 규칙을 어기는 코드가 생겨났을 때,
개발자들이 일일이 이를 잡아내고 고치는 것은 그 자체로 비용입니다.
그리고 이러한 규칙이 하나가 아니라 여러 개 존재한다면 개발자들이 실수할 가능성은 훨씬 높아질 것입니다.
그러므로 개발자들이 이러한 규칙에 위배되는 코드를 작성하지 않도록 강제할 수 있는 수단이 필요합니다.&lt;/p&gt;&lt;h2&gt;컴플라이언스와 피트니스 함수&lt;/h2&gt;&lt;p&gt;소프트웨어 공학에 따르면 아키텍트들은 &lt;strong&gt;아키텍처 결정의 컴플라이언스를 보장&lt;/strong&gt;할 수 있어야 한다고 합니다.
이는 아키텍트가 정한 아키텍처 결정&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;과 설계 원칙&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;을
제대로 &lt;strong&gt;문서화&lt;/strong&gt;하여 전달하고 개발팀이 &lt;strong&gt;실제로 준수하고 있는지를 꾸준히 알 수 있어야 한다&lt;/strong&gt;는 뜻입니다.&lt;/p&gt;&lt;p&gt;&amp;quot;레이어드 아키텍처 스타일을 지키자&amp;quot;와 같은 규칙을 개발팀이 제대로 준수하고 있는지 확인하기 위해
아키텍트가 매번 프로젝트 내의 모든 코드를 읽어보는 것은 말이 안 됩니다.
때문에 가장 이상적인 것은 다양한 자동화 도구를 통해
개발팀에서 자체적으로 자신들이 주어진 규칙을 제대로 준수하고 있는지를 지속적으로 체크하는 것입니다.
이처럼 특정 아키텍처 특성이 제대로 지켜지고 있는지 평가하는 다양한 수단이 바로 &lt;strong&gt;아키텍처 피트니스 함수&lt;/strong&gt;이며,
아키텍트는 자동화 피트니스 함수를 만들어 개발자들에게 제공함으로써 아키텍처 결정의 컴플라이언스를 보장할 수 있습니다.&lt;/p&gt;&lt;p&gt;피트니스 함수에 대해 보다 자세히 이해하기 위해
레이어드 아키텍처 스타일의 충족 여부를 알려주는 피트니스 함수를 예시로 보여주고자 합니다.&lt;/p&gt;&lt;h2&gt;ArchUnit 기반 피트니스 함수&lt;/h2&gt;&lt;p&gt;자바 진영의 경우 &lt;code&gt;ArchUnit&lt;/code&gt;이라는 라이브러리를 활용하여 아키텍처와 관련된 다양한 테스트 코드를 작성할 수 있습니다.&lt;div num=&quot;3&quot;&gt;&lt;/div&gt;
물론 자바 Reflection API를 통해 관련 기능을 직접 구현할 수도 있겠지만,
&lt;a href=&quot;http://www.yes24.com/Product/Goods/104491433&quot;&gt;소프트웨어 아키텍처 101&lt;/a&gt;이라는 서적만이 아니라
&lt;a href=&quot;https://d2.naver.com/helloworld/9222129&quot;&gt;네이버 D2 블로그&lt;/a&gt;에서도 소개된 라이브러리이므로
한 번 정도 경험해볼 가치는 충분히 있다고 생각합니다.&lt;/p&gt;&lt;p&gt;우선 새로운 스프링 애플리케이션을 만들거나,
아니면 기존에 만들어놓은 애플리케이션을 열어 &lt;code&gt;build.gradle&lt;/code&gt;에 아래와 같이 &lt;code&gt;ArchUnit&lt;/code&gt; 의존성을 추가해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token comment&quot;&gt;// 의존성 추가&lt;/span&gt;
    implementation &amp;#x27;com&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tngtech&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunit&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;archunit&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.1&lt;/span&gt;&amp;#x27;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음으로 아래와 같이 레이어드 아키텍처에 관한 규칙을 명시적으로 검증하는 테스트 코드를 작성해봅시다.&lt;/p&gt;&lt;p&gt;아래의 코드에서는 우선 &lt;code&gt;@SpringBootApplication&lt;/code&gt; 어노테이션이 붙은 클래스의 패키지 경로를 활용하여,
프로덕션 코드의 모든 클래스 정보를 읽어옵니다.
이후 클래스의 패키지 경로를 기준으로 각 &lt;strong&gt;계층을 정의&lt;/strong&gt;하고, &lt;strong&gt;계층에 대한 규칙&lt;/strong&gt;을 정의한 이후,
이전에 읽어온 클래스들이 &lt;strong&gt;이러한 규칙을 준수하는지 검증&lt;/strong&gt;합니다.&lt;/p&gt;&lt;p&gt;구체적으로 설명하지면 아래의 코드는 패키지명에 &lt;code&gt;presentation&lt;/code&gt;이 포함된 클래스는 &lt;code&gt;Presentation&lt;/code&gt; 계층으로,
패키지명에 &lt;code&gt;application&lt;/code&gt;이 포함된 클래스는 &lt;code&gt;Application&lt;/code&gt; 계층으로,
패키지명에 &lt;code&gt;domain&lt;/code&gt;이 포함된 클래스는 &lt;code&gt;Domain&lt;/code&gt; 계층으로 정의합니다.&lt;/p&gt;&lt;p&gt;다음으로 다른 계층에서는 &lt;code&gt;Presentation&lt;/code&gt; 계층을 참조할 수 없으며,
&lt;code&gt;Application&lt;/code&gt; 계층은 오로지 &lt;code&gt;Presentation&lt;/code&gt; 계층에 의해서만 참조될 수 있으며,
&lt;code&gt;Domain&lt;/code&gt; 계층은 오로지 &lt;code&gt;Application&lt;/code&gt; 계층에 의해서만 참조될 수 있다는 규칙을 정의합니다.&lt;/p&gt;&lt;p&gt;마지막으로 &lt;code&gt;check&lt;/code&gt; 메서드를 통해 매개변수로 전달받은 클래스들이 이러한 규칙을 제대로 준수하고 있지 않으면
테스트가 실패하도록 합니다.&lt;/p&gt;&lt;p&gt;이러한 테스트 코드가 바로 피트니스 함수의 대표적인 예시입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;junit&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jupiter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Test&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;com&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tngtech&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunit&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;JavaClasses&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;com&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tngtech&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunit&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;importer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ClassFileImporter&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;com&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tngtech&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunit&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;library&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Architectures&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FitnessTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;layerTest&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// ArchunitPracticeApplication란 @SpringBootApplication 어노테이션이 붙은 클래스&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 프로덕션 코드의 모든 자바 클래스들 선택&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;JavaClasses&lt;/span&gt; importedClasses &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClassFileImporter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;importPackages&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ArchunitPracticeApplication&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPackage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;Architectures&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;layeredArchitecture&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;consideringAllDependencies&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;// 계층 정의&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Presentation&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;definedBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;..presentation..&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Application&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;definedBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;..application..&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;layer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Domain&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;definedBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;..domain..&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;// 계층에 대한 규칙 정의&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;whereLayer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Presentation&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mayNotBeAccessedByAnyLayer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;whereLayer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Application&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mayOnlyBeAccessedByLayers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Presentation&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;whereLayer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Domain&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mayOnlyBeAccessedByLayers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Application&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;// 주어진 클래스들에 대해 검증&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;check&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;importedClasses&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;순환 참조 잡아내기&lt;/h3&gt;&lt;p&gt;그러면 &amp;quot;아랫 계층이 윗 계층을 알아서는 안된다&amp;quot;는 규칙을 위배하면 어떻게 되는지 확인해봅시다.&lt;/p&gt;&lt;p&gt;아래는 Application 계층인 서비스에서 Presentation 계층을 의존하는 코드입니다.
컨트롤러에서만 사용되어야 하는 &lt;code&gt;MemberRequest&lt;/code&gt;라는 DTO를 그대로 서비스로 전달하는 실수를 한 것으로 볼 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;bugoverdose&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunitpractice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;application&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Application 계층&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;bugoverdose&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunitpractice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;bugoverdose&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunitpractice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;presentation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MemberRequest&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Presentation 계층의 DTO&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;stereotype&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Service&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;transaction&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Transactional&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Service&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberService&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Transactional&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;readOnly &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findMemberNameById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MemberRequest&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;        &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; member &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMemberId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;orElseThrow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;존재하지 않는 회원입니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; member&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 위에서 작성한 테스트 코드를 실행하면 아래와 같은 에러 메시지와 함께 실패합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Architecture Violation [Priority: MEDIUM] - Rule &amp;#x27;Layered architecture considering all dependencies, consisting of
layer &amp;#x27;Presentation&amp;#x27; (&amp;#x27;..presentation..&amp;#x27;)
layer &amp;#x27;Application&amp;#x27; (&amp;#x27;..application..&amp;#x27;)
layer &amp;#x27;Domain&amp;#x27; (&amp;#x27;..domain..&amp;#x27;)
where layer &amp;#x27;Presentation&amp;#x27; may not be accessed by any layer
where layer &amp;#x27;Application&amp;#x27; may only be accessed by layers [&amp;#x27;Presentation&amp;#x27;]
where layer &amp;#x27;Domain&amp;#x27; may only be accessed by layers [&amp;#x27;Application&amp;#x27;]&amp;#x27; was violated (2 times):
Method &amp;lt;bugoverdose.archunitpractice.application.MemberService.findMemberNameById(bugoverdose.archunitpractice.presentation.dto.MemberRequest)&amp;gt; calls method &amp;lt;bugoverdose.archunitpractice.presentation.dto.MemberRequest.getMemberId()&amp;gt; in (MemberService.java:19)
Method &amp;lt;bugoverdose.archunitpractice.application.MemberService.findMemberNameById(bugoverdose.archunitpractice.presentation.dto.MemberRequest)&amp;gt; has parameter of type &amp;lt;bugoverdose.archunitpractice.presentation.dto.MemberRequest&amp;gt; in (MemberService.java:0)
...&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;레이어 격리 위배&lt;/h3&gt;&lt;p&gt;다음으로 &amp;quot;윗 계층에서는 인접한 아랫 계층에만 접근할 수 있어야 한다&amp;quot;는 규칙을 위배해봅시다.&lt;/p&gt;&lt;p&gt;아래 서비스 코드를 보면 Application 계층에서 오로지 Domain 계층에만 의존하고,
Presentation 계층을 참조하지 않고 있습니다.
문제는 서비스 메서드가 Domain 계층의 &lt;code&gt;Member&lt;/code&gt; 객체를 반환하고 있다는 점입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;bugoverdose&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunitpractice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;application&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Application 계층&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;bugoverdose&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunitpractice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;bugoverdose&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunitpractice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MemberRepository&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;stereotype&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Service&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;springframework&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;transaction&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;annotation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Transactional&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@Service&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberService&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Transactional&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;readOnly &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findMemberById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; memberRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;orElseThrow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;존재하지 않는 회원입니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;컨트롤러 쪽을 보면 서비스 메서드로부터 &lt;code&gt;Member&lt;/code&gt; 객체를 반환받고 있습니다.
즉, 이처럼 Presentation 계층이 두 계층 아래인 Domain 계층에 의존하고 있는 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;bugoverdose&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunitpractice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;presentation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Presentation 계층&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;bugoverdose&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunitpractice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;application&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MemberService&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;bugoverdose&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunitpractice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;domain&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token import&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;bugoverdose&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;archunitpractice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;presentation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MemberRequest&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestMapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/api/member&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token annotation punctuation&quot;&gt;@RestController&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberController&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

	&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@GetMapping&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Member&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getMember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@RequestBody&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MemberRequest&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;        &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; member &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; memberService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findMemberById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMemberId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ResponseEntity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;member&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 위에서 작성한 테스트 코드를 실행하면 아래와 같은 에러 메시지와 함께 실패합니다.
물론 개발팀에서 Presentation 계층이 Domain 계층을 의존해도 된다고 정했다면,
위와 같은 코드를 작성해도 테스트가 통과하도록 작성할 수 있을 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Architecture Violation [Priority: MEDIUM] - Rule &amp;#x27;Layered architecture considering all dependencies, consisting of
layer &amp;#x27;Presentation&amp;#x27; (&amp;#x27;..presentation..&amp;#x27;)
layer &amp;#x27;Application&amp;#x27; (&amp;#x27;..application..&amp;#x27;)
layer &amp;#x27;Domain&amp;#x27; (&amp;#x27;..domain..&amp;#x27;)
where layer &amp;#x27;Presentation&amp;#x27; may not be accessed by any layer
where layer &amp;#x27;Application&amp;#x27; may only be accessed by layers [&amp;#x27;Presentation&amp;#x27;]
where layer &amp;#x27;Domain&amp;#x27; may only be accessed by layers [&amp;#x27;Application&amp;#x27;]&amp;#x27; was violated (4 times):
Constructor &amp;lt;bugoverdose.archunitpractice.presentation.dto.MemberResponse.&amp;lt;init&amp;gt;(bugoverdose.archunitpractice.domain.Member)&amp;gt; has parameter of type &amp;lt;bugoverdose.archunitpractice.domain.Member&amp;gt; in (MemberResponse.java:0)
Field &amp;lt;bugoverdose.archunitpractice.presentation.dto.MemberResponse.value&amp;gt; has type &amp;lt;bugoverdose.archunitpractice.domain.Member&amp;gt; in (MemberResponse.java:0)
Method &amp;lt;bugoverdose.archunitpractice.presentation.MemberController.getMember(bugoverdose.archunitpractice.presentation.dto.MemberRequest)&amp;gt; has generic return type &amp;lt;org.springframework.http.ResponseEntity&amp;lt;bugoverdose.archunitpractice.domain.Member&amp;gt;&amp;gt; with type argument depending on &amp;lt;bugoverdose.archunitpractice.domain.Member&amp;gt; in (MemberController.java:0)
Method &amp;lt;bugoverdose.archunitpractice.presentation.dto.MemberResponse.getValue()&amp;gt; has return type &amp;lt;bugoverdose.archunitpractice.domain.Member&amp;gt; in (MemberResponse.java:0)
...&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;위와 같은 테스트 코드를 활용하면 현재 프로젝트가 주어진 아키텍처 규칙을 준수하고 있는지를 지속적으로 검증할 수 있습니다.
뿐만 아니라 이러한 테스트 코드는 그 자체로
해당 프로젝트가 어떠한 아키텍처 규칙을 따르고 있는지 알려주는 문서화 기능을 수행합니다.
개발팀에서 이러한 셋업을 활용하면 협업 과정이 보다 원활하게 진행될 수 있을 것입니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;http://www.yes24.com/Product/Goods/104491433&quot;&gt;소프트웨어 아키텍처 101&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;아키텍처 결정(architecture decision)이란 시스템 구축에 필요한 규칙들을 정한 것으로 &lt;strong&gt;반드시 지켜야하는 규칙들&lt;/strong&gt;에 해당합니다.
아키텍처 결정은 시스템의 제약조건을 형성하며, 개발자가 해도 되는 것과 하지 말아야할 것에 대한 기준을 명시합니다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;설계 원칙(design principle)이란 모든 경우에 반드시 따라야 하는 원칙이 아닌,
여러 가지 선택지가 주어졌을 때 기본적으로 권장되는 방안을 제시하는 일종의 &lt;strong&gt;가이드라인&lt;/strong&gt;입니다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;3&quot;&gt;&lt;p&gt;닷넷 진영의 경우 &lt;code&gt;NetArchTest&lt;/code&gt;를 활용하여 비슷한 기능을 수행할 수 있습니다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[쇼트서킷의 정의와 예시]]></title><description><![CDATA[쇼트서킷에 대해 검색해보면 논리연산자의 동작방식이라고 설명하는 글을 종종 찾아볼 수 있습니다. 그러나 쇼트서킷은 논리연산자에 한정된 개념이라고 보기 어렵습니다. 몇 가지 간단한 예시를 통해 쇼트서킷이라는 개념에 대해 가볍게 알아봅시다.]]></description><link>https://bugoverdose.github.io/computer-science/short-circuit/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/short-circuit/</guid><pubDate>Sun, 29 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;쇼트서킷에 대해 검색해보면 논리연산자 &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt;와 &lt;code&gt;||&lt;/code&gt;을 통해 설명하는 글을 찾아볼 수 있습니다.
쇼트서킷이란 논리연산자에서 좌측 피연산자만으로도 결과가 확정된 경우,
굳이 우측 피연산자까지 확인하지 않는 기능이라는 설명입니다.&lt;/p&gt;&lt;p&gt;다만, 이러한 설명은 쇼트서킷이라는 용어에 대한 고정관념을 심어줄 수 있습니다.
논리연산자는 쇼트서킷의 한 가지 예시의 불과할 뿐이며,
애초에 모든 프로그래밍 언어에서 논리연산자가 이러한 성질을 제공한다고 보장할 수도 없습니다.&lt;/p&gt;&lt;p&gt;해당 게시글에서는 쇼트서킷이라는 개념에 대해 다뤄보고자 합니다.&lt;/p&gt;&lt;h2&gt;쇼트서킷의 정의&lt;/h2&gt;&lt;p&gt;쇼트서킷이란 &lt;strong&gt;불필요한 연산을 생략함으로써 성능을 개선&lt;/strong&gt;하는 연산 방식이라고 정의할 수 있습니다.&lt;/p&gt;&lt;p&gt;잠시 프로그래밍 언어가 아닌 인간의 입장에서 생각해봅시다.
예를 들어 아래와 같은 수학식이 있다고 합시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;c&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-c line-numbers&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;12583&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;632&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;382&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;970392&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;저희는 굳이 소괄호 내부의 사칙연산을 수행하지 않더라도
위의 식의 결과가 0임을 즉시 알 수 있습니다.
소괄호 내부에서 어떠한 결과가 나오든, 최종적으로 그 값에 0을 곱할 것이기 때문입니다.&lt;/p&gt;&lt;p&gt;이처럼 저희의 뇌가 &lt;code&gt;x * 0 = 0&lt;/code&gt;이라는 원리를 활용하듯이,
각종 프로그래밍 언어를 설계한 엔지니어들도
다양한 방식으로 불필요한 연산을 생략하는 기능을 구현해놓았습니다.&lt;/p&gt;&lt;h2&gt;논리연산자와 쇼트서킷&lt;/h2&gt;&lt;p&gt;이미 위에서 언급했듯이 대부분의 프로그래밍 언어의 논리연산자는 쇼트서킷 기능을 제공합니다.
즉, 소스코드의 평가 단계에서 논리연산자가 나올 경우,
좌항의 평가 결과에 따라 &lt;strong&gt;우항의 평가를 진행할지 말지를 판단&lt;/strong&gt;한다는 것입니다.&lt;/p&gt;&lt;p&gt;구체적으로 설명하자면 AND 연산자 &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt;의 좌항이 거짓인 경우,
굳이 우항을 확인하지 않아도 연산 결과는 거짓이므로 우항의 연산을 수행하지 않습니다.
또한 OR 연산자 &lt;code&gt;||&lt;/code&gt;의 좌항이 참인 경우,
굳이 우항을 확인하지 않아도 연산 결과는 참이므로 우항의 연산을 수행하지 않습니다.&lt;/p&gt;&lt;p&gt;실제로 아래의 자바 테스트 코드를 보면 논리연산자 우항의 함수가 호출되지 않고 있음을 알 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Tests&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;logicalOperations&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printAndReturnBoolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 출력: false&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printAndReturnBoolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 출력: true&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printAndReturnBoolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;printAndReturnBoolean was invoked!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;파이썬의 경우 &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt;와 &lt;code&gt;||&lt;/code&gt; 대신 &lt;code&gt;and&lt;/code&gt;와 &lt;code&gt;or&lt;/code&gt;라는 키워드를 사용하지만 마찬가지로 동작합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-python line-numbers&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; printAndReturnBoolean&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 출력: False&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;or&lt;/span&gt; printAndReturnBoolean&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 출력: True&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printAndReturnBoolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;printAndReturnBoolean was invoked!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다만, 저희는 이러한 동작 원리가 당연한 것이 아니라는 점에 유의해야 합니다.
해당 프로그래밍 언어들을 설계한 엔지니어들은
의도적으로 각 언어의 평가 단계에
별도의 내부 로직을 구현하여 이러한 쇼트서킷 기능을 추가한 것입니다.&lt;/p&gt;&lt;h3&gt;비트연산자&lt;/h3&gt;&lt;p&gt;한편 논리연산자와는 달리 비트연산자 &lt;code&gt;&amp;amp;&lt;/code&gt;와 &lt;code&gt;|&lt;/code&gt;는 절대로 쇼트서킷을 지원하지 않습니다.
이는 당연합니다.
비트연산자는 좌항과 우항의 각 자릿수의 비트에 대해 비트연산을 적용하는 방식으로 동작하기 때문입니다.&lt;/p&gt;&lt;p&gt;즉, true와 false가 각각 1과 0이라는 값 대신 사용될 수 있기는 하지만,
비트연산을 수행하기 위해서는 기본적으로 좌항과 우항에 대한 평가가 선행적으로 이루어져야 합니다.&lt;/p&gt;&lt;p&gt;아래의 자바 테스트 코드를 보면 비트연산자의 동작 방식을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Tests&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;bitwiseOperations&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printAndReturnBoolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 출력: printAndReturnBoolean was invoked! false&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printAndReturnBoolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 출력: printAndReturnBoolean was invoked! true&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 1100 &amp;amp; 0111 = 100&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 출력: 4&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printAndReturnBoolean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;printAndReturnBoolean was invoked!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;자바 스트림 API와 쇼트서킷&lt;/h2&gt;&lt;p&gt;작년에 작성한
&lt;strong&gt;&lt;div to=&quot;/development/stream-lazy-evaluation&quot;&gt;스트림: 지연 연산과 최적화&lt;/div&gt;&lt;/strong&gt;라는
게시글에서도 언급했듯이 자바 스트림 API에서도 쇼트서킷을 지원하는 연산이 몇 가지 존재합니다.&lt;/p&gt;&lt;p&gt;예를 들어 &lt;code&gt;limit&lt;/code&gt;의 경우 스트림의 최대 크기를 제한하는 중간 연산으로
특정 개수를 넘어선 스트림 요소에 대한 연산은 완전히 생략합니다.
또한 &lt;code&gt;findAny&lt;/code&gt;와 &lt;code&gt;findFirst&lt;/code&gt;는 단 하나의 스트림 요소만을 반환하는 최종 연산으로
하나의 스트림 요소가 확인되면 나머지 스트림 요소에 대한 연산은 생략됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Tests&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;streamOperations&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; firstTwoInts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 출력: 10&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 출력: 20&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; firstOptional &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findAny&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token comment&quot;&gt;// 출력: 1&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[리뷰] 밑바닥부터 만드는 인터프리터 in Go 독후감]]></title><description><![CDATA[지인으로부터 추천받은 밑바닥부터 만드는 인터프리터 in Go라는 서적을 완독하였습니다. 책에 대한 전반적인 후기를 남기고자 합니다.]]></description><link>https://bugoverdose.github.io/essay/interpreter-in-go-book-review/</link><guid isPermaLink="false">https://bugoverdose.github.io/essay/interpreter-in-go-book-review/</guid><pubDate>Sun, 15 Jan 2023 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;토르슈텐 발의 &lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001033117&quot;&gt;밑바닥부터 만드는 인터프리터 in Go&lt;/a&gt;는
&lt;a href=&quot;https://www.amazon.com/Writing-Interpreter-Go-Thorsten-Ball/dp/3982016118/&quot;&gt;Writing An Interpreter In Go&lt;/a&gt;의 번역서입니다.&lt;/p&gt;&lt;p&gt;솔직히 모든 개발자들이 읽어야 하는 필독서도 아니고, 그렇게까지 유명한 책은 아닌 것 같습니다.
다만, 시니어 개발자이신 지인 분으로부터 추천받아 읽게 되었고 개인적으로 나쁘지는 않다고 생각하여 후기를 남깁니다.
아직 해당 서적을 읽지 않은 사람들에게 이 글이 도움이 되기를 바랍니다.&lt;/p&gt;&lt;p&gt;이와 함께 해당 책을 참고하여 개발한 간단한 &lt;a href=&quot;https://github.com/bugoverdose/yail&quot;&gt;토이 프로젝트&lt;/a&gt;도 공유합니다.&lt;/p&gt;&lt;h2&gt;무엇이 담겨 있는가&lt;/h2&gt;&lt;p&gt;개발자들이 프로그래밍 언어의 내부 구현에 대해 공부하고자 구글링하면
너무 겉만 핥거나 너무 원론적으로 다가가는 글밖에 찾아볼 수 없습니다.
이에 불만을 느낀 저자는 해당 서적을 통해 너무 얕지도, 너무 깊지도 않은
적절한 난이도에서 개발자들이 &lt;strong&gt;프로그래밍 언어론&lt;/strong&gt;이라는 분야에 입문할 수 있도록 가이드하고자 하였습니다.&lt;/p&gt;&lt;p&gt;그리고 이러한 난이도 조절을 위해 해당 서적은
인터프리터 기반의 프로그래밍 언어를 직접 구현해보는 일종의 &lt;em&gt;클론 코딩 강의&lt;/em&gt;의 형식을 띱니다.
책의 내용은 거의 대부분 저자가 토이 프로젝트 하나를 단계적으로 만들어 가는 과정을 담고 있으며,
각 챕터별로 만들어진 소스코드 결과물은 온라인 링크로 다운로드받을 수 있습니다.&lt;/p&gt;&lt;p&gt;사실 프로젝트의 최종 결과물만 보면 아쉬운 점이 많을 수도 있습니다.
예외가 발생했을 때 소스코드의 어느 위치에서 발생했는지 알 수 없다는 점,
호스트 언어인 Go의 가비지 컬렉터를 그대로 사용함으로써 가비지 컬렉션은 전혀 구현 대상이 아니라는 점,
유한상태기계와 같은 패턴의 도입 없이 거의 대부분 절차지향적으로 처리하는 코드,
모든 경우를 충분히 고려하지 못해 발생하는 자잘한 문법적 예외가 대표적입니다.&lt;/p&gt;&lt;p&gt;그럼에도 불구하고 Go를 호스트 언어로 사용하는 &lt;code&gt;Monkey&lt;/code&gt;라는 게스트 언어를 개발하는 과정에서
우리는 자연스럽게 인터프리터들이 공통적으로 수행하는 렉싱, 파싱, 평가 과정과 토큰, AST 등에 대해
깊이 있기 이해하며 &lt;strong&gt;거시적인 차원에서 인터프리터의 동작 방식에 대한 뼈대를 머릿속에 형성&lt;/strong&gt;할 수 있습니다.
단순히 프로그래밍 언어론에 입문하는 것이 목표라면 충분한 성과라고 볼 수 있습니다.&lt;/p&gt;&lt;h2&gt;누가 읽으면 좋은가&lt;/h2&gt;&lt;p&gt;솔직히 이 책을 모든 개발자들에게 권할 생각은 없습니다.
이 책은 현재 Go 언어를 배우고 있거나 이미 다룰 수 있으면서,
동시에 프로그래밍 언어론에 조금이라도 관심이 있는 사람에게 최고라고 생각합니다.&lt;/p&gt;&lt;p&gt;반대로 Go 언어가 익숙하지 않고, 현재 Go 언어를 공부할 생각이 없는 사람이라면
Go 코드로 범벅된 이 책을 굳이 읽을 필요가 있나 싶습니다.
물론 자바 문법이 익숙하지 않은 상태로 로버트 마틴의 &lt;a href=&quot;http://www.yes24.com/Product/Goods/11681152&quot;&gt;클린코드&lt;/a&gt;나
조영호의 &lt;a href=&quot;http://www.yes24.com/Product/Goods/74219491&quot;&gt;오브젝트&lt;/a&gt;를 읽는 사람들도 많이 있습니다.
그러나 해당 서적들은 이론 위주로 구성되어있으며 코드의 동작 원리를 대략적으로 참고만 해도
충분히 도움이 되는 책입니다.
그와 반대로 &lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001033117&quot;&gt;밑바닥부터 만드는 인터프리터 in Go&lt;/a&gt;는
제목만 봐도 알겠지만 &lt;em&gt;클론 코딩 강의&lt;/em&gt;의 형식을 띠고 있으므로 언어를 무시할 수가 없습니다.&lt;/p&gt;&lt;p&gt;다만, 공부에 초점을 두지 않을 경우에는 얘기가 달라집니다.
만일 당신이 현재 번아웃이 왔거나 굉장히 한가한 상황이라
커리어에 직접적으로 도움이 안 되는 딴짓을 하며 힐링하고 싶다면 이 책을 훑어보는 것은 좋은 선택이라고 생각합니다.
이 책은 소스코드에 대해 과하게 친절한 설명이 많으므로
전반적으로 딱히 머리쓰지 않고 부담없이 술술 읽을 수 있습니다.
또한 번역이 극한으로 잘 되어있는 편이라 가독성 차원에서 문제를 경험할 일이 거의 없습니다.
현 시점에서 교보문고 ebook 항목을 보면 대부분의 독자들이 힐링된다고 말한 이유가 이런 데에 있다고 생각합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/7dc99fe73c9bcdf8f557eb25670606ff/0f586/kyobo-ebook-reviews.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:39.263803680981596%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABUUlEQVQoz3WRzU7DMBCE87wceAYOvBYnDhwoCEU0DYemTVBo6qRO/Bu7STNoHSoqKlYarWSNx593ozRNEccxmqYB1TRN+K/6vofWGtZaKEVdg9UKd/dPuLl9wOKlQsQ5hxAimKbTBEzAOI44Ho9Xcs7Be49xHDAMs/reoSg6ZBmH1h4RGbzzsM6g2G3xnsbYswqud+GRSxFh20pkWY71eo08z6G1wjh6DIPD6TQiMtbA9R5M7LAoHhEXz/hkWxhjrsKMsdjmDMuEAjdIkgRl+QVj+uAn4uggayyr1xDIVYODqsFkhUqUaDgL46Cv0gUpJSwBuDnAewchNFYrBq1/Ahu5x2r/BqlFGLjSKnS6QGFKqUB3JqVz0tlDD5RlF+hDIBMVssMHlJmDziJz13WBigjpjBbYtm0QYyx0zltkm/qXkGZorL5awN/5XdJda/ZR4DcxCmJrIWAMnQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;kyobo-ebook-reviews&quot; title=&quot;kyobo-ebook-reviews&quot; src=&quot;/static/7dc99fe73c9bcdf8f557eb25670606ff/a6d36/kyobo-ebook-reviews.png&quot; srcSet=&quot;/static/7dc99fe73c9bcdf8f557eb25670606ff/222b7/kyobo-ebook-reviews.png 163w,/static/7dc99fe73c9bcdf8f557eb25670606ff/ff46a/kyobo-ebook-reviews.png 325w,/static/7dc99fe73c9bcdf8f557eb25670606ff/a6d36/kyobo-ebook-reviews.png 650w,/static/7dc99fe73c9bcdf8f557eb25670606ff/e548f/kyobo-ebook-reviews.png 975w,/static/7dc99fe73c9bcdf8f557eb25670606ff/3c492/kyobo-ebook-reviews.png 1300w,/static/7dc99fe73c9bcdf8f557eb25670606ff/0f586/kyobo-ebook-reviews.png 1498w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h3&gt;대안은 없는가&lt;/h3&gt;&lt;p&gt;저의 경우 공교롭게도 Go 언어를 배워야 하는 상황이었고,
프로그래밍 언어론도 찍먹해보고 싶었기 때문에 이 책을 읽기 적합했습니다.&lt;/p&gt;&lt;p&gt;그러나 만일 프로그래밍 언어론에 대해 깊이 있게, 제대로 공부하고 싶은 분이라면
이 책보다는 &lt;a href=&quot;http://www.yes24.com/Product/Goods/97518038&quot;&gt;프로그래밍 언어론: 원리와 실제&lt;/a&gt;와
같은 대안도 추천합니다.&lt;/p&gt;&lt;p&gt;또한 순수하게 Go를 공부하고 싶은 경우 &lt;a href=&quot;https://go.dev/tour/list&quot;&gt;A Tour of Go&lt;/a&gt;를 우선 훑고,
&lt;a href=&quot;https://ebook-product.kyobobook.co.kr/dig/epd/ebook/E000002970917&quot;&gt;Go 인 액션&lt;/a&gt;,
&lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000200429794&quot;&gt;실무에 바로 쓰는 Go 언어 핸즈온 가이드&lt;/a&gt;과 같은
Go 언어 학습 자체에 초점을 둔 서적을 읽는 것을 추천하고 싶습니다.&lt;/p&gt;&lt;h2&gt;어떻게 읽어야 하는가&lt;/h2&gt;&lt;p&gt;개인적으로 이 책을 완독하는 것을 목표로 두지 말고,
&lt;strong&gt;책을 참고자료 삼아 자신만의 인터프리터를 구현&lt;/strong&gt;하는 데에 초점을 맞춰야 한다고 생각합니다.&lt;/p&gt;&lt;p&gt;솔직히 말해 저의 경우 책의 흐름을 무지성으로 따라가지 않았습니다.
책은 기본적으로 렉서 구현, 파서 구현, 평가 함수 구현을 단계적으로 다룹니다.
즉, 특정한 문법이나 데이터 타입을 기능 단위로 구현하는 것이 아니라
상향식(bottom-up)으로 접근하므로 초중반에는 프로젝트의 전체적인 구조를 파악하기 다소 힘들 수 있습니다.&lt;/p&gt;&lt;p&gt;저는 이 점에 불만을 느끼고 철저히 기능 및 문법을
점진적으로 하나씩 추가하는 방식으로 토이 프로젝트
&lt;a href=&quot;https://github.com/bugoverdose/yail&quot;&gt;YAIL&lt;/a&gt;(Yet Another Interpreted Language)을 진행하였습니다.
특히 책에서 다루지 않는 &lt;strong&gt;변수 재할당 기능&lt;/strong&gt;을 구현하는 것만을 최우선 목표로 삼았으며,
코틀린 문법을 참고하여 변수 할당 시점에 &lt;code&gt;var&lt;/code&gt; 혹은 &lt;code&gt;val&lt;/code&gt; 키워드 중 하나를 사용하여
해당 변수의 &lt;strong&gt;재할당 가능 여부를 명시&lt;/strong&gt;할 수 있도록 하였습니다.
그리고 이 기능을 구현한 이후에 비로소 책에 언급된 다른 기능들을 하나씩 추가하였습니다.&lt;/p&gt;&lt;p&gt;한편, 저의 경우 책을 읽으며 마크다운 형식으로 내용을 정리하는 습관이 있습니다.
마찬가지로 해당 서적도 챕터별로 내용을 정리하였는데 솔직히 추천하지는 않습니다.
이론 및 개념에 대한 설명들은 별도로 정리하는 것이 나쁘지는 않지만,
책의 상당 부분이 그저 소스코드에 대한 설명으로 이루어져 있기에 애초에 정리하기 애매한 내용이 많습니다.&lt;/p&gt;&lt;p&gt;또한 이 책은 굳이 여러명이서 스터디를 진행하기에 적합한 책도 아니라고 생각합니다.
만약 여러 명이서 읽고 싶다면, 각자 개별적으로 책을 읽어오고
가벼운 &lt;strong&gt;독서회를 진행&lt;/strong&gt;하는 것을 권장합니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;이 책을 읽으면서 가장 많이 생각은 &amp;#x27;아 이래서 그 언어에 그런 문법/기능이 있구나&amp;#x27;였습니다.
대표적인 예로 다양한 표현식과 명령문을 구현하는 과정에서 대체 왜
자바스크립트에서 &lt;code&gt;null&lt;/code&gt;과 함께 &lt;code&gt;undefined&lt;/code&gt;가 존재하는지에 대해 체감할 수 있었습니다.
마찬가지로 파이썬에서 &lt;code&gt;input&lt;/code&gt;과 같은 내장함수를 다른 함수 및 값으로 덮어쓰는 것이 가능한 이유도 알 수 있었습니다.
또한 코드에 에러가 있을 때 렉싱, 파싱, 평가 중 어느 단계에서 발생한 문제인지에 대해 파악할 수 있게 되었습니다.&lt;/p&gt;&lt;p&gt;향후 시간적 여유가 생긴다면 해당 서적에서 이어지는 후속편인
&lt;a href=&quot;https://ebook-product.kyobobook.co.kr/dig/epd/ebook/E000003160873&quot;&gt;밑바닥부터 만드는 컴파일러 in Go&lt;/a&gt;도
읽을 예정입니다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[[네트워크] 교환 시스템: 전용 회선과 교환 회선, 회선 교환과 패킷 교환]]></title><description><![CDATA[교환(switching)이란 호스트들 사이에서 데이터가 전송되어야 하는 경로를 선택하는 과정을 의미합니다. 전용 회선, 교환 회선, 회선 교환, 패킷 교환, 데이터그램, 가상 회선, 메시지 교환, 셀 릴레이, 프레임 릴레이 등에 대해 알아봅시다.]]></description><link>https://bugoverdose.github.io/computer-science/network-switching-systems/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/network-switching-systems/</guid><pubDate>Mon, 12 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;strong&gt;교환(switching)&lt;/strong&gt;이란 호스트들 사이에서 데이터가 전송되어야 하는 경로를 선택하는 과정을 의미합니다.
해당 글에서는 다양한 교환 시스템에 대해 알아보겠습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/de04e22174b76b07117584c864027e17/6d2da/transmission-switching.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:42.94478527607362%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABMklEQVQoz31RXUvDMBTt//8PPolPvuqLIMgeRMFqkTpQy7puSdOuJtX0I6tpdyQZ3eq+DoRwyLnn3nPjrFYrGJj70BkiZAIjL/in34WzV7wjklJiGkX4yQXGE4rbp/fThkPStu361hqUzKG1RhiG8DwPZVnat2/xtTE8BEfIyhopVcN1XRBCIIsSo4cXRHOKuqo24q7rQOP49IQXN88oigJZloGxBIs0QZxmuByN8TmlyAW30zVNYwsMP7VzZ/mrkSTJJm4P09tEVkqBc241Qghc348xZRzHYHdoCk1UVdfb/RyI07UtXicpuKxty6ZZoiykTRczhjzP17/ci2eUgSzyo5GGqGqFICJ2EN9/g+/71tjpl20QUI6zq8c9wyHvujVXjcb53QeCWYJwEoAQaiP/ASlyuGyrnR4uAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;transmission-switching&quot; title=&quot;transmission-switching&quot; src=&quot;/static/de04e22174b76b07117584c864027e17/a6d36/transmission-switching.png&quot; srcSet=&quot;/static/de04e22174b76b07117584c864027e17/222b7/transmission-switching.png 163w,/static/de04e22174b76b07117584c864027e17/ff46a/transmission-switching.png 325w,/static/de04e22174b76b07117584c864027e17/a6d36/transmission-switching.png 650w,/static/de04e22174b76b07117584c864027e17/6d2da/transmission-switching.png 936w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;전용 회선과 교환 회선&lt;/h2&gt;&lt;p&gt;우선 교환 시스템은 크게 두 가지로 분류됩니다.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;전용 회선 방식(Leased Line)&lt;/strong&gt;은 송수신자 사이에 전용 전송 선로를 사용하는 방식,
즉 호스트들이 전송 선로를 통해 직접적으로 연결되는 구조입니다.&lt;/p&gt;&lt;p&gt;반대로 &lt;strong&gt;교환 회선 방식(Switched Line)&lt;/strong&gt;은 동일한 전송 선로를 &lt;strong&gt;다수의 사용자가 공유&lt;/strong&gt;하는 방식입니다.
아래와 같이 다양한 호스트들이 교환기를 중심으로 연결되는 구조입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/1e9b3898154cfb9b8d06be24ec8158a2/966a0/switched-line.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:64.41717791411043%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACAUlEQVQ4y42T6W7aQBSFef+naZWkS5YfVeOQsMUIQhwbTLyMjQEbA4kXFn+VpzJKExH1SkfjmXt95py5MzWAoijKgd2+IMm3NPQJph9TRZU/Nn8btTJZFWy2e743TX42nvDDNcV+J+GFL5zcDsk2W6r6Y6S1aseqIMlyfE/Q66p4no+h62iaxq+OzkldP9QdI60dFouCLMtZrlYE0xmnp2e0Wm2uLq9oNu6YBQHzKP5fy5DlOeEiZh4ucFyBYQy5uLjAdVwcx0FVVXRNI0mSfxS+J69VH+uXhCTNaTRb1Ou3RIuYXq9HGEaYI5Pz83Pq9ToT3//c8nyZoNlzXpOUeLlmOBqjKDdcXytYtoNl2SiKgqEbBJMJQRB8UPgWNXe24ouiYdkup2ffaLU76MaQzr0qrQvhcXNTp9O5p99VuetqXHXto2dZyzY7fjRHGGMHzw+I4pXs9GuSYdsuD4NHomhBGEW4tsXX3z3U0VT+vN/vJXa7nYRUWCYuVYvWk2C73bJYvkjSeLXGFb7sdhBMcYVgs8mxpmuidSoJn0SMogVYYxPTHEtSSbhKcvlCNnlOmqYsV2uJeRjhOC6ecMnShPcGnx1BS+3jex6maf5V+NmdKu2U0Xq00d3w8Dyr9flsxvPYRAghcVB4rGPVZuYkxvQXH65LeUQl+v0+7XabwWDAHwKs268w/PNjAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;switched-line&quot; title=&quot;switched-line&quot; src=&quot;/static/1e9b3898154cfb9b8d06be24ec8158a2/a6d36/switched-line.png&quot; srcSet=&quot;/static/1e9b3898154cfb9b8d06be24ec8158a2/222b7/switched-line.png 163w,/static/1e9b3898154cfb9b8d06be24ec8158a2/ff46a/switched-line.png 325w,/static/1e9b3898154cfb9b8d06be24ec8158a2/a6d36/switched-line.png 650w,/static/1e9b3898154cfb9b8d06be24ec8158a2/966a0/switched-line.png 944w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;그리고 교환 회선 방식 내에서도 아래와 같이 다양한 방식으로 분류됩니다.
이 중 회선 교환 방식과 패킷 교환 방식이 중요합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:624px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/c3f68d8e916df3cadada2a745c0df756/39c09/4-switching.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:97.54601226993866%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAADxElEQVQ4y42UaW8TVxSG+b391K8VhbKVFkRbSkqrVog2JIISktCisKRZTeLESbyO10nseEkyHjvexrN5ZmI/1dzBiK1Sj/TqnuXe59w7I51zvLGG7pI4Mcg3LLJqoJzvv9G7/jiW6iY92xPnh6MRo9GIc47jAiPyTYv1ionUdIirAxINh5hikVAHxOs2sXrgi1gdkGo6bNZMym1bnB/bOSmd4fXaMoWGQeTEptBxyZw6yBqspIo8Wd1hKbHP9IsQm4UT5N6I7KlDvu0SUx0OVI3Q2gqJRDIAlisVmsoxpY5D5Nhiv+OSawUHMg2LvXKLWK3DTqmJpJoi79fljktUsal1HcrFfRSlHgCVeh3XMpDbHs+KJuG6S+jEEXqtuGyqQzbVM8KNkYjHtQ3F5eWhRU3zaDdVTMsOgCdKnYGhkW95zBZs1o48lqouy9VgXTwcsFiyeVWyWKo4b/OrNY9nBzbVnsepqqDrxsfAedkmdOSxUnEIKTCzW+HOfIi7f4eZeLrBs0yL9eMhK1WX9SOPhXeBxgfAQsvjr32bjeMz0X396Ix/igYv8h0WD3SWDi3RaK3mCYWOznhe/A+gY2pITZffJIP50oCZfZuZgwGzJZe5Q0+sT4q+HJH367PFAQ+yBuWuS6vxAdA1+yQbDj/FevxZMJnOGUxl+kxKXSZTXSal3ltNZXVRf5g3uZfUOPwU0DH7pBoOP8d7PC6YPJIH/Lpd4+rjEF9NL3F9fouLU4tcm9vifrTBo4LFo7zJ/dQngQqOoQngL3GNGdkUm6czGlP+DZMt/oif8iDZFrmHWV3U/Zf8LgVA/xv2x39ZUVVwLPZUl0uRHnfTJj+mDO5IJncki4mMzUQ6kJ/za74mJIOb0R6lrkev1cSyBwEwk81RPSiwdWzzRbjHd0mDG3GdG3GDb6MaX0fafBPVuL7bEbGf9+s3EwbXdjUxA7KpBMVSKQCm0mn2wq8J1wwuRjRupwxuxXVuZxwuvMrz2b2XnH+eEevl1TI/pAfcSuh87zeO6WSUPmtLi2yGwwFwPCVCVYPPQx2uR3Uu7/a5stfn0k6PC5unQl9uNEV8ZU/nym6fq3s657e65Jr220kjxtc4KHY9Hkhdnso6c4U+s4U+Tw9MXh4NeVE743nVE7Gf9+tzcp+ZnEa9774PlFIptiMRdK3Lh3Zm6eSlBHI6SXk/j2fpH+1hNCKXy1OpVIIn7+zssLCwgD91fPOGQyHflLrK8soqW9sRorE4rXY7aDQcCY2ndC6XQ5bl97/h+Mqf8v/vHv/J/wIeL6N+CSp2xwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;4-switching&quot; title=&quot;4-switching&quot; src=&quot;/static/c3f68d8e916df3cadada2a745c0df756/39c09/4-switching.png&quot; srcSet=&quot;/static/c3f68d8e916df3cadada2a745c0df756/222b7/4-switching.png 163w,/static/c3f68d8e916df3cadada2a745c0df756/ff46a/4-switching.png 325w,/static/c3f68d8e916df3cadada2a745c0df756/39c09/4-switching.png 624w&quot; sizes=&quot;(max-width: 624px) 100vw, 624px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;회선 교환&lt;/h2&gt;&lt;p&gt;회선 교환(Circuit Switching)은 음성 전화 서비스에서 발전한 교환 방식으로,
그 핵심은 데이터 전송 전에 각 호스트 양단 사이에 &lt;strong&gt;연결을 설정&lt;/strong&gt;한다는 데에 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/381cf75a46adfc9a83889706c7994585/3534c/circuit-switching.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:33.74233128834356%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABKklEQVQoz3WR22rDMBBE8/+/1oc+lpKWXkxSx7LusmTLkk+xQu90YWBXiNnZmcO2bez4XrUUrA9o68nL0uYQAtM0kVLid31w7Dh8PtZKraX1x9PI62B4Fp5jN+B2cq3JOSOEaH9Kqaxr2dl+kB/mdUMZh5AabR0Pp5G7bqTkGbbCfSfohCMGz7JkjDEsy4zRmiVFRqkI80ou9arw9kXx3Eve9ETvMk9nQUwJKWXDvuT+zWGURCvJNAWU9ZxHg4yVrhcce8fN8UJey/XkvCSmEEhxYk6xqYgxsq4rRiueLobHs+SkIw/dhcfBM2pLr1zzFjZKrV8e7k0ppRHs5ZzDWov3HqUUc0r0w4iyjn4QH6Y3XMP45uE14e1ParXWtuQzwV1BrS2ENv+T8jueqh9H0UWYiwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;circuit-switching&quot; title=&quot;circuit-switching&quot; src=&quot;/static/381cf75a46adfc9a83889706c7994585/a6d36/circuit-switching.png&quot; srcSet=&quot;/static/381cf75a46adfc9a83889706c7994585/222b7/circuit-switching.png 163w,/static/381cf75a46adfc9a83889706c7994585/ff46a/circuit-switching.png 325w,/static/381cf75a46adfc9a83889706c7994585/a6d36/circuit-switching.png 650w,/static/381cf75a46adfc9a83889706c7994585/3534c/circuit-switching.png 808w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;연결을 설정하기 때문에 모든 전송 데이터는 동일한 경로로 전달됩니다.
&lt;strong&gt;고정 대역을 할당&lt;/strong&gt;하므로 &lt;strong&gt;안정적인 전송률&lt;/strong&gt;을 지원하며, 구조가 단순하다는 장점을 지닙니다.
전용회선을 사용하므로 전송 선로 이용이 비효율적이며,
전송 대역이 부족하면 새로운 연결을 설정할 수 없다는 단점이 있습니다.&lt;/p&gt;&lt;h2&gt;패킷 교환&lt;/h2&gt;&lt;p&gt;패킷 교환(Packet Switching)은 컴퓨터 네트워크에서 발전한 교환 방식으로,
그 핵심은 사전에 연결을 설정하지 않고 &lt;strong&gt;패킷 단위로 데이터를 전송&lt;/strong&gt;하는 데에 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/3a10681a7fb86d8ff7e5c4b7fa491d74/64d87/packet-switching.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:32.515337423312886%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABNUlEQVQoz3WR3U7jMBCF8/7vxAUSN2gl7kAIyKrQpG2Sxon/k9rOh5wSkFjtSEceW8czc84Uy7KQ8TuccxhjuHjLkiLSOPbtiDUGP03/8LcaxfaQUiKGAMv17LqOEBN/dgO7+sTzruauHPJX2ra98mPkEsKab4MVc4jk4kpKlLFUraAXgmEYmCZPdVaUuw/6rmEJM9Z5hBArjFaE2aOU+p60eCgb/BxwRqOmyM3jgerYME+efdNTHnre99XaxBqN03KVrJWkEYp6nBhHyUl6hPIUWVaO3MVag7cGrTWD6PkQnttXwev7ge5YU54dzyfLOFyn+3vsuX9rUdrwVCteKrF5+LOULcuSL5Mjzg5nLVJKjr2kOkvkOPC/KDYzfyMbnQ2fL1fTU1rWbZPies+t08r74n/hEzjwHbj5H+kJAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;packet-switching.png&quot; title=&quot;packet-switching.png&quot; src=&quot;/static/3a10681a7fb86d8ff7e5c4b7fa491d74/a6d36/packet-switching.png&quot; srcSet=&quot;/static/3a10681a7fb86d8ff7e5c4b7fa491d74/222b7/packet-switching.png 163w,/static/3a10681a7fb86d8ff7e5c4b7fa491d74/ff46a/packet-switching.png 325w,/static/3a10681a7fb86d8ff7e5c4b7fa491d74/a6d36/packet-switching.png 650w,/static/3a10681a7fb86d8ff7e5c4b7fa491d74/64d87/packet-switching.png 818w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;전송 데이터는 &lt;strong&gt;고정된 크기의 패킷&lt;/strong&gt;으로 나누어 전송되는데, 각 패킷을 독립적인 라우팅을 거쳐 목적지에 도착합니다.
&lt;strong&gt;가변 전송률&lt;/strong&gt;을 지원하고, 전송 대역을 효율적 이용할 수 있으며,
호스트 쪽에서 무제한으로 패킷을 수용할 수 있고,
패킷에 우선 순위 부여할 수 있다는 장점이 있습니다.&lt;/p&gt;&lt;p&gt;다만, 복잡한 구조를 지니며, 패킷마다 독립된 경로로 전달되므로 패킷의 도착 지연 시간이 가변적입니다.
결과적으로 수신되는 각 패킷 간의 간격이 일정하지 않는 현상이 발생하고
각 패킷들의 지연 시간 분포를 지터(Jitter)라고 부릅니다.&lt;/p&gt;&lt;h3&gt;데이터그램&lt;/h3&gt;&lt;p&gt;데이터그램(Datagram)은 패킷을 &lt;strong&gt;독립적으로&lt;/strong&gt; &lt;strong&gt;서로 다른 전송 경로&lt;/strong&gt;로 전송하는 패킷 교환 방식으로 UDP에서 사용됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/0870ffbaa1f90afed1fdd2c6fcda3cb1/84a90/datagram.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:62.576687116564415%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACHUlEQVQ4y4VT2W7bQAzU//9NHwsUCFA06FPbNI7tNrYV6z6sW3tIe3gKrmwDDgKUACFKKw6HQ65n7BklV/ieDHg8ttBKYZom1HUDzrmLGWPIsgxd16EsS+R5jnmeoZSCMQbaWChzBpm3PsTYpxW2tcDPqMXpdHKJVVVhHEcUReEAyClumsY5/UNujUFW1ti8pTBawdvtdkiTGPd2hpwmTPMMKeXCQmvH6iNL0xT7/d4V8q4fLTE+n1HxGWnHINkIq2cHskhQQwjhkog9FSF/b94hbVH3DFrNLiHMCnw+VPj2N8bDnxRD1yJOEkRRhKIscbpo2LStc2qz6Rn8rFsAfz8/43DwYa0lggtbo1H1DEHNwNkIrY0bgOAM00V8J8wlwfd9rFYvjrlHehHS9dABWotJCkJ2MXlPE2YSr2WPuuvvQK+59PTShqNn0rXMubhNmSbaD4PTjFYmS2J8Wif4uglwyjPUTYO2XdaM8gnHtfxrtcFbEN4qzZfJEijtHwGOI8MsOY5Fix8Zd1tAUycnC8IITy9bl+NJ0oXa+48ppW/xFci1aS2k4JCCOTKeUGcoY6G1ut0KuiF0IyheWLZI4hhRUeHL+uimzhmDFAKPYYcHv1/Wjlp+2vqIsxLWGleBdBmG4e6mkK5NXSMpShyqAeOlEJ0LbbGPcqxeA0yThBcGAYoiv5syxbQmV53onZbYfrDIZKeyQBSG6Pse/wBmL+aenTFKZgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;datagram&quot; title=&quot;datagram&quot; src=&quot;/static/0870ffbaa1f90afed1fdd2c6fcda3cb1/a6d36/datagram.png&quot; srcSet=&quot;/static/0870ffbaa1f90afed1fdd2c6fcda3cb1/222b7/datagram.png 163w,/static/0870ffbaa1f90afed1fdd2c6fcda3cb1/ff46a/datagram.png 325w,/static/0870ffbaa1f90afed1fdd2c6fcda3cb1/a6d36/datagram.png 650w,/static/0870ffbaa1f90afed1fdd2c6fcda3cb1/e548f/datagram.png 975w,/static/0870ffbaa1f90afed1fdd2c6fcda3cb1/84a90/datagram.png 982w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;패킷들이 도착하는 순서를 보장할 수 없으므로 재정렬 기능이 필요하지만
짧은 메시지의 패킷들을 전송할 때 효과적입니다.
또한 특정 교환기가 고장나더라도 해당 경로를 피해서 전송할 수 있습니다.&lt;/p&gt;&lt;h3&gt;가상 회선&lt;/h3&gt;&lt;p&gt;가상 회선(Virtual Circuit)은 &lt;strong&gt;가상적인 연결을 설정&lt;/strong&gt;하고 패킷 전송하는 패킷 교환 방식으로 TCP에서 사용됩니다.
연결을 통해 전송되는 &lt;strong&gt;모든 패킷의 경로는 동일&lt;/strong&gt;하며,
이 때문에 &lt;strong&gt;패킷의 도착 순서가 바뀌지 않는다&lt;/strong&gt;는 점이 핵심입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/c2e8bca08857af8db7e5fafaa34a2b6c/914c7/virtual-circuit.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:61.963190184049076%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACOklEQVQoz3WTy47TMBSG8/6PwQuwRSyRWIEQBdpC27S5OamdOBcnaa7Oh5JhxIwQ/8IL+/j8l2M7fd8zzQv3ZuRDUPE5LLHTQF7VCKlJy5qmfZBrjVISYypEFFEbwziOzNPEslj6ybLCOZ9P7M8BO0/yMTB88jTRPcUVKX6S4UaS4zXkGgiOXowbZwiZEcicWGniouWW5Hz56VGZGqeqKgLfI1WSl1jmaV1hHmB5Yu/7Abss6+4rVMbgezeUlDir7OcCay2LnRHVg1tmSLOc957h7VFTFTlaZ7RNQxwLmrpmGkesnZ8E/OnhnE+/2LvRZlHkLYk23GLFMZCEMuMYKnbXGF8k7K+Cc5QSJk9xCKUReYMnC76eQpq2xcnznKvrkiQJy/LXzMZsZ+zYY8cBaxfmcXih5S/KssR1L0h5x3nZ5Nn2GsM6WV1UnPKOXdbzqCtuScYPUaDuCW3bMm0Tfn3fCQOfS5Rtslf5sa7wY7lZuwrJzlN8vsR4QcTHY8C7fUwgElyhtmmHmcFPDXtPMQwjjlKKw+FAGIav2FaVdp4Yuo5p6FmPhr5bPfxjua0KjocDUSRw+A/WDFfb8zxvua3NHm2zPeSyLCge/VbXzZZL0TP90eIEvk+YVsiyJTPd9jPEXeFGil+B5Bpn3ITkFghOnsCLU1w/5NNNcU81P1XNm51iF+QbsbNa/bY/cvECTDfS9iNtN6Crmu7RkhclUpeY5kGS5uSmpRsmumGtHejGGa01u++H7aX8BvedkIciNhknAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;virtual-circuit&quot; title=&quot;virtual-circuit&quot; src=&quot;/static/c2e8bca08857af8db7e5fafaa34a2b6c/a6d36/virtual-circuit.png&quot; srcSet=&quot;/static/c2e8bca08857af8db7e5fafaa34a2b6c/222b7/virtual-circuit.png 163w,/static/c2e8bca08857af8db7e5fafaa34a2b6c/ff46a/virtual-circuit.png 325w,/static/c2e8bca08857af8db7e5fafaa34a2b6c/a6d36/virtual-circuit.png 650w,/static/c2e8bca08857af8db7e5fafaa34a2b6c/e548f/virtual-circuit.png 975w,/static/c2e8bca08857af8db7e5fafaa34a2b6c/914c7/virtual-circuit.png 978w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;가상 회선 방식은 회선 교환 방식과 유사하지만 전송의 단위가 패킷 단위라는 점에서 다릅니다.
또한 물리적으로 고정된 선로를 따라 데이터가 이동하는 회선교환 방식과 달리
가상회선 방식은 논리적으로 고정된 경로를 따라 패킷이 전송됩니다.&lt;/p&gt;&lt;p&gt;특정 교환기가 고장난 경우 모든 패킷을 잃어버린다는 단점을 지니고 있으며,
비교적 긴 메시지의 전송시 효과적입니다.&lt;/p&gt;&lt;h2&gt;메시지 교환&lt;/h2&gt;&lt;p&gt;메시지 교환은 전체 데이터를 하나의 단위로 교환 처리하는 방식으로,
이전 교환 시스템의 전체 데이터가 도착한 이후에 다음 교환 시스템으로 중개합니다.&lt;/p&gt;&lt;p&gt;패킷보다 더 긴 단위를 사용하지만 마치 패킷 교환처럼 전송하는 메시지의 헤더마다 목적지 주소를 표시하는 방식입니다.
회선 교환처럼 송신 호스트가 전송하는 전체 데이터가 하나의 단위로 교환 처리된다.&lt;/p&gt;&lt;h2&gt;통신 환경의 변화&lt;/h2&gt;&lt;p&gt;과거에 비해 통신 환경에서 물리적 전송 오류의 가능성이 많이 줄어들었습니다.
이로 인해 통신 프로토콜의 과도한 오류 제어 기능은 낭비적 요소로 전락했으며,
오히려 오류 제어 기능을 최소화하여 전송 속도를 향상시키는 기술이 등장하였습니다.&lt;/p&gt;&lt;h3&gt;프레임 릴레이&lt;/h3&gt;&lt;p&gt;프레임 릴레이는 동일한 속도의 전송 매체로 고속 데이터 전송을 지원할 수 있도록 고안된 기술입니다.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;흐름 제어 및 오류 제어 기능을 줄임&lt;/strong&gt;으로써 전송 속도를 향상시키고 &lt;strong&gt;가편 크기의 패킷&lt;/strong&gt;을 지원합니다.
간단히 말하자면 각 라우터에서의 오류 제어 기능을 생략하고,
전체적인 큰 단위에서 최소한의 오류 제어 기능을 수행함으로써 응답 처리 시간을 줄이는 구조입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/fc5ee06bc6c30a92aaacaef2caeedade/f6f78/frame-relay.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:51.533742331288344%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxElEQVQoz42S2Y7iMBBF8/8/BS/NgDSMWogMdDYaOpCFLCaJ7cR2ckcuOqgfx5KlnCrXklvl4PtIA4RphXueYRxHaGMQM4HzVwwhOPQ44VJzfMUxeilhxgnnqkN8vUJrNaeB03QCbpSgqip4nofz+Yzb7YblcokkScjmui7W6zXZfd8n3mw2xMfDX3zGKfz4DkwjnMvlguOHjzzPEQQBLCul0DQNBRwOBzweD3RdhziOqYD1WZ4Lep6PvXsAYwyOfVyWBbIsw6Np0Pc9pmmi9pXW4JzDGPNkpYitJDMLIV5++uXr9Qo/COB5H5C8I6NNOCedz/+wvc7LAKDoenRt+3pQSY2qZjBak78UCnXNMBqDcWbGMH13TB1yOcC75GAtR8Za9L0kbRaLBSqhwIVEGAZ4W61QSw0pJXzPw9vqF1hv0LYNspLhlNTUlnM6feJ956IqS/RS0ACsjlZg1UuavtW2bVvyW7YDIW3VQHGeH+B9t6dYGkpR3HFLEoRRhKIoXu33w/BMrJ57ZguVZYmm4/RtNyNNU0okOKcBOXY17Locj0dEUYRhGCh4/KHLTzZGI8hq7PYu/my3yLKcdvP3doswDPEPHnD3tUU5fQYAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;frame-relay&quot; title=&quot;frame-relay&quot; src=&quot;/static/fc5ee06bc6c30a92aaacaef2caeedade/a6d36/frame-relay.png&quot; srcSet=&quot;/static/fc5ee06bc6c30a92aaacaef2caeedade/222b7/frame-relay.png 163w,/static/fc5ee06bc6c30a92aaacaef2caeedade/ff46a/frame-relay.png 325w,/static/fc5ee06bc6c30a92aaacaef2caeedade/a6d36/frame-relay.png 650w,/static/fc5ee06bc6c30a92aaacaef2caeedade/f6f78/frame-relay.png 932w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h3&gt;셀 릴레이&lt;/h3&gt;&lt;p&gt;셀 릴레이(Cell Relay)는 ATM(Asynchronous Tranfer Mode)라고도 불립니다.
셀이라는 &lt;strong&gt;고정 크기의 패킷&lt;/strong&gt;을 사용하기 때문에 가변적일 때보다 오버헤드를 줄일 수 있어 전송률이 빨라집니다.&lt;/p&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;네트워크 강의(이기만 교수)&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[알고리즘] 정렬의 분류, 삽입 정렬, 선택 정렬, 버블 정렬]]></title><description><![CDATA[정렬 방식의 다양한 분류 기준과 구현은 간단하지만 비효율적인 삽입 정렬, 선택 정렬, 버블 정렬에 대해 알아봅시다.]]></description><link>https://bugoverdose.github.io/computer-science/sorting-basics/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/sorting-basics/</guid><pubDate>Fri, 09 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;정렬(sort)은 순서 없이 배열된 자료를 작은 것부터 큰 것 순서인 오름차순(ascending)이나
큰 것부터 작은 것 순서인 내림차순(descending)으로 재배열하는 것을 의미합니다.
비즈니스 로직을 작성할 때에도 일상적으로 쓰이며,
엑셀과 같이 저희가 평상시에 사용하는 일반적인 프로그램들에 자연스럽게 존재합니다.&lt;/p&gt;&lt;p&gt;다양한 정렬 방식의 분류 기준과 기초적인 정렬 알고리즘 3가지를 알아봅시다.&lt;/p&gt;&lt;h2&gt;정렬 방식의 분류&lt;/h2&gt;&lt;p&gt;정렬 방식은 다양한 기준으로 분류될 수 있습니다.&lt;/p&gt;&lt;p&gt;우선 실행 방식에 있어 크게 비교식 정렬과 분배식 정렬로 분류할 수 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;비교식 정렬(comparative sort)&lt;/strong&gt;이란 비교할 각 키 값&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;을 한 번에 두 개씩 비교하여 교환함으로써 정렬을 실행하는 방식입니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;분배식 정렬(distribute sort)&lt;/strong&gt;로이란 키 값을 기준으로 자료를 여러 개의 부분집합으로 분해하고, 각 부분집합을 정렬함으로써 전체를 정렬하는 방식입니다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;그 내부에서도 다시 아래와 같이 세부적으로 분류할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9727d0fb7f20384c31f44508a88eb4eb/511f0/sorting-methods.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:52.14723926380368%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACEklEQVQoz1WS0U7bMBhG+0C7YCp7hj3YHmDsftKAXewRpjENCRqgTdrEcZI2aZukobCsaUkpHS0NoWeKLxhYOrL1S/58/Nu19Nt7nL032Hs7zA7e0vn0Dv3jLn/26/z+Uic73GVyUGdysEt2WGf0uc7Rhx3S/bqqZ1/fvaI26zZYDTXWgwaZf4F+foytnxD5Fs3TH7QaR9hGg/b5L1raT1W7OPnOwOswDl2Kv9NX1O5GHmXaZ5sGzJI+nj8gjGLCaIR0PBy3i3S72NJFSBfdaNMxBfl8we1iyaYoeXhBbRHZPF57PF273Ix66O0OthBEYYiwLIRl4jgOptkhCAKursbEcaTmLMsoy5KyfHymdhvZDC6OmDga06iL2+0xGsUMh0MMw8A0TSwhaLVa+H6gQpIkIU1TsmzKer1mtVo9owyLK49SGfqcamfKLIoiZea5LraU9Ho+Qgg0TSNJRkxnM/J8zna7fUVtEUker7s8XXvK0Ov5hGGoEMJGb7VUkGUJDEOn2Wwq+/F4zHw+V4b39/f/DasrMwkg7ZEnPqaw8TxXBXqepyyldHAcqUKrkOl0Sp7nbIqCl0MZZr5B0j5WPUz7EiEdAt9Xj2JZlgqtDF3XVf2s7OI4pt8PVL06sOLy8pKHzYbaTWgz1I9JnXOyuKe+RWVTbdK0M/UwUkplWa1t2+bubqkMZ6qPubJeLpcURcE/CDG+j5J5ugQAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;sorting-methods&quot; title=&quot;sorting-methods&quot; src=&quot;/static/9727d0fb7f20384c31f44508a88eb4eb/a6d36/sorting-methods.png&quot; srcSet=&quot;/static/9727d0fb7f20384c31f44508a88eb4eb/222b7/sorting-methods.png 163w,/static/9727d0fb7f20384c31f44508a88eb4eb/ff46a/sorting-methods.png 325w,/static/9727d0fb7f20384c31f44508a88eb4eb/a6d36/sorting-methods.png 650w,/static/9727d0fb7f20384c31f44508a88eb4eb/e548f/sorting-methods.png 975w,/static/9727d0fb7f20384c31f44508a88eb4eb/511f0/sorting-methods.png 1172w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;또한 안정성을 기준으로 분류할 수 있습니다. &lt;strong&gt;안정성&lt;/strong&gt;이란 중복된 값들을 정렬했을 때 입력 순서와 동일하게 유지되는지의 여부입니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;안정 정렬(stable sort)&lt;/strong&gt;은 중복된 값들의 순서가 정렬 이후에도 안정하게 유지됩니다. 삽입정렬, 병합정렬, 버블정렬이 이에 해당됩니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;불안정 정렬(unstable sort)&lt;/strong&gt;에서는 중복된 값들의 순서가 정렬 전후로 달라질 수 있습니다. 선택정렬, 퀵 정렬, 힙 정렬이 이에 해당됩니다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;한편 실행 방식과 무관하게 정렬 장소에 따라 내부 정렬과 외부 정렬로 분류할 수도 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;내부 정렬(internal sort)&lt;/strong&gt;이란 자료를 컴퓨터의 메인 메모리에 올리고 메모리 내부에서 정렬하는 방식입니다. 정렬 속도가 빠르지만 정렬할 수 있는 자료의 양이 메인 메모리의 용량에 따라 제한됩니다.&lt;/li&gt;&lt;li&gt;&lt;strong&gt;외부 정렬(external sort)&lt;/strong&gt;이란 메모리의 외부인 보조 기억 장치에서 정렬하는 방식입니다. 내부 정렬보다 속도는 떨어지지만 대용량의 보조 기억장치를 사용하기 때문에 대용량의 자료에 대한 정렬이 가능합니다.&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;삽입 정렬&lt;/h2&gt;&lt;p&gt;삽입 정렬(insertion sort)은 리스트 전체를 순회하며
각 자료를 그 이전 자료들과 비교하고 적절한 위치에 삽입하는 정렬 방식입니다.
기본적으로 삽입할 위치를 찾기 위해 이전 자료들을 순회해야 하고,
삽입하는 경우 이전 자료들을 한 칸씩 뒤로 이동시켜줘야 합니다.
i번째 요소에 도달할 때마다 i번째 요소까지는 순차적으로 꾸준히 정렬됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9a83d7ecc0b340f6768d68ad0980c86a/d0cc0/insertion-sort.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:169.93865030674846%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAiCAYAAABfqvm9AAAACXBIWXMAABYlAAAWJQFJUiTwAAAGS0lEQVRIx52WCW/bSBKF/f9/xkwW2UwyuewkjpORbVnWLVEUdZ8UJd6XRFG35W/Blo0kAwywmAYKRLO6HyRWvVfvDMCMbAbBGH1tMgxVuu4AbakziaZ03D7j+YRpbKAuNNpOT7xP8sm5vj9CX1vivhv7nCWALb9Lyajw9vodqd4ttYXC1/IVt+078l6Zsl7l1fc/KKhFSqHEXTfDtXJDJZCR/Drn9xeUjCq9YHQC7Ph9ak6dDzcfSA/ukedN7jtZCsMiJVeibjc4z1xQmVaphDIltcxtI00tUKgHTT5nP1M1a+LfCcD5NsKIbYLDHGvlMluYWCsHY2kzCWZi72w89MhCDaYYS0vkk5wW6jhbn+ncYLFZngB3my2O6WDrFpZusZxH/Nt1Nuj3aXfb+FHAfLUQMZ6qdEc91vsNq91axOawFc94u2a1P0X8lFvtN8S7FYeHA2cPuwMdb0DFlqnMahT0ChVXJtPPUdDK3OtFqpZMYVJGsutkZgWqpoxsN8gZZUqmRM1SxP1h8PQNu/MBdVvhxbvfuevf090M+Fa4ItPMIEcNFFPht3e/UR5XaG465Lp5vhW+0V516Sx7vLr4L7JVZzh/Aux7IyRboTyRyKklKpaMZNSp6jIFvUrdaVIYV5BMhaJRFe8r0xpls0bVqlOaVCnrNbS5fgKM4xWtdhvTMqnJNfaHPZ7vi32ykm/zyCMPx6OI42MSyf5BxHPu8fHxBHh8OFIqlLj8/AXbtE7lOgKP/6LKz9STNIWW2aVt9eh5IybRTETH6TMKJ4Jq47km9skzyQnqeSNmscHAH+OtgqeihAMUt8FV4RutqEs9bJJtZUlJKUEvxW7wKfMJ2agLWkqaRLFfRFm0aM47pKrXNLwmg3B8Amx4HbLTAh+zFxSsCjmrxPd6ijfpt6SNLMVZmdfXf5IZZsm5Ja47ab6UL8m7FUpOldepN2QmuR9cDtdzzKVNuF/grH3slYe/DfE2AVbs4G0DmmobZ+UxmxvYsYu79tEXJkZk4+9CcT/aPlHveSUUXIRzFuEC13axTZvAC8R+pk3/v6Isl0sc20FTNUzDJPADwiBkvVqz3+2JlzGB54v3E3WCZVrstrtfUX7qhjNtoiH15JPArkzGC41hIqhLHW05ox+MRIVnKxN1MaU4rHDfzInK97yhEFhR5WCM9yywg2gs9Ozj7TlK2EQK6qSVNJelrxS9KjVT5t3Ne6pTCTluUlYrZFqJbjZQwhaX+a/U7Dr95yorTouMluOi+Jm8XSZrFfmunKp8o99T0Mu8un5NZpQj4xS47qa5lK7I2kXyVpk3t2+5U7N0/eEJMKmOtw5wli5W5IgINiGLwxJ35YsIdwuMuSVi6uuYcwtv7ePEHlFybu0LCTtL+Pe8ppMpU1XDMizUkUq9VqepNNHUiah4p9VhFcWs4zVxFP8z9RLQhPA/r2gZkU6nKZaKbLabE72PRw4PD78WOLn7JAxCHH7+hX9fu90Oz/OwLIvpdIqmaSIMw8A0TRaLxd+650ltkj4SsnQ8st8f0LQpo/FYgIRhSBRFIve81us14XwuQIfDEa7nCjlLcE5t44+RLIVO2Kek13hfvKBuNWmHfcqWTNPvoLht0Q35WZmm16ETDpCchhDW+0GeiiEzXTwJbG8+FL12ef+F3mpAbzvkqnAlerG2aFDTZV5evETW68jLJhW1ysvzl2TULMPtmA9/vUdxGgyeR0DHH5DTitw005QsiZxeoqhVxDDKWxVkt8FfiVMwahRdSbz/JqdIq1kqjkxKuSE3LQn2nObyYS/G4fa4I96u2DxssX0Hpd0QI3Wia8xsHVWfICk1DNfkwMPTWF2hOwbRZsnh+PDPVT7uj+w3O1zL4fvX79zdpNnGGxGPh19bLF7Ev/ZhoofThSFsSGIpEnthrz2cjc/InaCoLbrGQGhhYk/M2BH55GxiU7xdKGxK9GxFOkEfyZYpDkuC7Imjyg+KyGadii/TcJvcte/pRQPBdcmQuVFuyRtlqrZMSrqmNKv+MEutoEd2kuf97XvhqKphnTepP0l37oR9y6sFPmQ+0gza5JySsHUvPv2HGzVD1ZP5/fwFqfYNg/n4x9Tr+UPG4UToW9cbCO0bhSpt9zT1ErM5FPseo/mEoT8W55Lzo6d7ieH8H+Ekwq1B3DKQAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;insertion-sort&quot; title=&quot;insertion-sort&quot; src=&quot;/static/9a83d7ecc0b340f6768d68ad0980c86a/a6d36/insertion-sort.png&quot; srcSet=&quot;/static/9a83d7ecc0b340f6768d68ad0980c86a/222b7/insertion-sort.png 163w,/static/9a83d7ecc0b340f6768d68ad0980c86a/ff46a/insertion-sort.png 325w,/static/9a83d7ecc0b340f6768d68ad0980c86a/a6d36/insertion-sort.png 650w,/static/9a83d7ecc0b340f6768d68ad0980c86a/d0cc0/insertion-sort.png 732w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;삽입 정렬은 구현은 간단하지만 다소 비효율적인 방식입니다.
시간복잡도의 경우 평균적인 경우와 최악의 경우에서는 O(N&lt;sup&gt;2&lt;/sup&gt;)입니다.
그러나 최선의 경우에서는 O(N)입니다.
이미 정렬되어있는 리스트에 삽입 정렬을 실행할 경우 삽입의 과정 없이
그저 리스트를 한 번 순회할 뿐이므로 오히려 가장 효율적인 정렬 알고리즘이 됩니다.&lt;/p&gt;&lt;p&gt;추가적인 메모리를 요구하지 않으므로 제자리 정렬에 해당하며,
중복된 값들이 있어도 순서가 그대로 유지되므로 안정 정렬에 해당합니다.&lt;/p&gt;&lt;h2&gt;선택 정렬&lt;/h2&gt;&lt;p&gt;선택 정렬(selection sort)은 전체 원소들 중에서 기준 위치에 맞는 원소를 선택하여 자리를 교환하는 정렬 방식입니다.
기본적으로 i번째 위치에 와야 하는 원소를 찾기 위해 리스트를 반복적으로 순회하는 구조입니다.
리스트를 한 번 순회할 때마다 i번째로 작은 원소가 리스트의 i번째 위치에 배정됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/f7acda8fbe10f3da0676cee15e671f3f/d67ca/selection-sort.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:160.7361963190184%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAYAAAASYli2AAAACXBIWXMAABYlAAAWJQFJUiTwAAAGNElEQVRIx62U+W9U1xXH318SVaqqpj8S0ShqlLpq0gQ1INq0EQkJTUSjLgSatglSIYKUYAhq41AKGIQJiQ14wYD3GchgPPZ49hnPvu/7vng8Hi+zfKp5hoBSqqZVjvR995x7lvfePed+Be5JKBjCtGBCp9Wh02jRarQbugjtBjRa9Ho9ZpOJUrHEo0RYWV9luV7D5nEgV83hDfmIpeNEUzFC8TCheIRwMko4cW+NRZidn8XpddGkRWVliVpjlaW1Zdq1BFvWhT6xwJxnnvmgGk3GiD62gC5qxF5yibYlY8Oac2ApOnhreD87L+9lx+U9vD3yPua0FblLgSaix5p1IngqflQeFRcHLqLyqLFVXdxS36J/vB9/NYC5bGNybpKe/h5mHLP84NzPeKVvDzt6f8+WS6/jzrrp7u1GopLgrvgRHDkP2qgBifG2uKqSeowJM9qwgYWMFWVChyFuQuFVoQxpeGfsA/bcOCjiL5LjWDJ2lH6NmGvPuhHW6musNtawuexUakssr9WortVYrq+wtLos2iv1Vdaa6+LaaDaoN+si2nrbv9pco1ZfYa2+jnC/O631Jt+ECNFyAl8pSGQpTrAUYdqnYMg0zjXzBCNWKdaUk2g1QaQax1sI4Mh4CC1GCS/FcOV8uPN+0R8oh4mW4giOogelT8XY/ATxWpw3h//Ej7t38NqVvXz3RAdTARkzJjlfGGXokwsYCxbm7AokainalAFNXM/NuyPM2OXYi24Ea97JnFfBZ+O9+MsBdg7upePsL9k99C7fPv40ox4Jw7LrXJH2c8c9gy6/wKhijL6JyyhiauRBBRevf8qEdgprwYmQrGQIL8aIVRJEF+NoYyYuzfTTqxhC5lPgyvpI1tIiQuUovnxQjGvHB4phEfFqikglTrKSftCUh6VeW6e1+v81SWi2mjyMeqNOo9UQsd7YGI37vkaz+aXdaG3o7b2H84X/+soWqOZV6NRajHojZoMJvVqH3+V99BfmqwXilRSZWo74YpJIKU5qOUu6liNWThIpxpmQT2HyWwhkQxhDFkZVUwzLR3Fl/CQqKbIreRJLaXLVAoI970IV0jBtncGad6BO61G457lrk2MvOUVbG9Sh9KoxpE38vO8tXu77Lds/282r/W9jyzmQ6KTM+5TY8i4EZ8mD0quib7QPW9aOsWjhC4OMAckAnooXQ9HMlFJCz2APty0ynr34CrsH/iySw9bP38CetnPu6nmmNBKcZS9Cu+2OvAdn1oMz58WUsuEu+HDlvbSJw5JxYE7YMMWs2HNuPtUO0q3s5bTiEr2GYTGunduObdcSm9JqtTbOv8WDtQWt5sZGOpUmkUg8umftmNaDXOF+MXFXfLb+LanZHpdG46Go/zAQrdZGwa/O4lfRjhFBi2q1Si6XI5vNkslmSGczlBfLX86k8L/eBLfDhUapxma2YrfYcZhs2AwWqN/75VQlK97LVC1DdDFBoBAmUU2LdqQcEw86uZwhuZwmvpRCbp5D71ug1FokupRAYp/mgqyPG6YpHBkvgjln565bzrhmUpyzuaSa22aZaJuLNqYjc0zppUiNtzEWzMj8M0xopkTKkwanefLUVn41+Eee+uc29t081OZDN/M+FVcmr2LJ2tDlTdwxTXNNNoxr0cNsRMmAdJDR2TFcVS+3nHe4MNjDpGKSuzEFz5x9iffGPmTLhdfZN3LoHmMXg/iLIbz5AI6sh0ApjL8UFhnalfdhCJpEtOPas9pm6zbD2zJublqlDFsmubowgjZi+npNKRdKFLL5r0dffMMiFMpFfPEggUSIcCpKJBUVdX8iKOqindywH+UPJSOiv72XLxUQ/jr4N5766EW2nXmDzUdfYNPBZ9lyaidbT+/iiQ+f54mDz/HCqVd58fQuvn9kC5vef46fnn6N7d1vsvnw8zx9dBtbz+xi09GfcLj/BMK7Vz/gR+dfZt/YIR7/qIPHDmzmpb7f8LubB/jO8Wf41oEn2T38Hn8YP8z3jnXw2MHN7Bp6h/2STh4/8kM6Tv6Cw7Iutn/+a/b3H0GYVN/i0NAJTk6e59iNkxwd/JjjI//g72Nn6LzeRedgF59MnNvwXz9J51AXH4+fFdF5rYtjw5+IervGhErKvwCq0LPIbui3lAAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;selection-sort&quot; title=&quot;selection-sort&quot; src=&quot;/static/f7acda8fbe10f3da0676cee15e671f3f/a6d36/selection-sort.png&quot; srcSet=&quot;/static/f7acda8fbe10f3da0676cee15e671f3f/222b7/selection-sort.png 163w,/static/f7acda8fbe10f3da0676cee15e671f3f/ff46a/selection-sort.png 325w,/static/f7acda8fbe10f3da0676cee15e671f3f/a6d36/selection-sort.png 650w,/static/f7acda8fbe10f3da0676cee15e671f3f/d67ca/selection-sort.png 714w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;선택 정렬은 구현은 간단하지만 매우 비효율적인 방식입니다.
시간복잡도의 경우 최선의 경우, 평균적인 경우, 최악의 경우 모두 언제나 일관되게 O(N&lt;sup&gt;2&lt;/sup&gt;)입니다.&lt;/p&gt;&lt;p&gt;추가적인 메모리를 요구하지 않으므로 제자리 정렬에 해당하며,
중복된 값들의 순서가 달라질 수 있으므로 불안정 정렬에 해당합니다.
선택 정렬이 불안정 정렬에 해당하는 이유는 &lt;a href=&quot;https://mygumi.tistory.com/94&quot;&gt;이 글&lt;/a&gt;을 참고하기 바랍니다.&lt;/p&gt;&lt;h2&gt;버블 정렬&lt;/h2&gt;&lt;p&gt;버블 정렬(bubble sort)은 인접한 두 개의 원소를 비교하여 자리를 교환하는 정렬 방식입니다.
첫 번째 원소부터 마지막 원소까지 한 단계가 끝날 때마다 가장 큰 원소가 마지막 자리에 정렬되는 구조입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/56fcb91cb023933758b151f7849fa8b2/50383/bubble-sort.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:122.69938650306749%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAABYlAAAWJQFJUiTwAAAE90lEQVQ4y1VVaW9TVxB9f6nqB1SJUlS1hYKgFFJ2ShCUFkQjWlARKRWoLRC1hdRGhAQICQFCxGICtGxpQGSxASdxYmM/78/2W/FGFpM4tsOpZswz5sP4WvfNnTtzzpy5QmJWRmQyCmfEiZGECyNxF69D0jD8KT/oe3wmUTGtpCORL++Zq1JQ2ei/kEQSAwE7BoN2GHMvEM1J/NGf9uOBqwdGyagc1goanPIwYrk4+8Sm49CLOjxJL3xpEVpRhzAYe4LN5+uw7cIeONVh6HMGpKkYfrL9iprW7bj07CoHJWsdvIjlzbWo7z4CeVqGXjJgjz/FurM7sK51B4Y0F4Sb7jtYdHI9ljZ9jfv+XqSQRiATwBenavHeX4vRcNeK5FwSyVISB7qP4kPrSmxq24XIeARppHHTcwcfW1ZjQeNK9AQfQVDyKtrsnZwJlWSW8TD0GNbe0wiOhyDPKmxi1o/Gnmb0SXb2ic3EQec7nnThsvM61FkNAmERzoQhjZexi08nIBdUhLJhhFIhhoDwI1OLGl7iJfSS/paUfIIzTb1OlUmhTcoiNBF+hzVf2g+XOsokRaaiiE5JCE9GEJoMQ5qOVy4h/0guikhOKgeM52WkkWHsqluBSvIqXoypbowqY2xu+h91MZvsO1OVId5kKM/I6HLacN11izEgDInR+2Iv/rxt5QypVOq/wHgQjfdOoT9ajaGCy0PXcXWkG8qsCuHG2D+Y3/glPrGsQU/gEd/mTfmw9ux3WHamFkfvWJjhF6UXqLcdxgLrKmw8twvRiWiF5YWNNZh/bEWZZUf8KT61rMGq5q0YNdyciTQlYe+1Q1hyciO6hmzv9OFn1rXcPvKMwuQ4Es9Q0/INVp/ejhF9FIJW1CBmAgi8DDI2VDKtgUwQjuhT6MW3SiFIBsMOxF7FuY3Yt6DBmxbhzwZAsYSKFmeVil7JOZANQkz6IReUSkAK4Ag8YUzJh87RSlVVtEw/BC5ZNcsxCp5PcBBzj0zM+DGqjsGteeDWPRjT3GzRVxL7C2pBgzarQS/olSwpAJWq5TVm0wxG2h0KOhGbivGECo2HuXXcCTeCqSCLQPCmfdhvO4yGexZuXhOrc/ZL2HlpH/olO/jSooaH4T58e34vLj67wsGpzOBEGPU3DuOX7gZufKHD3oX3jy8pi9tsm6QPK5q34KOmr1Bv+x2puRTb7q4DWHZuCza07uQBkkUWV4ZvYKGlBh8cX45/vfch+DIivr+8H4du/wEpF2MciLmW/nZsbd/9NsMCZfgYWzt+QJujE1pB5+FL3bHP9ht+7j5SzpDSJqwIR7kKQzqgzCgcyMSQArtlD+Nqsm68NvBc80I0xDKG9CGJFE/rd7RcMljj1QzTheFsmPE095SiCmlCgjQpcYsJVObZ/gu4NnKTMzDnIeFh+a+lMg+pEpcxhr97WzAgOcoDgtoqF8OZgQu4QlrOqxA6HF2Yd3wZFp1Yz6KnqTOqu7Hi1BaezsceNCH1ZmLXddZjXuNybG6rg/xKZgI7ndew+OQGfH5iAw9eoS8yiEUn1qG2vQ7+TIBLiE5K2HP1IJY2bcItz13uSdJyS187+zbcszLmpBDKdvWZ7djW8SO8GZG0rCOYDXEQkhSVrNKLlovDlxIrjW2+es+TXh5ZppaNOYOV4k8H+AKWHoFpvr/Vb66pz2piCGfCrpoUj/4cYsrP/v8Dg6y6CdgFy+8AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;bubble-sort&quot; title=&quot;bubble-sort&quot; src=&quot;/static/56fcb91cb023933758b151f7849fa8b2/a6d36/bubble-sort.png&quot; srcSet=&quot;/static/56fcb91cb023933758b151f7849fa8b2/222b7/bubble-sort.png 163w,/static/56fcb91cb023933758b151f7849fa8b2/ff46a/bubble-sort.png 325w,/static/56fcb91cb023933758b151f7849fa8b2/a6d36/bubble-sort.png 650w,/static/56fcb91cb023933758b151f7849fa8b2/50383/bubble-sort.png 740w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;버블 정렬 역시 구현은 간단하지만 매우 비효율적인 방식입니다.
최선의 경우는 자료가 순차적으로 정렬된 경우이며, 최악의 경우는 역순으로 정렬된 경우입니다.
전자는 자료 교환은 하나도 일어나지 않고, 후자는 자료 교환이 n(n-1)/2 회 발생합니다.
문제는 두 경우 모두 인접한 두 개의 원소를 반복적으로 비교하는 작업이 무조건 n(n-1)/2 회 실행된다는 점이며,
이에 따라 시간복잡도는 최선의 경우, 평균적인 경우, 최악의 경우 모두 언제나 일관되게 O(N&lt;sup&gt;2&lt;/sup&gt;)입니다.&lt;/p&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;알고리즘 강의(안효창 교수)&lt;/li&gt;&lt;li&gt;이지영의 &lt;a href=&quot;https://product.kyobobook.co.kr/detail/S000001743817&quot;&gt;C로 배우는 쉬운 자료구조&lt;/a&gt;&lt;/li&gt;&lt;li&gt;위키피디아 - &lt;a href=&quot;https://ko.wikipedia.org/wiki/%EC%A0%95%EB%A0%AC_%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98&quot;&gt;정렬 알고리즘&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;기본적으로 키(key)란 자료를 정렬하는 데 사용하는 기준이 되는 특정 값을 의미합니다.
예를 들어, 구조체들로 구성된 배열에서는 각 구조체의 특정 필드를 키로 활용하여 구조들 간의 정렬을 진행합니다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[이산수학] 직접 증명법, 대우 증명법, 귀류법]]></title><description><![CDATA[이산수학에서 배우는 직접 증명법, 대우 증명법, 귀류법 등의 용어를 가볍게 정리합니다. 나아가 귀류법이 다른 증명방법들에 비해 지니는 한계에 대해 설명합니다.]]></description><link>https://bugoverdose.github.io/computer-science/math-proof-basics/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/math-proof-basics/</guid><pubDate>Sat, 03 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;증명&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;증명(Proof)&lt;/strong&gt;이란 논리적 법칙을 이용하여 주어진 가정으로부터 결론을 유도해내는 추론의 한 방법입니다.&lt;/p&gt;&lt;p&gt;수학에서 나타나는 대부분의 증명 문제는 &lt;code&gt;P =&amp;gt; Q&lt;/code&gt;와 같은 논리적함축(Implication)을 증명하는 과정입니다.
이때 논리함축 &lt;code&gt;P =&amp;gt; Q&lt;/code&gt;가 참이기 위해서는 &lt;code&gt;P&lt;/code&gt;, &lt;code&gt;Q&lt;/code&gt;가 모두 참이거나 &lt;code&gt;Q&lt;/code&gt;에 관계없이 &lt;code&gt;P&lt;/code&gt;가 항상 거짓이어야 합니다.
세부 설명은 &lt;strong&gt;&lt;div to=&quot;/computer-science/math-proposition-basics&quot;&gt;이 게시글&lt;/div&gt;&lt;/strong&gt;의 내용 중
조건 명제의 진리표를 참고하기 바랍니다.&lt;/p&gt;&lt;h2&gt;직접 증명법&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;직접 증명법(Direct Proof)&lt;/strong&gt;은
가정 &lt;code&gt;P&lt;/code&gt;가 참이라고 가정할 때 P에 뒤따르는 명제로부터 진위추론(논리법칙)을 써서
결론 &lt;code&gt;Q&lt;/code&gt;를 &lt;strong&gt;연역&lt;/strong&gt;해냄으로써 &lt;code&gt;P =&amp;gt; Q&lt;/code&gt;가 참임을 보여주는 방법입니다.&lt;/p&gt;&lt;h3&gt;예제&lt;/h3&gt;&lt;p&gt;예를 들어 아래와 같은 명제가 있다고 합시다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&amp;quot;모든 자연수 n에 대하여 n&lt;sup&gt;3&lt;/sup&gt; + n은 짝수다&amp;quot;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;이 명제는 두 가지 경우의 수로 나누어 직접 증명할 수 있습니다.&lt;/p&gt;&lt;p&gt;우선 n이 짝수라고 가정할 경우 아래와 같은 흐름에 따라 n&lt;sup&gt;3&lt;/sup&gt; + n는 2의 배수, 즉 짝수가 됨을 알 수 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;n = 2k (k는 자연수)&lt;/li&gt;&lt;li&gt;n&lt;sup&gt;3&lt;/sup&gt; + n = (2k)&lt;sup&gt;3&lt;/sup&gt; + 2k = 2(4k&lt;sup&gt;3&lt;/sup&gt; + k)&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;그리고 반대로 n이 홀수라고 가정한 경우에도 아래와 같은 흐름에 따라 n&lt;sup&gt;3&lt;/sup&gt; + n는 짝수가 됨을 알 수 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;n = 2k - 1 (k는 자연수)&lt;/li&gt;&lt;li&gt;n&lt;sup&gt;3&lt;/sup&gt; + n = (2k - 1)&lt;sup&gt;3&lt;/sup&gt; + (2k - 1) = 2(4k&lt;sup&gt;3&lt;/sup&gt; - 6k&lt;sup&gt;3&lt;/sup&gt; + 4k - 1)&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;위의 명제는 n이 짝수일 때와 홀수일 때 모두 성립하므로 모든 자연수에 대해 성립한다고 볼 수 있습니다.&lt;/p&gt;&lt;h2&gt;대우 증명법&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;대우 증명법(Proof by Contraposition)&lt;/strong&gt;은
명제 &lt;code&gt;P =&amp;gt; Q&lt;/code&gt;와 그 대우 명제 &lt;code&gt;~Q =&amp;gt; ~P&lt;/code&gt;가 서로 논리적으로 동치라는 점을 활용하는 간접 증명방법입니다.
즉, 기존 명제 &lt;code&gt;P =&amp;gt; Q&lt;/code&gt;가 참임을 증명하는게 아니라,
기존 명제로부터 유도한 대우식 &lt;code&gt;~Q =&amp;gt; ~P&lt;/code&gt;이 참임을 증명함으로써 기존 명제가 참임을 증명하는 방법입니다.&lt;/p&gt;&lt;h3&gt;예제&lt;/h3&gt;&lt;p&gt;예를 들어 아래와 같은 명제가 있다고 합시다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&amp;quot;모든 자연수 m,n에 대해 &amp;#x27;m + n ≥ 73&amp;#x27;이면, &amp;#x27;(m ≥ 37) v (n ≥ 37)&amp;#x27;이다.&amp;quot;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;해당 명제의 대우는 아래와 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&amp;#x27;~((m ≥ 37) v (n ≥ 37))&amp;#x27;이면 &amp;#x27;~(m + n ≥ 73)&amp;#x27;이다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;그리고 이 대우에 드 모르강의 법칙을 적용하면 아래와 같습니다.
드 모르강의 법칙에 대한 세부 설명은 &lt;strong&gt;&lt;div to=&quot;/computer-science/math-logical-equivalence&quot;&gt;이 게시글&lt;/div&gt;&lt;/strong&gt;을 참고하기 바랍니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&amp;#x27;(m ≤ 36) ∧ (n ≤ 36)&amp;#x27;이면 &amp;#x27;m + n ≤ 72&amp;#x27;이다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;위의 내용은 실수의 부등식의 성질에 의해 자명하므로 기존 명제는 참이 됩니다.&lt;/p&gt;&lt;h2&gt;귀류법 증명&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;귀류법(Proof by Contradiction)&lt;/strong&gt;이란
명제 &lt;code&gt;P&lt;/code&gt;의 부정 &lt;code&gt;~P&lt;/code&gt;을 가정하고, &lt;code&gt;~P&lt;/code&gt;의 모순을 증명함으로써 기존 명제 &lt;code&gt;P&lt;/code&gt;가 참임을 간접적으로 증명하는 방법입니다.
모순증명법, 배리법 등의 용어로도 불리며, 명제가 조건명제가 아닌 경우에도 사용할 수 있어 범용성이 높습니다.&lt;/p&gt;&lt;h3&gt;예제&lt;/h3&gt;&lt;p&gt;예시로 √2 가 무리수임을 증명해봅시다. 이는 아래와 같은 조건명제로 정리할 수 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;P: &amp;quot;x&lt;sup&gt;2&lt;/sup&gt;일 때, x는 유리수가 아니다. (x는 실수)&amp;quot;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;위 명제의 논리부정은 아래와 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;~P: &amp;quot;x&lt;sup&gt;2&lt;/sup&gt;일 때, x는 유리수다. (x는 실수)&amp;quot;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;귀류법에 따라 위의 명제가 참이라고 가정하면 아래와 같은 등식을 추론할 수 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;x = p/q (p,q는 서로소인 자연수)&lt;/li&gt;&lt;li&gt;2 = x&lt;sup&gt;2&lt;/sup&gt; = p&lt;sup&gt;2&lt;/sup&gt;/q&lt;sup&gt;2&lt;/sup&gt; &lt;/li&gt;&lt;li&gt;p&lt;sup&gt;2&lt;/sup&gt; = 2q&lt;sup&gt;2&lt;/sup&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;그런데 p&lt;sup&gt;2&lt;/sup&gt;가 2의 배수가 되려면 p가 짝수여야 합니다.
이 점 때문에 아래와 같은 논리가 전개됩니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;p = 2k&lt;/li&gt;&lt;li&gt;p&lt;sup&gt;2&lt;/sup&gt; = (2k)&lt;sup&gt;2&lt;/sup&gt; = 4k&lt;sup&gt;2&lt;/sup&gt; = 2q&lt;sup&gt;2&lt;/sup&gt;&lt;/li&gt;&lt;li&gt;2k&lt;sup&gt;2&lt;/sup&gt; = q&lt;sup&gt;2&lt;/sup&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;마찬가지로 q&lt;sup&gt;2&lt;/sup&gt;가 2의 배수가 되려면 q도 짝수여야 합니다.
그런데 문제는 p,q 모두 짝수일 경우 p,q 사이에는 2라는 공약수가 존재합니다.
이는 p,q가 서로소라는 가정에 위배됩니다.&lt;/p&gt;&lt;p&gt;즉, 명제의 부정 ~P가 거짓이므로 기존 명제가 참이 되며, √2는 무리수라는 것임을 알 수 있습니다.&lt;/p&gt;&lt;h3&gt;귀류법의 한계&lt;/h3&gt;&lt;p&gt;귀류법은 명제가 참임을 증명하는 데 굉장히 효율적일 수 있으나,
기존 명제를 직접적으로 다루지 않고 &lt;strong&gt;잘못된 가정을 중심으로 논리를 전개&lt;/strong&gt;하기 때문에 몇 가지 제한점을 지닙니다.&lt;/p&gt;&lt;p&gt;우선 귀류법을 사용하지 않는 경우 주어진 가정과 조건을 그대로 활용하여
일련의 논리 과정을 거치면서 체계의 무모순성을 증명할 수 있습니다.
체계에 모순이 있으면 이는 논리 전개 과정에서 드러날 것이고, 모순이 없더라도 이를 논리적으로 입증할 수 있습니다.
그러나 귀류법으로는 &lt;strong&gt;체계의 무모순성을 증명할 수 없습니다&lt;/strong&gt;.
귀류법 증명은 잘못된 가정을 내세우고 그것이 모순되었음을 증명할 뿐,
만일 기존 명제 자체에 모순이 내재된 경우 이를 귀류법을 통해 직접적으로 드러낼 수 없습니다.&lt;/p&gt;&lt;p&gt;또한 귀류법을 사용하지 않는 경우에는 논리 전개 과정에서 생겨나는 부산물로써 새로운 명제를 얻을 수 있습니다.
그러나 귀류법의 경우 애초부터 잘못된 가정에 기반을 두고 논리를 전개하므로
증명 과정에서 이론에 대해 더 깊은 이해를 제공하거나 깊이 있는 통찰을 제공할 수 없습니다.
나아가 본래 명제가 왜 참인지에 대한 직접적인 설명을 제공하지 않습니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;이 외에도 반례 증명법이나 수학적 귀납법 등의 증명 방법이 있습니다.
특히 귀납법에 대해 궁금하신 분들은 제논의 역설에 대해 검색해보기를 바랍니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;이산수학 강의(김일형 교수)&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[이산수학] 논리적 동치와 합성명제의 대수법칙]]></title><description><![CDATA[이산수학 강의 내용을 정리합니다. 논리적 동치, 항진명제, 모순명제, 사건명제, 합성명제의 대수법칙, 보 법칙, 드 모르강의 법칙 등의 용어를 가볍게 정리하겠습니다.]]></description><link>https://bugoverdose.github.io/computer-science/math-logical-equivalence/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/math-logical-equivalence/</guid><pubDate>Fri, 02 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;논리적 동치&lt;/h2&gt;&lt;p&gt;두 명제 &lt;code&gt;p&lt;/code&gt;, &lt;code&gt;q&lt;/code&gt;가 언제나 서로 동일한 진리값을 가질 때
서로 &lt;strong&gt;논리적 동치(Logical Equivalence)&lt;/strong&gt;라고 합니다.&lt;/p&gt;&lt;p&gt;기호로는 &lt;code&gt;p &amp;lt;=&amp;gt; q&lt;/code&gt;, &lt;code&gt;p ≡ q&lt;/code&gt;, &lt;code&gt;p = q&lt;/code&gt; 등의 방식으로 표현합니다.
참고로 쌍조건문 &lt;code&gt;p &amp;lt;-&amp;gt; q&lt;/code&gt;가 항진명제일 때
&lt;code&gt;p&lt;/code&gt;와 &lt;code&gt;q&lt;/code&gt;는 서로 논리적 동치가 되므로 &lt;code&gt;p &amp;lt;=&amp;gt; q&lt;/code&gt;로 표현한다고 생각하면 쉽습니다.&lt;/p&gt;&lt;h2&gt;합성명제의 대수법칙&lt;/h2&gt;&lt;p&gt;논리연산자를 활용하여 기존 합성명제로부터 새로운 명제를 추출하고 응용하는 과정에서
동일한 진리값을 갖는 다른 명제로 대체할 수 있습니다.
특히 복잡한 구조를 지닌 합성명제에 대한 진리값을 파악할 때
&lt;strong&gt;논리적 동치인 다른 명제로 대치&lt;/strong&gt;하거나, &lt;strong&gt;항진명제&lt;/strong&gt; 혹은 &lt;strong&gt;모순명제&lt;/strong&gt;를 생략함으로써 구조는 간단해질 수 있습니다.&lt;/p&gt;&lt;p&gt;합성명제의 대수법칙 중 대표적인 것들은 아래와 같으며, 가급적 암기하면 좋습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/4cd11b152124e0a319091e259b8dd6ce/47218/logical_equvalance_laws.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:81.59509202453987%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACyElEQVQ4y21T227TQBD1T/LEO0JqKyjiH/gDnnlFfQBVvQiaRhEUaJXQljStmpDm4uuu746zju0kPWgmdVQQD6OR5+zOnnNmrOkfnuHk7RO03z2F2HsO53AT4mAD/tE2gto2Z/fTFoy9Tfza2cbd7ktE9VfwPr+Ac7DBOaq/Rni0Bf/kDbTo7go/a7sYtRoIhQXHiyG8CCpfYgFgVt7zN0U5X2JxD66nWQlbhggTxWfLJaDyObSw28TZ4Q5GzRp8ow8hJXzPRRgESNMJ8lmGJI45giBAFIWYTlPOris5p5MERZFDqSk0eX2K7/vvMTg7ghx1oZsmLNOEYRgYj8eQUkIphaIoMJlMMBqNYP6Dp2mK2WzGuBb3z9E/q8HtfGOGumnBdV1Mp1M+kCQJsixDnufMmJo5jsP1CqcHCac72mRwiWGrjvD2FL7eh2nZ8DwPZVmug9iVZcEXLGv1YJ7P/sIpqLEW9FpoN/ZgnDfgG3cQ0kUURSgeHVw1LPmCEBJ+ELDE/+Fa0G2i82Ufov0VctiFZdswDZ3NzpTiAVBkaoo4jthf0zTgeS7XKpwGQvI1eXPKksetY7jjHjd0bAtSOAgCnw8qbqiQxBEc24ZlmRDCge95XFcPD06oYdBtYdisw7xowNN/wyZJvs8+kukkPc9XktJ0CtteeUw+hmHI9QpnyX63ifPjj+whrY1JDEyTL2SZ4glTkGe0HrQmhNFOVthjXEsGlxCdH0h6TZbs+QE812UWNFVahyroIl2iepWpTs3Wa6PGV4Ds4d6+4bURrsfNiMF8Pn+QlD9ITnlthBDMlM5U+HptZsY1aNLZ8JIbkoerXyriYB+LYs2kWmhis/qD8nVDZjjTO0gHFyj09mrKjoDvr0x3bIezUtl63xaLBUe10JUd64YkeencYmld85QtaiIl4jhmBhTErJoiySRLSP7jv6Sa8h9IpKf9lzfu1AAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;logical_equvalance_laws&quot; title=&quot;logical_equvalance_laws&quot; src=&quot;/static/4cd11b152124e0a319091e259b8dd6ce/a6d36/logical_equvalance_laws.png&quot; srcSet=&quot;/static/4cd11b152124e0a319091e259b8dd6ce/222b7/logical_equvalance_laws.png 163w,/static/4cd11b152124e0a319091e259b8dd6ce/ff46a/logical_equvalance_laws.png 325w,/static/4cd11b152124e0a319091e259b8dd6ce/a6d36/logical_equvalance_laws.png 650w,/static/4cd11b152124e0a319091e259b8dd6ce/e548f/logical_equvalance_laws.png 975w,/static/4cd11b152124e0a319091e259b8dd6ce/3c492/logical_equvalance_laws.png 1300w,/static/4cd11b152124e0a319091e259b8dd6ce/47218/logical_equvalance_laws.png 1344w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;항진명제와 모순명제&lt;/h2&gt;&lt;p&gt;위의 법칙들 중 &lt;code&gt;T&lt;/code&gt;와 &lt;code&gt;F&lt;/code&gt;는 각각 항진명제와 모순명제를 의미합니다.&lt;/p&gt;&lt;p&gt;몇 개의 명제 &lt;code&gt;p&lt;/code&gt;,&lt;code&gt;q&lt;/code&gt;,&lt;code&gt;r&lt;/code&gt;...에 의해 만들어진 합성명제가
개별 성분 &lt;code&gt;p&lt;/code&gt;,&lt;code&gt;q&lt;/code&gt;,&lt;code&gt;r&lt;/code&gt;...의 참과 거짓에 관계없이 &lt;strong&gt;항상 참&lt;/strong&gt;일 때
&lt;strong&gt;항진명제(Tautology)&lt;/strong&gt;라고 부릅니다. 기호로는 &lt;code&gt;I&lt;/code&gt; 혹은 &lt;code&gt;T&lt;/code&gt;로 표기합니다.&lt;/p&gt;&lt;p&gt;몇 개의 명제 &lt;code&gt;p&lt;/code&gt;,&lt;code&gt;q&lt;/code&gt;,&lt;code&gt;r&lt;/code&gt;...에 의해 만들어진 합성명제가
개별 성분 &lt;code&gt;p&lt;/code&gt;,&lt;code&gt;q&lt;/code&gt;,&lt;code&gt;r&lt;/code&gt;...의 참과 거짓에 관계없이 &lt;strong&gt;항상 거짓&lt;/strong&gt;일 때
&lt;strong&gt;모순명제(Contradiction)&lt;/strong&gt;라고 부릅니다. 기호로는 &lt;code&gt;O&lt;/code&gt; 혹은 &lt;code&gt;F&lt;/code&gt;로 표기합니다.&lt;/p&gt;&lt;p&gt;항진명제도 아니고 모순명제도 아닌 명제는 &lt;strong&gt;사건명제(Contigency)&lt;/strong&gt;라고 부릅니다.&lt;/p&gt;&lt;h2&gt;보 법칙&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;보 법칙(Complement Law)&lt;/strong&gt;을 기호로 표현하면 아래와 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;p v (~p) ≡ T&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;p ∧ (~p) ≡ F&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;code&gt;p&lt;/code&gt;라는 명제가 참일 때 &lt;code&gt;~p&lt;/code&gt;는 언제나 거짓이 되고, &lt;code&gt;p&lt;/code&gt;라는 명제가 거짓일 때 &lt;code&gt;~p&lt;/code&gt;는 언제나 참이 됩니다.&lt;/p&gt;&lt;p&gt;이 때문에 &lt;code&gt;p v ~p&lt;/code&gt;는 언제나 참이 되므로 항진명제이며, &lt;code&gt;p ∧ ~p&lt;/code&gt;는 언제나 거짓이 되므로 모순명제입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/fd5444edffaaccd71f95d725adfbc5ae/94829/true_table_tautology_contradiction.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:18.404907975460123%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAz0lEQVQY0z2Pyw5EQBBF/f8fscFCiMQjZhIbj0Rrgng0CYK4k6rF9Karzq1TndbCMIRpmoiiCEEQwHVdxHEM27bhOA4zz/Pg+z50XYdlWTxDjFzDMNgnTp4mpeSgaRrUdY0sy9B1HZIk4ZryoiggRIXP98tcCIE8zyFljTRNkSQf7snXnufBNE2g+7ouKKXwvi+z4ziYrevK7DxPKLWCDs3d9835OI7M9n2HtiwLyrLkgXme0bYttm3j14Zh+DNa2vc9c8rpR+TSsqqq2Kf6B0TfI0LIJF7/AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;true_table_tautology_contradiction&quot; title=&quot;true_table_tautology_contradiction&quot; src=&quot;/static/fd5444edffaaccd71f95d725adfbc5ae/a6d36/true_table_tautology_contradiction.png&quot; srcSet=&quot;/static/fd5444edffaaccd71f95d725adfbc5ae/222b7/true_table_tautology_contradiction.png 163w,/static/fd5444edffaaccd71f95d725adfbc5ae/ff46a/true_table_tautology_contradiction.png 325w,/static/fd5444edffaaccd71f95d725adfbc5ae/a6d36/true_table_tautology_contradiction.png 650w,/static/fd5444edffaaccd71f95d725adfbc5ae/94829/true_table_tautology_contradiction.png 878w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;드 모르강의 법칙&lt;/h2&gt;&lt;p&gt;합성명제의 대수 법칙의 대표적인 예시로는 &lt;strong&gt;드 모르강의 법칙(De Morgan’s laws)&lt;/strong&gt;이 있으며, 그 내용은 아래와 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;~(p v q) ≡ ~p ∧ ~q&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;~(p ∧ q) ≡ ~p v ~q&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;p v q ≡ ~(~p ∧ ~q)&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;p ∧ q ≡ ~(~p v ~q)&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;정리하자면 논리곱(&lt;code&gt;∧&lt;/code&gt;) 혹은 논리합(&lt;code&gt;v&lt;/code&gt;)으로 결합된 합성명제에 논리부정(&lt;code&gt;~&lt;/code&gt;)을 적용할 경우,
우선 개별 명제 &lt;code&gt;p&lt;/code&gt;, &lt;code&gt;q&lt;/code&gt;에 논리부정(&lt;code&gt;~&lt;/code&gt;)을 적용합니다.
그리고 논리연산자가 논리곱(&lt;code&gt;∧&lt;/code&gt;)이면 논리합(&lt;code&gt;v&lt;/code&gt;)으로, 논리합(&lt;code&gt;v&lt;/code&gt;)이면 논리곱(&lt;code&gt;∧&lt;/code&gt;)으로 반전시켜주면 됩니다.&lt;/p&gt;&lt;p&gt;위의 법칙 중 첫 번째를 진리표를 통해 증명하면 아래와 같습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/3ef918d19d3b31b63c1537c5145c5d4e/5caea/true_table_de_morgan.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:27.607361963190186%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA10lEQVQY03VOSQqDQBCc/79KxBUV75m4e3PfJuClQnWYkEsORVfX0rTKsgx5noOTSNMUYRjC8zwkSYIgCOC6LhzHEY8awQ4ntTiO4fs+oiiCqqoKfd+j6zrUdS0oyxJFUaBtW9n14wGtn1+POjvkTdPIrrWWG+o4DlzXJTjPE/u+Y9s24R/d/NEvsMvdmJfw+76h1nWVMLEsi2CeZyn/6tSsT40H2GWOnL4xBmocRzEIhrkT5FZn2Oo2xzlNk3Aepcdv1TAMUrAl7gS51Vm0Orn99pczz8/foLe8XwUpEdgAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;true_table_de_morgan&quot; title=&quot;true_table_de_morgan&quot; src=&quot;/static/3ef918d19d3b31b63c1537c5145c5d4e/a6d36/true_table_de_morgan.png&quot; srcSet=&quot;/static/3ef918d19d3b31b63c1537c5145c5d4e/222b7/true_table_de_morgan.png 163w,/static/3ef918d19d3b31b63c1537c5145c5d4e/ff46a/true_table_de_morgan.png 325w,/static/3ef918d19d3b31b63c1537c5145c5d4e/a6d36/true_table_de_morgan.png 650w,/static/3ef918d19d3b31b63c1537c5145c5d4e/e548f/true_table_de_morgan.png 975w,/static/3ef918d19d3b31b63c1537c5145c5d4e/5caea/true_table_de_morgan.png 996w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h2&gt;적용 예시&lt;/h2&gt;&lt;p&gt;그러면 실제로 위의 법칙들을 활용하여 합성명제를 단순화하는 과정을 확인해봅시다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;~(p v (~p ∧ q)) ≡ ~p ∧ ~q&lt;/code&gt;가 성립함을 증명하는 과정은 다음과 같습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/da718657799cb733704dd4490902892e/ad12c/simplify-ex1.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:43.558282208588956%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABVUlEQVQoz32SC4+CMBCE+f//zZhoFBAEIy8B6QNRIwhzmb2gd5eLTTZt2u7X2Z06cRzjfD4jy1KkaYphGGCMwel0QlmWss7zHEmSoG1bcFwuFxijcYhjeJ6HMAyx2WyglIbzeDzwfD7R973EOI6SUNe1RGutAJVSqKoKfT8I2FqLNEng+77EcrkUYQ7+jGkaobVGURQSdV0JcIawguv1CmsNgmAnCqMoksdutxucaZowxwxksmoaKblpFJqmEQgHq+G51grr9Rq7HaH+S5DzVja9Zkrni+xplmUCpEoq5v79fpfHVqsVttstoih+5f4CzlAm0QSC2DvOXfdW2HWd7NFQ33NF5b/AeeZlGkIw1R4OMYyxck7TCGQ/2T/CwnD/GcivUpUltDGikCbxB8xA/oKiyLFYLKTsIAg+Ab9NoTqqsLbFzzsE0k1W4bou9uEex+PxBfwCEA+uEi0bwbQAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;simplify-ex1&quot; title=&quot;simplify-ex1&quot; src=&quot;/static/da718657799cb733704dd4490902892e/a6d36/simplify-ex1.png&quot; srcSet=&quot;/static/da718657799cb733704dd4490902892e/222b7/simplify-ex1.png 163w,/static/da718657799cb733704dd4490902892e/ff46a/simplify-ex1.png 325w,/static/da718657799cb733704dd4490902892e/a6d36/simplify-ex1.png 650w,/static/da718657799cb733704dd4490902892e/ad12c/simplify-ex1.png 856w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;(p ∧ q) -&amp;gt; (p v q)&lt;/code&gt;가 항진명제임을 증명하는 과정은 다음과 같습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:558px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/ec448e00fd2df38ae1d48a0673e7f6f5/42a8d/simplify-ex2.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:45.39877300613497%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABE0lEQVQoz5WQjWqEMBCEff/HO097mvgToygqmp4aFYxzZNuCZ1t6XVjGZMLwOU4ccbzdbuCcI0lidF0H3/cRcYbLxUVd1yiKgtR1XWRSIgxDJEkCxhhYGCIIAogsgx1nHEdMWkNrTWrnfr9jWRbSdV0wzzPWdUXfd/ROqR7TNJGv1DupzaFAnGbf9+ezMUhTQZScM8i8QNu2RGvVu14Rf9KWZQXHBhz3K/S4RD9NGMeBaO0qpTBrTXTWH4YP7xvhmdRsG4QQqKqKCIXI4HkedZjnOdI0QRTH1GNZVX8HWrX9NE1DFPY3t207+Ia+7Z0x5gVCs0FKiSiKkGUCIWNPtZznBUJDPdnCj95v+w/C+MeAM+EDz3u2a5XPywYAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;simplify-ex2&quot; title=&quot;simplify-ex2&quot; src=&quot;/static/ec448e00fd2df38ae1d48a0673e7f6f5/42a8d/simplify-ex2.png&quot; srcSet=&quot;/static/ec448e00fd2df38ae1d48a0673e7f6f5/222b7/simplify-ex2.png 163w,/static/ec448e00fd2df38ae1d48a0673e7f6f5/ff46a/simplify-ex2.png 325w,/static/ec448e00fd2df38ae1d48a0673e7f6f5/42a8d/simplify-ex2.png 558w&quot; sizes=&quot;(max-width: 558px) 100vw, 558px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;이산수학 강의(김일형 교수)&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[이산수학] 명제, 합성명제, 논리연산자, 조건명제]]></title><description><![CDATA[고등학교 1학년 수학, 이산수학 강의 등에서 배우는 명제에 관한 내용을 가볍게 정리합니다. 명제, 명제 논리, 합성명제, 논리연산자, 논리부정, 논리곱, 논리합, 배타적 논리합, 조건명제, 쌍방조건 등의 용어를 가볍게 정리합니다.]]></description><link>https://bugoverdose.github.io/computer-science/math-proposition-basics/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/math-proposition-basics/</guid><pubDate>Fri, 02 Dec 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;명제와 명제 논리&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;명제(proposition)&lt;/strong&gt;란 참(True)과 거짓(False)을 명확하게 구분할 수 있는 문장 혹은 식을 의미합니다.
아래는 전부 명제에 해당하거나 명제에 해당하지 않는 설명문들의 예시입니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&amp;quot;서울은 대한민국의 수도이다&amp;quot; : 참인 명제입니다.&lt;/li&gt;&lt;li&gt;&amp;quot;평양은 일본의 수도이다&amp;quot; : 거짓인 명제입니다.&lt;/li&gt;&lt;li&gt;&amp;quot;1+1=2&amp;quot; : 참인 명제입니다.&lt;/li&gt;&lt;li&gt;&amp;quot;1+1=3&amp;quot; : 거짓인 명제입니다.&lt;/li&gt;&lt;li&gt;&amp;quot;모든 실수 A에 대하여 A&lt;sup&gt;2&lt;/sup&gt;=0이면 A=0이다.&amp;quot; : 참인 명제입니다.&lt;/li&gt;&lt;li&gt;&amp;quot;모든 정방행렬 A에 대하여 A&lt;sup&gt;2&lt;/sup&gt;=0이면 A=0이다.&amp;quot; : 거짓인 명제입니다.&lt;/li&gt;&lt;li&gt;&amp;quot;모든 A에 대하여 A&lt;sup&gt;2&lt;/sup&gt;=0이면 A=0이다.&amp;quot; : A의 범위를 모르기 때문에 판단할 수 없으며 명제가 아닙니다.&lt;/li&gt;&lt;li&gt;&amp;quot;2023년 겨울은 몹시 추웠다&amp;quot; : 주관적인 판단에 따르기 때문에 명제가 아닙니다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;명제 논리(propositional logic)&lt;/strong&gt;란 명제의 세부 내용에 구애됨이 없이
명제를 하나의 문장 혹은 식으로 봄으로써 논리 법칙을 연구하는 분야입니다.
명제 논리에서 각 명제는 위와 같이 주어와 술어로 구분된 설명문이 아니라 &lt;code&gt;p&lt;/code&gt;, &lt;code&gt;q&lt;/code&gt;, &lt;code&gt;r&lt;/code&gt; 등의 소문자로 표현합니다.&lt;/p&gt;&lt;h2&gt;합성명제와 논리연산자&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;단순명제(simple proposition)&lt;/strong&gt;는 하나의 문장 혹은 식으로 이루어진 명제입니다.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;합성명제(composition proposition)&lt;/strong&gt; 혹은 합성명제는 여러 개의 단순명제가
부정(Not), 논리곱(And), 논리합(Or) 등의 &lt;strong&gt;논리연산자(logical operator)&lt;/strong&gt;에 의해 합성된 명제입니다.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;진리표(True Table)&lt;/strong&gt;는 명제들의 진리값 간의 관련성을 보여주는 표입니다.
진리표를 활용하면 합성명제의 진리값을 쉽게 파악할 수 있습니다.&lt;/p&gt;&lt;h3&gt;논리부정&lt;/h3&gt;&lt;p&gt;임의의 명제 &lt;code&gt;p&lt;/code&gt;에 대하여 &lt;code&gt;p가 아니다&lt;/code&gt;를 &lt;strong&gt;논리부정&lt;/strong&gt;(&lt;strong&gt;Not&lt;/strong&gt; 혹은 &lt;strong&gt;Negation&lt;/strong&gt;)이라고 합니다.
&lt;code&gt;~p&lt;/code&gt; 등의 기호로 표현되며, 원래의 진리값과 항상 반대의 진리값을 지닙니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/baea984c80c27f242805fee731fba805/a4262/true_table_not.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:30.67484662576687%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABCUlEQVQY03WQyYqDQBRF6/9/wV0+wI3LLDoL0Y2YOKHiQo3G2cQBRBy4zStQmqa7oKiqd8+971EMf6xpmnC9XqEoCiRJQpomMAwDmqZBVVXIsoz/FmuaBnVdn5veWZZxs67rPMj3fZimCc/z4Lou7vc7ns8n0jRFWZan9/1+gz0eD1iWxQ2O4+B2+4KiqAiCgJspjBgKpkDbtvnUl8sFgiBAFEWuHX5GHfq+x+fzwTiOSJIEcRxjGAbekTRiDo5qxIZhyFm6d13HNZqS0WNZFszzjHVd0bYt8jzHtm28RhqF0z64fd/5txD7k6NQVhQF73BM83q9EEXROSFpxPzm6P+o8VGjs6oqfANVWrnk42dIQQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;true_table_not&quot; title=&quot;true_table_not&quot; src=&quot;/static/baea984c80c27f242805fee731fba805/a6d36/true_table_not.png&quot; srcSet=&quot;/static/baea984c80c27f242805fee731fba805/222b7/true_table_not.png 163w,/static/baea984c80c27f242805fee731fba805/ff46a/true_table_not.png 325w,/static/baea984c80c27f242805fee731fba805/a6d36/true_table_not.png 650w,/static/baea984c80c27f242805fee731fba805/a4262/true_table_not.png 814w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h3&gt;논리곱&lt;/h3&gt;&lt;p&gt;임의의 두 명제 &lt;code&gt;p&lt;/code&gt;, &lt;code&gt;q&lt;/code&gt;가 &amp;quot;그리고(and)&amp;quot;로 결합되었을 때의 합성명제를
&lt;strong&gt;논리곱&lt;/strong&gt;(&lt;strong&gt;And&lt;/strong&gt; 혹은 &lt;strong&gt;Conjunction&lt;/strong&gt;)이라고 합니다.
기호로는 &lt;code&gt;p ∧ q&lt;/code&gt;로 표현되며, 두 명제가 모두 참일 때에만 참의 진리값을 지닙니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/a9f2d00792d93e2ff4fdcbfb6e40dfd5/6a6e9/true_table_and.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:43.558282208588956%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABaUlEQVQoz22RyY6CUBBF+f+/adJE7ZWJmu4FxjiA8xAFFZznaXE7pxJcSVLkFXeoWw9HH57hcCjP8/TteXLdL/X7fU0mE5VKJf39/iqXy6nZbH6SyknTRIvFwiqKIi2XSxM3Gg0FQaB2GKrdbqvb7arT6ajX6ykMQ41GI83nc81mM8Vx/PZwELVaLVWrvvL5vJ3DMFCtVjPTwWCgSqWicrlsSeH7vm8DisWiXNdVofBj3+v1upz1eq39fq/tdmvi3W5nPdPTNNXxeLQU0+lUh8PBeGwCjxqPx7YVGHwHwePx0P1+t8i32816yKfTSa/Xy0w2m42ez6fhnOHDS5JEl8vFMEwdXpCu16sZAtJjAgaRyQgxAF+tVsanoii2wQxgM0tIQ7EKZpyzhBhmCTEE55oyHiHO57Nh74QAEPi7TKXHhGGsTCISYg5OnxlyvwzG0BJiyAQKESBrZStjQDqK7+AkzDRcR6bB8B81U5/ib02xKQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;true_table_and&quot; title=&quot;true_table_and&quot; src=&quot;/static/a9f2d00792d93e2ff4fdcbfb6e40dfd5/a6d36/true_table_and.png&quot; srcSet=&quot;/static/a9f2d00792d93e2ff4fdcbfb6e40dfd5/222b7/true_table_and.png 163w,/static/a9f2d00792d93e2ff4fdcbfb6e40dfd5/ff46a/true_table_and.png 325w,/static/a9f2d00792d93e2ff4fdcbfb6e40dfd5/a6d36/true_table_and.png 650w,/static/a9f2d00792d93e2ff4fdcbfb6e40dfd5/6a6e9/true_table_and.png 826w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;예를 들어, &amp;quot;7은 양수이고, -2는 음수이다&amp;quot;라는 합성명제의 경우
논리곱으로 합성된 두 명제 모두 참이므로 참이다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;p&lt;/code&gt;=&amp;quot;7은 양수이다.&amp;quot; : 참&lt;/li&gt;&lt;li&gt;&lt;code&gt;q&lt;/code&gt;=&amp;quot;-2는 음수이다.&amp;quot; : 참&lt;/li&gt;&lt;li&gt;&lt;code&gt;p ∧ q&lt;/code&gt;=&amp;quot;7은 양수이고, -2는 음수이다.&amp;quot; : 참&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;논리합&lt;/h3&gt;&lt;p&gt;임의의 두 명제 &lt;code&gt;p&lt;/code&gt;, &lt;code&gt;q&lt;/code&gt;가 &amp;quot;또는(or)&amp;quot;으로 결합되었을 때의 합성명제를
&lt;strong&gt;논리합&lt;/strong&gt;(&lt;strong&gt;Or&lt;/strong&gt; 혹은 &lt;strong&gt;Disjunction&lt;/strong&gt;)이라고 합니다.
기호로는 &lt;code&gt;p v q&lt;/code&gt;로 표현되며, 두 명제 중 하나만 참이어도 참의 진리값을 지닙니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/21803132defc697d4643ee2921a67590/cecac/true_table_or.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:44.171779141104295%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABWklEQVQoz22R2YrCQBRE8/8f4gf4IDgRHzL4YPQhgcQIigZ3Tdx3QWo4FxJQpqHpu1TVre529LVut5uq1apc11WlUlG73dZqtZLn/arVaqnZbKper+v9fuu/5UynU81mM43HY00mE5EnSaI4jjUYDJQkPfX7fdvD4bA8wY5GI43TtOTleS4nDEPFUWRT275vQkEQqNvtqtdLFAaBflzX6uxOpyM4vu+rVqup0WjI8zxFUWQGnPP5rOv1Wk4g3u12Wq/XulwuOh6PStNUp9PJ8s1mY31wWZ7b7YjRgeM8Hg89n09LIL9eLyNDon6/343ESU6dPrjD4WADqKOTZZmcAsjDAyCGsN1uDcQn4Z6TnDp9cPv93oxQRwfxUnCxWHwI4qQQpFcIFg7BgUewuMmHw/l8bhP/c8gvfjvkyogvl8tS0N6QBy0SJhJDQBwR+pA4yanTB4cgrgocvT+OMJ/W/iD2vQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;true_table_or&quot; title=&quot;true_table_or&quot; src=&quot;/static/21803132defc697d4643ee2921a67590/a6d36/true_table_or.png&quot; srcSet=&quot;/static/21803132defc697d4643ee2921a67590/222b7/true_table_or.png 163w,/static/21803132defc697d4643ee2921a67590/ff46a/true_table_or.png 325w,/static/21803132defc697d4643ee2921a67590/a6d36/true_table_or.png 650w,/static/21803132defc697d4643ee2921a67590/cecac/true_table_or.png 728w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;예를 들어, &amp;quot;3은 짝수이거나, 7은 소수다.&amp;quot;라는 합성명제의 경우
논리합으로 합성된 두 명제 중 하나가 참이므로 참이다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;p&lt;/code&gt;=&amp;quot;3은 짝수이다.&amp;quot; : 거짓&lt;/li&gt;&lt;li&gt;&lt;code&gt;q&lt;/code&gt;=&amp;quot;7은 소수다.&amp;quot; : 참&lt;/li&gt;&lt;li&gt;&lt;code&gt;p v q&lt;/code&gt;=&amp;quot;3은 짝수이거나, 7은 소수다.&amp;quot; : 참&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;배타적 논리합&lt;/h3&gt;&lt;p&gt;임의의 두 명제 &lt;code&gt;p&lt;/code&gt;, &lt;code&gt;q&lt;/code&gt;가 &amp;quot;XOR&amp;quot;로 결합되었을 때의 합성명제를
&lt;strong&gt;배타적 논리합&lt;/strong&gt;(&lt;strong&gt;Exclusive Or&lt;/strong&gt; 혹은 &lt;strong&gt;Exclusive Disjunction&lt;/strong&gt;)이라고 합니다.
&lt;code&gt;p ⊻ q&lt;/code&gt;, &lt;code&gt;p ⊕ q&lt;/code&gt; 등의 기호로 표현되며, 두 명제의 진리값이 서로 다를 때 참의 진리값을 지닙니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/38da94355103d9138e3c657e0d7f2018/37523/true_table_xor.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:44.78527607361963%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABc0lEQVQoz3WRSYvCQBSE8//P3vWgf2AGHbwoiiCuifsCekjc93091PA9iJdhAk1Xv1dVr7rj6J9vMBgol8spnU4rk8nI933tdju12m2VSiVls1m1Wq0/Ome9Xmu1WtkCL5dLbbdbdTodFQoFlctl1Wo1NZtNdbtdeZ4n13VVr9cNMyjULxYLOTRdz1O1UlEymVTddY1YrVbVaDQsabFYVD6ftyG9Xlc/qZS+vr4Vj8cViUSUSCQUi8UUjUblTKdTu8pms1G/37d9v9+L+mw2MzyZTDQcDg3TH4/H8oNA8/lco9HI+tyMs4PZ6/XS8/m0yPf73c6Hw0Hn81nv99t2jKg/Hg8LAJ8eJtfr1TA1ByImt9vNEtEMRZhC4k3pgeHx1iGPZCQH03Mgc8CU6BARQjoej4bZSQ+GR4iQhyGDP4Y0ObCCIPgQSRgaIkAYGpIQMRoGnU6nTyhLiAkLQ94LMnVSQgLzVtQvl4sZsqPh5zEYTO0X5Jybx/tCrWUAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;true_table_xor&quot; title=&quot;true_table_xor&quot; src=&quot;/static/38da94355103d9138e3c657e0d7f2018/a6d36/true_table_xor.png&quot; srcSet=&quot;/static/38da94355103d9138e3c657e0d7f2018/222b7/true_table_xor.png 163w,/static/38da94355103d9138e3c657e0d7f2018/ff46a/true_table_xor.png 325w,/static/38da94355103d9138e3c657e0d7f2018/a6d36/true_table_xor.png 650w,/static/38da94355103d9138e3c657e0d7f2018/37523/true_table_xor.png 720w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h3&gt;조건 명제&lt;/h3&gt;&lt;p&gt;임의의 두 명제 &lt;code&gt;p&lt;/code&gt;, &lt;code&gt;q&lt;/code&gt;가 &amp;quot;만일 p이면 q이다&amp;quot;와 같이 결합된 합성명제를
&lt;strong&gt;조건 명제&lt;/strong&gt;(&lt;strong&gt;Conditional Proposition&lt;/strong&gt;)&lt;strong&gt; 혹은 &lt;/strong&gt;조건문&lt;strong&gt;(&lt;/strong&gt;Conditional Statement**)이라고 합니다.
기호로는 &lt;code&gt;p -&amp;gt; q&lt;/code&gt;로 표현하며, 이때 &lt;code&gt;p&lt;/code&gt;를 가정 혹은 전제조건이라고 하고, &lt;code&gt;q&lt;/code&gt;는 결론 혹은 결과라고 합니다.&lt;/p&gt;&lt;p&gt;조건 명제의 진리값의 경우 &lt;code&gt;p&lt;/code&gt;가 참인데 &lt;code&gt;q&lt;/code&gt;가 거짓일때에만 거짓이고 그 이외에는 참입니다.
즉, 전제가 거짓일 때에는 결과가 어떤 값이어도 상관 없지만,
전제가 참인 경우에는 그에 따른 결과도 참이어야 한다는 뜻입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/50ec766a4bb1ed4c9f2b5c3a704ae62b/a242d/true_table_conditional_statement.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:39.877300613496935%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABRUlEQVQoz22RyYrCYBCE8/4v48EETzoQT3EiosFfZRT3HU1ccYMavh4yeDDQ/N3VXdVLPH34nHMqFApmpVJJk8lEWZqqUvlSFEXyfV9xHH+iylutVlosFmYQeUejkdrttnq9nplzHfX7P+p0uxoMBtaQl/rpdPrPm81m8prNphqNhur1uorFor1Jktgk4JCr1VDlclkd5ywf1WpKWi0FQaAwDBX4vr7j2Djefr/X8/nU4/GwLufzWa/XS2ma6nK5WO54PGq5XBoORu5+v1sOHIzcbreTt16vdTqdTIjxASngFLkoPuvgM8A7Zzgc/nMQ9whut5uu16vm87kV0R0cEj4iiLIFWM7B4OR12+32T5CADuPx2IRzQcQRYVKIrPguSB0/hJNQZ4KbzUaHw8GmQBAyMRNBzO+HID4YuSzLrI5TgOGz8i/DdlE/n90BAAAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;true_table_conditional_statement&quot; title=&quot;true_table_conditional_statement&quot; src=&quot;/static/50ec766a4bb1ed4c9f2b5c3a704ae62b/a6d36/true_table_conditional_statement.png&quot; srcSet=&quot;/static/50ec766a4bb1ed4c9f2b5c3a704ae62b/222b7/true_table_conditional_statement.png 163w,/static/50ec766a4bb1ed4c9f2b5c3a704ae62b/ff46a/true_table_conditional_statement.png 325w,/static/50ec766a4bb1ed4c9f2b5c3a704ae62b/a6d36/true_table_conditional_statement.png 650w,/static/50ec766a4bb1ed4c9f2b5c3a704ae62b/a242d/true_table_conditional_statement.png 724w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;예를 들어, &amp;quot;오늘 날씨가 좋다면, 외출을 하겠다&amp;quot;라는 조건 명제의 경우
날씨가 좋음에도 불구하고 외출을 하지 않는 경우에만 거짓이고, 그 외에는 참입니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;p&lt;/code&gt;=&amp;quot;오늘 날씨가 좋다&amp;quot;&lt;/li&gt;&lt;li&gt;&lt;code&gt;q&lt;/code&gt;=&amp;quot;외출을 하겠다&amp;quot;&lt;/li&gt;&lt;li&gt;&lt;code&gt;p -&amp;gt; q&lt;/code&gt;=&amp;quot;&amp;quot;오늘 날씨가 좋다면, 외출을 하겠다&amp;quot;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;조건명제는 수학적 추론에서 사용됩니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;조건명제 &lt;code&gt;p -&amp;gt; q&lt;/code&gt;가 참인 경우 &lt;strong&gt;함축(Implication)&lt;/strong&gt;이라고 하며, &lt;code&gt;p =&amp;gt; q&lt;/code&gt;로 표현합니다.&lt;/li&gt;&lt;li&gt;조건명제 &lt;code&gt;p -&amp;gt; q&lt;/code&gt;가 참일 때, &lt;code&gt;p&lt;/code&gt;는 &lt;code&gt;q&lt;/code&gt;이기 위한 충분조건(Sufficient Condition)입니다.&lt;/li&gt;&lt;li&gt;조건명제 &lt;code&gt;p -&amp;gt; q&lt;/code&gt;가 참일 때, &lt;code&gt;q&lt;/code&gt;는 &lt;code&gt;p&lt;/code&gt;이기 위한 필요조건(Necessary Condition)입니다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;조건명제 &lt;code&gt;p -&amp;gt; q&lt;/code&gt;에 대해 아래와 같은 명제들을 정의할 수 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;역(Inverse) : &lt;code&gt;q -&amp;gt; p&lt;/code&gt;&lt;/li&gt;&lt;li&gt;이(Reverse) : &lt;code&gt;~p -&amp;gt; ~q&lt;/code&gt;&lt;/li&gt;&lt;li&gt;대우(Contraposition) : &lt;code&gt;~q -&amp;gt; ~p&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;쌍방조건 명제&lt;/h3&gt;&lt;p&gt;임의의 두 명제 &lt;code&gt;p&lt;/code&gt;, &lt;code&gt;q&lt;/code&gt;에 대해 조건 명제 &lt;code&gt;p -&amp;gt; q&lt;/code&gt;와 조건 명제 &lt;code&gt;q -&amp;gt; p&lt;/code&gt;를 동시에 만족하는 명제를
&lt;strong&gt;쌍방조건 명제(Bidirectional Proposition)&lt;/strong&gt; 혹은
&lt;strong&gt;쌍조건문(BiconditionalStatement)&lt;/strong&gt;이라고 합니다.
기호로는 &lt;code&gt;p &amp;lt;-&amp;gt; q&lt;/code&gt;로 표현하며,
&lt;code&gt;p&lt;/code&gt;와 &lt;code&gt;q&lt;/code&gt; 모두 참이거나 모두 거짓일 때에만 참이고, 그 이외의 경우는 거짓입니다.
&amp;quot;&lt;code&gt;p&lt;/code&gt;일 필요충분조건은 &lt;code&gt;q&lt;/code&gt;이다&amp;quot;라고도 표현합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/02b9fd9f477850e1a87b22fb8b04ad79/84a90/true_table_biconditional_statement.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:38.65030674846626%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABOUlEQVQoz3WQyY7CQAxE8//fxCELCaSRgEFIBAQihJ2EfbnW6FnqucxMJCtll6tsd6A/vrIsFceJoijSaPSl1+ul2Wym4XCoLMu03W713xesVqWq9VpVVamqVtpsNppMCrXbibrdrpxzGo/HyvNcg8FAaZpqOp1aHzGfz7VcLrVYLGxQkGWpNSLq9/smoMm5XLlzZpQkicIwVKfTURzHKopCvV7PBkdRaJe0Wi3TB4fDQZfLRU3TqK4bHY9HXa9Xw/v9Xvf73baHhzufz4Z3u92PDg80cMHtdrM3ej6fejweVvx8PpbXdW0YAcaI6CUwgkND/f1+W0/AVCYRmJFDkLMFmLeCYwBiOLbHDOyvAgen08kSXyBnO3I2A2PoT+IiAs4bovFL/DrZr08Ox1mcR46Iv+foQ+Mx9W8BI1BQ/muigQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;true_table_biconditional_statement&quot; title=&quot;true_table_biconditional_statement&quot; src=&quot;/static/02b9fd9f477850e1a87b22fb8b04ad79/a6d36/true_table_biconditional_statement.png&quot; srcSet=&quot;/static/02b9fd9f477850e1a87b22fb8b04ad79/222b7/true_table_biconditional_statement.png 163w,/static/02b9fd9f477850e1a87b22fb8b04ad79/ff46a/true_table_biconditional_statement.png 325w,/static/02b9fd9f477850e1a87b22fb8b04ad79/a6d36/true_table_biconditional_statement.png 650w,/static/02b9fd9f477850e1a87b22fb8b04ad79/e548f/true_table_biconditional_statement.png 975w,/static/02b9fd9f477850e1a87b22fb8b04ad79/84a90/true_table_biconditional_statement.png 982w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;이산수학 강의(김일형 교수)&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[알고리즘] 재귀와 반복 (feat. 팩토리얼, 거듭제곱, 피보나치 수열)]]></title><description><![CDATA[팩토리얼, 거듭제곱, 피보나치 수열 예시를 통해 재귀호출에 대해 가볍게 정리합니다. 이를 통해 어떤 상황에서 재귀호출이 효율적이고, 어떤 상황에서 단순한 반복문이 더 효율적일 수 있는지 알아봅니다.]]></description><link>https://bugoverdose.github.io/computer-science/recursion-and-iteration/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/recursion-and-iteration/</guid><pubDate>Fri, 11 Nov 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;재귀호출&lt;/h2&gt;&lt;p&gt;컴퓨터에서 동일한 로직이 반복적으로 실행되는 경우 일반적으로 재귀호출 혹은 반복문을 통해 구현할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;재귀(recursion)&lt;/strong&gt;는 알고리즘이나 함수가 수행 중에 자기 자신을 다시 호출하는 방식으로
문제를 해결하는 프로그래밍 기법입니다. 강의 및 서적에 따라 &lt;strong&gt;순환&lt;/strong&gt;이라고도 불립니다.&lt;/p&gt;&lt;p&gt;재귀호출은 기본적으로 아래와 같은 특정 문제 상황들에서 적용될 수 있습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;팩토리얼 값 구하기&lt;/li&gt;&lt;li&gt;피보나치 수열&lt;/li&gt;&lt;li&gt;이항계수&lt;/li&gt;&lt;li&gt;하노이의 탑&lt;/li&gt;&lt;li&gt;이진탐색&lt;/li&gt;&lt;li&gt;영역채색(Blob Coloring)&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;이때 중요한 점은 특별한 케이스를 제외하고는 일반적으로
재귀호출 로직은 &lt;code&gt;for&lt;/code&gt;, &lt;code&gt;while&lt;/code&gt; 기반의 반복문으로 대체될 수 있다는 점입니다.
상황에 따라 동일한 로직을 반복문으로 작성하는 것이 시간복잡도 측면에서도 오히려 효율적일 수 있고,
반대로 재귀호출로 구현하는 것이 오히려 효율적일 수 있습니다.&lt;/p&gt;&lt;h2&gt;팩토리얼&lt;/h2&gt;&lt;p&gt;팩토리얼은 아래와 같이 &lt;code&gt;factorial&lt;/code&gt; 함수 내부에서 다시 &lt;code&gt;factorial&lt;/code&gt;를 호출하는 방식으로 구현할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/c32cb92ddfcd22b6fc6dcdef251c041a/105d8/factorial.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:14.11042944785276%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAiUlEQVQI13WObQuCMBhF/f9/L43SXJrb3ItzjepLCCdaGRF04fBwP1yeU0zJYc8Gl7GYOGbUJF991pl4Cwy2p+52CNXik/3s8k0WPSsKfpJiIvjAcl9wo0OeFGrQuV/SlbYROOP5l8K/DddvTzsbR3RQVIeSbVtRNhs6LZB+oO73HLXIRuvu2/ABfGfh7md0G20AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;factorial&quot; title=&quot;factorial&quot; src=&quot;/static/c32cb92ddfcd22b6fc6dcdef251c041a/a6d36/factorial.png&quot; srcSet=&quot;/static/c32cb92ddfcd22b6fc6dcdef251c041a/222b7/factorial.png 163w,/static/c32cb92ddfcd22b6fc6dcdef251c041a/ff46a/factorial.png 325w,/static/c32cb92ddfcd22b6fc6dcdef251c041a/a6d36/factorial.png 650w,/static/c32cb92ddfcd22b6fc6dcdef251c041a/e548f/factorial.png 975w,/static/c32cb92ddfcd22b6fc6dcdef251c041a/105d8/factorial.png 1170w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-python line-numbers&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 중단&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; factorial&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 재귀호출&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이때 핵심은 바로 어떤 입력값이 들어오든 최종적으로 순환이 중단될 수 있어야 한다는 점입니다.&lt;/p&gt;&lt;p&gt;예를 들어, 아래와 같은 경우 &lt;code&gt;factorial(0)&lt;/code&gt;에서는 &lt;code&gt;n == 1&lt;/code&gt; 조건에서 걸릴 일이 없습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-python line-numbers&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;factorial&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 중단&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; factorial&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 재귀호출&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이처럼 순환이 중단되는 부분이 없다면 아래와 같이 시스템 오류가 발생할 때까지 무한정 호출됩니다.
아래의 경우 재귀적으로 호출될 수 있는 한계점인 1000회를 넘겨서 &lt;code&gt;RecursionError&lt;/code&gt;라는 에러가 발생했습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;shell&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-shell line-numbers&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;Traceback &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;most recent call last&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;:
  &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
  File &lt;span class=&quot;token string&quot;&gt;&amp;quot;factorial.py&amp;quot;&lt;/span&gt;, line &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; factorial
    &lt;span class=&quot;token builtin class-name&quot;&gt;return&lt;/span&gt; n * factorial&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n-1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  File &lt;span class=&quot;token string&quot;&gt;&amp;quot;factorial.py&amp;quot;&lt;/span&gt;, line &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; factorial
    &lt;span class=&quot;token builtin class-name&quot;&gt;return&lt;/span&gt; n * factorial&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n-1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  File &lt;span class=&quot;token string&quot;&gt;&amp;quot;factorial.py&amp;quot;&lt;/span&gt;, line &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;, &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; factorial
    &lt;span class=&quot;token builtin class-name&quot;&gt;return&lt;/span&gt; n * factorial&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n-1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Previous line repeated &lt;span class=&quot;token number&quot;&gt;996&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;more&lt;/span&gt; times&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
RecursionError: maximum recursion depth exceeded&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;거듭제곱&lt;/h2&gt;&lt;p&gt;다음은 반복문을 쓰는 것보다 재귀호출이 훨씬 더 효율적인 경우입니다.&lt;/p&gt;&lt;p&gt;실수 x와 자연수 n이 주어졌을 때 x&lt;sup&gt;n&lt;/sup&gt;의 값을 구해봅시다.&lt;/p&gt;&lt;p&gt;이 문제는 아래와 같이 단순히 반복문을 돌며 x에 n번 곱해주기만 하면 쉽게 구현할 수 있습니다.
해당 로직의 시간복잡도는 당연히 &lt;code&gt;O(N)&lt;/code&gt;입니다.
n이 10이면 반복문은 10회 돌 것이고, n이 100이면 반복문은 100회 돌 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-python line-numbers&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;power_iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.0&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; x
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음은 재귀호출을 활용한 방법입니다. 해당 알고리즘의 시간복잡도는 &lt;code&gt;O(logN)&lt;/code&gt;입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-python line-numbers&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;power_recur&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.0&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;elif&lt;/span&gt; n&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; power_recur&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; power_recur&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token operator&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token operator&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;예를 들어, x&lt;sup&gt;5&lt;/sup&gt;를 구하기 위해 해당 알고리즘에서는 x를 5번 곱하지 않습니다.
그 대신 x&lt;sup&gt;5&lt;/sup&gt;를 x*(x&lt;sup&gt;2&lt;/sup&gt;)&lt;sup&gt;2&lt;/sup&gt;로 간주하여 3번의 연산만 수행합니다.&lt;/p&gt;&lt;h2&gt;피보나치&lt;/h2&gt;&lt;p&gt;다음은 재귀호출을 썼을 때 오히려 효율이 떨어지는 경우입니다.&lt;/p&gt;&lt;p&gt;피보나치 수열은 현재의 값 &lt;code&gt;fib(n)&lt;/code&gt;이 그 이전 두 값
&lt;code&gt;fib(n-1)&lt;/code&gt;와 &lt;code&gt;fib(n-2)&lt;/code&gt;의 합으로 이루어집니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/038f34944f4f090a21ec4df4e98dd56d/7a1fb/fibonacci.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:26.993865030674847%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVQY002PWWoCQRiE55i5jxfJIUKeDBhwS0IWCfoQzSztLO306OzO7hdsX1JQFAU/f1UZAA/mkrvHEZ+7DUIITMfGcmw8GRCEB/a+h/BcLOGQ5hndZaAdes3+MpC3FRduMLq2Zul+M5rfs/G2OFJgSQfTt7Q6B4Gtvc2vZxLEkqg4aqr8xiA9kFUZeZVhCGXTdy1dXZGVKWmZkBQxdV/RDDUyCghUQDM0nNuSos7ZB4LV+gsVh9pn55SyLnGUjXHMI11VqYjlYkkURnRNR1M1XHckcUIoQ33Tt71W3/Wxfi3apuU/TsURw40EZV3oute0OD/pxPnrjNnLlM3Pmsl0wuJtzs7eIiPJ0/OY8WTMx+qdc1PqVdcfQjn8AY9adMwKwOt0AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;fibonacci&quot; title=&quot;fibonacci&quot; src=&quot;/static/038f34944f4f090a21ec4df4e98dd56d/a6d36/fibonacci.png&quot; srcSet=&quot;/static/038f34944f4f090a21ec4df4e98dd56d/222b7/fibonacci.png 163w,/static/038f34944f4f090a21ec4df4e98dd56d/ff46a/fibonacci.png 325w,/static/038f34944f4f090a21ec4df4e98dd56d/a6d36/fibonacci.png 650w,/static/038f34944f4f090a21ec4df4e98dd56d/e548f/fibonacci.png 975w,/static/038f34944f4f090a21ec4df4e98dd56d/7a1fb/fibonacci.png 1030w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;피보나치 수열에서 n번째로 위치한 값을 찾는 경우,
기본적으로 아래와 같은 재귀 알고리즘을 작성할 수 있습니다.
수열의 정의 자체에 부합하는 가독성 높은 코드라고 볼 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-python line-numbers&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fib&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; fib&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; fib&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 이 경우 &lt;code&gt;fib(k)&lt;/code&gt;의 값이 중복으로 계산된다는 문제가 발생합니다.
예를 들어, 아래와 같이 &lt;code&gt;fib(6)&lt;/code&gt;를 호출하면
&lt;code&gt;fib(4)&lt;/code&gt;은 2번 연산되고, &lt;code&gt;fib(3)&lt;/code&gt;은 3번 연산됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/3b6b091cee6a90ec81a5241e7f8d6cc4/b04e4/fibonacci_recur.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:42.331288343558285%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABYklEQVQoz2WR7W7aQBBFef+XqYJbRUpb9UdctTEbfxAotItB2MliG0xdYwgg2yfyWkimudKsZq5GM2d3ewB1XXNRkx+PR8qyREqJEELXF6/bd4lu3bsYp9MJy7LYbDa6bgacz2c9pImqqiiKQi9QStFVF0gP3O12JEmC7/uEYch2u73avElT0jRlv98TBAFxHOs8yzK9uEvaaw7btln4UhvOo4Vh9K8IjJsPmux/maaJnM2uSHvzuY8lbO6sZ27ul3wWEcL9xXLRNv4Yrfk6CBl6Hv+yVHur1YqnoavzJFJ8NPrked4SZtlf4mTNc3JgoXZMF2scb8TAk6T5iSg98DQNeBAuk3lMXhyZSYnlTHhZH5j4MV++mSj1QlXV7ZW7ilTIaDTm9kHh/GmJ5O8xA2/GnUgYTpea7t5VGN8DPv2MeByHeM6Asjy3n9JE1URVv3unqn7vdfV6KHBtgekE9M2QN2FTWpmW8x9bAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;fibonacci&quot; title=&quot;fibonacci&quot; src=&quot;/static/3b6b091cee6a90ec81a5241e7f8d6cc4/a6d36/fibonacci_recur.png&quot; srcSet=&quot;/static/3b6b091cee6a90ec81a5241e7f8d6cc4/222b7/fibonacci_recur.png 163w,/static/3b6b091cee6a90ec81a5241e7f8d6cc4/ff46a/fibonacci_recur.png 325w,/static/3b6b091cee6a90ec81a5241e7f8d6cc4/a6d36/fibonacci_recur.png 650w,/static/3b6b091cee6a90ec81a5241e7f8d6cc4/b04e4/fibonacci_recur.png 888w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;반대로 아래와 같이 반복문으로 구현할 경우
가독성은 떨어지지만 단 한번의 &lt;code&gt;fib(n)&lt;/code&gt; 연산을 위해 이미 수행된 연산이 중복으로 수행될 일은 없습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-python line-numbers&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fib&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
    pp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# fib(k-2)&lt;/span&gt;
    p &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# fib(k-1)&lt;/span&gt;
    result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pp &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; p
        pp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; p &lt;span class=&quot;token comment&quot;&gt;# fib(k-1)&lt;/span&gt;
        p &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; result &lt;span class=&quot;token comment&quot;&gt;# fib(k)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;물론 재귀로 구현하더라도 이미 연산된 결과를 별도로 저장해놓는
메모이제이션 기법으로도 충분히 성능상의 이점을 얻을 수 있습니다.
실제 애플리케이션에서 &lt;code&gt;fib(10)&lt;/code&gt;, &lt;code&gt;fib(5)&lt;/code&gt;, &lt;code&gt;fib(3)&lt;/code&gt; 등의 값들이 계속 필요하다면
매번 새로 연산하는 대신 이처럼 결과값을 캐슁해놓는 것이 효율적일 것입니다.&lt;/p&gt;&lt;p&gt;그러나 일회성으로 &lt;code&gt;fib(n)&lt;/code&gt;을 한번만 호출한다는 가정에서
메모이제이션은 불필요한 메모리를 소요하므로 그냥 반복문으로 구현하는 것이
공간복잡도 측면에서 더 적절합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고자료&lt;/div&gt;&lt;ul&gt;&lt;li&gt;자료구조 강의(고은남 교수)&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[번역] DataSource: 커넥션 풀링과 분산 트랜잭션]]></title><description><![CDATA[오라클 공식 문서 'Package javax.sql'에 대한 번역입니다. DriverManager의 대체품인 DataSource가 커넥션 풀링과 분산 트랜잭션 기능을 어떻게 지원하는지에 대해 설명합니다.]]></description><link>https://bugoverdose.github.io/docs/datasource-vs-drivermanager/</link><guid isPermaLink="false">https://bugoverdose.github.io/docs/datasource-vs-drivermanager/</guid><pubDate>Fri, 30 Sep 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;우테코 레벨1 체스 미션 도중 별도의 프레임워크 없이
자바 코드만으로 데이터베이스를 조작할 일이 있었습니다.
당시 MySQL DB와의 커넥션을 수립하기 위해 &lt;code&gt;DriverManager.getConnection()&lt;/code&gt;를 사용했습니다.
그런데 실제 프레임워크들에서는 &lt;code&gt;DriverManager&lt;/code&gt; 대신
&lt;code&gt;Datasource&lt;/code&gt;만을 사용하는 것으로 보여서 그동안 의아했습니다.&lt;/p&gt;&lt;p&gt;DB 커넥션에 대해 공부하는 김에 &lt;code&gt;Datasource&lt;/code&gt;와 &lt;code&gt;DriverManager&lt;/code&gt;과의 차이를
정리해보고자 간단하게 번역해보았습니다.
해당 글의 원문 및 전문은
&lt;a href=&quot;https://docs.oracle.com/en/java/javase/11/docs/api/java.sql/javax/sql/package-summary.html&quot;&gt;오라클 공식 문서&lt;/a&gt;에서
확인할 수 있습니다.&lt;/p&gt;&lt;h2&gt;DataSource 객체를 사용하여 커넥션 만들기&lt;/h2&gt;&lt;p&gt;&lt;code&gt;javax.sql&lt;/code&gt; 패키지는 데이터 소스에 대한 커넥션을 만드는 데 있어 선호되는 방식을 제공합니다.
기존 메커니즘인 &lt;code&gt;DriverManager&lt;/code&gt; 클래스는 여전히 유효하며,
이를 사용하는 코드도 그대로 동작합니다.
그러나 새로운 &lt;code&gt;DataSource&lt;/code&gt; 메커니즘은 기존 &lt;code&gt;DriverManager&lt;/code&gt; 메커니즘에 비해
다양한 장점을 지니므로 보다 선호됩니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;DataSource&lt;/code&gt; 객체를 사용하여 커넥션을 생성할 때의 주요 이점은 다음과 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;데이터 소스의 프로퍼티를 런타임에 변경할 수 있습니다. 데이터 소스 및 드라이버가 변경되었을 때
애플리케이션의 코드를 수정할 필요가 없다는 뜻입니다.&lt;/li&gt;&lt;li&gt;중간 계층의 인프라와 함께 동작하도록 구현된 &lt;code&gt;DataSource&lt;/code&gt; 객체를
사용하면 Connection 풀링, Statement 풀링, 분산 트랜잭션이 가능해집니다.
&lt;code&gt;DriverManager&lt;/code&gt;를 통해 만들어진 Connection 객체의 경우
Connection 풀링, Statement 풀링, 분산 트랜잭션 기능이 제공되지 않습니다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;드라이버 벤더들에서 &lt;code&gt;DataSource&lt;/code&gt; 구현체를 제공합니다.
특정한 &lt;code&gt;DataSource&lt;/code&gt; 객체는 특정한 물리적 데이터 소스를 상징합니다.
&lt;code&gt;DataSource&lt;/code&gt; 객체가 생성하는 각 커넥션은
해당 물리적 데이터 소스에 대한 연결입니다.&lt;/p&gt;&lt;p&gt;JNDI(Java Naming and Directory Interface) API를 사용하는
명칭 서비스를 통해 시스템 관리자는 데이터소스에 대한 논리적 명칭을 등록합니다.
애플리케이션은 &lt;code&gt;DataSource&lt;/code&gt;에 등록된 논리적 명칭을 조회함으로써
자신이 원하는 &lt;code&gt;DataSource&lt;/code&gt; 객체를 가져옵니다.
그리고 이를 사용하여 해당 &lt;code&gt;DataSource&lt;/code&gt; 객체가 상징하는
물리적 데이터 소스에 대한 연결을 생성할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;DataSource&lt;/code&gt; 객체는 중간 계층의 인프라와 함께 협력하여,
자신을 통해 생성되는 커넥션을 풀링하여 재사용하도록 구현될 수 있습니다.
이러한 &lt;code&gt;DataSource&lt;/code&gt; 구현체를 사용하는 애플리케이션은
자동으로 커넥션 풀에 관리되는 커넥션을 가져오게 됩니다.
&lt;code&gt;DataSource&lt;/code&gt; 객체는 중간 계층의 인프라와 함께 협력하여
커넥션을 풀링하여 재사용하도록 구현될 수 있습니다.
또한 &lt;code&gt;DataSource&lt;/code&gt; 객체는 중간 계층의 인프라와 함께 협력하여,
분산 트랜잭션에 사용될 수 있는 커넥션을 생성하도록 구현될 수도 있습니다.&lt;/p&gt;&lt;h2&gt;Connection Pooling과 Statement Pooling&lt;/h2&gt;&lt;p&gt;중간 계층의 커넥션 풀 관리자와 함께 동작하도록 구현된
&lt;code&gt;DataSource&lt;/code&gt; 객체를 통해 만들어지는 커넥션은 커넥션 풀링이 적용됩니다.
새로운 커넥션을 생성하는 작업은 비용이 크기 때문에 커넥션 풀링은 극단적으로 성능을 향상시킵니다.
커넥션 풀링은 커넥션을 재사용함으로써, 새롭게 생성되어야 하는 커넥션의 개수를 크게 줄일 수 있습니다.&lt;/p&gt;&lt;p&gt;커넥션 풀링은 완전히 투명합니다.
Java EE 설정의 중간 계층에서 자동으로 일어나기 때문에
애플리케이션의 관점에서 코드가 수정될 필요가 없습니다.
애플리케이션에서는 &lt;code&gt;DataSource.getConnection&lt;/code&gt; 메서드를 통해
풀에서 관리되는 커넥션을 받을 수 있으며,
일반적인 &lt;code&gt;Connection&lt;/code&gt; 객체와 동일한 방식으로 다루면 됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/c7da9ef317739a9aa43b04f253fa25c9/82158/connection-pool-and-statement-pool.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:53.987730061349694%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB0klEQVQoz32T62/SUBTA9/9/9IvGLCYuakxMnIAKYzwmk/As0PJ+dIPxWieDSktLW8rPsBVlju18uck99/fLPefce4AX6/X6btU1jfF4zPV4jKIoWJa1PYJh6uj6FNsyPOghu4mD/4VSpU4wHCMUjhGNn5PJl5hrOktLI1X2E8x85FQ4RmjFkDohtMX0Af9IWBTLpMsBGt0sSfETZ6kTrpVbJrNLItI3jnJ5fOUiHwoFvuT9zOZ9j3f3C0uiRKZ6jDwQUPUBzU4NRZnirHQSzQyf6yOSgwlfOxO+V7Ko2uB5YTZfJPjjPULlJ7/VBUWxinIzxbJVwlKEVymJUEsmO5oQKMW4VbvPC3v9Ia1Oj4uLK9ryJfWWjGEssR0ToZ0lJ9eQ+i3EXpuSnMMw1f093ITrbZaHCkfpCqnL+3KWtoNuetN2wTacXWz/lLey8VznMFHhtT/Py6hIujvEXa3uco7tUEw2iPkFhFQLa2n/FT664VZY6CuE41VGUp9Eskmk2oWVi2U5SKkGpy8O8b0N8OZdnGb56p51108/m5lh4ouKnGc7JCpder9UD3LR1AVSskbyRKSUkVlo5tMl7yamC5PC4IaRqu1+iH+9dtd7+7cR/gHEaDi4isII2QAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;connection-pool-and-statement-pool&quot; title=&quot;connection-pool-and-statement-pool&quot; src=&quot;/static/c7da9ef317739a9aa43b04f253fa25c9/a6d36/connection-pool-and-statement-pool.png&quot; srcSet=&quot;/static/c7da9ef317739a9aa43b04f253fa25c9/222b7/connection-pool-and-statement-pool.png 163w,/static/c7da9ef317739a9aa43b04f253fa25c9/ff46a/connection-pool-and-statement-pool.png 325w,/static/c7da9ef317739a9aa43b04f253fa25c9/a6d36/connection-pool-and-statement-pool.png 650w,/static/c7da9ef317739a9aa43b04f253fa25c9/82158/connection-pool-and-statement-pool.png 696w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;커넥션 풀링에 사용되는 클래스와 인터페이스는 다음과 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;ConnectionPoolDataSource&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;PooledConnection&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;ConnectionEvent&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;ConnectionEventListener&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;StatementEvent&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;StatementEventListener&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;커넥션 풀 관리자는 3계층의 구조에서 중간 계층에 존재하며,
안보이는 곳에서 이러한 클래스와 인터페이스를 활용합니다.
&lt;code&gt;ConnectionPoolDataSource&lt;/code&gt; 객체에서
&lt;code&gt;PooledConnection&lt;/code&gt; 객체를 생성하게 되면,
해당 &lt;code&gt;PooledConnection&lt;/code&gt; 객체와 함께
커넥션 풀 관리자는 &lt;code&gt;ConnectionEventListener&lt;/code&gt; 객체로서 등록됩니다.
커넥션이 닫히거나 예외가 발생하는 경우, 커넥션 풀 관리자는
리스너로서 &lt;code&gt;ConnectionEvent&lt;/code&gt; 객체를 전달받습니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;DatabaseMetaData.supportsStatementPooling&lt;/code&gt; 메서드를 호출하면
커넥션 풀 관리자가 &lt;code&gt;PreparedStatement&lt;/code&gt;를 위한
&lt;code&gt;Statement&lt;/code&gt; 풀링 기능을 지원하는지를 알 수 있습니다.
이 경우 &lt;code&gt;PooledConnection&lt;/code&gt; 객체와 함께
커넥션 풀 관리자는 &lt;code&gt;StatementEventListener&lt;/code&gt;로서 등록됩니다.
&lt;code&gt;PreparedStatement&lt;/code&gt;가 닫히거나 예외가 발생하는 경우,
커넥션 풀 관리자는 리스너로서 &lt;code&gt;StatementEvent&lt;/code&gt; 객체를 전달받습니다.&lt;/p&gt;&lt;h2&gt;분산 트랜잭션&lt;/h2&gt;&lt;p&gt;풀에서 관리되는 커넥션과 마찬가지로
중관 계층 인프라와 함께 협력하도록 구현된 &lt;code&gt;DataSource&lt;/code&gt; 객체는
분산 트랜잭션 기능을 제공할 수도 있습니다.
분산 트랜잭션을 통해 애플리케이션은
단일 트랜잭션으로 복수의 서버에 존재하는 데이터 소스에 접근할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/37bcb3d4bcedf6334056b017aaacef92/1e043/distributed-transaction.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:72.39263803680981%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACTklEQVQoz3VSS08TURidn+EPMGzcGRdqXZiYSGKMMTHEmNClC4SFAjHqQhEXNSoYBYkPtGrKQo0IRsSmWOiDPjRgBarN8ChD7WAfzHRGZpjXdz8zdwpSE25mMZM553znfPcwWHsIYHL504tM+wwfRsSyrL5KLPeG+DArICKQGjCz9QYEEDHBBm7Mu56tNzRN7A4k33xJLZx8FDnkeT808hZRB6q/IzmzNNcVPNs+5rrsO1Mor/Bl+cjd8SdDw5jxmpUc5W4jAyEW2A8i6romibIqa/NcWtM0RLQAprPFhfxvNCQw1Go0YgsQgsyWkKqqgiAAgGMMCDheKBoomACxajKXyuLT0elAcjaf46qqhABYjoTziYgFgRelNYejqFphTf6jbDCN3f76ntTh6/6BjzE6kPy3f8uA6NJg34J7YLlt7lccEX3RTMdo9ubIT2b/peHjd0J17u7mzofSWqlSkURRrNAjiqKirM+kZq+G6/ulUy3Ruo5Bd3GleOHl2B7PxIkHYeZ8z4e9Lc/3NV4b8kfsyQA1107Nz/Mz9yJNXcOtOd6O9jiYdt0ONvu+MpZpTH7LLGY5oVQ0DIM6twAtZ1t0STbf1E3LrG5L0w2uJIvrGkM2QwIA9anQoNUubP6Fqiip8WWTLQALwMHlc6v+qdcDmSs/VuMIuKGbc1w5sSjwlY2tgtDrsB1tb5jtKskGOtmDXuX0uVDd+NS7VJpze2NHeybHYjG05B3r6UzOFbP931vbPh+46Gvg8uxKvnSsL+7pvQX3dxnsCMX968lfyeDl/+p5WogAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;distributed-transaction&quot; title=&quot;distributed-transaction&quot; src=&quot;/static/37bcb3d4bcedf6334056b017aaacef92/a6d36/distributed-transaction.png&quot; srcSet=&quot;/static/37bcb3d4bcedf6334056b017aaacef92/222b7/distributed-transaction.png 163w,/static/37bcb3d4bcedf6334056b017aaacef92/ff46a/distributed-transaction.png 325w,/static/37bcb3d4bcedf6334056b017aaacef92/a6d36/distributed-transaction.png 650w,/static/37bcb3d4bcedf6334056b017aaacef92/1e043/distributed-transaction.png 690w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;분산 트랜잭션에 사용되는 클래스와 인터페이스는 다음과 같습니다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;XADataSource&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;XAConnection&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;해당 인터페이스들은 트랜잭션 관리자에 의해 사용되며,
애플리케이션에 의해 직접적으로 다뤄지지는 않습니다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;XAConnection&lt;/code&gt; 인터페이스는 &lt;code&gt;PooledConnection&lt;/code&gt; 인터페이스를 상속받습니다.
그러므로 풀에서 관리되는 커넥션에 적용되는 모든 것은
분산 트랜잭션에 포함된 커넥션에도 적용된됩니다.
트랜잭션 관리자는 중간 계층에 위차히여 모든 것을 투명하게 처리합니다.
애플리케이션 코드에서의 유일한 변경 사항은
애플리케이션에서 트랜잭션 관리자의 트랜잭션 처리 과정에 관여할 수 없게 된다는 점입니다.
구체적으로 말하자면, 애플리케이션에서는
&lt;code&gt;Connection.commit&lt;/code&gt;이나 &lt;code&gt;Connection.rollback&lt;/code&gt;를 호출할 수 없으며,
&lt;code&gt;Connection.setAutoCommit(true)&lt;/code&gt;를 호출하여
커넥션을 auto-commit 모드로 설정할 수도 없습니다.&lt;/p&gt;&lt;p&gt;애플리케이션에서는 분산 트랜잭션에 참여하기 위해 특별한 작업을 할 필요는 없습니다.
평범하게 &lt;code&gt;DataSource.getConnection&lt;/code&gt; 메서드를 통해 데이터 소스에 대한 커넥션을 생성하면됩니다.
트랜잭션에 대한 관리는 트랜잭션 관리자가 뒷단에서 수행합니다.
&lt;code&gt;XADataSource&lt;/code&gt; 인터페이스에서 &lt;code&gt;XAConnection&lt;/code&gt; 객체를 생성하며,
트랜잭션 관리자가 커넥션을 관리하는 데 필요한 &lt;code&gt;XAResource&lt;/code&gt; 객체는
각 &lt;code&gt;XAConnection&lt;/code&gt; 객체에 의해 생성됩니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;원문: &lt;a href=&quot;https://docs.oracle.com/en/java/javase/11/docs/api/java.sql/javax/sql/package-summary.html&quot;&gt;Package javax.sql&lt;/a&gt;&lt;/li&gt;&lt;li&gt;사진 출처 및 심화 학습 자료&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://d2.naver.com/helloworld/4717&quot;&gt;Naver D2 - Garbage Collection과 Statement Pool&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://medium.com/javarevisited/distributed-transaction-management-in-microservices-part-1-bb7dc1fbee9f&quot;&gt;Distributed Transaction Management in Microservices — Part 1&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[무중단 DB 마이그레이션과 호환성 문제 해결]]></title><description><![CDATA[DB 마이그레이션 및 API 마이그레이션 작업을 무중단 배포로 수행하는 과정에서 발생할 수 있는 호환성 문제와 이에 대한 해결 방안에 대해 이야기합니다. 꼭꼭 서비스 개발 과정에서 직면한 문제를 예시로 설명합니다.]]></description><link>https://bugoverdose.github.io/development/zero-downtime-deployment-and-compatibility/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/zero-downtime-deployment-and-compatibility/</guid><pubDate>Wed, 28 Sep 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;릴리즈한 서비스에서 DB 마이그레이션 및 API 마이그레이션 작업을 수행할 일이 있었습니다.
이러한 작업을 롤링 배포로 진행할 경우 일어날 수 있는 호환성 문제와
이에 대한 해결 방안에 대해 이야기하고자 합니다.&lt;/p&gt;&lt;p&gt;해당 &lt;a href=&quot;https://github.com/woowacourse-teams/2022-kkogkkog/issues/322&quot;&gt;깃헙 이슈&lt;/a&gt;를
통해 실제 프로젝트에서 진행된 과정을 부분적으로 확인할 수 있습니다.&lt;/p&gt;&lt;h2&gt;무중단 배포 아키텍처&lt;/h2&gt;&lt;p&gt;구버전(이하 V1)의 서버를 신버전(이하 V2)의 서버로 재배포하는 과정은 기본적으로 3단계로 이루어집니다.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;V1 서버가 구동 중인 EC2 인스턴스로 V2 서버의 빌드 결과물을 전송(&lt;code&gt;scp&lt;/code&gt;)&lt;/li&gt;&lt;li&gt;구동 중인 V1 서버를 중단(&lt;code&gt;kill&lt;/code&gt;)&lt;/li&gt;&lt;li&gt;V2 서버를 새로 실행(&lt;code&gt;java -jar&lt;/code&gt;)&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;이때 문제가 되는 것은 2단계와 3단계 사이의 기간 동안 해당 EC2 인스턴스로 클라이언트의 요청이 들어오는 경우입니다.
이 짧은 기간 동안은 당연히 서버가 존재하지 않기 때문에 정상적인 서비스 운영이 불가능해집니다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;
은행과 같이 특정 시간대마다 요청을 받지 않는 서비스의 경우 이처럼 &lt;strong&gt;중단 배포(downtime deployment)&lt;/strong&gt;를 해도 무관합니다.
하지만 대부분의 경우, 서비스가 릴리즈되어 실제 사용자들이 존재하는 경우 이러한 다운타임이 존재하지 않는 것이 이상적입니다.&lt;/p&gt;&lt;p&gt;바로 이러한 문제를 해결하기 위한 방법이 바로 &lt;strong&gt;무중단 배포(zero-downtime deployment) 아키텍처&lt;/strong&gt;입니다.
기본적으로 다음과 같이 복수의 EC2 인스턴스에서 WAS를 구동시키고,
앞단에 로드밸런서 및 리버스 프록시 서버를 두는 경우 쉽게 무중단 배포를 구현할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/6aed8a92487f8d3e8126eff065972b15/0f246/zero-downtime-deployment-setup.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:50.920245398773%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABJklEQVQoz5WSzUrDQBSF83p147Kb7nwCVwbfQNeVWiyKC12IoCUaqIILf6KIqREhURDxp0UQbcCkmckkM0cSk2DVju1sZjhzzse9c0eBZHHO050QUmhCCFkEyl9iEsphjuOgVJqAqqoFWAZVhl3kIc/7gGGc4MqyEnE8YOJLzHmA0hCHx6fQdnRsazps56YAfvdJgIMVRIxhq6lhobaIWr2BC7Od6nH2HP8Cf5ri7PjiErh9lsHkbf+qMDcuGe+orD7i6M7H1Poz5vZfsWG6KC8/wHwKsl8gRgeutX3M7LqwuiFmdRcr5x72bgNMN3u47NAvoBgDWD3ooly3cXbvodKwMd/qYNN8w2T1OtVGqnBwICEYDSAER0j64BEDjyPQwAfE8KF8AoLp/UZ6RzDbAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;무중단 배포 셋업&quot; title=&quot;무중단 배포 셋업&quot; src=&quot;/static/6aed8a92487f8d3e8126eff065972b15/a6d36/zero-downtime-deployment-setup.png&quot; srcSet=&quot;/static/6aed8a92487f8d3e8126eff065972b15/222b7/zero-downtime-deployment-setup.png 163w,/static/6aed8a92487f8d3e8126eff065972b15/ff46a/zero-downtime-deployment-setup.png 325w,/static/6aed8a92487f8d3e8126eff065972b15/a6d36/zero-downtime-deployment-setup.png 650w,/static/6aed8a92487f8d3e8126eff065972b15/e548f/zero-downtime-deployment-setup.png 975w,/static/6aed8a92487f8d3e8126eff065972b15/0f246/zero-downtime-deployment-setup.png 1118w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이러한 구조에서 가장 쉽게 실행할 수 있는 무중단 배포 기법은 바로 &lt;strong&gt;롤링 배포(rolling deployment)&lt;/strong&gt;입니다.
&lt;a href=&quot;https://hudi.blog/zero-downtime-deployment/&quot;&gt;후디의 블로그&lt;/a&gt;의 이미지를 보면 그 과정을 쉽게 이해할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/bf6f561cf6dd6e9fe9cbc45530dcadb2/rolling-deployment.gif&quot; alt=&quot;롤링 배포&quot;/&gt;&lt;/p&gt;&lt;p&gt;간단히 말하자면 V1 서버를 중단하고 V2 서버를 실행하는 작업을 개별 WAS에 대해 순차적으로 반복하는 것입니다.
이때 nginx를 로드밸런서로 사용하게 되면,
&lt;strong&gt;특정 WAS의 다운타임 기간 동안 해당 WAS로 트래픽을 보내지 않기 때문에&lt;/strong&gt; 쉽게 진행할 수 있습니다.&lt;/p&gt;&lt;p&gt;여기에 Jenkins, Github Action 등을 통해
각 WAS를 순차적으로 V1 서버를 중단하고 V2 서버를 실행하는 파이프라인 및 워크플로우를
구현하면 무중단 배포를 어느 정도 자동화할 수 있을 것입니다.&lt;/p&gt;&lt;h2&gt;무중단 DB 마이그레이션&lt;/h2&gt;&lt;p&gt;운영 중인 서비스에서 도메인 구조를 리팩토링하는 과정에서
새로운 도메인 구조를 위해 DB 마이그레이션을 수행할 일이 생겨났습니다.&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;p&gt;요구되는 DB 마이그레이션 작업 자체는 굉장히 간단합니다.
다음과 같이 특정 테이블의 컬럼을 다른 테이블로 옮기기만 하면 됩니다.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;code&gt;coupon&lt;/code&gt; 테이블에 &lt;code&gt;meeting_date&lt;/code&gt;라는 컬럼을 새로 추가&lt;/li&gt;&lt;li&gt;&lt;code&gt;reservation&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt; 컬럼에 저장된 데이터를 전부 &lt;code&gt;coupon&lt;/code&gt; 테이블로 이전&lt;/li&gt;&lt;li&gt;더 이상 필요없는 &lt;code&gt;reservation&lt;/code&gt; 테이블을 &lt;code&gt;DROP&lt;/code&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;사실 일시적으로 V1 서버를 중단시키고, 그 사이에 일련의 SQL문들을 실행한 이후에, V2 서버를 재실행한다면
1분 이내에 모든 DB 마이그레이션 작업을 끝낼 수 있습니다.
특히 &lt;a href=&quot;https://flywaydb.org&quot;&gt;Flyway&lt;/a&gt;를 통해
V2 서버가 구동되는 시점에 자동으로 관련 SQL문들을 실행하도록 하는 경우,
서버의 다운타임은 10초 이내일 것입니다.&lt;/p&gt;&lt;h3&gt;무중단 배포의 호환성 문제&lt;/h3&gt;&lt;p&gt;그런데 위의 과정을 무중단 배포로 진행한다면 몇 가지 문제가 발생합니다.&lt;/p&gt;&lt;p&gt;예를 들어 롤링 배포를 진행하는 경우, V1 서버와
리팩토링 완료 후의 V2 서버 간의 &lt;strong&gt;호환성(compatibility)&lt;/strong&gt; 문제가 발생합니다.
롤링 배포 진행 과정에서는 &lt;strong&gt;V1 서버와 V2 서버가 공존하는 시기&lt;/strong&gt;가 잠시 동안 존재합니다.
이 기간 동안 들어오는 트래픽은 로드밸런서를 통해 두 가지 버전의 서버로 분산되어 전달됩니다.&lt;/p&gt;&lt;p&gt;이때 만일 &lt;code&gt;Flyway&lt;/code&gt;를 통해 V2 서버 구동 시점에 DB 마이그레이션 작업을 전부 끝내고
&lt;code&gt;reservation&lt;/code&gt; 테이블을 제거하는 경우, 즉, 위의 1, 2, 3단계를 전부 수행하는 경우를 생각해봅시다.
아직 존재하는 V1 서버에서 &lt;code&gt;reservation&lt;/code&gt; 테이블에 접근하려는 경우 상태 코드 500의 예외가 발생할 것입니다.&lt;/p&gt;&lt;p&gt;물론 &lt;code&gt;reservation&lt;/code&gt; 테이블을 제거하지 않고 DB 마이그레이션 작업, 즉 위의 1, 2단계만 수행하는 경우도 생각해볼 수 있습니다.
그러나 이 경우 V1 서버에서 &lt;code&gt;reservation&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt;의 데이터를 생성/삭제한다면
해당 내역은 &lt;code&gt;coupon&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt; 컬럼에는 반영되지 않으므로
&lt;strong&gt;데이터 무결성(data integrity)이 깨지게 됩니다.&lt;/strong&gt;
예를 들어, 이 기간 동안 예약이 취소되는 경우 &lt;code&gt;coupon&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt;에 값이 여전히 존재할 수도 있습니다.
또한 예약이 생성되었음에도 예약 날짜 정보가 &lt;code&gt;reservation&lt;/code&gt; 테이블에만 저장되고,
&lt;code&gt;coupon&lt;/code&gt; 테이블에는 반영되지 않고 여전히 &lt;code&gt;null&lt;/code&gt;이 담길 수도 있습니다.
이는 저희 서비스에 치명적이며 찾아내기 너무나도 어려운 버그를 유발하게 됩니다.
최악의 경우 이러한 문제를 사용자들이 보고하기 전까지 개발자들이 눈치 못챌 수도 있습니다.&lt;/p&gt;&lt;p&gt;이 외에도 경우가 있겠으나 V1 서버에서 V2 서버로 재배포를 하는 모든 경우에 유사한 문제가 발생합니다.&lt;div num=&quot;3&quot;&gt;&lt;/div&gt;
그러므로 이런 경우에는 차라리 중단 배포를 하는 것이 이상적입니다.&lt;/p&gt;&lt;h3&gt;과도기 버전을 통한 호환성 보장&lt;/h3&gt;&lt;p&gt;이러한 문제를 해결하는 방법은 생각보다 간단합니다.
&lt;strong&gt;V1과 V2 모두와 호환되는 중간 단계의 V1.5 서버&lt;/strong&gt;를 배포하는 것입니다.&lt;/p&gt;&lt;p&gt;기본적으로 V1.5 서버에서 제공하는 API의 기능은 V1 서버와 거의 동일하며
둘 다 &lt;code&gt;reservation&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt; 컬럼을 활용해야 합니다.
다만, 지금과 같은 경우 V1.5 서버 구동 시점에는 Flyway를 통해
&lt;code&gt;coupon&lt;/code&gt; 테이블에 &lt;code&gt;meeting_date&lt;/code&gt;라는 컬럼을 새로 추가하도록 합니다.
그리고 클라이언트가 V1.5 서버의 예약 관련 API가 호출했을 때
&lt;code&gt;reservation&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt; 관련
변경 내역을 &lt;code&gt;coupon&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt;에 동일하게 반영되도록 합니다.&lt;/p&gt;&lt;p&gt;이 경우 V1만 존재하는 시점, V1와 V1.5가 공존하는 시점, V1.5만 존재하는 시점
모두 &lt;strong&gt;&lt;code&gt;reservation&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt;를 활용하고 그 값을 동일한 방식으로 수정합니다.&lt;/strong&gt;&lt;/p&gt;&lt;h3&gt;DB 마이그레이션을 통한 데이터 무결성 보장&lt;/h3&gt;&lt;p&gt;기본적으로 V1.5 서버들이 구동되는 시점에
&lt;code&gt;coupon&lt;/code&gt; 테이블과 &lt;code&gt;reservation&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt; 컬럼 사이의 데이터 정합성은 깨집니다.
그러나 애초에 V1.5 서버에서는 &lt;code&gt;coupon&lt;/code&gt; 테이블의 부정확한 &lt;code&gt;meeting_date&lt;/code&gt; 컬럼을 사용하지 않으므로
&lt;strong&gt;아직은&lt;/strong&gt; 비즈니스 로직상 아무런 문제도 없습니다.&lt;/p&gt;&lt;p&gt;이제 &lt;strong&gt;모든 WAS가 V1.5로 완전히 대체된 이후, 아무때나 &lt;code&gt;reservation&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt; 값을 기준으로 &lt;code&gt;coupon&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt; 값을 동기화하는 실질적인 DB 마이그레이션을 실행&lt;/strong&gt;하면 됩니다.
V1 서버에 의해 여태까지 &lt;code&gt;reservation&lt;/code&gt; 테이블에 쌓였던 &lt;code&gt;meeting_date&lt;/code&gt; 데이터는
&lt;code&gt;coupon&lt;/code&gt; 테이블에서는 아직 &lt;code&gt;null&lt;/code&gt;로 존재하기 때문입니다.
그러므로 실제로 &lt;code&gt;coupon&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt; 데이터를 사용하는
V2 서버가 배포되기 전에 모든 데이터를 정상적으로 만들 필요가 있습니다.
이 마이그레이션 작업은 Flyway를 통해 V2 서버의 구동 시점에 수행해도 되고,
V2 서버 배포 이전에 별도로 수행해도 됩니다.&lt;/p&gt;&lt;p&gt;중요한 점은 DB 마이그레이션이 수행한 이후에도 &lt;code&gt;coupon&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt; 데이터는
아직 사용되지 않음에도 불구하고,
V1.5 서버에 의한 &lt;code&gt;reservation&lt;/code&gt; 테이블 변경 내역은 &lt;code&gt;coupon&lt;/code&gt; 테이블에도 꾸준히 반영된다는 점입니다.
그러므로 향후 클라이언트에서 V2 서버의 API를 통해 &lt;code&gt;coupon&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt;를 사용하게 되었을 때
아무런 호환성 문제가 발생하지 않게 됩니다.&lt;/p&gt;&lt;p&gt;한편, 주의할 점은 이 DB 마이그레이션 작업을 Flyway를 통해 V1.5 서버의 구동 시점에 수행해서는 안된다는 점입니다.
V1와 V1.5 서버가 공존하는 기간에 DB 마이그레이션 작업이 완료되는 경우,
V1 서버에서 &lt;code&gt;reservation&lt;/code&gt; 테이블을 변경했을 때 &lt;code&gt;coupon&lt;/code&gt; 테이블에 반영되지 않기 때문입니다.
즉, &lt;strong&gt;DB 마이그레이션을 수행해야 하는 대상이 그 사이에 추가로 생겨나는 것&lt;/strong&gt;입니다.
이 때문에 모든 서버가 확실히 중간 단계로 대체된 이후에 DB 마이그레이션을 한번에 묶어서 진행해야 합니다.&lt;/p&gt;&lt;h3&gt;API 버저닝을 통한 API 마이그레이션&lt;/h3&gt;&lt;p&gt;마지막으로 유의할 점은 API 마이그레이션 작업입니다.
V2 서버에서는 마음놓고 &lt;code&gt;coupon&lt;/code&gt; 테이블의 &lt;code&gt;meeting_date&lt;/code&gt;를 사용할 수 있지만,
그렇다고 &lt;code&gt;reservation&lt;/code&gt; 테이블을 사용하는 기존 API를 제거할 수는 없습니다.
왜냐하면 &lt;strong&gt;V1.5에서 V2로 변경하는 동안 클라이언트에서는 여전히 V1.5 서버의 API를 사용하기 때문입니다.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;이 때문에 V2 서버에서 새로 구현된 v2 API만이 아니라
V1.5에서 제공하는 v1 API까지 동일하게 제공해야 호환성 문제 없이 무중단 배포를 진행할 수 있게 됩니다.
이는 &lt;code&gt;/api/v1/~&lt;/code&gt;, &lt;code&gt;/api/v2/~&lt;/code&gt;와 같이 URI를 통해 API의 버전을 관리하면 쉽게 구현할 수 있습니다.
이 상태로 V2 서버가 완전히 배포된 이후에
v1 API 대신 v2 API를 호출하도록 수정한 프론트엔드 애플리케이션을 배포하게 되면
모든 작업이 완료됩니다.&lt;/p&gt;&lt;p&gt;그리고 이제 불필요해진 &lt;code&gt;reservation&lt;/code&gt; 테이블과 &lt;code&gt;/api/v1/~&lt;/code&gt; 형식의 API를 제거해도
시스템에 아무런 문제가 없습니다.&lt;/p&gt;&lt;h4&gt;블루-그린 배포를 통한 API 마이그레이션&lt;/h4&gt;&lt;p&gt;한편 &lt;strong&gt;블루-그린 배포(blue-green deployment)&lt;/strong&gt;를 통해 API 마이그레이션을 수행하는 경우도 생각할 수 있습니다.
마찬가지로 &lt;a href=&quot;https://hudi.blog/zero-downtime-deployment/&quot;&gt;후디의 블로그&lt;/a&gt;에서 훔쳐온 이미지를 확인하면 이해하기 쉽습니다.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/4787416bca99a5dd28577d99caa44340/blue-green-deployment.gif&quot; alt=&quot;블루-그린 배포&quot;/&gt;&lt;/p&gt;&lt;p&gt;간단히 말해 V2 서버(그린)들이 완전히 구동되었을 때
로드밸런서의 트래픽을 V1.5 서버(블루)에서 V2 서버(그린)들로 전환하는 방법입니다.
그러나 이 방법을 사용하더라도 모든 트래픽이 그린으로 들어오게 되었을 때
&lt;strong&gt;클라이언트에서는 여전히 블루를 기대하고 그린으로 요청을 보내게 됩니다.&lt;/strong&gt;
즉, 잠깐동안만이라도 &lt;strong&gt;V2 서버에서 V1.5 서버의 기존 API를 제공해야 한다는 점은 위와 동일합니다.&lt;/strong&gt;
이는 백엔드와 프론트엔드 애플리케이션 모두 신규 API를 사용하도록 하여
&lt;strong&gt;둘 다 동시에 블루에서 그린으로 전환하더라도 마찬가지&lt;/strong&gt;입니다.
프론트엔드 서버가 재배포되더라도 모든 클라이언트에서
즉각적으로 프론트엔드 서버로 요청을 보내 신규 HTML, CSS, JS 파일 등을 가져오지는 않기 때문입니다.
브라우저에 로드된 이전 버전의 HTML, CSS, JS 파일을 사용하는 경우,
이를 그대로 사용하는 사용자들은 당연히 V1.5 서버에서 제공하던 기존 API를 호출하게 됩니다.&lt;/p&gt;&lt;p&gt;오히려 위와 같은 배포 방식을 선택할 경우, 굳이 EC2 인스턴스를 추가로 만들고,
일일이 CI/CD 워크플로우를 셋업해주고, 셋업해주는 등의 불필요한 작업을 수행해야 합니다.
때문에 유의미한 효용이 있지 않다면 저희 팀은 기본적으로 롤링 배포를 선택할 것 같습니다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;사실 해당 게시글에서 사용한 DB 마이그레이션 예시는
모든 문제 상황에 적용할 수 없다고 생각합니다.
상황에 따라 중단 배포를 진행해야만 하는 경우는 언제든지 존재할 수 있으며,
이는 나쁜 것이 아니라고 생각합니다.
특히 억지로 다운타임을 없애기 위한 중간 과정이 너무 복잡한 경우
차라리 서비스를 일시적으로 중단시키는 것이 더 적은 비용을 초래할지도 모릅니다.&lt;/p&gt;&lt;p&gt;그러나 무중단 배포라는 목적이 아니더라도
위에서 설명한 업무 진행 방식 및 설계는
개발자들 간의 원활한 협업을 촉진할 수 있습니다.&lt;/p&gt;&lt;p&gt;기본적으로 리팩토링이 완료되기 전에 중간 버전의 서버에서
DB 마이그레이션 과정을 미리 수행하는 경우,
대규모 작업을 여러 PR로 잘게 쪼개어 진행할 수 있게 됩니다.&lt;/p&gt;&lt;p&gt;또한 기존 API와 신규 API를 함께 제공하는 것은
다른 작업과의 병행을 가능하게 해줍니다.
예를 들어, 해당 서버에서 추가적인 기능을 구현되었을 때
프론트엔드에서 API 마이그레이션이 진행되지 않았더라도
기존 API가 아직 존재한다면 문제 없이 운영 서버로 최신 버전을 배포할 수 있습니다.
프론트엔드 개발자들도 조금 더 여유를 가지고 우선순위가 더 높은
다른 작업들을 끝낸 이후에 API 마이그레이션을 진행할 수 있게 됩니다.
이와는 반대로 클라이언트에서 갑자기 기존 API를 호출할 수 없게 된다면,
신규 API로의 마이그레이션이 진행되기 전까지
해당 서버는 운영환경에 배포될 수 없으며,
추가적인 기능을 구현하더라도 개발용 사이트에서 QA를 진행할 수가 없습니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;SAMSUNG SDS : &lt;a href=&quot;https://www.samsungsds.com/kr/insights/1256264_4627.html&quot;&gt;무중단 배포 아키텍처(Zero Downtime Deployment)&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;동일한 EC2 인스턴스에서 V1 서버가 구동 중일 때 V2를 미리 실행하는 경우를 생각해볼 수 있습니다.
그러나 V1 서버에 할당된 포트와 동일한 포트에 대해 V2 실행하는 것은 불가능합니다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;다음은 DB 마이그레이션의 계기가 된 도메인 리팩토링에 대한 간소화된 설명입니다.&lt;/p&gt;&lt;p&gt;저희 서비스는 사용자들 사이에 &amp;#x27;쿠폰&amp;#x27;을 주고 받고, &amp;#x27;쿠폰&amp;#x27;에 대한 &amp;#x27;사용 요청&amp;#x27;을 &amp;#x27;예약 날짜&amp;#x27;와 함께
보내는 구조입니다. &lt;code&gt;coupon&lt;/code&gt; 테이블에서 각 쿠폰 데이터를 관리하며,
특정 쿠폰에 대해 예약 요청이 들어오면 &lt;code&gt;reservation&lt;/code&gt; 테이블에 해당 쿠폰에 대한 예약 데이터가
&amp;#x27;예약 날짜&amp;#x27; 정보와 함께 생성됩니다. 만일 쿠폰 사용 요청에 대해 &amp;#x27;요청 취소&amp;#x27; 혹은
&amp;#x27;요청 거절&amp;#x27;을 선택하는 경우 해당 쿠폰에 대한 예약 데이터는 &lt;code&gt;reservation&lt;/code&gt; 테이블에서 삭제됩니다.
동일한 쿠폰에 대해서는 최대 1개의 예약만 존재할 수 있습니다.&lt;/p&gt;&lt;p&gt;문제는 &lt;code&gt;reservation&lt;/code&gt; 테이블이 &lt;code&gt;meeting_date&lt;/code&gt; 컬럼 하나를 관리한다는 점 외에는 존재 의의가 없다는 점입니다.
애플리케이션 내에서 &lt;code&gt;Reservation&lt;/code&gt;이라는 객체는 데이터 저장소의 역할만을 지닐 뿐,
그 어떠한 자율적인 책임을 지니지 못합니다. 즉, 객체 지향적이지 않습니다.
또한 성능 개선을 위해 쿠폰 관련 로직에서 매번 JPQL문으로 &lt;code&gt;coupon&lt;/code&gt; 테이블과 &lt;code&gt;reservation&lt;/code&gt; 테이블을
JOIN한 &lt;code&gt;CouponReservation&lt;/code&gt; 객체를 만들어 사용하면서 코드 복잡성이 증가하였으며,
예약 관련 API를 호출하는 프론트엔드 코드도 복잡도가 높아졌습니다.&lt;/p&gt;&lt;p&gt;이 때문에 &lt;code&gt;reservation&lt;/code&gt; 테이블을 제거하고, &lt;code&gt;reservation&lt;/code&gt;의 &lt;code&gt;meeting_date&lt;/code&gt; 컬럼을 &lt;code&gt;coupon&lt;/code&gt; 테이블에서
직접 관리하고 “예약”이라는 개념을 API와 DB에서 완전히 제거하는 리팩토링을 진행하게 되었습니다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;3&quot;&gt;&lt;p&gt;특히 블루-그린 배포(blue-green deployment)를 진행하더라도
&lt;strong&gt;DB 마이그레이션 작업 진행과 관련하여 유사한 문제가 발생합니다.&lt;/strong&gt;
V1 서버들(블루)에서 V2 서버들(그린)으로 &lt;strong&gt;로드밸런서의 트래픽을 전환하기 직전에 DB 마이그레이션을 진행&lt;/strong&gt;해야 하는데,
&lt;strong&gt;DB 마이그레이션이 진행되는 도중에는 V1으로 트래픽이 가면 안되기 때문&lt;/strong&gt;입니다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[번역] 커넥션 풀 사이즈에 대하여]]></title><description><![CDATA[HikariCP 공식 위키의 'About Pool Sizing' 페이지에 대한 번역입니다. 최적의 성능을 위해 데이터베이스 커넥션 풀 크기를 어떻게 설정해야 하는지에 대해 다룹니다.]]></description><link>https://bugoverdose.github.io/docs/database-connection-pool-sizing/</link><guid isPermaLink="false">https://bugoverdose.github.io/docs/database-connection-pool-sizing/</guid><pubDate>Sun, 25 Sep 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;nGrinder를 활용한 부하테스트 실험 도중,
극단적인 수준의 데이터베이스 조회 작업을 지속적으로 발생시키자
다음과 같은 예외를 마주하게 되었습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30004ms ...&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이는 데이터베이스와 통신하는 데 필요한 커넥션을 커넥션풀에서 가져오는데 30초 넘게 걸려서 발생한 예외였으며,
커넥션 풀의 사이즈를 10에서 150으로 늘리자 해당 예외&lt;em&gt;는&lt;/em&gt; 더 이상 나타나지 않게 되었습니다.&lt;/p&gt;&lt;p&gt;데이터베이스 커넥션 풀 규모를 수정해본 것은 처음이었는데,
이번 기회에 커넥션 풀의 적정 규모 설정에 대해 자세히 정리해보고자 합니다.
해당 글의 원문은 &lt;a href=&quot;https://github.com/brettwooldridge/HikariCP/wiki/About-Pool-Sizing&quot;&gt;HikariCP 공식 위키 문서&lt;/a&gt;에서
확인할 수 있습니다.&lt;/p&gt;&lt;h2&gt;히카리 커넥션 풀 사이즈에 대하여&lt;/h2&gt;&lt;p&gt;커넥션 풀 설정은 개발자들이 흔히 실수하는 작업입니다.
커넥션 풀을 설정하기 위해 이해해야 하는 원칙들이 존재하며,
이 중 몇 가지는 우리의 직관에 위배된다고 느껴질 수도 있습니다.&lt;/p&gt;&lt;h3&gt;10,000명의 프론트엔드 동시 접속자들&lt;/h3&gt;&lt;p&gt;대략 1만 명의 사용자들이 빈번하게 접속하며
데이터베이스 요청을 발생시키는 사이트가 있다고 해봅시다.
초당 2만 개의 트랜잭션이 발생한다고 했을 때 커넥션 풀의 크기는 어느 정도여야 할까요?
여기서 핵심은 얼마나 &lt;em&gt;커야 하는가&lt;/em&gt;가 아니라 얼마나 &lt;em&gt;작아야 하는가&lt;/em&gt;에 있습니다.&lt;/p&gt;&lt;p&gt;가급적이면 Oracle Real-World Performance 그룹에서 공개한
&lt;a href=&quot;https://www.youtube.com/watch?v=_C77sBcAtSQ&quot;&gt;이 짧은 데모 영상&lt;/a&gt;을 확인해봅시다.&lt;/p&gt;&lt;p&gt;다른 변경 사항 없이 커넥션 풀 크기를 줄이는 것만으로도
애플리케이션의 응답 시간을 최대 100ms에서 최대 2ms로 50배나
개선할 수 있음을 영상에서 확인할 수 있습니다.&lt;/p&gt;&lt;h3&gt;이유&lt;/h3&gt;&lt;p&gt;적은 것이 오히려 좋다(less is more)는 깨달음은 다른 컴퓨팅 분야들에서도 확인할 수 있습니다.
100개의 프로세스를 사용하는 &lt;em&gt;아파치&lt;/em&gt; 웹서버보다
4개의 쓰레드만을 사용하는 &lt;em&gt;nginx&lt;/em&gt; 웹서버의 성능이 더 우월한 이유는 무엇일까요?
컴퓨터과학 개론 수업 내용을 생각해보면 당연하지 않나요?&lt;/p&gt;&lt;p&gt;하나의 CPU 코어를 지닌 컴퓨터조차도 &amp;quot;동시에&amp;quot; 수십, 수백개의 쓰레드를 지원할 수 있습니다.
그러나 이것이 &lt;em&gt;시분할&lt;/em&gt; 기법을 활용한 운영체제의 눈속임에 불과하다는 점을 [왠만하면] 알고 있어야 합니다.
실제로는 하나의 코어는 한번에 단 &lt;em&gt;하나의&lt;/em&gt; 쓰레드만을 실행할 수 있습니다.
그리고 운영체제에서 컨텍스트를 스위치하면 해당 코어는 다른 쓰레드의 코드를 실행하게 됩니다.
단일 CPU 자원이 주어졌을 때, 시분할을 통해 &lt;strong&gt;A&lt;/strong&gt;와 &lt;strong&gt;B&lt;/strong&gt;를 &amp;quot;동시에&amp;quot; 실행하는 것보다
&lt;strong&gt;A&lt;/strong&gt;와 &lt;strong&gt;B&lt;/strong&gt;를 순차적으로 실행하는 것이
&lt;em&gt;언제나&lt;/em&gt; 더 빠를 것이라는 점이 기초적인 컴퓨팅 법칙입니다.
쓰레드의 개수가 CPU 코어의 개수보다 많다면,
그 이후부터는 쓰레드를 추가할수록 빨라지는 것이 아니라 느려집니다.&lt;/p&gt;&lt;p&gt;그것이 &lt;em&gt;거의&lt;/em&gt; 맞습니다...&lt;/p&gt;&lt;h3&gt;제한된 자원&lt;/h3&gt;&lt;p&gt;거의 맞기는 하지만 위의 설명처럼 간단한 것만은 아닙니다.
몇 가지 요인들이 추가적으로 작용합니다.
데이터베이스에서 병목을 발생시키는 주요 요인들은
&lt;em&gt;CPU&lt;/em&gt;, &lt;em&gt;디스크&lt;/em&gt;, &lt;em&gt;네트워크&lt;/em&gt;라는 3가지로 요약됩니다.
&lt;em&gt;메모리&lt;/em&gt;도 추가할 수 있지만 디스크와 네트워크에 비해 극단적으로 미미합니다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;디스크&lt;/em&gt;와 &lt;em&gt;네트워크&lt;/em&gt;를 무시한다면 간단합니다.
8개의 연산 코어를 지닌 서버에서는 커넥션 개수를 8개로 설정하는 것이 최적의 성능을 제공할 것입니다.
그 이상을 넘어서면 컨텍스트 스위칭으로 인한 오버헤드 때문에 성능이 저하됩니다.
그러나 &lt;em&gt;디스크&lt;/em&gt;와 &lt;em&gt;네트워크&lt;/em&gt;를 무시할 수는 없습니다.
데이터베이스는 일반적으로 데이터를 &lt;em&gt;디스크&lt;/em&gt;에 저장합니다.
이 디스크는 전통적으로 회전하는 철판과 읽기/쓰기 헤드로 구성되어있습니다.
이 읽기/쓰기 헤드는 동시에 한 곳에만 존재하며 단 하나의 쿼리에 대해 데이터를 읽고 쓸 수 있습니다.
그리고 다른 쿼리에 대해 데이터를 읽고 쓰기 위해서는 다른 위치를 &amp;quot;탐색&amp;quot;해야 합니다.
때문에 탐색 시간 비용이 존재하며, 디스크가 다시 돌아올 때까지 기다려야 하는 회전 비용도 존재합니다.
캐슁을 통해 개선될 수 있으나 이 원칙은 여전히 적용됩니다.&lt;/p&gt;&lt;p&gt;이 &amp;quot;I/O 대기&amp;quot; 시간 동안 커넥션, 쿼리, 쓰레드는 전부 디스크를 기다리며 &amp;quot;블록&amp;quot;됩니다.
그리고 이 기간 동안 운영체제는 다른 쓰레드의 코드를 실행함으로써 CPU 자원을
효율적으로 사용할 수 있습니다.
즉, &lt;strong&gt;쓰레드가 I/O 작업에 의해 블록되기 때문에 물리적으로 존재하는 코어의 개수보다 더 많은 커넥션과 쓰레드를 지님으로써 더 많은 작업을 할 수 있게 됩니다.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;얼마나 더 많은 작업을 할 수 있을까요? 봅시다.
이 질문은 &lt;em&gt;디스크 하위 시스템&lt;/em&gt;에도 의존합니다.
최신 SSD 드라이브는 탐색 시간 비용이나 회전에 의한 요인이 없기 때문입니다.
그렇다고 &amp;quot;SSD가 더 &lt;em&gt;빠르므로&lt;/em&gt; 더 &lt;em&gt;많은&lt;/em&gt; 쓰레드를 지녀도 된다&amp;quot;라고 착각하면 안됩니다.
이는 180도 반대입니다.
더 빠르고, 탐색 작업이 없고, 회전 딜레이가 없다는 말은 &lt;em&gt;블록킹이 적다&lt;/em&gt;는 뜻으로,
[코어 개수에 가깝도록] &lt;em&gt;쓰레드 개수를 줄이는 것&lt;/em&gt;이 늘리는 것보다 성능이 좋습니다.
&lt;em&gt;쓰레드 개수가 많은 것은 블록킹으로 인해 실행될 수 있는 기회가 생성될 때에만 더 좋게 동작합니다.&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;네트워크&lt;/em&gt;는 &lt;em&gt;디스크&lt;/em&gt;와 비슷합니다.
이더넷 인터페이스를 통해 데이터를 와이어 위에 쓰는 작업은
전송 및 수신 버퍼에서의 대기로 인해 블록킹을 발생시킬 수 있습니다.
10 기가비트 인터페이스는 기가비트 이더넷이 비해 덜 지연되며,
기가비트 이더넷은 100 메가비트 이더넷에 비해 덜 지연됩니다.
그러나 네트워크는 자원 블록킹에 있어 3순위 고려사항이며, 계산에서 제외시키는 경우도 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/7e7877f639a964e4616df6ccdf0d9816/cd78c/graph.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:79.75460122699387%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB6ElEQVQ4y4VU2a7jIAzN/3/iPHTutFmVjUCALJBzddwSdapWdeQYHPt4wSQDgKZpcLlcMAwD6rrG7XYTXVmWIvu+R9u2yPMcXdfher2KzXEceKWsKApUVSWbZVngvRfpnJM1mevnbyEEeO+g1AhvLfRooJSF8wsyRidv24Z5nsX4HaVsnPeY1IiybNB0Cn4J6IYBvdbQZkbGUljGvu+SCR1ZOnXjOEJrLfu77NHUFX7yBn+KCjosMMGiXHqYaGHtA5CcAGOMAsDeUU7TJOCzMWjbHsWgoY8NfOIRsIeI2R/YA2CtRUbj1wzfkd4iWucwzSOCs4iTQTQzorU49ATMBnb+UDKz5B44sO4BeTdg7FtsWrGJiM4j7LvYxRAQ9iB+kiFfHA8eSgIMMfIUoN2Kv9cKdhwAOseIwICPoIl5kCcgT5b9SoA0kBLtgkteY1sW2d+dw39AXwGpIBm/4V/V4aAhcHd4A/QRkINNQO+c9OynVdJDKZ89CuF0/ArIFwEJwJtwGyz8tksPw5PT8dK3V0CSAPIqcd72bcOl7qHsKmAMkLJ7zvATnxmec6Y1unGE0VquIAeaOjLXxphTl9ZJPq+zNMjMaH38ANZ1lY8ETuCMnsCoU0qdMuk5z9nzxf9EDMJZ5a/tm+0vlD/bXMRNTuMAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;PostgreSQL benchmark&quot; title=&quot;PostgreSQL benchmark&quot; src=&quot;/static/7e7877f639a964e4616df6ccdf0d9816/a6d36/graph.png&quot; srcSet=&quot;/static/7e7877f639a964e4616df6ccdf0d9816/222b7/graph.png 163w,/static/7e7877f639a964e4616df6ccdf0d9816/ff46a/graph.png 325w,/static/7e7877f639a964e4616df6ccdf0d9816/a6d36/graph.png 650w,/static/7e7877f639a964e4616df6ccdf0d9816/e548f/graph.png 975w,/static/7e7877f639a964e4616df6ccdf0d9816/cd78c/graph.png 1236w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;위의 PostgreSQL 지표를 보면 기울기가 점가 감소하며
50개의 커넥션부터 TPS 값이 안정적으로 유지되는 것을 확인할 수 있습니다.
그리고 위의 오라클 영상에서는 커넥션을 2048에서 96으로 감소시켰습니다.
물론 코어의 개수가 16, 32개가 아니라면 96조차도 너무 높습니다&lt;/p&gt;&lt;h3&gt;공식&lt;/h3&gt;&lt;p&gt;아래의 공식은 PostgreSQL에서 출발점으로서 제공되었지만,
다른 다양한 데이터베이스들에 보편적으로 적용될 수 있다고 믿습니다.
여러분의 애플리케이션에 대해서도 예상되는 부하를 시뮬레이션하고
이 출발점을 중심으로 다양한 풀 설정을 시도해보기를 바랍니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;connections = ((core_count * 2) + effective_spindle_count)&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div title=&quot;PostgreSQL - 데이터베이스 커넥션 개수&quot;&gt;&lt;p&gt;&lt;em&gt;최적의 처리량을 위해서는 활성화된 커넥션의 개수가 ((core_count &lt;/em&gt; 2) + effective_spindle_count)
정도여야 한다는 것이 수 년에 걸쳐 입증된 공식이다.
하이퍼쓰레딩이 활성화되었더라도 코어 개수에 HT 쓰레드를 포함시키면 안 된다.
활성화된 데이터가 전부 캐쉬되어있다면 효율적인 스핀들 개수는 0입니다.
그리고 캐쉬 적중률이 감소할수록 점차 실제 스핀들의 개수에 가까워지게 됩니다.
... 다만, 해당 공식이 SSD에 얼마나 적절하게 적용될 수 있는지에 대한 분석은 아직 없습니다.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;이게 무슨 의미일까요? 여러분의 작고 소중한 하드디스크 1개 짜리 4-Core i7 서버의
커넥션 풀 크기는 9개(&lt;code&gt;((4 * 2) + 1) = 9&lt;/code&gt;)여야 합니다. 예쁘게 반올림해서 10으로 설정합시다.
너무 낮다고 생각하나요? 한번 테스트해보세요.
3000명의 프론트엔드 사용자가 간단한 쿼리를 발생시킨다고 했을 때
6000 TPS의 성능으로 처리할 수 있을 것이라고 보장합니다.
이러한 셋업에서 커넥션 풀 크기를 10보다 훨씬 높게 설정하여 부하 테스트를 진행하면
TPS는 하락하고 응답 시간은 증가하는 것이 확인될 것입니다.&lt;/p&gt;&lt;h3&gt;격언&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;커넥션을 기다리는 쓰레드들로 가득차 있는 작은 풀을 설정해야 합니다.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;1만명의 프론트엔드 사용자들이 있을 때 커넥션 풀의 크기가 1만인 것은 순수한 광기입니다.
1000도 끔찍합니다. 100조차도 과도하죠.
여러분은 아무리 크더라도 최대 수십 개의 커넥션으로 구성된 작은 풀을 설정해야 하며,
애플리케이션 쓰레드들이 풀로부터 커넥션을 받기 위해 블록되도록 해야 합니다.
풀이 적절하게 설정되었다는 것은
데이터베이스가 동시에 처리할 수 있는 쿼리의 개수의 한계에 딱 맞는 수치이며,
이는 CPU 코어 개수의 2배를 크게 넘기지 않습니다.&lt;/p&gt;&lt;p&gt;우리는 고작 수십명의 프론트엔드 사용자들이 주기적으로 사용하는 사내 웹 애플리케이션의
커넥션 풀 크기를 100으로 설정하는 놀라운 행각을 꾸준히 목격하고 있습니다.
데이터베이스를 학대하지 맙시다.&lt;/p&gt;&lt;hr/&gt;&lt;h2&gt;풀 락킹&lt;/h2&gt;&lt;p&gt;복수의 커넥션을 요구하는 단일 작업으로 인해 풀 락킹(pool-locking) 문제가 발생할 수도 있습니다.
이는 기본적으로 애플리케이션 레벨에서의 이슈입니다.
물론 이러한 시나리오에서 풀 크기를 늘리는 것을 통해 락을 완화시킬 수 있겠지만,
그 전에 애플리케이션 레벨에서 할 수 있는 작업을 확인해보는 것을 권장합니다.&lt;/p&gt;&lt;p&gt;데드락을 회피하기 위한 풀 크기 계산식은 간단한 자원 할당 공식입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;pool size = Tn x (Cm - 1) + 1&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;Tn&lt;/code&gt;은 쓰레드의 최대 개수, &lt;code&gt;Cm&lt;/code&gt;은 단일 쓰레드에 의해 &lt;em&gt;동시에 사용되는 커넥션&lt;/em&gt;의 최대 개수입니다.&lt;/p&gt;&lt;p&gt;예를 들어, 3개의 쓰레드(&lt;code&gt;Tn=3&lt;/code&gt;)에서 특정한 작업을 수행하기 위해 각자 4개의 커넥션(&lt;code&gt;Cm=4&lt;/code&gt;)을
필요로 하는 경우를 생각해봅시다.
데드락이 절대로 발생하지 않도록 보장하는 커넥션 풀 크기는 아래와 같이 10개입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;pool size = 3 x (4 - 1) + 1 = 10&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다른 예로, 최대 8개의 쓰레드(&lt;code&gt;Tn=8&lt;/code&gt;)에서 특정 작업을 위해 각자 3개의 커넥션(&lt;code&gt;Cm=3&lt;/code&gt;)을 요구하는 경우,
데드락을 완벽하게 예방하기 위한 커넥션 풀 크기는 아래와 같이 17개입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;pool size = 8 x (3 - 1) + 1 = 17&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;👉 이 값은 최적의 풀 크기가 아니라, 데드락을 회피하기 위한 최소값입니다.&lt;/p&gt;&lt;p&gt;👉 일부 환경에서는 JTA(Java Transaction Manager)를 사용함으로써
요구되는 커넥션의 개수를 극단적으로 줄일 수 있습니다.
이 경우 이미 현재 트랜잭션에서 &lt;code&gt;Connection&lt;/code&gt;를 지니고 있는 쓰레드에서
&lt;code&gt;getConnection()&lt;/code&gt;을 호출했을 때 동일한 커넥션을 반환하도록 하는 방식을 사용합니다.&lt;/p&gt;&lt;hr/&gt;&lt;h2&gt;주의사항&lt;/h2&gt;&lt;p&gt;적절한 풀 사이즈 값은 궁극적으로 배포된 서버에 따라 천차만별입니다.&lt;/p&gt;&lt;p&gt;예를 들어, 굉장히 긴 트랜잭션과 짧은 트랜잭션이 혼합되어 있는 시스템의 커넥션 풀을 최적화하는 것은
어려운 일입니다. 이러한 경우, 복수의 풀 인스턴스를 생성하는 것이 적절할 수 있습니다.
오래 걸리는 작업을 위한 풀 하나와 &amp;quot;실시간&amp;quot; 쿼리를 위한 풀 하나로 분리하여 사용하는 것이죠.&lt;/p&gt;&lt;p&gt;대체로 긴 트랜잭션들로 구성된 시스템의 경우
일반적으로 필요한 커넥션의 개수에 있어 &amp;quot;외부&amp;quot; 제약조건이 존재합니다.
무조건 일정 개수의 작업을 함께 실행시키는 작업 실행 큐가 그 예입니다.
이러한 경우, 작업 큐의 크기에 맞추어 커넥션 풀 크기를 설정하는 것이 아니라
오히려 그 반대로 커넥션 풀 사이즈에 맞추어 작업 큐의 사이즈를 조정해야 합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;원문: &lt;a href=&quot;https://github.com/brettwooldridge/HikariCP/wiki/About-Pool-Sizing&quot;&gt;About Pool Sizing - HikariCP 깃헙 위키&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://wiki.postgresql.org/wiki/Number_Of_Database_Connections&quot;&gt;Number Of Database Connections - PostgreSQL&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[토이 프로젝트] MyS3: 나만의 작은 이미지 호스팅 서버]]></title><description><![CDATA[AWS S3를 사용할 수 없게 되어 EC2 인스턴스에서 실행가능한 대체품을 만들어보았습니다. 이미지 파일 업로드 및 조회 API를 제공하며, 업로드된 파일을 로컬 머신에서 직접 관리하는 구조입니다.]]></description><link>https://bugoverdose.github.io/development/image-hosting-server-toy-project/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/image-hosting-server-toy-project/</guid><pubDate>Sun, 07 Aug 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;우테코 레벨3 도중 코치님이 AWS S3를 사용하지 말라고 하셔서
EC2 인스턴스에서 실행가능한 이미지 호스팅 서버를 직접 구현해보았습니다.
다양한 한계로 인해 실제 S3를 대체하기는 어렵겠지만,
개인적으로 재밌는 프로젝트였기에 이에 대해 기록하고자 합니다.&lt;/p&gt;&lt;p&gt;해당 게시글은 개발 초기 단계 결과물에 대한 데모를 목적으로 하고 있습니다.
리팩토링된 코드와 추가적으로 적용한 다양한 성능 개선 기법들에 대한 설명은
&lt;a href=&quot;https://github.com/bugoverdose/MyS3&quot;&gt;깃헙 저장소&lt;/a&gt;에서 확인할 수 있습니다.&lt;/p&gt;&lt;h2&gt;초기 구현&lt;/h2&gt;&lt;p&gt;다음은 하루만에 구현한 직후의 코드에 대해 작성한 글입니다.&lt;/p&gt;&lt;h3&gt;기본 구조&lt;/h3&gt;&lt;p&gt;해당 프로젝트의 아이디어는 간단합니다.
EC2 인스턴스에 해당 서버를 실행하면, HTTP 기반의 API를 두 가지 제공합니다.
하나는 기본적으로 백엔드 애플리케이션에서 호출해야 하는 이미지 파일 업로드 API이고,
다른 하나는 브라우저에서 보여주기 위해 사용해야 하는 이미지 파일 조회 API입니다.&lt;/p&gt;&lt;p&gt;기본적으로 &lt;code&gt;POST&lt;/code&gt; 요청을 통해 이미지 파일 업로드 API 호출시,
전송된 이미지 파일을 해당 EC2 인스턴스 내의 특정 경로에 저장합니다.
이때 해당 경로에 동명의 파일이 이미 존재하는 경우 새로운 파일로 덮어씁니다.
파일 업로드 성공시, 응답의 &lt;code&gt;Location&lt;/code&gt; 헤더에 담기는 경로로 &lt;code&gt;GET&lt;/code&gt; 요청을 보내면
해당 이미지 파일을 조회할 수 있습니다.
해당 요청시, 파일이 존재하면 그대로 응답하고 존재하지 않으면 &lt;code&gt;404 Not Found&lt;/code&gt; 예외를 던집니다.&lt;/p&gt;&lt;p&gt;유일하게 주의할 점은 이미지 업로드시,
&lt;code&gt;Authorization&lt;/code&gt; 헤더에 특정 문자열을 포함시켜줘야 한다는 점입니다.
해당 문자열은 서버 실행 시점에 자유롭게 지정할 수 있습니다.&lt;/p&gt;&lt;h3&gt;로컬 환경 실습&lt;/h3&gt;&lt;p&gt;해당 프로젝트에 대해 대략적으로 파악하기 위해 아래 명령어를 실행하여
로컬에 클론한 이후, 인텔리제이에서 곧바로 실행해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/bugoverdose/MyS3&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이처럼 애플리케이션을 그대로 실행하는 경우,
&lt;code&gt;application.yml&lt;/code&gt;(이하, &lt;code&gt;yml&lt;/code&gt; 파일)에
하드코딩된 다음의 디폴트 환경변수들이 그대로 사용됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;image.storage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;root-directory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; static/images
&lt;span class=&quot;token key atrule&quot;&gt;security&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;authorization-key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이미지 업로드 API의 엔드포인트는 &lt;code&gt;POST /api/images/{uploadPath}&lt;/code&gt;입니다.
&lt;code&gt;yml&lt;/code&gt; 파일에 지정된 &lt;code&gt;image.storage.root-directory&lt;/code&gt; 프로퍼티의 값인
&lt;code&gt;static/images&lt;/code&gt;와 &lt;code&gt;uploadPath&lt;/code&gt; 값을 토대로 파일이 업로드되는 위치가 정해집니다.
구체적으로는 &lt;strong&gt;해당 프로젝트의 빌드 파일이 어디에서 실행되든 무조건 &lt;code&gt;~/static/images/{uploadPath}&lt;/code&gt; 경로에 파일이 생성됩니다.&lt;/strong&gt;
이미지 조회 API의 엔드포인트는 &lt;code&gt;GET /api/images/{uploadPath}/{fileName}&lt;/code&gt;이며,
파일 업로드 요청 성공시, &lt;code&gt;Location&lt;/code&gt; 헤더의 값을 그대로 사용하면 됩니다.&lt;/p&gt;&lt;p&gt;이제 직접 요청을 보내보겠습니다.
이미지 업로드 요청의 경우, localhost에 바인딩된 서버에 대해서도 실행될 수 있고,
파일 전송도 지원되는 &lt;code&gt;Insomnia&lt;/code&gt;를 사용하겠습니다. 파일 조회의 경우 구글 크롬을 사용하겠습니다.&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;/4ceca79e18eab1ac2bfdf1cf96cead29/local-default.gif&quot; alt=&quot;local-default&quot;/&gt;&lt;/p&gt;&lt;p&gt;위와 같이 &lt;code&gt;POST /api/images/user&lt;/code&gt;로 &lt;code&gt;fileName&lt;/code&gt; 값을
&lt;code&gt;profile_image_1&lt;/code&gt;로 지정하여 파일을 업로드하는 경우,
&lt;code&gt;~/static/images/user&lt;/code&gt; 경로에 &lt;code&gt;profile_image_1.png&lt;/code&gt;라는 파일이 생성됩니다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;
해당 프로젝트를 연 인텔리제이에서 확인되는 경로가 아닐 것이므로 터미널에 해당 명령어들을 실행하여
생성되는 파일을 확인해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; ~/static/images/user
ll
total &lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;
-rw-r--r--  &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; jeong  staff    30K  &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;  &lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;:30 profile_image_1.png&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;한편 이미지 업로드 요청시, &lt;code&gt;Authorization&lt;/code&gt; 헤더에
&lt;code&gt;yml&lt;/code&gt; 파일에 지정된 &lt;code&gt;security.authorization-key&lt;/code&gt; 값이
제대로 포함되어있지 않거나, &lt;code&gt;Authorization&lt;/code&gt; 헤더 자체가 누락된 경우
다음과 같이 &lt;code&gt;401 Unauthorized&lt;/code&gt; 예외가 발생합니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/6ff69c6f3328cf79ae7306fe67f0d857/252a4/401_wrong.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:25.766871165644172%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABCElEQVQY0zVQOU4EMRCcl4BEwLh9jK+Z8RxeliVDSGiFRIKIyUgQkJIg8QYesY8g4F2FulcEpZLLXdVlN607A+kWOWX0PaMXjGMB6XPksMPn+w8+Xn7xePuM76cTHN4sDq+Er4dTjENG3WwQgketFY33HsMwwDkHpRRSStBay5nvrHW43F4hxR7LUrG/u8f1zR5pmOBCknljjJRgbtjIIgsxRhCRhPES1nLOcM7CmOOSnBPy6BFjQuc6ECloTQL2SiAbSynC3LLrOizLgmmaBLyINWstjDbwRSH2AdtNQBkJF1UjJxJv899mnmdp07YtQghY11VCmXkRz/GT+DtIkcwxlDoGMXPDP6TFohKfHJsxAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;401_wrong&quot; title=&quot;401_wrong&quot; src=&quot;/static/6ff69c6f3328cf79ae7306fe67f0d857/a6d36/401_wrong.png&quot; srcSet=&quot;/static/6ff69c6f3328cf79ae7306fe67f0d857/222b7/401_wrong.png 163w,/static/6ff69c6f3328cf79ae7306fe67f0d857/ff46a/401_wrong.png 325w,/static/6ff69c6f3328cf79ae7306fe67f0d857/a6d36/401_wrong.png 650w,/static/6ff69c6f3328cf79ae7306fe67f0d857/e548f/401_wrong.png 975w,/static/6ff69c6f3328cf79ae7306fe67f0d857/3c492/401_wrong.png 1300w,/static/6ff69c6f3328cf79ae7306fe67f0d857/252a4/401_wrong.png 1314w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/64ac5f08ea047b91eb47103a43b768c3/4719e/401_missing.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:26.380368098159508%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA70lEQVQY0z1QvU6DMQzMa7CWIXESJ19++6GqTExMrAydisQEYuBVEDMTAw95yP7UDif7LvHFF+N4BwoOvXW01jDGQO8dc+4RImHUB7yevvD+8ofnxxO+zzf4efP4/XD4fNqhjYk5p84JTM5Zm5QSrLWotYKIwMyqCY7He+S8IMaEvj/Ac8WtDViqzGXEGFFrg3MEs5GqW5VS4JxTM3lVNNlaOHNE8B45MdJCKEvRPgZSMHutRjbYIk41FkPR1nW9xhcupt4HrcsktF6wTsYchNE9DnceoxPMdtErJOoFwsVcvkGq4KpbUt1apzEv54J/qa2eaS2OMyAAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;401_missing&quot; title=&quot;401_missing&quot; src=&quot;/static/64ac5f08ea047b91eb47103a43b768c3/a6d36/401_missing.png&quot; srcSet=&quot;/static/64ac5f08ea047b91eb47103a43b768c3/222b7/401_missing.png 163w,/static/64ac5f08ea047b91eb47103a43b768c3/ff46a/401_missing.png 325w,/static/64ac5f08ea047b91eb47103a43b768c3/a6d36/401_missing.png 650w,/static/64ac5f08ea047b91eb47103a43b768c3/e548f/401_missing.png 975w,/static/64ac5f08ea047b91eb47103a43b768c3/3c492/401_missing.png 1300w,/static/64ac5f08ea047b91eb47103a43b768c3/4719e/401_missing.png 1330w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;yml&lt;/code&gt; 파일을 수정하지 않고도 다른 인증 코드를 사용하도록 설정하여
프로젝트를 실행하는 방법에 대해 아래에서 다루겠습니다.&lt;/p&gt;&lt;h3&gt;실제 환경 실습&lt;/h3&gt;&lt;h4&gt;EC2 인스턴스 생성&lt;/h4&gt;&lt;p&gt;해당 프로젝트를 제대로 테스트해보고 싶다면
AWS EC2 인스턴스를 하나 생성하는 것을 권장합니다.
인스턴스 생성시, 로컬 머신에서 &lt;code&gt;~/aws/mys3-key.pem&lt;/code&gt;라는
경로 및 이름으로 pem 키를 저장했다고 가정하겠습니다.
EC2 인스턴스의 퍼블릭 IP 주소는 &lt;code&gt;11.22.33.44&lt;/code&gt;라고 가정하겠습니다.&lt;/p&gt;&lt;h4&gt;프로젝트 빌드 및 전송&lt;/h4&gt;&lt;p&gt;로컬에서 다음의 명령어를 순차적으로 실행하면 프로젝트를 빌드하고,
빌드된 &lt;code&gt;jar&lt;/code&gt; 파일을 EC2 인스턴스에 전송할 수 있습니다.
&lt;code&gt;scp&lt;/code&gt; 명령어의 EC2 주소는 수정해야 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/bugoverdose/MyS3
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; MyS3
./gradlew clean build
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; build/libs
&lt;span class=&quot;token function&quot;&gt;scp&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-i&lt;/span&gt; ~/aws/mys3-key.pem MyS3-0.0.1-SNAPSHOT.jar ubuntu@11.22.33.44:/home/ubuntu&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;프로젝트 실행&lt;/h4&gt;&lt;p&gt;터미널에서 해당 명령어를 실행하면 EC2 인스턴스 내부에 접근할 수 있습니다.
&lt;code&gt;scp&lt;/code&gt; 명령어의 EC2 주소는 수정해야 합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ssh&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-i&lt;/span&gt; ~/aws/mys3-key.pem ubuntu@11.22.33.44&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;빌드된 &lt;code&gt;MyS3-0.0.1-SNAPSHOT.jar&lt;/code&gt; 파일의 경우
아래 명령어를 활용하여 실행할 수 있습니다.
다음과 같이 &lt;code&gt;prod&lt;/code&gt; 프로파일을 사용하도록 설정하고,
&lt;code&gt;SECRET_KEY&lt;/code&gt; 환경변수 값을 지정함으로써 인증코드를 지정할 수 있습니다.
아래 명령어에서는 &lt;code&gt;SECRET_KEY&lt;/code&gt; 값으로 &lt;code&gt;12345&lt;/code&gt;를 주입하였지만,
자유롭게 수정 가능합니다.
자세한 사항은 &lt;code&gt;application.yml&lt;/code&gt; 파일 전문&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;과
&lt;strong&gt;&lt;div to=&quot;/development/spring-profile-and-environment-variables-tutorial&quot;&gt;스프링 프로파일과 환경변수&lt;/div&gt;&lt;/strong&gt;에
관한 이전 게시글을 참고하시기 바랍니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;ubuntu&quot; data-host=&quot;11.22.33.44&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;nohup&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-jar&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-Dspring.profiles.active&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;prod &lt;span class=&quot;token parameter variable&quot;&gt;-DSECRET_KEY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;12345&lt;/span&gt; MyS3-0.0.1-SNAPSHOT.jar &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4&gt;이미지 업로드 전송&lt;/h4&gt;&lt;p&gt;이제 이전과 동일한 이미지 업로드 요청을 EC2 인스턴스로 보내봅시다.
유일한 차이점은 &lt;code&gt;Authorization&lt;/code&gt; 헤더에 담기는 값입니다.
위의 명령어와 같이 &lt;code&gt;SECRET_KEY&lt;/code&gt; 값으로 &lt;code&gt;12345&lt;/code&gt;를 주입한 경우
요청에 따라 아래와 같은 결과가 나올 것입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/c53e9bdb1eb11046301f1823f8139d57/307e7/ec2-prod.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:25.153374233128833%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLklEQVQY0x2OO04cQRiE5xrGwUoLu9M93X8/6J5p0zu7EiCMTYAAC5C8iMCBMye+AuIClhxxLULf5bNmglI9gqpqVrIkrJfsjz7y/fADozOkYSDGSEqZxeKA8+0zf17+8fr7nevHW37+FX69FS72llp25JyotSIiNC44yhRYzaBWlHSMOEdKiZwzl5efebh/4tvND053dwzlE2dfNpzsEiEJpRS8d/OBCc3UGmLEhIASQRuDUgrn/ZyP48g4bnDOoPUaYwzeRdqVptMye6U0Wnezbpxz1GFgW08YUqJrW6Tr2NbKWCt93+O9x3SGEOLM1mvyTlNqJYaISIt3GmMUTXLC0+DZb3puo+GrWnJlVjyXSO1ajlqFVgprLdP49ELE4nuFHGtCMPRZk1OHtZr/j9yijxkFT6MAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;ec2-prod&quot; title=&quot;ec2-prod&quot; src=&quot;/static/c53e9bdb1eb11046301f1823f8139d57/a6d36/ec2-prod.png&quot; srcSet=&quot;/static/c53e9bdb1eb11046301f1823f8139d57/222b7/ec2-prod.png 163w,/static/c53e9bdb1eb11046301f1823f8139d57/ff46a/ec2-prod.png 325w,/static/c53e9bdb1eb11046301f1823f8139d57/a6d36/ec2-prod.png 650w,/static/c53e9bdb1eb11046301f1823f8139d57/e548f/ec2-prod.png 975w,/static/c53e9bdb1eb11046301f1823f8139d57/3c492/ec2-prod.png 1300w,/static/c53e9bdb1eb11046301f1823f8139d57/307e7/ec2-prod.png 1354w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/4f0b2de8384c18d38c18fc3200b9a54e/37048/ec2-wrong.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:24.539877300613497%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABJklEQVQY0y2OsUoDQRRF9ytSCdGEuDPzZnZmdrI7mWQ1NoKKSCoRLG1EEGwCgt9kYWEt+GNHsljc5t7D5VRze0JeTHmdTXieTTjzjrbriDGSUmJ6fEROt+yfP9m//PJ0d8/X24Tv/ZyfjxnvuyPaPLDK/chXIXq6lEjW4LVimVrE2nH03hPbyLDZkrst63JJv+y5vCisu8AqWdY54UMY2bZNVM45fIjYxmOsw4igtKbxfszBNARPrU4R0YgIPrZoazDicU2DMQYRg7WW6vA8lML5sKFPCV3XOBG2w8D5MJBzJsZ2hEOIiFicE0JWlFXPpjj6TrMuBmcVVd84HvvAQ1my84YrNePGLHgsietGszitUUqNh82/zSGHTqkaoxXGaMRotNb8Aa5DoYnaKrMJAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;ec2-wrong&quot; title=&quot;ec2-wrong&quot; src=&quot;/static/4f0b2de8384c18d38c18fc3200b9a54e/a6d36/ec2-wrong.png&quot; srcSet=&quot;/static/4f0b2de8384c18d38c18fc3200b9a54e/222b7/ec2-wrong.png 163w,/static/4f0b2de8384c18d38c18fc3200b9a54e/ff46a/ec2-wrong.png 325w,/static/4f0b2de8384c18d38c18fc3200b9a54e/a6d36/ec2-wrong.png 650w,/static/4f0b2de8384c18d38c18fc3200b9a54e/e548f/ec2-wrong.png 975w,/static/4f0b2de8384c18d38c18fc3200b9a54e/3c492/ec2-wrong.png 1300w,/static/4f0b2de8384c18d38c18fc3200b9a54e/37048/ec2-wrong.png 1352w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;업로드에 성공한 경우, 다음과 같이 브라우저를 통해 EC2 인스턴스에 저장된 파일을 요청할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/387c5d5cd16204c6b1f079f443041a54/c8ad9/ec2-get.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:60.122699386503065%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABuElEQVQoz62SXUsUURjH575P4MXq7rgr+AK67OiuuuSMSCElCLIYCF30EfoOXUR4UR+hO7GQDURXWQ3tMghakGBQsWBJZueMRlI0L7+Ys7M6u1h20YE///O8nB/PORwlm+ljREszmNUoFnUmi1Potw0K2hi5kRyDQ8MkU2kS3SkS3WrkKRI9Kj3JXllLqRmSyV5UNYNiGDPoxgzG9B0Jm5iaZjGv8Tg3wENtWObGJ4rkC5NSo2PjaKMF6Xdn71MqLfJoaYkHc/Ms3JtDsW1BUzaNRgPLamBbFmeWhbAsmQ/rQghsIaK4KSEcHMfhzGm6IwQK/3kpQRAQl+/7shAA7sXF5d5zXTzfx/M8qbCv82yotgnDRLh+OgKz/JqN0izH5Vf8+nZ+7TSt/rYJ44HvedLN7U329Swvs2meZ7o43dvhw8EBR4eHmKZJrVaTb3YdtAPoSv+0/oZ3hX5W8gM87brF6e4Wm7tvKa+tUa1WqVQq1Ov1m4FB9H7nXz7z8cUzVnWN98tP+PG13naDf75yHBoe/X5yfDV9lI/DWvrzhFFRQltg15Vx0AG57L0JGG+U4NA7an/7h78BqU08dxQBHhwAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;ec2-get&quot; title=&quot;ec2-get&quot; src=&quot;/static/387c5d5cd16204c6b1f079f443041a54/a6d36/ec2-get.png&quot; srcSet=&quot;/static/387c5d5cd16204c6b1f079f443041a54/222b7/ec2-get.png 163w,/static/387c5d5cd16204c6b1f079f443041a54/ff46a/ec2-get.png 325w,/static/387c5d5cd16204c6b1f079f443041a54/a6d36/ec2-get.png 650w,/static/387c5d5cd16204c6b1f079f443041a54/e548f/ec2-get.png 975w,/static/387c5d5cd16204c6b1f079f443041a54/3c492/ec2-get.png 1300w,/static/387c5d5cd16204c6b1f079f443041a54/c8ad9/ec2-get.png 1564w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;EC2 인스턴스 내부에서 파일들은 기존과 마찬가지로
&lt;code&gt;~~/static/images/&lt;/code&gt; 경로에서 관리됩니다.
아래와 같은 명령어로 저장된 파일을 확인할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;ubuntu&quot; data-host=&quot;11.22.33.44&quot;&gt;&lt;/span&gt;&lt;span data-user=&quot;ubuntu&quot; data-host=&quot;11.22.33.44&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; ~/static/images/user/
ll
total &lt;span class=&quot;token number&quot;&gt;40&lt;/span&gt;
drwxrwxr-x &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; ubuntu ubuntu  &lt;span class=&quot;token number&quot;&gt;4096&lt;/span&gt; Aug  &lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;:05 ./
drwxrwxr-x &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; ubuntu ubuntu  &lt;span class=&quot;token number&quot;&gt;4096&lt;/span&gt; Aug  &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;14&lt;/span&gt;:25 &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;/
-rw-rw-r-- &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; ubuntu ubuntu &lt;span class=&quot;token number&quot;&gt;31223&lt;/span&gt; Aug  &lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt; 09:54 profile_1.png&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;현재 근황 업데이트&lt;/h2&gt;&lt;p&gt;정적 파일을 제공하는 프로젝트의 성질상 &lt;code&gt;ETag&lt;/code&gt;, &lt;code&gt;Cache-Control&lt;/code&gt; 등의 HTTP 헤더를 활용하거나
HTTP 압축, .webp 확장자 사용 등 다양한 성능 개선 기법을 적용하기 용이하다는 점을 깨달았습니다.&lt;/p&gt;&lt;p&gt;자세한 설명은 &lt;a href=&quot;https://github.com/bugoverdose/MyS3&quot;&gt;README&lt;/a&gt;에서 확인할 수 있습니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;깃헙 저장소&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://github.com/bugoverdose/MyS3&quot;&gt;MyS3&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;이미지 업로드 요청시 &lt;code&gt;fileName&lt;/code&gt; 정보가 누락된 경우, 업로드된 이미지 파일의 파일명을 그대로 사용합니다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;&lt;code&gt;application.yml&lt;/code&gt; 전체 원문&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;spring.servlet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;multipart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;max-file-size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 30MB
    &lt;span class=&quot;token key atrule&quot;&gt;max-request-size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 30MB

&lt;span class=&quot;token key atrule&quot;&gt;server.compression&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;enabled&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean important&quot;&gt;true&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;image.storage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;root-directory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; static/images

&lt;span class=&quot;token key atrule&quot;&gt;security&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;authorization-key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa

&lt;span class=&quot;token key atrule&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;max-age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;600&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 최대 값: 31536000 (1년)&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;spring&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;config.activate.on-profile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; prod
&lt;span class=&quot;token key atrule&quot;&gt;security&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;authorization-key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;SECRET_KEY&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[Spring] Profile: yml 파일 하나로 프로퍼티 관리하기]]></title><description><![CDATA[application.yml 파일을 .gitignore에 넣는다거나, EC2 인스턴스에 yml 파일을 올려놓는 등의 행동을 하는 크루들이 많아 보여 제 방식을 정리해보았습니다. 튜토리얼과 실전 예제를 포함시켰습니다.]]></description><link>https://bugoverdose.github.io/development/spring-profile-and-environment-variables-tutorial/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/spring-profile-and-environment-variables-tutorial/</guid><pubDate>Fri, 29 Jul 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;서비스를 개발하다보면 하나의 서버 애플리케이션을 다양한 환경에서 실행할 일이 생깁니다.
그리고 H2 DB를 사용하는 테스트 환경과 MySQL DB를 사용하는 배포 환경에서
사용되는 환경변수 값이 서로 다른 것은 당연한 일이겠죠.&lt;/p&gt;&lt;p&gt;해당 글에서는 일반적인 스프링 부트 애플리케이션에서
하나의 &lt;code&gt;application.yml&lt;/code&gt; 파일을 통해 각 &lt;strong&gt;프로파일&lt;/strong&gt;별로 프로퍼티 설정들을 관리하고,
환경변수를 주입하는 몇 가지 방법에 대해 설명하고자 합니다.&lt;/p&gt;&lt;p&gt;당장 현실에서 사용할 수 있는 방법을 원한다면
하단의 &lt;strong&gt;실제 프로젝트 예시&lt;/strong&gt; 섹션만 보는 것을 추천합니다.&lt;/p&gt;&lt;h2&gt;프로퍼티와 JVM 시스템 파라미터&lt;/h2&gt;&lt;p&gt;우선 스프링 애플리케이션이 실행되는 포트 번호를 수정하는 예시를 통해
프로퍼티를 설정하는 방법에 대해 가볍게 알아봅시다.
개인적인 취향에 따라 &lt;code&gt;application.properties&lt;/code&gt; 대신
&lt;code&gt;application.yml&lt;/code&gt;만을 사용합니다.&lt;/p&gt;&lt;p&gt;기본적으로 스프링 부트 애플리케이션을 실행하게 되면
아래와 같이 8080 포트에서 톰캣 서버가 디폴트로 실행됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9fb06646abbc211efed74e4cea598e30/9ce1c/port-default.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:12.269938650306749%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAcElEQVQI1x3MOQ7DIBQAUR8GItHYEmD+AiRSili+/4EmMsUrppnN3Um1ElUJvRPciWak4yDtO6cqPib26GN5WsxRd+acmNlSSmFbw5yJrRGfmdoahjF4ifCVk/s9uIZzdVt+rtyz82kVEaG1Rs55Df9zfEGZFi195wAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;톰캣 디폴트 포트 8080&quot; title=&quot;톰캣 디폴트 포트 8080&quot; src=&quot;/static/9fb06646abbc211efed74e4cea598e30/a6d36/port-default.png&quot; srcSet=&quot;/static/9fb06646abbc211efed74e4cea598e30/222b7/port-default.png 163w,/static/9fb06646abbc211efed74e4cea598e30/ff46a/port-default.png 325w,/static/9fb06646abbc211efed74e4cea598e30/a6d36/port-default.png 650w,/static/9fb06646abbc211efed74e4cea598e30/e548f/port-default.png 975w,/static/9fb06646abbc211efed74e4cea598e30/3c492/port-default.png 1300w,/static/9fb06646abbc211efed74e4cea598e30/9ce1c/port-default.png 1886w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이때 모종의 이유로 포트번호를 8080 대신 다른 포트로 수정하고 싶다면
&lt;code&gt;main/resources&lt;/code&gt; 경로에 &lt;code&gt;application.yml&lt;/code&gt; 파일(이하, &lt;code&gt;yml&lt;/code&gt; 파일)을 생성하고
아래와 같이 포트 번호를 기재해주면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;server.port&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5000&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다시 서버를 실행시키면 5000 포트에서 실행되는 것을 볼 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/15b696449baff36e4ae677056f03bf4b/0e0c4/port-5000.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:11.65644171779141%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAd0lEQVQI1z3MSw7CMAwA0d6FFqiQWilNHcd2TsAN+N7/FIPSBYuRZvUGd+eSM5MqozujOedSmJeF27qym1OiodH+39uqoR60CGqtqCopJYYOXlNiKoXR7IAnM07RmEV41I1PK7xDePnO0/LRN4S7JHYRROTAOvgDgNhCCgiQl1EAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;톰캣 포트 5000&quot; title=&quot;톰캣 포트 5000&quot; src=&quot;/static/15b696449baff36e4ae677056f03bf4b/a6d36/port-5000.png&quot; srcSet=&quot;/static/15b696449baff36e4ae677056f03bf4b/222b7/port-5000.png 163w,/static/15b696449baff36e4ae677056f03bf4b/ff46a/port-5000.png 325w,/static/15b696449baff36e4ae677056f03bf4b/a6d36/port-5000.png 650w,/static/15b696449baff36e4ae677056f03bf4b/e548f/port-5000.png 975w,/static/15b696449baff36e4ae677056f03bf4b/3c492/port-5000.png 1300w,/static/15b696449baff36e4ae677056f03bf4b/0e0c4/port-5000.png 1884w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h3&gt;JVM 시스템 파라미터의 활용&lt;/h3&gt;&lt;p&gt;한편 이미 배포된 서버를 다른 포트 번호에서 실행되도록 수정해야 하는 경우도 존재합니다.
이 경우 &lt;code&gt;yml&lt;/code&gt; 파일의 값을 수정하고 애플리케이션을 다시 빌드하여 재실행시키는 방법이 있겠죠.
그러나 &lt;strong&gt;JVM 시스템 파라미터&lt;/strong&gt;를 활용하면
&lt;strong&gt;이미 빌드된 애플리케이션에 특정 프로퍼티 값을 주입하여 실행&lt;/strong&gt;하는 것도 가능합니다.&lt;/p&gt;&lt;p&gt;이해를 위해 우선 스프링 부트 애플리케이션을 &lt;code&gt;jar&lt;/code&gt; 파일로 빌드하고, 실행시키고, 종료시키는 명령어를 배워봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# gradle을 사용하여 애플리케이션 빌드&lt;/span&gt;
./gradlew build

&lt;span class=&quot;token comment&quot;&gt;# 빌드된 .jar 파일이 있는 장소로 이동&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; build/libs

&lt;span class=&quot;token comment&quot;&gt;# 빌드된 .jar 파일 실행&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-jar&lt;/span&gt; 애플리케이션-0.0.1-SNAPSHOT.jar &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 특정 포트번호에서 실행되는 프로세스를 종료&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;kill&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;lsof&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; -i:포트번호&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 명령어를 실행한다면 기본적으로 &lt;strong&gt;빌드될 때 포함된&lt;/strong&gt;
&lt;code&gt;yml&lt;/code&gt; 파일에 설정한 &lt;code&gt;server.port&lt;/code&gt; 프로퍼티 값을 활용하게 됩니다.
저희의 경우 위에서 설정한 5000 포트가 그대로 활용되겠죠.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/15b696449baff36e4ae677056f03bf4b/0e0c4/port-5000-terminal.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:11.65644171779141%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAd0lEQVQI1z3MSw7CMAwA0d6FFqiQWilNHcd2TsAN+N7/FIPSBYuRZvUGd+eSM5MqozujOedSmJeF27qym1OiodH+39uqoR60CGqtqCopJYYOXlNiKoXR7IAnM07RmEV41I1PK7xDePnO0/LRN4S7JHYRROTAOvgDgNhCCgiQl1EAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;빌드될 때 포함된 5000 포트&quot; title=&quot;빌드될 때 포함된 5000 포트&quot; src=&quot;/static/15b696449baff36e4ae677056f03bf4b/a6d36/port-5000-terminal.png&quot; srcSet=&quot;/static/15b696449baff36e4ae677056f03bf4b/222b7/port-5000-terminal.png 163w,/static/15b696449baff36e4ae677056f03bf4b/ff46a/port-5000-terminal.png 325w,/static/15b696449baff36e4ae677056f03bf4b/a6d36/port-5000-terminal.png 650w,/static/15b696449baff36e4ae677056f03bf4b/e548f/port-5000-terminal.png 975w,/static/15b696449baff36e4ae677056f03bf4b/3c492/port-5000-terminal.png 1300w,/static/15b696449baff36e4ae677056f03bf4b/0e0c4/port-5000-terminal.png 1884w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;그런데 해당 &lt;code&gt;.jar&lt;/code&gt; 파일을 실행시키는 명령어에
다음과 같이 &lt;code&gt;-Dserver.port=7000&lt;/code&gt;라는 내용을 추가하게 되면 어떻게 될까요?&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# -D키=값 형식으로 JVM 시스템 파라미터 활용&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-Dserver.port&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;7000&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-jar&lt;/span&gt; 애플리케이션-0.0.1-SNAPSHOT.jar &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;실로 놀랍게도 동일한 애플리케이션이 다음과 같이 7000 포트에서 실행되는 것을 확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9b7d0a3ace5323ad6f872bf705ea1eee/6e52c/port-7000-terminal.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:7.361963190184048%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAABYlAAAWJQFJUiTwAAAARklEQVQI1y3FMQ6AIAxA0W4mDQw0EKEQNkHvf8DvoMPLE40RSYb0jsz5/TtSYvvJMwf3cFZvXF7ZvbG84iWTS8HMCCGgqrzOcRjnbKibsQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;빌드될 때 주입된 7000 포트&quot; title=&quot;빌드될 때 주입된 7000 포트&quot; src=&quot;/static/9b7d0a3ace5323ad6f872bf705ea1eee/a6d36/port-7000-terminal.png&quot; srcSet=&quot;/static/9b7d0a3ace5323ad6f872bf705ea1eee/222b7/port-7000-terminal.png 163w,/static/9b7d0a3ace5323ad6f872bf705ea1eee/ff46a/port-7000-terminal.png 325w,/static/9b7d0a3ace5323ad6f872bf705ea1eee/a6d36/port-7000-terminal.png 650w,/static/9b7d0a3ace5323ad6f872bf705ea1eee/e548f/port-7000-terminal.png 975w,/static/9b7d0a3ace5323ad6f872bf705ea1eee/3c492/port-7000-terminal.png 1300w,/static/9b7d0a3ace5323ad6f872bf705ea1eee/6e52c/port-7000-terminal.png 1948w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이는 &lt;code&gt;yml&lt;/code&gt; 파일에 포함된 &lt;code&gt;server.port&lt;/code&gt; 프로퍼티 값이
&lt;code&gt;7000&lt;/code&gt;이라는 값으로 &lt;strong&gt;완전히 덮어써진 체 실행&lt;/strong&gt;되는 것을 의미합니다.
&lt;code&gt;yml&lt;/code&gt; 파일에 &lt;code&gt;server.port&lt;/code&gt; 정보를 기재하지 않은 경우에도
JVM 시스템 파라미터를 통해 프로퍼티 값을 전달한다면 마찬가지로 7000 포트로 실행됩니다.&lt;/p&gt;&lt;h2&gt;환경변수의 활용&lt;/h2&gt;&lt;p&gt;이번에는 &lt;code&gt;yml&lt;/code&gt; 파일의 프로퍼티 값을 전달받아
스프링 애플리케이션 내부에서 사용하는 경우를 다뤄보겠습니다.&lt;/p&gt;&lt;p&gt;다음과 같이 &lt;code&gt;security.jwt.token.secret-key&lt;/code&gt;라는 환경변수를
주입받아 사용하는 스프링 빈을 하나 정의해봅시다.
&lt;code&gt;security.jwt.token.secret-key&lt;/code&gt;는 스프링에서
별도로 존재하는 프로퍼티가 아니라 &lt;strong&gt;개발자가 임의로 만든 프로퍼티&lt;/strong&gt;입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ComponentWithSecretKey&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; secretKey&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ComponentWithSecretKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;${security.jwt.token.secret-key}&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; secretKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;secretKey : &amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; secretKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;secretKey &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; secretKey&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 상태에서 필요한 환경변수 값을 설정하지 않고 애플리케이션을 실행하려는 경우,
당연히 필요한 정보가 없기 때문에 예외가 발생하며 종료하게 됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9dac58172d1cceab0e8c24e89c1fda47/b7756/no-env-var.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:9.202453987730062%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAdUlEQVQI1yWM2wqDMBAF/ZpCBW0RzGU3GxMoPrW1+P//MpL0YeAwB2ZQVczsT84UFc6snFk41PMVxyeunXdY+aXQ/SG+7/bvy4PXc2JfZoYWzC1UCrVWzDJWake3jaAJJ4KLwhpip7mYjKCKF2FxjnGaud1HLpaAQ91YThv7AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;환경변수 값이 누락된 경우&quot; title=&quot;환경변수 값이 누락된 경우&quot; src=&quot;/static/9dac58172d1cceab0e8c24e89c1fda47/a6d36/no-env-var.png&quot; srcSet=&quot;/static/9dac58172d1cceab0e8c24e89c1fda47/222b7/no-env-var.png 163w,/static/9dac58172d1cceab0e8c24e89c1fda47/ff46a/no-env-var.png 325w,/static/9dac58172d1cceab0e8c24e89c1fda47/a6d36/no-env-var.png 650w,/static/9dac58172d1cceab0e8c24e89c1fda47/e548f/no-env-var.png 975w,/static/9dac58172d1cceab0e8c24e89c1fda47/3c492/no-env-var.png 1300w,/static/9dac58172d1cceab0e8c24e89c1fda47/b7756/no-env-var.png 2294w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;실행이 아니라 &lt;code&gt;./gradlew build&lt;/code&gt; 등의 명령어를 통해 &lt;code&gt;.jar&lt;/code&gt; 파일로 빌드하려는 경우여도 크게 다르지 않습니다.
&lt;code&gt;build.gradle&lt;/code&gt; 파일에는 기본적으로 테스트 코드의 통과 여부를 확인하는 task가 포함되어있는데,
이처럼 필수적인 환경변수가 누락되어 있으면 다음과 같이 테스트 자체가 실패하기 때문입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/4a4f1ab724e06821bece99529dee85c8/cd13d/build-without-env-var.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:26.993865030674847%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAApElEQVQY05WQawrDIBAGvU0Td31iNCRW097/Tl9xSaGFQtsfw8CKsqNKKWFZFnjv4ZyDMQbMDGstrDFwWmOe569orQUVQsC+7+itobWG4zjEvXfcesf9WuV8UGvFtm3CWCTGiHH/ucywImaEGFHWFTlnrKdLzuJcihTIrJQ3v5YNRpVK3iOHgHQONREu0/RT5sfkzIxBYUYkgiNCHH9IJI/TnzwAATSbvNK9o5cAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;환경변수 값이 누락된 경우&quot; title=&quot;환경변수 값이 누락된 경우&quot; src=&quot;/static/4a4f1ab724e06821bece99529dee85c8/a6d36/build-without-env-var.png&quot; srcSet=&quot;/static/4a4f1ab724e06821bece99529dee85c8/222b7/build-without-env-var.png 163w,/static/4a4f1ab724e06821bece99529dee85c8/ff46a/build-without-env-var.png 325w,/static/4a4f1ab724e06821bece99529dee85c8/a6d36/build-without-env-var.png 650w,/static/4a4f1ab724e06821bece99529dee85c8/e548f/build-without-env-var.png 975w,/static/4a4f1ab724e06821bece99529dee85c8/3c492/build-without-env-var.png 1300w,/static/4a4f1ab724e06821bece99529dee85c8/cd13d/build-without-env-var.png 1958w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이때 &lt;code&gt;yml&lt;/code&gt; 파일에 다음과 같이 환경변수 값을 추가하고
애플리케이션을 실행하게 되면 애플리케이션은 문제 없이 동작합니다.
터미널에 출력되는 문구를 통해 환경변수 값이 그대로 전달되었음을 알 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;security.jwt.token.secret-key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; secret_value_that_is_really_long&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/d36d3435cbeb99e5a63aa2c37a4e30d1/1cfc2/env-var-raw.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:24.539877300613497%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA8klEQVQY023QS5KCMBRGYbbSE4QERAiQkBcGH7Sl9v53c7qgHDr46vzDWzd7p8hqDQ9v+XXT7hEsrzlw1SNe50Rd8lCRVXlsLYhtg5EFjRCUpaBpGlJKaK3JrmPPOiqufctt6Pa99f5xUSdiLXCiIFQlXhZMsmCVOUEcOAiJlJKqqvZmygfcOdFqQ616TJzprWNwfqdD3NtqjbKW0QcaM7E4S6gFByGQQiA+sqfu+dOK19jt3tse2r2bZ3/kdiy4VOVHwbkqecuc+duF9zkyG01yE2e7MVy8Y3ETbhhYzA+LzkndTFIeVUt0e6ITJfWXH/4DCOGiyiLxpX8AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;yml에 직접 환경변수 값을 기재하는 경우&quot; title=&quot;yml에 직접 환경변수 값을 기재하는 경우&quot; src=&quot;/static/d36d3435cbeb99e5a63aa2c37a4e30d1/a6d36/env-var-raw.png&quot; srcSet=&quot;/static/d36d3435cbeb99e5a63aa2c37a4e30d1/222b7/env-var-raw.png 163w,/static/d36d3435cbeb99e5a63aa2c37a4e30d1/ff46a/env-var-raw.png 325w,/static/d36d3435cbeb99e5a63aa2c37a4e30d1/a6d36/env-var-raw.png 650w,/static/d36d3435cbeb99e5a63aa2c37a4e30d1/1cfc2/env-var-raw.png 900w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;그런데 개발 과정에서 환경변수를 다룰 때 저희는 다양한 문제 상황에 직면하게 됩니다.
동일한 환경변수에 &lt;strong&gt;상황에 따라 다른 값이 주입되어야 하는 경우&lt;/strong&gt;도 존재할 수 있으며,
이러한 값들을 어떻게 &lt;strong&gt;외부로 노출되지 않도록 관리할 것인가&lt;/strong&gt;에 대해서도 고민해야 합니다.
이러한 문제에 대한 다양한 해결방안 중 가장 관리 포인트를 최소화하는 방안은
스프링 프로파일을 활용하는 것이라고 생각합니다.&lt;/p&gt;&lt;h2&gt;스프링 프로파일과 환경변수&lt;/h2&gt;&lt;p&gt;이제 본격적으로 스프링 프로파일을 활용하여
하나의 &lt;code&gt;yml&lt;/code&gt; 파일 내에서 다양한 프로퍼티 값들을 관리하는 방법에 대해
알아보도록 하겠습니다.&lt;/p&gt;&lt;p&gt;우선 두 개의 환경변수를 주입받아 사용하는 스프링 빈을 만들어봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ComponentWithSecretKey&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; commonData&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; secretKey&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ComponentWithSecretKey&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;${common.data}&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; commonData&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                  &lt;span class=&quot;token annotation punctuation&quot;&gt;@Value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;${security.jwt.token.secret-key}&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; secretKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;commonData : &amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; commonData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;secretKey : &amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; secretKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;commonData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; commonData&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;secretKey &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; secretKey&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 &lt;code&gt;yml&lt;/code&gt; 파일에 다음과 같이 작성해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 디폴트로 사용하는 프로파일은 test&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;spring.profiles.active&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; test
&lt;span class=&quot;token key atrule&quot;&gt;common.data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;모든 프로파일들에서 공통으로 사용되는 데이터&amp;quot;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 현재 프로파일이 prod인 경우, 해당 프로퍼티들을 사용&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;spring.config.activate.on-profile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; prod
&lt;span class=&quot;token key atrule&quot;&gt;security.jwt.token.secret-key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;prod 프로파일일 때 사용되는 secret key&amp;quot;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 현재 프로파일이 test인 경우, 해당 프로퍼티들을 사용&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;spring.config.activate.on-profile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; test
&lt;span class=&quot;token key atrule&quot;&gt;security.jwt.token.secret-key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;test 프로파일일 때 사용되는 secret key&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;설명하자면 &lt;code&gt;---&lt;/code&gt;를 통해 &lt;code&gt;yml&lt;/code&gt; 파일 내에서 &lt;strong&gt;프로파일별 경계를 구분&lt;/strong&gt;하고,
&lt;code&gt;spring.config.activate.on-profile&lt;/code&gt; 값을 통해
&lt;strong&gt;해당 프로파일이 선택되었을 때만 해당 영역의 프로퍼티들이 주입&lt;/strong&gt;됩니다.
&lt;code&gt;spring.config.activate.on-profile&lt;/code&gt; 프로퍼티가 없는 섹션의
프로퍼티들은 모든 프로파일들에서 공통적으로 사용되며,
위와 같이 &lt;code&gt;yml&lt;/code&gt; 파일의 최상단에 위치시키지 않더라도 마찬가지로 동작합니다.
&lt;code&gt;spring.profiles.active&lt;/code&gt;는 디폴트로 사용될 프로파일을 선택합니다.&lt;/p&gt;&lt;p&gt;프로파일명으로는 주로 &lt;code&gt;dev&lt;/code&gt;, &lt;code&gt;prod&lt;/code&gt;, &lt;code&gt;test&lt;/code&gt;, &lt;code&gt;local&lt;/code&gt; 등이 사용되지만
예약어 같은건 아니고 아무 이름이나 사용하면 됩니다.&lt;/p&gt;&lt;p&gt;글로만 설명하는 것보다 실제로 실행했을 때 어떻게 동작하는지 확인해봅시다.&lt;/p&gt;&lt;p&gt;위와 같이 설정한 프로젝트를 있는 그대로 실행하게 되면 아래와 같이 출력됩니다.
&lt;code&gt;common.data&lt;/code&gt; 값은 최상단에 설정한 그대로 주입되었으며,
&lt;code&gt;test&lt;/code&gt; 프로파일 섹션에 설정한 &amp;quot;test 프로파일일 때 사용되는 secret key&amp;quot;라는 내용이
&lt;code&gt;security.jwt.token.secret-key&lt;/code&gt;로 주입되었음을 확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/bde393796eea523ec1050f183650d80a/7b67d/test-profile.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:39.877300613496935%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABZ0lEQVQoz1WRS47bMBAFdZaM7QmpRBIlimz+RHmySRADyf0vUwHp8SKLQkMt4KFec8jlIMZIShkrBrc5ltmgR82+74zWcvWea4hcRbjZndEYfsvOnyw8guMRdh7R8Tc6huM4yDlzlAMXV7wVzLyitUZE0CK8pcQlNiJf6snNCyElUq3kWgmlYEVwITKUUkg5kXNhDy3QPw21xjmH9p6LSLe7htBRxpBi4CiFknOnt4zxZfgMdJ+BL0PvfTfsgTFyyblb6nnurRoppT6ttRhjGMpxkPrPgg0G1wyXtd/QO4cKgUszE+F923hfN9SycNZK+TzXi2Y5nKVQc6JNLwthc2zTwqjV84Yh8NYepBmmxG3f0dPE/X7nPE9aw1prn+17+JkDNQg/cuIjC4dz5N0i83fmaer1vi7LE2M6ap5ZlqVXbGzb1mfbDb+87QH34PmIgWxXUmP6xqhUv+X4QqknWve9Uuo/2u4fCccDK0IEPL8AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;test 프로파일&quot; title=&quot;test 프로파일&quot; src=&quot;/static/bde393796eea523ec1050f183650d80a/a6d36/test-profile.png&quot; srcSet=&quot;/static/bde393796eea523ec1050f183650d80a/222b7/test-profile.png 163w,/static/bde393796eea523ec1050f183650d80a/ff46a/test-profile.png 325w,/static/bde393796eea523ec1050f183650d80a/a6d36/test-profile.png 650w,/static/bde393796eea523ec1050f183650d80a/e548f/test-profile.png 975w,/static/bde393796eea523ec1050f183650d80a/3c492/test-profile.png 1300w,/static/bde393796eea523ec1050f183650d80a/7b67d/test-profile.png 2240w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이 상태에서 사용될 프로파일을 수정하여 인텔리제이에서 실행하는 방법은 간단합니다.
우측 상단에서 &lt;code&gt;Edit Configurations&lt;/code&gt;를 선택하고,
&lt;code&gt;Active profiles&lt;/code&gt;에 실행할 때 적용하려는 프로파일을 기재하는 것입니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/460376247e6e820696db44bb20832b1d/27b8e/intellij-edit-configurations.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:33.12883435582822%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABLUlEQVQoz6XJy0rDQACF4TyIutHaMDNJBUtrjZlkkvSS1npr6xXERVXQIr6AIIiSR/AB3BRpX/GX1AsK4sbFx3/gWJ4O+W4jiOgfHBFECV47RkeaZs+ns9lgeyul222x1U2/pK2YOPQwjXVM6mP5WvNDoAnCEB0YtF+l2hziHE9ILl9pjyY0ryZ0b6ak1xPaoym1szFy8IJzOGal/4zleimfSj92G7fWoBQc4O3fkZ4+sDvM2BlmDC4zehcZe+cZnbMnkpNH9OCecnqLNV/p85uFSp+5yj6Fch2/WcWPfYwJMbHBRGbWOIkwcUhSj/B1jdU1D0s6Lr9S7xXKZdl2KdgOS7Ziqago5P3YeReLkqJwsWUJSwjBX2ROCtQf8t9RarYtISX/JgRKKaSUvAGSOe+b3K/FcQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;인텔리제이 Edit config&quot; title=&quot;인텔리제이 Edit config&quot; src=&quot;/static/460376247e6e820696db44bb20832b1d/a6d36/intellij-edit-configurations.png&quot; srcSet=&quot;/static/460376247e6e820696db44bb20832b1d/222b7/intellij-edit-configurations.png 163w,/static/460376247e6e820696db44bb20832b1d/ff46a/intellij-edit-configurations.png 325w,/static/460376247e6e820696db44bb20832b1d/a6d36/intellij-edit-configurations.png 650w,/static/460376247e6e820696db44bb20832b1d/27b8e/intellij-edit-configurations.png 836w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/44a66e3159d060c67ac6d01afeec15bc/c4451/intellij-profile.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:59.50920245398773%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABoElEQVQoz22Sa5KlIAyF3dd4FUIIL194Z/9bOVOJXrure358lUAgOR4cXs7j5ciIuaJtB3JbUdcNZVnhQrTa5Ok5p/k4X/emZy9YHIgFSqoNy35Yo09TFxgUIygKSNJDkAwVMlFATMWESK7wLFdDloxUmimq624NXEiY8xtTPjHFFePs8Gf6D7M3tZ/18Ek4FVOpSGnX1HLlqS5W13Pj3eBhmm+u2qAy9ZJ+xmfS94njj/V3RvWPlwtK5u0QJGHZDlPhiO0RfqKGqy3m1+2ZWjXOhIkLJq54kdj9YSaGlIqYsnmnA0JMYDNfc7F9ThkxF/NabdHcHksfjeN9PmPwMaH2N8p+IqnS9UC2uFvMe7ea5duBoK8pGZQKKH8RSgWXhkEC46wNvVZsuaByRIti8ZO3mO4oyJ6QnP+F3HHobkaThMYBWRpSbKCZEXxEcBH0wIbuBS+/0X0qGOr0QvMezTnsUdBzwVkKes5GI0L1hCWw0Sj8F60VVTizYO3vh+XoWI8Tbe/Y+htR/8XasJ9/rzPHiWXvWPuJ5fhiO9+gmPAPROayTQHrYIwAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;인텔리제이 프로파일&quot; title=&quot;인텔리제이 프로파일&quot; src=&quot;/static/44a66e3159d060c67ac6d01afeec15bc/a6d36/intellij-profile.png&quot; srcSet=&quot;/static/44a66e3159d060c67ac6d01afeec15bc/222b7/intellij-profile.png 163w,/static/44a66e3159d060c67ac6d01afeec15bc/ff46a/intellij-profile.png 325w,/static/44a66e3159d060c67ac6d01afeec15bc/a6d36/intellij-profile.png 650w,/static/44a66e3159d060c67ac6d01afeec15bc/e548f/intellij-profile.png 975w,/static/44a66e3159d060c67ac6d01afeec15bc/3c492/intellij-profile.png 1300w,/static/44a66e3159d060c67ac6d01afeec15bc/c4451/intellij-profile.png 1450w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이처럼 &lt;code&gt;prod&lt;/code&gt; 프로파일을 활성화시킨 상태로 애플리케이션을 재실행하게 되면,
최상단 영역에 설정한 &lt;code&gt;common.data&lt;/code&gt; 프로퍼티는 하드코딩한 값이 그대로 주입됩니다.
그러나 &lt;code&gt;spring.profiles.active&lt;/code&gt; 프로퍼티의 값은 &lt;code&gt;test&lt;/code&gt; 대신
&lt;strong&gt;외부로부터 주입받은 &lt;code&gt;prod&lt;/code&gt;로 덮어씌어져 실행&lt;/strong&gt;됩니다.
이에 따라 &lt;code&gt;security.jwt.token.secret-key&lt;/code&gt; 프로퍼티에는
&lt;code&gt;prod&lt;/code&gt; 프로파일 섹션에 설정한 &lt;code&gt;&amp;quot;prod 프로파일일 때 사용되는 secret key&amp;quot;&lt;/code&gt;라는 내용이 주입됩니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/552a802108b1b99ad5e4a0c4fd896986/e8f1b/prod-profile.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:39.263803680981596%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABX0lEQVQoz2WRzW7bMBCE9Sy1ZUhyUpHiP7mUJRdwT0Vz6Pu/yleIboIUOQxm98APM8uu1opIJUnAOYNfItN1QiuNTYmz95xLaeqP3VqyXfizFt5q4k0Sv0ts/isHOqlCyYVY/H/A5QDmzCkE+gMWE2cRvokwO4+sN1Kt5HXFxYQJAeP9V6DT4V9Chcm5JexTpo+RPmd6a1mMYbvdkFKoIpSS2xxDoKsHsMjXhFpjS3kmTPlZu1Z6YzDWNmBKieNkMUaWZUEpRSci5CyE7LHOYHVg/JTwFFO73cV7hmXhohTWOe73O6UUjvfv8kflrQprKeRsCW4h6cB1HFpCVyuno2r7FGmVL/OM857H48G6rmzb1nzf95a221Jki4EfNVO9oRhLUt/Rry+8KsUwzwyHa/2hl3luFbXWzY0xbZ7n+QncY+DnWtmCQ5xhNwo9jQzTxPWzxrH5NE2M4/jh7zr2v8B4As+5ETi4AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;prod 프로파일&quot; title=&quot;prod 프로파일&quot; src=&quot;/static/552a802108b1b99ad5e4a0c4fd896986/a6d36/prod-profile.png&quot; srcSet=&quot;/static/552a802108b1b99ad5e4a0c4fd896986/222b7/prod-profile.png 163w,/static/552a802108b1b99ad5e4a0c4fd896986/ff46a/prod-profile.png 325w,/static/552a802108b1b99ad5e4a0c4fd896986/a6d36/prod-profile.png 650w,/static/552a802108b1b99ad5e4a0c4fd896986/e548f/prod-profile.png 975w,/static/552a802108b1b99ad5e4a0c4fd896986/3c492/prod-profile.png 1300w,/static/552a802108b1b99ad5e4a0c4fd896986/e8f1b/prod-profile.png 2246w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h3&gt;환경변수 하드코딩의 문제점&lt;/h3&gt;&lt;p&gt;그런데 문제는 DB 관련 정보(주소, 사용자명, 비밀번호)와 같이
외부로부터 숨겨야 하는 프로퍼티 값이 존재하는 경우입니다.&lt;/p&gt;&lt;p&gt;이러한 상황에서 &lt;code&gt;yml&lt;/code&gt; 파일에 모든 비밀 정보를 직접적으로 하드코딩하고,
&lt;code&gt;yml&lt;/code&gt; 파일 자체를 &lt;code&gt;.gitignore&lt;/code&gt;에 추가하여
&lt;strong&gt;깃의 관리 대상에서 완전히 누락시키는 방안&lt;/strong&gt;을 생각해볼 수 있습니다.
그러나 해당 방법의 문제점은 개발 프로세스가 굉장히 번거로워진다는 점입니다.
예를 들어 개발자마다 로컬 머신에 자신만의 &lt;code&gt;yml&lt;/code&gt; 파일을 관리하여 작업을 하고,
Jenkins 등 빌드 작업이 수행되는 곳에 &lt;code&gt;yml&lt;/code&gt; 파일을 만들어 올려놓는다면
&lt;strong&gt;&lt;code&gt;yml&lt;/code&gt; 파일의 내용이 수정될 때마다 수작업으로 모든 yml 파일들을 고쳐야 합니다.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;특히 &lt;code&gt;yml&lt;/code&gt; 파일에서 &lt;strong&gt;외부에 숨겨야 하는 비밀 정보는 극히 일부분에 불과&lt;/strong&gt;합니다.
외부에 노출되어도 상관 없는 기본적인 설정들이 조금 수정될 때마다
모든 컴퓨터에서 관리되는 &lt;code&gt;yml&lt;/code&gt; 파일들을 전부 수정해야 한다면 이는 너무나도 큰 비용입니다.&lt;/p&gt;&lt;p&gt;바로 이러한 점 때문에 우리는 &lt;strong&gt;깃헙에 &lt;code&gt;yml&lt;/code&gt; 파일을 올려놓은 상태에서&lt;/strong&gt;
오직 숨겨야 하는 비밀정보들만을 &lt;strong&gt;&lt;code&gt;yml&lt;/code&gt; 파일 내에서 숨길 방법&lt;/strong&gt;이 필요합니다.&lt;/p&gt;&lt;h3&gt;yml 파일 내 환경변수 설정&lt;/h3&gt;&lt;p&gt;이를 위해 저희는 &lt;code&gt;yml&lt;/code&gt; 파일 내에 &lt;strong&gt;환경변수를 설정&lt;/strong&gt;하고
프로그램이 &lt;strong&gt;실행될 때 외부로부터 주입&lt;/strong&gt;받는 방법을 생각해볼 수 있습니다.&lt;/p&gt;&lt;p&gt;설정하는 방법 자체는 간단합니다.
아래 예시와 같이 환경변수의 이름(&lt;code&gt;secret-key&lt;/code&gt;)을 프로퍼티의 &amp;#x27;값&amp;#x27;에
해당되는 부분에 &lt;code&gt;${환경변수}&lt;/code&gt; 형식으로 추가하면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;spring.profiles.active&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; test
&lt;span class=&quot;token key atrule&quot;&gt;common.data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;#x27;모든 프로파일들에서 공통으로 사용되는 데이터&amp;#x27;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;spring.config.activate.on-profile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; prod
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;security.jwt.token.secret-key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;secret&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;spring.config.activate.on-profile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; test
&lt;span class=&quot;token key atrule&quot;&gt;security.jwt.token.secret-key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;test 프로파일일 때 사용되는 secret key&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 해당 프로젝트는 디폴트 프로파일인 &lt;code&gt;test&lt;/code&gt;로 실행될 때는
이전과 마찬가지로 문제 없이 빌드 및 실행될 수 있습니다.
동시에 &lt;code&gt;prod&lt;/code&gt; 프로파일로 실행될 때에는 특정 값을 주입받아 실행될 수 있습니다.&lt;/p&gt;&lt;h3&gt;인텔리제이에서의 환경변수 설정&lt;/h3&gt;&lt;p&gt;그러면 인텔리제이에서 환경변수를 주입하여 실행해보겠습니다.
우선 위에서 설명했듯이 우측 상단에서 &lt;code&gt;Edit Configurations&lt;/code&gt;를 선택하면
&lt;code&gt;Active profiles&lt;/code&gt;에 프로파일을 기재할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/460376247e6e820696db44bb20832b1d/27b8e/intellij-edit-configurations.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:33.12883435582822%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABLUlEQVQoz6XJy0rDQACF4TyIutHaMDNJBUtrjZlkkvSS1npr6xXERVXQIr6AIIiSR/AB3BRpX/GX1AsK4sbFx3/gWJ4O+W4jiOgfHBFECV47RkeaZs+ns9lgeyul222x1U2/pK2YOPQwjXVM6mP5WvNDoAnCEB0YtF+l2hziHE9ILl9pjyY0ryZ0b6ak1xPaoym1szFy8IJzOGal/4zleimfSj92G7fWoBQc4O3fkZ4+sDvM2BlmDC4zehcZe+cZnbMnkpNH9OCecnqLNV/p85uFSp+5yj6Fch2/WcWPfYwJMbHBRGbWOIkwcUhSj/B1jdU1D0s6Lr9S7xXKZdl2KdgOS7Ziqago5P3YeReLkqJwsWUJSwjBX2ROCtQf8t9RarYtISX/JgRKKaSUvAGSOe+b3K/FcQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;인텔리제이 Edit config&quot; title=&quot;인텔리제이 Edit config&quot; src=&quot;/static/460376247e6e820696db44bb20832b1d/a6d36/intellij-edit-configurations.png&quot; srcSet=&quot;/static/460376247e6e820696db44bb20832b1d/222b7/intellij-edit-configurations.png 163w,/static/460376247e6e820696db44bb20832b1d/ff46a/intellij-edit-configurations.png 325w,/static/460376247e6e820696db44bb20832b1d/a6d36/intellij-edit-configurations.png 650w,/static/460376247e6e820696db44bb20832b1d/27b8e/intellij-edit-configurations.png 836w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/44a66e3159d060c67ac6d01afeec15bc/c4451/intellij-profile.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:59.50920245398773%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABoElEQVQoz22Sa5KlIAyF3dd4FUIIL194Z/9bOVOJXrure358lUAgOR4cXs7j5ciIuaJtB3JbUdcNZVnhQrTa5Ok5p/k4X/emZy9YHIgFSqoNy35Yo09TFxgUIygKSNJDkAwVMlFATMWESK7wLFdDloxUmimq624NXEiY8xtTPjHFFePs8Gf6D7M3tZ/18Ek4FVOpSGnX1HLlqS5W13Pj3eBhmm+u2qAy9ZJ+xmfS94njj/V3RvWPlwtK5u0QJGHZDlPhiO0RfqKGqy3m1+2ZWjXOhIkLJq54kdj9YSaGlIqYsnmnA0JMYDNfc7F9ThkxF/NabdHcHksfjeN9PmPwMaH2N8p+IqnS9UC2uFvMe7ea5duBoK8pGZQKKH8RSgWXhkEC46wNvVZsuaByRIti8ZO3mO4oyJ6QnP+F3HHobkaThMYBWRpSbKCZEXxEcBH0wIbuBS+/0X0qGOr0QvMezTnsUdBzwVkKes5GI0L1hCWw0Sj8F60VVTizYO3vh+XoWI8Tbe/Y+htR/8XasJ9/rzPHiWXvWPuJ5fhiO9+gmPAPROayTQHrYIwAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;인텔리제이 프로파일&quot; title=&quot;인텔리제이 프로파일&quot; src=&quot;/static/44a66e3159d060c67ac6d01afeec15bc/a6d36/intellij-profile.png&quot; srcSet=&quot;/static/44a66e3159d060c67ac6d01afeec15bc/222b7/intellij-profile.png 163w,/static/44a66e3159d060c67ac6d01afeec15bc/ff46a/intellij-profile.png 325w,/static/44a66e3159d060c67ac6d01afeec15bc/a6d36/intellij-profile.png 650w,/static/44a66e3159d060c67ac6d01afeec15bc/e548f/intellij-profile.png 975w,/static/44a66e3159d060c67ac6d01afeec15bc/3c492/intellij-profile.png 1300w,/static/44a66e3159d060c67ac6d01afeec15bc/c4451/intellij-profile.png 1450w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;다음으로 &lt;code&gt;Modify options&lt;/code&gt;를 선택하면 아래와 같이
환경변수를 입력할 수 있는 칸이 추가됩니다. 이를 통해 다음과 같이 &lt;code&gt;secret-key&lt;/code&gt; 환경변수의 값을 자유롭게 설정할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/b8080b9465655defde585535c327e109/6b95e/intellij-env-var.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:59.50920245398773%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB3ElEQVQoz21Sy27UQBD0JwESgqwf43k/7fXam6wUPgAJCXHnNwjKjct+aKHuiVck4lAa92hcXdXVTSckCP2oEMuMeVmR5wXzaeO6lxr7m7fox/ofgWplPRrtPEZt+ec0zYhlQpqOsCFiVBrKWijrQO8qAqRxNwJ652LiexsSEQYufCpMSiAC6TKEP2HwC3rl0YkR7fAa/6o99AKaFFIxSA2fMmKeEFKBCwk2ZLh0hE1H+DyxC3onlIGQ5mazQnEDEtYYX9VRsXdWNiDkGS5mGB9hQob2CXk+YVo2lGWDDYXvzAvqd0ZDvskmEYoXBXtAqcw8l10JNbvrBsZb+3s4Dc2LLJJSGjbV9ICS3h4uKMeFQ6JRELkyjmdFjfftqK5qaI1LBdN6Rl5WpHnhc1AGhQjvL1i2M/KeurY3Qmksk9JdTdzVGRIzzYm727pC1JFUkcL1/oJpWdkFoR1qov+zTA2Y0PrI7D1ZoFkJySmHPMHF8gq9NJxqN9LCaz5bQWQWQjs0xFp3sSqlZEcpEKJDzgkpR2ijIMYebfsZXX9A3x/4vH13d5BywCgHWpvIlgi0DtOx4NPxJ/zXK84/rli+XzF/+4OPD7/xfnvCh+2Jzx1Uv1t/4fD4jPbLM/4C1we16r7XWQcAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;인텔리제이 환경변수 설정&quot; title=&quot;인텔리제이 환경변수 설정&quot; src=&quot;/static/b8080b9465655defde585535c327e109/a6d36/intellij-env-var.png&quot; srcSet=&quot;/static/b8080b9465655defde585535c327e109/222b7/intellij-env-var.png 163w,/static/b8080b9465655defde585535c327e109/ff46a/intellij-env-var.png 325w,/static/b8080b9465655defde585535c327e109/a6d36/intellij-env-var.png 650w,/static/b8080b9465655defde585535c327e109/e548f/intellij-env-var.png 975w,/static/b8080b9465655defde585535c327e109/3c492/intellij-env-var.png 1300w,/static/b8080b9465655defde585535c327e109/6b95e/intellij-env-var.png 1458w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/97f1c700904b5b026094058073afc3cd/bb543/intellij-env-var-input.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:41.717791411042946%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABH0lEQVQoz42RWW7DMAxEdawCqax9l2U7ztKi9z/HFGRcIEj70Y8HkkNqBIKizQvaWOBCwmnSeFfmf0wa0maovGNKK5TLUMZBhFwRS4P1Edp52BA5pw8MawE2JKTaea7Og3PqSW0hjYPUDpNxUNaTYUFuHWTsYoZLL/ylPfeYhFgbfyzKvKJvO9qyoS1npq87KtXrGfN2YVgb62GUnswetU+Fc0HrkTMV0tjHGi/QOgT1f+Jj3d+zgoxirjA+4O0kEXJjc3WYEHQsPtgRn6EDyQPKxdVqrM5i847jHj0+WsW9FnyNjs9ecSsJ15xwSZF1yq85cqQ3w2os5GE0xG41hrMsDGuwBY9byTx8P4yJG5NZO8fAcxTpTdcKs9FYtMI3l/MiCAPFEFUAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;인텔리제이 환경변수 설정 입력&quot; title=&quot;인텔리제이 환경변수 설정 입력&quot; src=&quot;/static/97f1c700904b5b026094058073afc3cd/a6d36/intellij-env-var-input.png&quot; srcSet=&quot;/static/97f1c700904b5b026094058073afc3cd/222b7/intellij-env-var-input.png 163w,/static/97f1c700904b5b026094058073afc3cd/ff46a/intellij-env-var-input.png 325w,/static/97f1c700904b5b026094058073afc3cd/a6d36/intellij-env-var-input.png 650w,/static/97f1c700904b5b026094058073afc3cd/e548f/intellij-env-var-input.png 975w,/static/97f1c700904b5b026094058073afc3cd/3c492/intellij-env-var-input.png 1300w,/static/97f1c700904b5b026094058073afc3cd/bb543/intellij-env-var-input.png 1418w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이 상태에서 애플리케이션을 실행하면 다음과 같이 주입되어 실행됨을 확인할 수 있습니다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/5bae1445587b8ba5d861475db35218fe/9d6a9/intellij-prod-with-env.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:39.877300613496935%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABa0lEQVQoz1WQ3W7UMBQG8yx0t12nG5zE/8c/2W4RcAGI93+ZQfYiVC5Glnwxmu9MKSVKKWTJuLjjrGNfDWpWWGtZnOPsPeeUOMfIs3OobeN7sPzOkZ/i+RHdeH+JZ+qy1hqtHngxBOcxmxvCEAJLjDyJcMqZcxI+HbchjiKU40Y+DqQ2XIz4lJhyztRaqaXik8Fbj1ntEHrnuMbIKYR/hackXLaNFCNHa9RSxkIRobs+CNsQhi7cHsLgPdeUOMXIuVeWMkqV1mSRsayLurCfZ9s2JsmZUiulF4rFf5jsemFKPI26xIu1vOyGi9aj7jiOUdWFPWoU1izcauEolRg3orE4bXi9vJB6ocgQniQPnr1HLcuQvd3vj/v/lXemrynwJon3LLxXoXlHdY6warJeWLQeRWpdx+06ffK6rmNixxjDvu9orZm+eUMLjrtEvmSh2J3mDGI22ucry6yY55nXjlIP5nn8KaX+o//9AQxSA2QIJD0wAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;인텔리제이 환경변수 설정 입력&quot; title=&quot;인텔리제이 환경변수 설정 입력&quot; src=&quot;/static/5bae1445587b8ba5d861475db35218fe/a6d36/intellij-prod-with-env.png&quot; srcSet=&quot;/static/5bae1445587b8ba5d861475db35218fe/222b7/intellij-prod-with-env.png 163w,/static/5bae1445587b8ba5d861475db35218fe/ff46a/intellij-prod-with-env.png 325w,/static/5bae1445587b8ba5d861475db35218fe/a6d36/intellij-prod-with-env.png 650w,/static/5bae1445587b8ba5d861475db35218fe/e548f/intellij-prod-with-env.png 975w,/static/5bae1445587b8ba5d861475db35218fe/3c492/intellij-prod-with-env.png 1300w,/static/5bae1445587b8ba5d861475db35218fe/9d6a9/intellij-prod-with-env.png 2256w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이처럼 인텔리제이에서 환경변수를 설정하는 방법은
&lt;strong&gt;각 프로젝트에 한정된 시스템 환경변수를 설정&lt;/strong&gt;할 수 있다는 특징을 지녔습니다.
개발자의 로컬 컴퓨터에서 프로그램을 실행하며 개발하고 싶을 때
사용할 수 있는 최선의 방법이라고 생각합니다.&lt;/p&gt;&lt;h3&gt;JVM 시스템 파라미터를 통한 환경변수 설정&lt;/h3&gt;&lt;p&gt;한편 개발한 애플리케이션의 빌드 결과물을 원격 서버에서 실행하기 위해서는
리눅스 환경에서 특정 프로파일을 활성화시키고 적절한 환경변수 값을 주입해줄 수 있어야 합니다.&lt;/p&gt;&lt;p&gt;우선 개인적으로 선호하는 JVM 시스템 파라미터를 통해
&lt;strong&gt;실행 명령어 한 줄에 모든 환경변수를 전달&lt;/strong&gt;하는 방법을 다뤄보겠습니다.&lt;/p&gt;&lt;p&gt;아래와 같은 명령어를 통해 &lt;code&gt;prod&lt;/code&gt; 프로파일을 활성화시키도록 주입하고,
환경변수 &lt;code&gt;secret-key&lt;/code&gt;의 값을 주입할 수 있습니다. &lt;code&gt;secret-key&lt;/code&gt;에 전달된 값은
그대로 &lt;code&gt;security.jwt.token.secret-key&lt;/code&gt; 프로퍼티의 값으로 사용됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-jar&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-Dspring.profiles.active&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;prod -Dsecret-key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;prod 프로파일의 secret key 값&amp;#x27;&lt;/span&gt; 애플리케이션.jar &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;물론 아래와 같이 환경변수 &lt;code&gt;secret-key&lt;/code&gt;를 사용하지 않고
&lt;code&gt;security.jwt.token.secret-key&lt;/code&gt; 프로퍼티 자체에 대해 값을 주입하는 것도 가능합니다.
그러나 아래에서 확인할 수 있듯 이러한 프로퍼티명은 일반적으로 굉장히 길기 때문에
가독성이 굉장히 낮아지며 휴먼 에러가 발생하기 쉬워집니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-jar&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-Dspring.profiles.active&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;prod -Dsecurity.jwt.token.secret-key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;prod 프로파일의 secret key 값&amp;#x27;&lt;/span&gt; 애플리케이션.jar &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;해당 방법은 실행되는 명령어 자체에 모든 정보가 포함되기 때문에
주입해야 하는 프로퍼티의 개수가 얼마되지 않을 때 굉장히 관리하기 편리합니다.&lt;/p&gt;&lt;h3&gt;운영체제 내 시스템 환경변수 설정&lt;/h3&gt;&lt;p&gt;다음은 운영체제 자체에 시스템 환경변수를 설정하는 방법입니다.
맥이나 리눅스 환경의 경우, 일반적으로 &lt;code&gt;.bash_profile&lt;/code&gt; 파일을 찾아
아래와 같이 &lt;code&gt;키=값&lt;/code&gt;을 추가해주면 될 것입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# .bash_profile에 한 줄 추가&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;VARIABLE_NAME&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;value&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이때 아마도 환경변수명은 &lt;code&gt;CONSTANT_CASE&lt;/code&gt; 형식으로 작성해야 할 것입니다.
그러므로 우선 저희 프로젝트의 &lt;code&gt;yml&lt;/code&gt; 파일에 설정한 환경변수명을 수정해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 생략&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;spring.config.activate.on-profile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; prod
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;security.jwt.token.secret-key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;SECRET_KEY&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 생략&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 &lt;code&gt;vi ~/.bash_profile&lt;/code&gt;, &lt;code&gt;code ~/.bash_profile&lt;/code&gt; 등의 명령어를 통해
&lt;code&gt;.bash_profile&lt;/code&gt; 파일을 열고 수정해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;SECRET_KEY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;secret key at .bash_profile&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;해당 세션에서 &lt;code&gt;.bash_profile&lt;/code&gt;이 즉시 적용되도록 아래 명령어를 실행해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;source&lt;/span&gt; .bash_profile&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 프로젝트를 빌드하고 아래 명령어를 통해 &lt;code&gt;prod&lt;/code&gt; 프로파일을 사용하도록 해봅시다.
&lt;code&gt;.bash_profile&lt;/code&gt; 파일에서 설정해놓은 시스템 환경변수가 운영체제에 문제 없이 등록되었으며,
명령어에 추가했던 내용을 제거해도 &lt;strong&gt;운영체제의 환경변수 값을 알아서 사용&lt;/strong&gt;한다는 점을 알 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# 사용할 프로파일로 prod만 주입&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-Dspring.profiles.active&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;prod &lt;span class=&quot;token parameter variable&quot;&gt;-jar&lt;/span&gt; 애플리케이션.jar &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/119f9c1c8437f046e7b89636e47afa0c/d438d/bash_profile-prod-env.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:30.061349693251532%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVQY02XP3Y6bMBCG4SEFTAK28b8NURWlPdldqer939xbQXKy6sEne0bWMx4xxrDoBT1r+tDjFoe6KESEaZq4rBZpDbnfkVaRUrhYy0cO/L03/uyFr5r4LIGvGhFrLdpozGzoY08w4TvoAtJ2pG5IacjPB+I8qw/kbSO3jVQbLkZ8zog1Bq1f4BB6gvZMb/B6gCEiZUPqjrT7C1WKWgr7tlFyZmsNt67oZUEWY5i1ZpkNl2NlHRjf4KgU3TF1319rx4h4j4wjv55PHo8HpRRaa+eZz7fOUqymGoOLirZYXK+Yf3T468Swri8oJiQX5KjH8QRqrcQYSSmd2HGX3zURvCd5R/IeZw3L7YoaBm7jwK2T87ff0nX/9975B1CHi1s5xzt7AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;시스템 환경변수 설정&quot; title=&quot;시스템 환경변수 설정&quot; src=&quot;/static/119f9c1c8437f046e7b89636e47afa0c/a6d36/bash_profile-prod-env.png&quot; srcSet=&quot;/static/119f9c1c8437f046e7b89636e47afa0c/222b7/bash_profile-prod-env.png 163w,/static/119f9c1c8437f046e7b89636e47afa0c/ff46a/bash_profile-prod-env.png 325w,/static/119f9c1c8437f046e7b89636e47afa0c/a6d36/bash_profile-prod-env.png 650w,/static/119f9c1c8437f046e7b89636e47afa0c/e548f/bash_profile-prod-env.png 975w,/static/119f9c1c8437f046e7b89636e47afa0c/3c492/bash_profile-prod-env.png 1300w,/static/119f9c1c8437f046e7b89636e47afa0c/d438d/bash_profile-prod-env.png 2290w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;당연한 얘기지만 해당 방법은 &lt;strong&gt;EC2 인스턴스와 같은 원격 머신에서 사용&lt;/strong&gt;해야 합니다.&lt;/p&gt;&lt;p&gt;개발자의 로컬 머신에서는 위에서 설명했듯이
인텔리제이를 활용하여 개별 프로젝트에 대한 시스템 환경변수를 설정해야 합니다.
간단한 예로 로컬에서 작업 중인 복수의 프로젝트에서 전부 &lt;code&gt;DB_URL&lt;/code&gt;이라는 환경변수를 사용하는
경우를 생각해봅시다.
만일 운영체제의 시스템 환경변수로 &lt;code&gt;DB_URL&lt;/code&gt;이라는 값을 설정한다면
다른 프로젝트를 실행할 때마다 매번 &lt;code&gt;DB_URL&lt;/code&gt; 값을 수정해주거나
실행할 때마다 다른 팀원들 몰래 &lt;code&gt;yml&lt;/code&gt; 파일에 환경변수를 하드코딩해줘야 할 것입니다.&lt;/p&gt;&lt;h4&gt;운영체제 내 시스템 환경변수 제거&lt;/h4&gt;&lt;p&gt;혹시라도 로컬에서 위의 과정을 따라해본 사람이 있을 수 있으므로
시스템 환경변수 제거 방법도 첨부합니다.&lt;/p&gt;&lt;p&gt;우선 &lt;code&gt;vi ~./bash_profile&lt;/code&gt;, &lt;code&gt;code ~./bash_profile&lt;/code&gt; 등의 명령어를 통해
&lt;code&gt;.bash_profile&lt;/code&gt; 파일을 열고 기존에 추가했던 &lt;code&gt;export SECRET_KEY=&amp;quot;~&amp;quot;&lt;/code&gt; 부분을 제거합시다.
&lt;code&gt;source .bash_profile&lt;/code&gt;을 다시 실행하는 것은 선택사항입니다.&lt;/p&gt;&lt;p&gt;그 다음으로 아래와 같은 방식으로 설정해놓은 시스템 환경변수를 제거합니다.
&lt;code&gt;export&lt;/code&gt; 명령어에서 사용한 시스템 환경변수명을 그대로 작성해주면 됩니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# unset 환경변수명&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;unset&lt;/span&gt; SECRET_KEY&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;실제 프로젝트 예시&lt;/h2&gt;&lt;p&gt;튜토리얼용 예시만 보면 난해하니 우테코 장바구니 미션에서 사용한 예시를 제공하겠습니다.&lt;/p&gt;&lt;h3&gt;application.yml&lt;/h3&gt;&lt;p&gt;&lt;code&gt;application.yml&lt;/code&gt;에는 &lt;code&gt;prod&lt;/code&gt;와 &lt;code&gt;test&lt;/code&gt;라는 두 가지 프로파일만 존재합니다.&lt;/p&gt;&lt;p&gt;디폴트로 사용되는 &lt;code&gt;test&lt;/code&gt; 프로파일은 아무런 환경변수 값 없이도
테스트 코드를 실행하고, 로컬에서 실행하고, 빌드될 수 있습니다.&lt;/p&gt;&lt;p&gt;실제로 EC2 인스턴스에 배포되었을 때 사용되는 &lt;code&gt;prod&lt;/code&gt; 프로파일로
실행하기 위해서는 외부로부터 숨겨야 하는 다양한 비밀 정보가 필요합니다.
이러한 값들은 전부 시스템 환경변수로 받을 수 있도록 설정해놓은 상태입니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-yml line-numbers&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;spring&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;profiles.active&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; test
  &lt;span class=&quot;token key atrule&quot;&gt;sql.init.mode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; always
  &lt;span class=&quot;token key atrule&quot;&gt;h2.console.enabled&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean important&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;mvc.pathmatch.matching-strategy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ANT_PATH_MATCHER
&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;spring&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;config.activate.on-profile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; prod
  &lt;span class=&quot;token key atrule&quot;&gt;datasource&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;driver-class-name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; com.mysql.cj.jdbc.Driver
    &lt;span class=&quot;token key atrule&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;DB_URL&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;DB_USER&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;DB_PASSWORD&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;security.jwt.token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;secret-key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;JWT_SECRET_KEY&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;expire-length&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;JWT_VALIDITY&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;spring&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;config.activate.on-profile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; test
  &lt;span class=&quot;token key atrule&quot;&gt;datasource&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; jdbc&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;h2&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;~/test;MODE=MYSQL;DB_CLOSE_DELAY=&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;1;DB_CLOSE_ON_EXIT=FALSE
    &lt;span class=&quot;token key atrule&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; sa
&lt;span class=&quot;token key atrule&quot;&gt;security.jwt.token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;secret-key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
  &lt;span class=&quot;token key atrule&quot;&gt;expire-length&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3600000&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;JVM 시스템 파라미터를 활용한 실행&lt;/h3&gt;&lt;p&gt;빌드된 .jar 파일을 실행하는 명령어에는
아래와 같이 JVM 시스템 파라미터를 통해 다양한 정보를 전달할 수 있습니다.
장문의 명령어의 경우, 아래와 같이 작성하는 중간에 백슬래시(&lt;code&gt;\&lt;/code&gt;)를 치고 엔터를 쳐서
한 줄씩 구분하는 것도 가능합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;nohup&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-jar&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-Dspring.profiles.active&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;prod &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;-DDB_URL&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;jdbc:mysql://ec2-db_private_ip:3306/database_name?serverTimezone=UTC&amp;amp;characterEncoding=UTF-8&amp;#x27;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;-DDB_USER&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;db_username&amp;#x27;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;-DDB_PASSWORD&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;db_password&amp;#x27;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;-DJWT_SECRET_KEY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;really long token value&amp;#x27;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;-DJWT_VALIDITY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;36000000&lt;/span&gt; 애플리케이션.jar &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;spring.profiles.active&lt;/code&gt; 프로퍼티 값으로 &lt;code&gt;prod&lt;/code&gt;를 사용하도록 명시하였으므로
기본적으로 위의 &lt;code&gt;yml&lt;/code&gt; 파일의 &lt;code&gt;prod&lt;/code&gt; 섹션에 설정한 프로퍼티들이 사용됩니다.
시스템 환경변수를 사용하도록 명시한 프로퍼티들은 명령어에 포함된 JVM 시스템 파라미터를 통해
해당 값들을 주입 받아 사용하게 됩니다.&lt;/p&gt;&lt;p&gt;한편 아래와 같이 시스템 환경변수를 굳이 사용하지 않고 프로퍼티 값을 직접
지정하여 값을 전달하는 것도 가능합니다.
또한 &lt;code&gt;spring.profiles.active&lt;/code&gt; 외에도 &lt;code&gt;server.port&lt;/code&gt;와 같은 프로퍼티 값들도
추가적으로 주입할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;nohup&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-jar&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-Dspring.profiles.active&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;prod &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;-Dserver.port&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5000&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;-Dspring.datasource.url&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;jdbc:mysql://ec2-db_private_ip:3306/database_name?serverTimezone=UTC&amp;amp;characterEncoding=UTF-8&amp;#x27;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;-Dspring.datasource.username&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;db_username&amp;#x27;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;token parameter variable&quot;&gt;-Dspring.datasource.password&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;db_password&amp;#x27;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  -Dsecurity.jwt.token.secret-key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;really long token value&amp;#x27;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
  -Dsecurity.jwt.token.expire-length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;36000000&lt;/span&gt; 애플리케이션.jar &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;운영체제의 시스템 환경변수를 활용한 실행&lt;/h3&gt;&lt;p&gt;한편 위와 같이 전달해야 하는 환경변수의 개수가 많은 경우,
배포 서버로 사용하는 EC2 인스턴스 자체의 시스템 환경변수로
해당 값들을 설정하는 방법도 가능합니다.&lt;/p&gt;&lt;p&gt;이제 &lt;code&gt;vi ~/.bash_profile&lt;/code&gt; 등의 명령어를 통해 &lt;code&gt;.bash_profile&lt;/code&gt; 파일을 찾고
다음과 같이 수정해봅시다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;DB_URL&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;jdbc:mysql://ec2-db_private_ip:3306/database_name?serverTimezone=UTC&amp;amp;characterEncoding=UTF-8&amp;#x27;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;DB_USER&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;db_username&amp;#x27;&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;DB_PASSWORD&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;db_password&amp;#x27;&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;JWT_SECRET_KEY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;#x27;really long token value&amp;#x27;&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;JWT_VALIDITY&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;36000000&lt;/span&gt; 애플리케이션.jar &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;해당 세션에서 즉시 설정해놓은 환경변수들이 등록되도록 다음 명령어를 실행합니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;source&lt;/span&gt; .bash_profile&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 아래와 같이 명령어에서 개별 환경변수들을 직접 주입하지 않고도
애플리케이션을 실행할 수 있습니다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;command-line-prompt&quot;&gt;&lt;span data-user=&quot;jinwoo&quot; data-host=&quot;localhost&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;nohup&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;java&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-jar&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-Dspring.profiles.active&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;prod 애플리케이션.jar &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;해당 글은 스프링 개발자라면 알아야 하는 환경변수에 관한 기본기를 제공하는 데 초점을 맞추었습니다.
다만, 이러한 기법들이 언제나 best practice가 아니라는 점에 유의해야 합니다.
예를 들어 복수의 서버를 운영하는 경우, 각 서버에서 사용될 환경변수를 실행 시점에
맞춤형으로 주입해주는 작업 자체가 번거로울 수 있습니다. 또한 협업하는 개발자들 사이에
환경변수 정보를 어떻게 공유하고 관리할 것인지에 대한 논의 또한 필요합니다.&lt;/p&gt;&lt;p&gt;이런 경우에는 &lt;code&gt;git submodule&lt;/code&gt;을 활용해 비공개 저장소에 프로파일별로 하드코딩된 &lt;code&gt;yml&lt;/code&gt; 파일들을
관리하고, 빌드 결과물 자체에 적절한 프로퍼티들이 포함되도록 하는 것이 더 적절할 수 있습니다.
그러나 빌드 결과물에 환경변수들을 저장하더라도 특정한 프로파일을 활성화시키거나,
다른 값으로 덮어쓰는 등의 작업을 위해서는 JVM 시스템 파라미터와 같은 기본적인 지식이 필요하다고
생각합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.baeldung.com/spring-profiles&quot;&gt;Baeldung: Spring Profiles&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[리뷰] 오브젝트 독후감]]></title><description><![CDATA[스터디원들과 함께 조영호의 오브젝트를 완독하였다. 책에 대한 전반적인 후기를 남기고자 한다.]]></description><link>https://bugoverdose.github.io/essay/object-book-review/</link><guid isPermaLink="false">https://bugoverdose.github.io/essay/object-book-review/</guid><pubDate>Fri, 24 Jun 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;알 사람은 다 알겠지만 조영호의 &lt;a href=&quot;http://www.yes24.com/Product/Goods/74219491&quot;&gt;오브젝트&lt;/a&gt;는
객체지향 프로그래밍을 공부함에 있어 빼놓을 수 없는 책이다.&lt;/p&gt;&lt;p&gt;우테코에서 크루들과 함께 스터디를 하며 해당 서적을 완독한 기념으로
책에 대한 전반적인 후기를 남기고자 한다.
아직 해당 서적을 읽지 않았거나, 구매 여부에 대해 고민하는 사람들이 있다면
이 글이 도움이 되기를 바란다.&lt;/p&gt;&lt;h2&gt;무엇이 담겨 있는가&lt;/h2&gt;&lt;p&gt;OOP에 대해 구글에 검색해보면 &amp;quot;객체지향의 특징은 추상화, 캡슐, 상속, 다형성&amp;quot;이라고
말하며 각 개념에 대해 설명하는 블로그 글을 쉽게 발견할 수 있다.
그러나 이러한 용어 설명만으로는 &amp;quot;객체지향적인 설계&amp;quot;가 무엇이며,
실제로 객체지향적인 코드를 어떻게 작성할 수 있는지에 대해 이해할 수 없을 것이다.&lt;/p&gt;&lt;p&gt;한편 면접 및 시험 준비를 위해 &amp;quot;결합도는 낮고 응집도는 높아야 한다&amp;quot;거나
SOLID의 각 원칙을 암기하고 그대로 읊는 것은 누구나 할 수 있는 일이다.
그러나 이러한 암기만으로는
실제로 어떠한 코드에 대해 &amp;quot;SOLID에 위배된다&amp;quot;고 평가하거나,
의식적으로 결합도를 낮추는 방향으로 코드를 리팩터링을 하기 어려울 것이다.
애초에 이러한 행위가 &lt;em&gt;왜&lt;/em&gt; 중요한지, 그 이유에 대해 설명할 줄 모르는 사람도 많을 것이다.&lt;/p&gt;&lt;p&gt;만일 당신이 이러한 경험에 공감할 수 있다면
오브젝트를 읽었을 때 지적인 쾌감을 느낄 것이다.&lt;/p&gt;&lt;p&gt;&amp;quot;코드로 이해하는 객체지향 설계&amp;quot;라는 부제를 통해 알 수 있듯이
오브젝트는 기본적으로 다양한 예시 코드를 통해 객체지향 설계에 대해 심도 있게 서술하는 책이다.
다만, 저자는 단순히 &amp;quot;이런 것이 좋은 코드다&amp;quot;라고 제시하지 않는다.
저자는 객체지향 설계라는 맥락에서 현재 이 코드가 &lt;strong&gt;왜 좋지 않은 코드&lt;/strong&gt;인지를 설명하고,
이를 어떠한 방향으로 개선할 수 있으며, 그것이 &lt;strong&gt;어떠한 측면에서 개선된 코드&lt;/strong&gt;인지를
체계적으로 설명하고자 노력한다.
그리고 이러한 과정에서 저자는 소프트웨어 전반에 있어
중요한 용어와 원칙에 대해 굉장히 자연스럽게 체계적으로 언급하며 지나간다.&lt;/p&gt;&lt;h2&gt;누가 읽으면 좋은가&lt;/h2&gt;&lt;p&gt;개인적으로 모든 애플리케이션 개발자에게 이 책을 읽는 것을 권하고 싶다.
다만, 기초적인 자바 문법을 이해하고 있으며,
이를 활용하여 애플리케이션을 구현하고 리팩터링해본 경험이 조금이라도 있어야
책의 내용을 제대로 내재화할 수 있을 것이라고 생각한다.&lt;/p&gt;&lt;p&gt;스칼라와 자바스크립트도 일부 포함되어있기는 하지만
이 책은 기본적으로 최소한의 자바 문법을 안다는 가정하에
모든 내용이 작성되어있다. 때문에 만일 자바 기초 문법을 모른다면
코드를 이해하는 과정에서 불필요하게 시간이 낭비될 것이라 생각한다.&lt;/p&gt;&lt;p&gt;기초 문법을 이해하더라도 이 책의 내용을 이해하기 위해서는
실제로 &amp;quot;좋지 않은 설계&amp;quot;를 작성해보았고
이로 인해 고통받아본 경험이 조금이라도 있어야 한다고 생각한다.
그렇지 않고서는 이 책에서 설명하는 문제의식에 대해 진심으로 공감하기는 어려울 것이라고 생각한다.&lt;/p&gt;&lt;p&gt;한편, 본인이 당분간 자바나 코틀린을 사용할 일이 전혀 없는 상황이라면
굳이 지금 이 책을 읽는 것이 본인에게 효과적일지에 대해 고민해봐야 한다고 생각한다.
이 책을 읽는 기간 동안 책의 내용을 실제로 본인의 코드에 적용할 수 있어야
그 내용을 보다 자신만의 것으로 내재화할 수 있을 것이다.&lt;/p&gt;&lt;h3&gt;대안은 없는가&lt;/h3&gt;&lt;p&gt;만일 자바와 무관하게 객체지향 프로그래밍에 대해 공부를 하고 싶다면
저자 분이 오브젝트 이전에 쓰신
&lt;a href=&quot;http://www.yes24.com/Product/Goods/18249021&quot;&gt;객체지향의 사실과 오해&lt;/a&gt;&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;라는
서적도 존재한다.
특정한 프로그래밍 언어에 종속되지 않은 체 객체지향의 본질을 다루고 있으며
상대적으로 짧기 때문에 부담 없이 읽을 수 있을 것이다.&lt;/p&gt;&lt;p&gt;다만, 개인적으로는 오브젝트의 하위호환처럼 느껴지기 때문에 절반 정도밖에 읽지 않았다.
실제로 오브젝트 초반(p6)을 보면 &amp;quot;코드 없이 개념적으로 특정 프로그래밍 패러다임에 대해 설명하는 것은 어떤 영감도 주지 못한다.&amp;quot;라며
저자 스스로 전작에 대해 셀프디스를 하고 있다.&lt;/p&gt;&lt;p&gt;그래도 일단은 우아한테크코스 백엔드 과정 레벨1 필독서 중 하나였기 때문에 읽을 가치가 있는 좋은 책이라고 생각한다.&lt;/p&gt;&lt;h2&gt;어떻게 읽어야 하는가&lt;/h2&gt;&lt;p&gt;필자는 이 책을 우아한테크코스 기간 동안 크루들과 함께 스터디를 통해 함께 읽었다.
스터디는 2022년 3월부터 6월까지 매주 1챕터씩 읽고, 이에 대해 토론하는 방식으로 진행되었다.
당시 각 스터디원은 함께 이야기하고 싶은 주제에 대해 &lt;a href=&quot;https://github.com/woowacourse-study/2022-object-study/issues&quot;&gt;깃헙 저장소&lt;/a&gt;에
이슈로 남겼으니 궁금하다면 참고해도 좋다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:292px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/b5963038126166aa0f890bb83ae16161/2e9f9/gather-study-members.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:106.13496932515336%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAAE50lEQVQ4y2WU3U+aZxjGzU62s21NqlYFeflWBBFFBQQUXkBEoM4PUBDUihQQQdRWna2uXa21a9ePbe26bOvaJW2XNPvKmjbNsmTZjnbS/+i3vGK3Nj248zz3+yZXrvu6rueuEbUqvBol/hYdAbOFYHs7HbI2Opta6dB3IbhGEVwTCO4YLRYP1uZWjA0G3DoTYYsFv6ENUatEwpHOGq9WhUejwqPV4KiX06tQY25qpq1RwHikEUutnJZGJYYGBa31Mkx1CjrlKjpkCtqbFLh0WiSMl1Uj6lR41EoMimaObKVocXaRn53luOhDKMZ5f9LLwniM8tIilbUVjro78LgcrFUqnFxYYMDWS1dTAz6dGq/E0KdTImoEjIKMd9cTtLq7KefyhD0izbkJ3pv0EnY4mUmlmMvMU+/pxmo2Mp9OMTk+hsvaRbesCihhHYwszd+vErDX1WGXNdLZWE+3vBFrbR22umNYm45hbajDVF9Lr7wJq6wJU+1RLA312BXy10d+efHr1UR1SlxGE9aOTuxaLSNtKvqNBvSt7Zj1BkZMeoIKBVNdemadJkIGDYP6qiFvaOjQqRicGUQUnYyNjJIYP04hEaXb1kNxuI+Qs5fBiIg14CTtc3CuPM/JWIhInwW7QoZfd+iyTwJUKTDpBN66u44t6ufq9jaFfImJ7Dxm6xCPLt2gFF/m6HCQmntr+CLDbG5usbSUZyQUwHysFp9OUwWU6EoM/W0aNgoR0qODhH3HyY4F8IQG8aQmScfPM5Uo0DEVJT7gwdtpxGIyUk4MMzdkx94sQzxwWVUFdKsEprrNvHhQ5uxOEo93lAd3Zni0v4ZYLBGJTyCemKe4usg/Z7LkM58QSH3OT/vbfFWMYpfJDmOjqsZmQK0kbNaTH/cR9g9wKp8gLDrZL46xlQhROZlmbT5GKeJgM+HHP7bB0OQ5colJMmEHVvkbGgoYNQLv3CozMBfgzOoqMzPTeN0u3r6Zx5o/wYWtHdpzU7SLDi599CHJ+CiZbIa9/cv0Gg04JGP06sOnp1bSo1EgK8QJjtnIxkSGowEG+nrQT3kZSoyyEBunL+TCKrpJJFIUy+uks4t8MDpCr1aNSykcxOdAw361kphFR3J6Fkt0EqPNgWUiyZNbp/g2E2JVtLDo6+DW+gRzawXa7C4ys0XS+S0mBrrpF17TUIVbqSDlMPHL1TLeYBhfIEB/MMzv13L8sbfAvdkgdzJhfrtbYWM1Q3ZxhdR8kcVMipu5KH3N0rivaOhWCsR7TDz/tMhG8jj312YoxILc3CtwIjPMs70oHy+J5DdP8HS3xP29bb7ePcuVM5vsTA/iUsgPGFZzqDuMjc3E8+tlHt66zV+//si19bNMF/LET8W4XYlw8foFgusFNsfT7FSW2Nuo8OXOMjdyEexy2cH6ey2H8V4jf362zOncCvnSeYoTWfxjJ+mPzZNZ3OXeNw+JJOeIRxZw2kTUehs/XFzlZj6K7dUc+g/eskCs28DfXyzz9HKFxztZnlxe5fudEguZHKViiZW5BLtLGZ5dOc3Peys8vrDMi++22Z8L4lTICOhV1fUlHm5sr1bNWKeBpN1M0tFB0t7OVK+R6Z420nYjCVs7Uz3SaTr4J/WxHhOhNh0ejfKVbaM9bDTSTlTgFKrlUv5fr/XSXWj+75tHU82fREoy5V8H2QbqIEoBTwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;gather-study-members&quot; title=&quot;gather-study-members&quot; src=&quot;/static/b5963038126166aa0f890bb83ae16161/2e9f9/gather-study-members.png&quot; srcSet=&quot;/static/b5963038126166aa0f890bb83ae16161/222b7/gather-study-members.png 163w,/static/b5963038126166aa0f890bb83ae16161/2e9f9/gather-study-members.png 292w&quot; sizes=&quot;(max-width: 292px) 100vw, 292px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;사실 이러한 스터디 진행 방식이 적합한 책과 그렇지 않은 책이 존재하는데,
이 책은 확실히 이러한 방식이 적절했다고 생각한다.
이 책은 점진적으로 내용을 음미하며, 궁금했던 내용에 대해 여럿이서 이야기를 하며 진행하는 것이 적절하다.
특히 우리는 우아한테크코스의 각종 미션들을 진행하며 책의 내용을 적용하고, 미션에서 작성한 코드를 통해
책에서 이야기하는 바를 이해할 수 있었기 때문에 좋은 선순환이었다고 생각한다.
대체 왜 이곳 필독서 목록에 오브젝트가 없는지 모르겠다.&lt;/p&gt;&lt;p&gt;한편 혼자서 책을 읽어야 하는데 내용이 난해하다고 느껴지는 상황이라면
책을 끝까지 읽은 입장에서 책에 대해 몇 가지를 이야기하고 싶다.&lt;/p&gt;&lt;p&gt;우선 &lt;strong&gt;모든 내용을 이해하고 다음으로 넘어가야 한다는 강박관념을 지니지 말라&lt;/strong&gt;고 제안하고 싶다.
기본적으로 이 책은 빌드업이 심하기 때문에 뒤의 내용을 읽어야 비로소 앞의 내용이 제대로 이해되는 것들이 많다.
또한 몇 페이지에 걸쳐서 세부적으로 다루었던 내용을 뒤에서 깔끔하게 정리된 문장으로 다시 설명해주는 경우도 빈번하다.
때문에 &lt;em&gt;중요한 내용이었다면 어차피 뒤에 다시 나오겠지 뭐&lt;/em&gt;라는 마인드를 어느 정도 탑재하고 진행하는 것을 권장하고 싶다.&lt;/p&gt;&lt;p&gt;또한 &lt;strong&gt;예시 코드는 글에서 언급하는 부분만 적당히 참고하라&lt;/strong&gt;고 제안하고 싶다.
해당 서적의 모든 예제 코드는 글로 설명하는 내용을 뒷받침하기 위한 &lt;strong&gt;시각적 참고 자료&lt;/strong&gt;에 불과하다.
때문에 저자는 기본적으로 &lt;strong&gt;끔찍한 코드&lt;/strong&gt;와 &lt;strong&gt;개선된 코드&lt;/strong&gt;를 보여줄 뿐, &lt;strong&gt;완벽한 정답&lt;/strong&gt;에 해당되는 코드를 제시하지 않는다.
기본적으로 끔찍할 정도로 지저분한 코드가 있다면
아마 해당 챕터의 후반부나 다음 챕터에서 이를 리팩터링하는 과정을 보여줄 것이다.
그러나 만일 이러한 과정이 없더라도, &lt;em&gt;메서드명을 왜 이처럼 지었는가?&lt;/em&gt; 혹은 &lt;em&gt;매개변수로 저런 값을 받는 것이 맞는가?&lt;/em&gt;와 같은
의문을 굳이 가지지 말자. 책은 그에 대한 대답을 전혀 해주지 않을 것이다.&lt;/p&gt;&lt;p&gt;마지막으로 다시 강조하는데 이 책은 &lt;strong&gt;빌드업이 심하다&lt;/strong&gt;.
그러므로 &lt;strong&gt;초반부 내용은 가볍게 넘어가고&lt;/strong&gt;,
중후반부만 제대로 읽어도 이 책으로부터 충분히 본전을 뽑을 수 있을 것이다.
이 빌드업이 심하다는 점에 대해 구체적으로 설명하기가 힘든데,
마지막 15장에서 디자인 패턴에 대해 설명하기 위해 이전의 챕터들이
각각 다른 디자인 패턴을 구현하고 있었음을 밝히는 내용이 대표적인 예라고 생각한다.&lt;/p&gt;&lt;h2&gt;후기&lt;/h2&gt;&lt;p&gt;해당 서적은 소프트웨어 개발자에게 있어서 중요한 교과서라고 생각한다.
물론 개인적으로 너무 얕게 설명하고 넘어갔다고 느낀 부분도 있었고,
동의하기 어려운 내용도 있었고, 전혀 알 필요가 없다고 느낀 내용도 있었다.
그러나 이 책을 읽으며 머릿속의 지식들이 보다 체계적으로 연결되었으며,
설계에 대한 나름대로의 논리체계가 생겨났다.
&amp;quot;배경지식이 쌓인다&amp;quot;는 느낌을 실시간으로 느끼면서 읽을 수 있는 몇 안되는 책이라고 생각한다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;표지 때문에 &amp;quot;토끼책&amp;quot;이라고도 불린다. 아는 척하기 좋은 지식이니 꼭 암기해놓자.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[Java] 데코레이터 패턴: 구현과 한계]]></title><description><![CDATA[데코레이터 패턴을 통해 특정한 데이터에 대해 일련의 작업을 순차적으로 적용하는 구조를 만들어보자. 그리고 이러한 코드의 한계에 대하여 논해보자. 유연한 코드의 이면에는 구조의 복잡성이 자리잡고 있다.]]></description><link>https://bugoverdose.github.io/development/decorator-pattern-implementation-and-limitations/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/decorator-pattern-implementation-and-limitations/</guid><pubDate>Thu, 26 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;우테코 지하철 경로 조회 미션 중 이동거리, 연령 정보 등의 조건에 따라
요금 정보를 계산하는 기능을 구현할 일이 있었다.
이 요구사항을 데코레이터 패턴으로 구현해본 일과 이에 대해 받은 리뷰에 대해 다루어보고자 한다.&lt;/p&gt;&lt;h2&gt;요구사항&lt;/h2&gt;&lt;p&gt;요금 정책은 기본적으로 &lt;a href=&quot;http://www.seoulmetro.co.kr/kr/page.do?menuIdx=354&quot;&gt;서울 교통 공사&lt;/a&gt;의
지하철 운임정책에 기반을 두고 있다.
해당 게시글에서는 데코레이터 패턴의 이점을 확인하기 위한 최소한의 요구사항만 남겼다.&lt;/p&gt;&lt;ol&gt;&lt;li&gt;기본운임&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;기본적으로 1250원을 기본요금으로 받는다.&lt;/p&gt;&lt;ol start=&quot;2&quot;&gt;&lt;li&gt;이용거리 초과시 추가운임&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;이용거리를 초과하는 경우 추가운임을 단계적으로 부과한다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;10km 이내인 경우 1250원을 그대로 부과&lt;ul&gt;&lt;li&gt;ex) 9km = 1250원&lt;/li&gt;&lt;li&gt;ex) 10km = 1250원&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;10km 초과 50km 이내: 5km까지 마다 100원 추가&lt;ul&gt;&lt;li&gt;ex) 11km = 10km + 1km = 1350원&lt;/li&gt;&lt;li&gt;ex) 16km = 10km + 6km = 1450원&lt;/li&gt;&lt;li&gt;ex) 50km = 10km + 40km = 2050원&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;50km 초과: 8km까지마다 100원 추가&lt;ul&gt;&lt;li&gt;ex) 51km = 10km + 40km + 1km = 2150원&lt;/li&gt;&lt;li&gt;ex) 58km = 10km + 40km + 8km = 2150원&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ol start=&quot;3&quot;&gt;&lt;li&gt;연령별 요금 할인&lt;/li&gt;&lt;/ol&gt;&lt;ul&gt;&lt;li&gt;유아(6세 미만) : 무료&lt;/li&gt;&lt;li&gt;청소년(13세 이상 ~ 19세 미만) : 운임에서 350원을 공제한 금액의 20% 할인&lt;/li&gt;&lt;li&gt;어린이(6세 이상 ~ 13세 미만) : 운임에서 350원을 공제한 금액의 50% 할인&lt;/li&gt;&lt;li&gt;노인(65세 이상) : 무료&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;데코레이터 패턴&lt;/h2&gt;&lt;p&gt;위의 요구사항을 정리하자면 &lt;strong&gt;기본요금 1250원에 이용거리에 따른 추가요금을 더하고, 연령 할인을 적용&lt;/strong&gt;해줘야 한다.
이때 유의할 점은 바로 연령별 요금 할인이 비율로 적용된다는 점이다.
이 때문에 기본요금에 이용거리에 따른 추가요금을 더하고 연령 할인을 적용해주는 경우와
기본요금에 연령 할인을 적용하고 이용거리에 따른 추가요금을 더하는 경우는 다른 결과를 초래한다.
즉, 현재 요구사항은 &amp;quot;요금&amp;quot;에 대해 순차적으로 특정한 작업을 수행해야 하는데,
이 개별 작업이 적용되는 &lt;strong&gt;순서&lt;/strong&gt;가 중요하다는 뜻이다.&lt;/p&gt;&lt;p&gt;이러한 관점에서 특정한 데이터에 대해 다양한 작업을 순차적으로 적용할 수 있도록
&lt;em&gt;꾸며주는&lt;/em&gt; &lt;strong&gt;데코레이터 패턴&lt;/strong&gt;을 사용하여 현재 요구사항을 구현해볼 수 있을 것이다.
아래의 의존성 다이어그램을 통해 도메인 간의 전체적인 구조를 파악해보자.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/97fa12310cc170d2e326ab7385906325/076ca/decorator-pattern.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:66.25766871165644%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACBElEQVQ4y32S6VLjMBCE8zjxKR+J5SvJmmAcX7KdsMAWvP9rfFuWAwtUlh9T6tL09PRotLIsC9u2mc/v+HM4joNjOTg6b2refPe9bjWD/wm+YyEEWZZRqJz9/Z5OXSjujiRpiuu6XwVvufkcpmniCY+h6ahVyaQeeH7s6buWstgvLk3zg/+j4HvXuShLUmIZcSxT7u4TkjhGbjcfnB9Htq/vZBkGpmFiWgaGtcYw15iuhWkbC7avuZl3dbm65UqP6Qds8wwZS7LdjjTLyLIc3/MIZUKUZ6RpSprn+j5Jlve8KWis18RJxul8pqorhvGMmi70w4TcbjmUDcdB0XYdw3RBjRearicI/Nsjr401eRTxeOpo64K3p4ZJVdRlgYwCqvxAV5f0bcHzeET1FdXxwCYMbju0XR9bBDheiOttCHY9biBxvRBHhDpnO65elm0vsWB7dmghHOe6fgNX+DjvBa6H4wqNhfCXnCt03nH9ZXGzic9bFn5AqiZ2v/bU3cSpHanqlrppafuBu2OJH4QkreJwLKjqnodTR90qmran6RQPdUu42ehlrnzP5+n8SNOXvL2MvD4r+mHkvmq0cF+XRNuIi5roxoo/v3teX0aU5tSUp4ahq/UfNWbBedRDkiLjiCzZkqcRkZT4Yai7RtsQTwh2MiFO/nGklAThRsf8wT1PaId/ASj0pqX0ay3nAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;데코레이터 패턴&quot; title=&quot;데코레이터 패턴&quot; src=&quot;/static/97fa12310cc170d2e326ab7385906325/a6d36/decorator-pattern.png&quot; srcSet=&quot;/static/97fa12310cc170d2e326ab7385906325/222b7/decorator-pattern.png 163w,/static/97fa12310cc170d2e326ab7385906325/ff46a/decorator-pattern.png 325w,/static/97fa12310cc170d2e326ab7385906325/a6d36/decorator-pattern.png 650w,/static/97fa12310cc170d2e326ab7385906325/076ca/decorator-pattern.png 914w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;h3&gt;구조 구현&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Fare&lt;/code&gt; 인터페이스는 요금 계산을 위해 필요한 &lt;code&gt;calcuate&lt;/code&gt;라는 단 하나의 추상 메서드를 정의하고 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;BasicFare&lt;/code&gt;는 &lt;code&gt;calcuate&lt;/code&gt;가 호출되었을 때 기본요금 1250원을 반환해주는 객체를 만들기 위한 구체클래스다.
&lt;code&gt;Fare&lt;/code&gt; 구현체들 중 유일하게 인스턴스화되기 위해 다른 &lt;code&gt;Fare&lt;/code&gt;의 존재를 필요로 하지 않는다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BasicFare&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;VALUE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1250&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;VALUE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;Decorator&lt;/code&gt;는 다른 &lt;code&gt;Fare&lt;/code&gt; 객체를 꾸미는 역할을 맡는 구현체를 만들기 위한 추상클래스다.
꾸밀 대상이 되는 &lt;code&gt;Fare&lt;/code&gt; 인스턴스를 생성자에서 받고, &lt;code&gt;delegate&lt;/code&gt; 메서드를 통해
꾸미는 대상이 되는 &lt;code&gt;Fare&lt;/code&gt;의 &lt;code&gt;calculate&lt;/code&gt; 메서드를 호출하도록 할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Decorator&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Decorator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;delegate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;DistanceOverFare&lt;/code&gt;는 인스턴스화되기 위해 &amp;quot;현재 요금 정보&amp;quot;를 상징하는 다른 &lt;code&gt;Fare&lt;/code&gt; 인스턴스와
이동거리(&lt;code&gt;distance&lt;/code&gt;)를 매개변수로 받는다.
&lt;code&gt;calculate&lt;/code&gt;가 호출되면 내부적으로 &lt;code&gt;delegate&lt;/code&gt;를 통해
다른 &lt;code&gt;Fare&lt;/code&gt; 인스턴스의 현재 요금 정보를 받고, 그에 대해 이동거리에 따른 추가요금을 적용한 값을 반환한다.
클래스 내부의 &lt;code&gt;DistanceOverFarePolicy&lt;/code&gt;라는 enum을 둠으로써
다양한 종류의 이동거리 정책을 내부적으로 관리할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DistanceOverFare&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Decorator&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; distance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DistanceOverFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; delegate&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delegate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;distance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; distance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; fare &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;delegate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; distanceOverFare &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculateOverFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; fare &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; distanceOverFare&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculateOverFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Arrays&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DistanceOverFarePolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;policy &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; policy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isApplicableTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mapToInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;policy &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; policy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toOverFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DistanceOverFarePolicy&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;token function&quot;&gt;OVER_TEN&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;OVER_FIFTY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;MAX_VALUE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;OVER_FARE_AMOUNT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; startExclusive&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; endInclusive&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;DistanceOverFarePolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; startExclusive&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; endInclusive&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; limit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;startExclusive &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; startExclusive&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;endInclusive &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; endInclusive&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;limit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isApplicableTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; startExclusive&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toOverFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; overDistance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;distance&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; endInclusive&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; startExclusive&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculateOverFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;overDistance&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; limit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculateOverFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; overDistance&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; limit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; overFareDigit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;overDistance &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; limit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;overFareDigit &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;OVER_FARE_AMOUNT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;AgeDiscountFare&lt;/code&gt;는 인스턴스화되기 위해 &amp;quot;현재 요금 정보&amp;quot;를 상징하는 다른 &lt;code&gt;Fare&lt;/code&gt; 인스턴스와
나이(&lt;code&gt;age&lt;/code&gt;)를 매개변수로 받는다.
&lt;code&gt;calculate&lt;/code&gt;가 호출되면 내부적으로 &lt;code&gt;delegate&lt;/code&gt;를 통해
다른 &lt;code&gt;Fare&lt;/code&gt; 인스턴스의 현재 요금 정보를 받고, 그에 대해 연령 할인을 적용한 값을 반환한다.
클래스 내부의 &lt;code&gt;Age&lt;/code&gt;라는 enum을 둠으로써 다양한 종류의 연령 할인 방법을 내부적으로 관리할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AgeDiscountFare&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Decorator&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;BASIC_DISCOUNT_AMOUNT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;350&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CHILD_MIN_AGE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ADOLESCENT_MIN_AGE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ADULT_MIN_AGE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ELDERLY_MIN_AGE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;65&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Age&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AgeDiscountFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; delegate&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;delegate&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; fare &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;delegate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;applyDiscount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fare&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Age&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;token function&quot;&gt;BABY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;CHILD_MIN_AGE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.00&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;CHILD&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CHILD_MIN_AGE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ADOLESCENT_MIN_AGE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;BASIC_DISCOUNT_AMOUNT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.50&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;ADOLESCENT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;ADOLESCENT_MIN_AGE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ADULT_MIN_AGE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;BASIC_DISCOUNT_AMOUNT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;ADULT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;ADULT_MIN_AGE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ELDERLY_MIN_AGE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.00&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;ELDERLY&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;ELDERLY_MIN_AGE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;150&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.00&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;INVALID_AGE_RANGE_EXCEPTION&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;0과 150 사이의 연령만 입력가능합니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; startInclusive&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; endExclusive&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; discountAmount&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; discountRatio&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;Age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; startInclusive&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; endExclusive&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; discountAmount&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; discountRatio&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;startInclusive &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; startInclusive&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;endExclusive &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; endExclusive&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;discountAmount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; discountAmount&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;discountRatio &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; discountRatio&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Age&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Arrays&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isAgeOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findAny&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;orElseThrow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;INVALID_AGE_RANGE_EXCEPTION&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isAgeOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;&amp;gt;=&lt;/span&gt; startInclusive &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; endExclusive&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;applyDiscount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; fare&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fare &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; discountAmount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; discountRatio&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 구조의 핵심은 간단하다. 오직 &lt;code&gt;BasicFare&lt;/code&gt;만이 독립적으로 인스턴스화될 수 있으며,
그 외의 &lt;code&gt;Decorator&lt;/code&gt;의 자식 클래스들은 자신이 꾸밀 대상으로 다른 &lt;code&gt;Fare&lt;/code&gt; 인스턴스를 필요로 한다는 것이다.
이제 이 코드를 사용해보도록 하자.&lt;/p&gt;&lt;h3&gt;클라이언트 코드 구현&lt;/h3&gt;&lt;p&gt;예를 들어 15세 청소년이 12km만큼 이동했다고 생각해보자.
이 경우, 기본요금 1250원에 대해 100원(10km 초과 15km 이내)을 더하고, 연령 할인에 따라
350원을 공제한 후 그 결과물에 대해 20% 할인을 적용해야 한다.
이처럼 기본요금에 대해 이동거리 정책을 적용하고, 그 결과에 대해 연령 할인을 적용하는 과정을
코드로 구현하자면 아래와 같다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; 이동거리_정책_적용_후_연령_할인_적용&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; fare &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AgeDiscountFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DistanceOverFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BasicFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; actual &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; fare&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; expected &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1250&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;350&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;actual&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEqualTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;expected&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이 상황에서 예를 들어 &lt;em&gt;연령 할인을 적용한 후에&lt;/em&gt; 이동거리 초과에 따른 추가비용을 더하도록 요구사항이 변경되었다고 가정해보자.
이 경우 &lt;code&gt;AgeDiscountFare&lt;/code&gt;를 &lt;code&gt;DistanceOverFare&lt;/code&gt;가 감싸도록 코드를 수정하면 된다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; 연령_할인_적용_후_이동거리_정책_적용&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; fare &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DistanceOverFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AgeDiscountFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BasicFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; actual &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; fare&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;calculate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; expected &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1250&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;350&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;actual&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEqualTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;expected&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;여기서 새로운 기능이 추가되거나 기존 기능이 제거되는 경우, 이처럼 데코레이터들의 적용방식을 수정하면 된다.
이러한 측면에서 기본적으로 위의 코드는 &lt;strong&gt;변경에 유연하게 대처&lt;/strong&gt;할 수 있는 코드라고 볼 수 있다.&lt;/p&gt;&lt;h2&gt;문제점&lt;/h2&gt;&lt;p&gt;그런데 코치분들 중 한 명은 위의 코드를 보고 구조가 불필요하게 복잡하다고 리뷰를 해주셨다.
이는 데코레이터 패턴을 잘못 적용했다는 것이 아니라
현재 요구사항에서 데코레이터 패턴을 적용하는 것은 오버엔지니어링이었다는 의미였다.&lt;/p&gt;&lt;p&gt;기본적으로 위의 구조가 복잡하다는 점은 명백하다.
&lt;code&gt;Fare&lt;/code&gt;와 &lt;code&gt;Decorator&lt;/code&gt;의 구현 및 상속구조를 이해하기 위해서는
다양한 파일을 비교해보아야 하며,
적용할 &lt;code&gt;Decorator&lt;/code&gt;가 증가할수록 클라이언트 코드는 끝없이 좌우로 길어진다.&lt;/p&gt;&lt;p&gt;실제로 데코레이터 패턴이 지닌 단점으로
데코레이터 객체와 실제 구현 객체의 구분이 되지 않기 때문에
&lt;strong&gt;코드만으로는 기능이 어떻게 동작하는지 이해하기 어려우며&lt;/strong&gt;,
동작방식을 이해하기 위해 &lt;strong&gt;런타임에 생성되는 객체의 구조를 이해해야 한다&lt;/strong&gt;는 등의
내용을 책들에서 쉽게 확인해볼 수 있다.&lt;/p&gt;&lt;p&gt;그러한 맥락에서 간단한 구조로
현재 요구사항을 구현할 수 있는 방법에 대해 생각해보자.&lt;/p&gt;&lt;h2&gt;개선방안: 값 객체와 메서드 체이닝&lt;/h2&gt;&lt;p&gt;다양한 방법이 있겠지만, 기본적으로 &lt;code&gt;Fare&lt;/code&gt;를 값 객체로 만드는 방법을 생각해볼 수 있다.
세부적인 구현은 아래와 같다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;applyDistanceOverFarePolicies&lt;/code&gt; 메서드 : 거리 정보를 받아 현재 요금에 대해
거리 요금 정책을 적용한 새로운 &lt;code&gt;Fare&lt;/code&gt; 인스턴스를 반환.&lt;/li&gt;&lt;li&gt;&lt;code&gt;applyAgeDiscountPolicy&lt;/code&gt; 메서드 : 나이 정보를 받아 현재 요금에 대해
연령 할인 정책을 적용한 새로운 &lt;code&gt;Fare&lt;/code&gt; 인스턴스를 반환&lt;/li&gt;&lt;li&gt;&lt;code&gt;toInt&lt;/code&gt; : 현재 요금을 &lt;code&gt;int&lt;/code&gt; 타입의 값으로 반환&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;EXTRA_FARE_NOT_FOUND_EXCEPTION&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;추가 요금 정보가 제공되지 않았습니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;applyDistanceOverFarePolicies&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; distanceOverFare &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Arrays&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DistanceOverFarePolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;policy &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; policy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isApplicableTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mapToInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;policy &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; policy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toOverFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; distanceOverFare&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;applyAgeDiscountPolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;AgeDiscountPolicy&lt;/span&gt; ageDiscountPolicy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AgeDiscountPolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ageDiscountPolicy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;applyDiscount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;o &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt; fare &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; fare&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hashCode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Objects&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 위의 &lt;code&gt;Fare&lt;/code&gt; 객체를 사용한 클라이언트 코드를 구현해보자.
위의 메서드들은 전부 또 다른 &lt;code&gt;Fare&lt;/code&gt; 인스턴스를 반환하기 때문에 아래와 같이
&lt;strong&gt;메서드 체이닝&lt;/strong&gt;으로 개별 작업을 연쇄적으로 적용할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculateFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; distance&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1250&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;applyDistanceOverFarePolicies&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;applyAgeDiscountPolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;한편, 예를 들어 연령 할인을 적용한 이후에 이동거리 정책을 적용하는 방식으로
요구사항이 변경된다면 아래와 같이 메서드의 호출 순서를 변경해주기만 하면 된다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculateFare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; distance&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1250&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;applyAgeDiscountPolicy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;applyDistanceOverFarePolicies&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그 외에도 새로운 할인 및 추가요금 정책이 생겨나면 새로운 메서드를 정의하여
위에 추가해주면 된다.
이는 위의 코드와 마찬가지로 &lt;strong&gt;변경에 대해 유연한 대처할 수 있음&lt;/strong&gt;을 보여준다.
뿐만 아니라 상속구조가 없다는 점에서 도메인의 구조를 파악하기 훨씬 수월하며,
클라이언트 코드의 가독성 또한 높다고 볼 수 있다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;변경에 유연하게 대처할 수 있는 &lt;em&gt;유연한 구조&lt;/em&gt;를 만드는 것은
실제로 예상된 지점에서 변경이 일어났을 때에만 의미를 지닌다.
그런데 문제는 유연한 구조란 기본적으로 &lt;em&gt;복잡한 구조&lt;/em&gt;를 의미한다는 점이다.&lt;/p&gt;&lt;p&gt;그리고 발생할지 모르는 변화의 가능성에 대비하기 위해
구조의 복잡성이라는 희생을 100% 확률로 감수하는 것은
기본적으로 비합리적인 선택이다.&lt;/p&gt;&lt;p&gt;디자인 패턴에 대한 공부도 필수적이지만
실제 애플리케이션을 구현하게 되었을 때 이러한 패턴의 적용에 대해서는 신중해야 할 것이다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788969090010&quot;&gt;개발자가 반드시 정복해야 할 객체 지향과 디자인 패턴&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;amp;mallGb=KOR&amp;amp;barcode=9791158391409&amp;amp;orderClick=LEa&amp;amp;Kc=&quot;&gt;오브젝트&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;&lt;code&gt;DistanceOverFarePolicy&lt;/code&gt;는 위의 &lt;code&gt;DistanceOverFare&lt;/code&gt; 내부의 동명의 enum과 동일하며,
&lt;code&gt;AgeDiscountPolicy&lt;/code&gt;는 위의 &lt;code&gt;AgeDiscountFare&lt;/code&gt; 내부의 &lt;code&gt;Age&lt;/code&gt; 내부 enum과 실질적으로 동일하다.
중요하지 않으며, 위의 코드에서 충분히 유추될 수 있으므로 해당 게시글에서는 생략했다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[Java] 어댑터 패턴과 OCP]]></title><description><![CDATA[어댑터 패턴을 통해 외부 라이브러리에 대한 의존성을 도메인으로부터 분리하는 과정을 다룬다. 추상화에 대한 의존과 객체의 사용과 생성의 분리라는 관점에서 OCP에 부합하도록 클라이언트 코드를 리팩토링해보자.]]></description><link>https://bugoverdose.github.io/development/adapter-pattern-and-ocp/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/adapter-pattern-and-ocp/</guid><pubDate>Wed, 25 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;우테코 지하철 경로 조회 미션 중 그래프에서 최단경로를 조회하는 기능을 구현할 일이 있었다.
처음에는 다익스트라 알고리즘을 직접 구현하였으나
외부 라이브러리를 사용하는 방식으로 코드를 수정하였다.&lt;/p&gt;&lt;p&gt;해당 게시글은 이 코드를 어댑터 패턴으로 리팩토링하는 과정을
단계적으로 다룬다. &lt;code&gt;jgrapht&lt;/code&gt; 라이브러리와 관련된 내용은
&lt;strong&gt;&lt;div to=&quot;/development/finding-shortest-path-with-jgrapht&quot;&gt;지난 게시글&lt;/div&gt;&lt;/strong&gt;을
참고하여라.&lt;/p&gt;&lt;h2&gt;도메인&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;지하철역(&lt;code&gt;Station&lt;/code&gt;) : 노드, 정점(vertex)&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 생성자, equals/hashCode 등 세부 사항 생략&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;구간(&lt;code&gt;Section&lt;/code&gt;) : 두 개의 지하철역(정점)으로 구성되며, 거리를 가중치로 지니고 방향성을 지니는 간선(weighted edge)&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; lineId&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 등록된 노선에 대한 정보&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; upStation&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 정점1&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; downStation&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 정점2&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; distance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 가중치&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 생성자, equals/hashCode 등 세부 사항 생략&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;경로(&lt;code&gt;Path&lt;/code&gt;) : 출발역, 도착역, 구간들의 정보를 받아 생성하는 최단경로&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;List&amp;lt;Station&amp;gt; toStations()&lt;/code&gt; : 최단경로를 출발역부터 도착역까지 나열한 리스트&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;int calculateDistance()&lt;/code&gt; : 최단경로의 거리 총합&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;List&amp;lt;Long&amp;gt; getPassingLineIds()&lt;/code&gt; : 지나가는 구간들이 등록된 모든 노선들의 id의 리스트&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;초기 구현&lt;/h2&gt;&lt;p&gt;많은 부분이 생략되었지만 기본적으로 &lt;code&gt;Path&lt;/code&gt; 클래스 내부에서
&lt;code&gt;jgrapht&lt;/code&gt; 라이브러리를 직접 사용하면 아래와 같이 로직을 구현할 수 있다.
&lt;code&gt;getPassingLineIds&lt;/code&gt; 메서드를 구현하기 위해서는
&lt;code&gt;Section&lt;/code&gt;에 포함된 &lt;code&gt;lineId&lt;/code&gt; 데이터가 필요하며,
이를 계산하기 위해서는 최단경로 &lt;code&gt;List&amp;lt;Section&amp;gt;&lt;/code&gt; 형식으로 반환받을 필요가 있다.
이때 &lt;code&gt;Section&lt;/code&gt; 대신 &lt;code&gt;SectionProxy&lt;/code&gt;를 활용하여
최단경로의 구간들을 반환받는 경우, 간단하게
&lt;code&gt;List&amp;lt;SectionProxy&amp;gt;&lt;/code&gt;를 &lt;code&gt;List&amp;lt;Section&amp;gt;&lt;/code&gt;으로 변환받을 수 있다.
왜 굳이 프록시 객체를 구현했는지 의문이 든다면&lt;br/&gt;
&lt;strong&gt;&lt;div to=&quot;/development/finding-shortest-path-with-jgrapht&quot;&gt;지난 게시글&lt;/div&gt;&lt;/strong&gt;을 참고하여라.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GraphPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;GraphPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; shortestPath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toGraph&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; shortestPath&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toGraph&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; graph &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; vertex &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toVertices&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vertex&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt; edge &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toEdges&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSourceVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTargetVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; graph&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toVertices&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; vertices &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; section &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            vertices&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;section&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toStations&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; vertices&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toEdges&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GraphPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                                             &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                                                             &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; shortestPath&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;GraphPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; shortestPath&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;PATH_NOT_CONNECTED_EXCEPTION&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toStations&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getVertexList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculateDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getPassingLineIds&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getEdgeList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toDomain&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getLineId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;distinct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;// 생략. 이전 게시물 및 아래의 NavigatorJgraphtAdapter 참고.&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;문제점과 개선 방안&lt;/h3&gt;&lt;p&gt;위의 코드는 정상적으로 동작하는 그럭저럭 나쁘지 않은 코드다.
&lt;code&gt;Station&lt;/code&gt;과 &lt;code&gt;Section&lt;/code&gt;과 같은 다른 도메인을 수정하지 않고도,
&lt;code&gt;jgrapht&lt;/code&gt; 라이브러리에서 제공하는 기능을 적절하게 활용하여
필요한 기능을 전부 구현하였다.&lt;/p&gt;&lt;p&gt;그런데 문제는 하나 있다.
바로 &lt;code&gt;Path&lt;/code&gt;가 &lt;code&gt;jgrapht&lt;/code&gt;에 직접적으로 의존하고 있다는 점이다.
이 때문에 &lt;code&gt;Path&lt;/code&gt; 객체 내부의 로직은
&lt;strong&gt;&lt;code&gt;jgrapht&lt;/code&gt; 라이브러리에서 제공하는 인터페이스에 종속된다.&lt;/strong&gt;
그러므로 만일 &lt;code&gt;jgrapht&lt;/code&gt; 대신 다른 외부 라이브러리를 사용하게 되거나,
직접 다익스트라 알고리즘을 구현해야 하는 등 &lt;strong&gt;최단경로 계산&lt;/strong&gt;에
사용되는 로직을 변경할 일이 있다면 &lt;code&gt;Path&lt;/code&gt; 객체 전체를 수정해줘야 한다.&lt;/p&gt;&lt;p&gt;이 문제를 해결하는 방법은
&lt;code&gt;Path&lt;/code&gt; 대신 &lt;em&gt;&lt;code&gt;jgrapht&lt;/code&gt; 라이브러리에 의존하는 객체&lt;/em&gt;를 별도로 구현하고,
&lt;code&gt;Path&lt;/code&gt;를 &lt;em&gt;해당 객체&lt;/em&gt;에 의존하도록 하는 것이다.
&lt;code&gt;Path&lt;/code&gt;에서 &lt;em&gt;이 객체&lt;/em&gt;가 제공하는 퍼블릭 인터페이스를 사용하면
&lt;em&gt;해당 객체&lt;/em&gt;는 &lt;code&gt;jgrapht&lt;/code&gt; 라이브러리의 인터페이스를 내부적으로
적절하게 사용하여 그 결과를 반환해준다.
&lt;em&gt;이 객체&lt;/em&gt;가 바로 &lt;strong&gt;어댑터&lt;/strong&gt;이다. 코드를 통해 자세히 알아보자.&lt;/p&gt;&lt;h2&gt;어댑터 구현&lt;/h2&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;Navigator&amp;lt;V, E&amp;gt;&lt;/code&gt; : 추상화. 정점(Vertex)과 간선(Edge)의 타입을 제네릭으로 받는 인터페이스.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;두 정점 사이의 최단 거리를 간선들의 리스트로 반환하는 추상 메서드 정의&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Navigator&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculateShortestPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;V&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;V&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;NavigatorJgraphtAdapter&lt;/code&gt; : &lt;code&gt;jgrapht&lt;/code&gt; 라이브러리를 직접 사용하는 &lt;code&gt;Navigator&lt;/code&gt;의 구현체&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NavigatorJgraphtAdapter&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Navigator&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;PATH_NOT_CONNECTED_EXCEPTION&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;해당 역으로 이동하는 경로는 존재하지 않습니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; dijkstraPath&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NavigatorJgraphtAdapter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; dijkstraPath&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dijkstraPath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dijkstraPath&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NavigatorJgraphtAdapter&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; shortestPath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toGraph&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NavigatorJgraphtAdapter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shortestPath&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toGraph&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; graph &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; vertex &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toVertices&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vertex&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt; edge &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toEdges&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSourceVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTargetVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; graph&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toVertices&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; vertices &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashSet&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; section &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            vertices&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;section&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toStations&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vertices&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toEdges&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;calculateShortestPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;GraphPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toValidShortestPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getEdgeList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toSection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GraphPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toValidShortestPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;GraphPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dijkstraPath&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;PATH_NOT_CONNECTED_EXCEPTION&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;section &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getSourceVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUpStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getTargetVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDownStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toSection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;o &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt; that &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Objects&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;section&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; that&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;section&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hashCode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Objects&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;section&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 코드에서 &lt;code&gt;NavigatorJgraphtAdapter&lt;/code&gt;의 내부 로직 자체는 그다지 중요하지 않다.
핵심은 &lt;code&gt;Navigator&amp;lt;Station, Section&amp;gt;&lt;/code&gt;을 구현한다는 점이다.
&lt;code&gt;Navigator&amp;lt;Station, Section&amp;gt;&lt;/code&gt;의 구현체라는 것은
지하철역 두 개 사이의 최단경로를 구간들의 리스트로 반환하는
&lt;code&gt;List&amp;lt;Section&amp;gt; calculateShortestPath(Station source, Station target)&lt;/code&gt; 메서드를
외부에 제공한다는 점을 의미한다.&lt;/p&gt;&lt;p&gt;클라이언트 코드를 통해 이 의미에 대해 이해해보자.&lt;/p&gt;&lt;h2&gt;클라이언트 코드 - OCP 위배&lt;/h2&gt;&lt;p&gt;우선 &lt;code&gt;Path&lt;/code&gt;에서 &lt;code&gt;jgrapht&lt;/code&gt;에 관한 로직을 전부 제거하고,
&lt;code&gt;NavigatorJgraphtAdapter&lt;/code&gt; 객체를 사용하는 방식으로 코드를 수정해보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SELF_LOOP_EXCEPTION&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;출발점과 도착점은 동일할 수 없습니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; route&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; route&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;source &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;route &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; route&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Navigator&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; navigator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NavigatorJgraphtAdapter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; navigator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;calculateShortestPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toStations&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; stations &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        stations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; section &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; route&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; lastStation &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; stations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;stations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            stations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;section&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getOppositeEnd&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lastStation&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; stations&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; route&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mapToInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getPassingLineIds&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; route&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getLineId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;distinct&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 코드를 확인해보면 &lt;code&gt;Path&lt;/code&gt;가 더 이상
&lt;code&gt;jgrapht&lt;/code&gt; 라이브러리에 직접적으로 의존하지 않음을 알 수 있다.
&lt;code&gt;Path&lt;/code&gt;는 그저 &lt;code&gt;Navigator&amp;lt;Station, Section&amp;gt;&lt;/code&gt; 구현체의
&lt;code&gt;calculateShortestPath&lt;/code&gt; 메서드를 호출하여 최단경로를
&lt;code&gt;List&amp;lt;Section&amp;gt;&lt;/code&gt; 형식으로 반환받을 뿐이다.
즉, &lt;code&gt;Path&lt;/code&gt; 입장에서는 &lt;code&gt;calculateShortestPath&lt;/code&gt;가 내부적으로 어떻게
구현되었는지에 대해 모른다는 것이다.&lt;/p&gt;&lt;p&gt;그런데 문제가 하나 있다. 위의 코드에서
&lt;code&gt;Navigator&amp;lt;Station, Section&amp;gt;&lt;/code&gt; 구현체에 관한 부분만 자세히 확인해보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 객체 생성 : 구체클래스를 통해 객체를 생성하여 추상타입으로 받기&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Navigator&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; navigator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NavigatorJgraphtAdapter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 객체 사용 : calculateShortestPath 메서드 호출&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; navigator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;calculateShortestPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 코드에서 문제가 되는 점은
&lt;code&gt;Path&lt;/code&gt;는 &lt;code&gt;Navigator&lt;/code&gt; 인터페이스를 사용할 뿐만 아니라,
&lt;code&gt;NavigatorJgraphtAdapter&lt;/code&gt; 구현체를 생성하고 있다는 점이다.
즉, &lt;strong&gt;객체의 생성과 사용에 대한 책임을 모두 &lt;code&gt;Path&lt;/code&gt;가 지니고 있다&lt;/strong&gt;는 것이다.&lt;/p&gt;&lt;p&gt;그러므로 만일 &lt;code&gt;jgrapt&lt;/code&gt; 라이브러리가 아닌
다른 외부 라이브러리 혹은 직접 구현한 로직을 사용하여 최단경로를 계산해주는
새로운 어댑터 객체(e.g., &lt;code&gt;AnotherAdapter&lt;/code&gt;)를 별도로 구현하는 경우,
&lt;code&gt;Path&lt;/code&gt;는 내부적으로 &lt;code&gt;NavigatorJgraphtAdapter&lt;/code&gt; 대신
새로운 어댑터 객체를 생성해줘야 할 것이다.
그런데 만일 이 새로운 어댑터 객체를 생성할 때 필요한 정보가
기존 &lt;code&gt;NavigatorJgraphtAdapter&lt;/code&gt; 객체와 다를 경우,
&lt;code&gt;Path&lt;/code&gt;의 &lt;code&gt;of&lt;/code&gt; 정적 팩토리 메서드의 매개변수를 수정하는 등
외부로부터 필요한 정보를 얻어와야 할 수도 있다.&lt;/p&gt;&lt;p&gt;이처럼 객체의 생성에 대한 책임은 해당 객체에 대해 다양한 정보를 알 것을 요구하기 때문에
&lt;code&gt;Path&lt;/code&gt;에서 구체클래스를 직접 생성해야 함은 &lt;code&gt;Path&lt;/code&gt;가 변경에 취약함을 의미한다.&lt;/p&gt;&lt;p&gt;사실 어렵게 생각할 필요 없이
&lt;strong&gt;OCP의 핵심은 추상화에 대한 의존&lt;/strong&gt;에 있는데,
현재의 &lt;code&gt;Path&lt;/code&gt;는 추상화만이 아니라 그 구현체에 대해서도 의존하고 있는게 문제이다.
그렇기 때문에 현재 코드는 OCP를 위배하며,
&lt;code&gt;Navigator&lt;/code&gt;라는 인터페이스를 만든 효용이 딱히 없는 상황이라고 볼 수 있다.
이는 아래의 다이어그램을 통해서도 확인할 수 있다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:640px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/ad3ce0f9596dd5a3f5c48bd548b20632/6af66/non-ocp-adapter-pattern.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:72.39263803680981%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAABqklEQVQoz4VSDXPiIBD151xYYFkwegkkIX602tNpz6oxsdrr/f8fcUNQ25m2c28YZhd4vOWxA9GDXxFi4OM8LeaZdXk9mZbeV7729aTytSuL3NmirNI05ZwPIgeuCHECbp7dH6t6Xm333bZp2+Nr052eNrvlajW9my1Xa2stY+wLMuccJSJXaWbyu5HkUimFiFLKonDpcIg9AGAgYqkfyo4pcJBaoMbbFnBORMaYKCaEGECo8wckjCUsSRIWkSQcAXhYjGnY6mdE1FozxsKbpRD5bJFVZVmWvp547319sScGk+ksrF/HeDzWWl+UBYfq8Ld6elg+LJr2tD107eltszs879umOzfdedccn/ft4fjavvzZ7A7WWiK6KHPOCSWhijaoHkII59xwOEQpMXoVA0Tq8U6GT24DACIaY0hrbbTWmq4wxiilLmXz79zu7xHBRhiNRkphJNz+NSh/7rAIACDS2Xpra+ectdZmWZbnORHdTn7dJJyHX9LGlNsXv6htnq0ef3fnt1/rRyJ6V/6ezIjIZT9tHmSdc97XRVH+n/whvT0yNMul+a/kf113qbk+XPM8AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;OCP에 위배되는 어댑터 패턴&quot; title=&quot;OCP에 위배되는 어댑터 패턴&quot; src=&quot;/static/ad3ce0f9596dd5a3f5c48bd548b20632/6af66/non-ocp-adapter-pattern.png&quot; srcSet=&quot;/static/ad3ce0f9596dd5a3f5c48bd548b20632/222b7/non-ocp-adapter-pattern.png 163w,/static/ad3ce0f9596dd5a3f5c48bd548b20632/ff46a/non-ocp-adapter-pattern.png 325w,/static/ad3ce0f9596dd5a3f5c48bd548b20632/6af66/non-ocp-adapter-pattern.png 640w&quot; sizes=&quot;(max-width: 640px) 100vw, 640px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;그러한 맥락에서 위의 코드를 조금만 수정해보자.&lt;/p&gt;&lt;h2&gt;클라이언트 코드 - OCP 충족&lt;/h2&gt;&lt;p&gt;OCP를 충족시키는 코드를 만들고 싶다면
&lt;code&gt;Path&lt;/code&gt;에는 &lt;strong&gt;객체의 사용에 대한 책임&lt;/strong&gt;만 남겨놓고,
&lt;strong&gt;객체의 생성에 대한 책임&lt;/strong&gt;을
&lt;code&gt;Path&lt;/code&gt;를 사용하는 그 클라이언트 코드로 이동시켜야 한다.
아래의 코드를 통해 이해해보자.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;Path&lt;/code&gt; : 객체를 의존성으로 외부로부터 주입받아서 &lt;strong&gt;사용&lt;/strong&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Navigator&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; navigator&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 객체 사용 : 추상타입을 받아 calculateShortestPath 메서드 호출&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; navigator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;calculateShortestPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;Path&lt;/code&gt;를 사용하는 클라이언트 코드 : 객체를 &lt;strong&gt;생성&lt;/strong&gt;하여 의존성으로 주입&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 객체 생성 : 구체클래스를 통해 객체를 생성하여 추상타입으로 받기&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Navigator&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; navigator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NavigatorJgraphtAdapter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sections&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 의존성 주입 : 추상타입을 그대로 주입&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;startStation&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; endStation&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; navigator&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 &lt;code&gt;Path&lt;/code&gt; &lt;strong&gt;클래스&lt;/strong&gt;는 오직 &lt;code&gt;Navigator&amp;lt;Station, Section&amp;gt;&lt;/code&gt;라는
추상화에 대해서만 의존하고 있다.
그렇기 때문에 런타임에는 &lt;code&gt;Navigator&lt;/code&gt;를 구현한 다양한 &lt;strong&gt;객체&lt;/strong&gt;들이
&lt;code&gt;Path&lt;/code&gt; &lt;strong&gt;객체&lt;/strong&gt;에 들어올 수가 있게 되었다.
이처럼 &lt;strong&gt;컴파일타임 의존성&lt;/strong&gt;과 &lt;strong&gt;런타임 의존성&lt;/strong&gt; 사이의 불일치를 만들어내고,
의존성 주입과 같은 방식으로 그 의존성을 &lt;strong&gt;해결&lt;/strong&gt;함으로써
우리의 코드는 유연한 구조를 지니게 되었다.&lt;/p&gt;&lt;p&gt;간단히 말하자면 앞으로 다른 방식으로
&lt;code&gt;Navigator&amp;lt;Station, Section&amp;gt;&lt;/code&gt;를 구현하는 어댑터 객체가 생겨나,
&lt;code&gt;NavigatorJgraphtAdapter&lt;/code&gt;의 자리를 대신하게 되더라도,
&lt;code&gt;Path&lt;/code&gt;가 변경될 일은 전혀 없다고 볼 수 있다.
이처럼 수정에 대해서는 닫혀 있기 때문에
위의 코드는 더 이상 OCP에 위배되지 않는다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/a664584704c47eceb97a49732d9c0fbb/7527b/ocp-adapter-pattern.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:34.355828220858896%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABE0lEQVQY00WN627CMAyF+zqkduJAYycpEzAk7tPUCy0tjGnv/xIbrWDnh235+PhLAAARxzoORCSRWVjEe+9laMycOSci1lp4KknTFADGCgBqojKZba+L1WZRN33VXNr+XjXd/nh636x3pw9hTp9KXm9GLABorYksxyysHBk7y2ZE5L3EGCyRMeafrJRSqXrxH4MG0IAWU1RqMviDjHkkieh1mVhrx3/6ITRG09RoRK1x2KJGHN0xycz05CfL2896u6rOXVm3bf9V1G15vpR123S3quna671uus+izqwJx3JZF4fDru2/N9s9IiYuBMeZeB9ins/fxPuYz2PMY8xFJMQYYvQ+GK2nmXNeHLMP0Tn+I/8C1BFZp6Cdul4AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;OCP를 충족하는 어댑터 패턴&quot; title=&quot;OCP를 충족하는 어댑터 패턴&quot; src=&quot;/static/a664584704c47eceb97a49732d9c0fbb/a6d36/ocp-adapter-pattern.png&quot; srcSet=&quot;/static/a664584704c47eceb97a49732d9c0fbb/222b7/ocp-adapter-pattern.png 163w,/static/a664584704c47eceb97a49732d9c0fbb/ff46a/ocp-adapter-pattern.png 325w,/static/a664584704c47eceb97a49732d9c0fbb/a6d36/ocp-adapter-pattern.png 650w,/static/a664584704c47eceb97a49732d9c0fbb/7527b/ocp-adapter-pattern.png 754w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788969090010&quot;&gt;개발자가 반드시 정복해야 할 객체 지향과 디자인 패턴&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;amp;mallGb=KOR&amp;amp;barcode=9791158391409&amp;amp;orderClick=LEa&amp;amp;Kc=&quot;&gt;오브젝트&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[Java] JGraphT 라이브러리를 통한 최단경로 조회]]></title><description><![CDATA[해당 게시글은 jgrapht 라이브러리를 활용하는 다양한 방법에 대한 예시 코드를 제공한다. 특히 기존 도메인을 수정하지 않고 최단경로를 구간들의 목록으로 반환받는 방법에 대한 탐구 과정을 단계별로 정리하였다.]]></description><link>https://bugoverdose.github.io/development/finding-shortest-path-with-jgrapht/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/finding-shortest-path-with-jgrapht/</guid><pubDate>Tue, 24 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;우테코 지하철 경로 조회 미션 중 두 지하철 역 사이의 최단거리 경로를
계산해야 하는 상황이 있었다. 처음에는 다익스트라 알고리즘을
직접 구현하였으나 &lt;code&gt;jgrapht&lt;/code&gt; 라이브러리를 사용하는 방식으로 코드를 수정하였다.&lt;/p&gt;&lt;p&gt;해당 게시글에서는 &lt;code&gt;jgrapht&lt;/code&gt; 라이브러리를 활용하는 다양한 방법에 대한
예시 코드를 제공한다. 특히 기존 도메인을 수정하지 않고
최단경로를 구간들의 목록으로 반환받는 방법에 대한 탐구 과정을 단계별로 정리하였다.&lt;/p&gt;&lt;h2&gt;JGraphT를 통한 다익스트라 알고리즘 구현&lt;/h2&gt;&lt;p&gt;&lt;code&gt;jgrapht&lt;/code&gt; 라이브러리를 사용하려면 우선 &lt;code&gt;build.gradle&lt;/code&gt; 파일에
해당 라이브러리를 의존성으로 추가해주어야 한다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;dependencies &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    implementation &amp;#x27;org&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jgrapht&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;jgrapht&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;core&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;.1&lt;/span&gt;&amp;#x27;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;예를 들어 다음과 같은 양방향 그래프가 있다고 하자.
이때 정점 &lt;code&gt;v1&lt;/code&gt;에서 정점 &lt;code&gt;v3&lt;/code&gt;는 서로 인접해 있으나,
두 정점 사이의 가중치는 &lt;code&gt;100&lt;/code&gt;이나 된다.
두 정점 사이의 가중치를 최소화하는 최단 경로는
가중치의 합이 &lt;code&gt;2&lt;/code&gt;밖에 되지 않도록 &lt;code&gt;v2&lt;/code&gt;를 경유하는 방법이다(&lt;code&gt;v1&lt;/code&gt; -&amp;gt; &lt;code&gt;v2&lt;/code&gt; -&amp;gt; &lt;code&gt;v3&lt;/code&gt;).&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/49cb788c9c52db1e51404b901691df13/9f82e/simple-weighted-graph.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:77.30061349693251%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAABy0lEQVQ4y3VTyaoCQQycL/dDPIggnkVB8KAHQdxX3HdR3DdcUVDrUYEMPeMz0HQ6naSTSrWFf+T9fss+Ho9RKpWwWCywWq1Ep830cYvlNnw+H9lvtxsKhcJXAG3X69Xh+zMhHfTl6XSKyWSC1+uFUCiEYDAo9uFwKHdapSbV/SuhXqzXa7TbbdHz+bzdaqvVkjvT36z035bVIZ1O24koo9EIuVwOv2CyE2oSbbfT6aBarUqCSqUii+disYher4fZbIZAIACPx4NkMikxhMaR0JTj8Yh4PI7H4yFnDkEHcTqdZNpMTmwHg4EzoSa7XC5Cj8PhIBXs93uHo6kvl0vsdjs5c2esFmbp5IgN22k0GojFYng+n47JmxNl5dFoFLVaDd1uV2IVa4uVuPnGV4mZSr1el0AVYspOTCETCJXFV0hilh2JRBAOh8Uhk8kIBMSMlff7fdFpy2az4kMs/X6/QHC/36Vii68TcGb3er3SLiWVSgmx5/O5fDsu6rTxjpJIJODz+bDdbnE+nwUuiwqrMYVBzWYTv4RF6G9RIWdZmAyFbdBAnJR3JjfdPOVeLpdlMYax7MBBG1Jgs9nYFDD5af4ek7PsjjH6EGnzB3tsbK6MJ3ynAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;간단한 양방향 가중치 그래프&quot; title=&quot;간단한 양방향 가중치 그래프&quot; src=&quot;/static/49cb788c9c52db1e51404b901691df13/a6d36/simple-weighted-graph.png&quot; srcSet=&quot;/static/49cb788c9c52db1e51404b901691df13/222b7/simple-weighted-graph.png 163w,/static/49cb788c9c52db1e51404b901691df13/ff46a/simple-weighted-graph.png 325w,/static/49cb788c9c52db1e51404b901691df13/a6d36/simple-weighted-graph.png 650w,/static/49cb788c9c52db1e51404b901691df13/9f82e/simple-weighted-graph.png 820w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이러한 그래프를 jgrapht 라이브러리를 통해 구현하려면
기본적으로 &lt;code&gt;DefaultWeightedEdge&lt;/code&gt;를 활용하여
&lt;code&gt;WeightedMultigraph&lt;/code&gt; 인스턴스를 생성하고,
&lt;code&gt;addVertex&lt;/code&gt;, &lt;code&gt;addEdge&lt;/code&gt;, &lt;code&gt;setEdgeWeight&lt;/code&gt; 등의 메서드를 활용하면 된다.
그리고 해당 그래프 인스턴스를 인자로 받아
&lt;code&gt;DijkstraShortestPath&lt;/code&gt; 인스턴스를 생성하면,
&lt;code&gt;getPath&lt;/code&gt;와 &lt;code&gt;getPathWeight&lt;/code&gt; 메서드를 통해 두 정점 사이의 최단 경로를
정점들의 리스트 및 가중치의 합으로 반환받을 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getDijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; graph &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setEdgeWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;v2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setEdgeWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;v3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setEdgeWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;v3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; shortestPath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graph&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; shortestPath&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;v3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getVertexList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; distance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; shortestPath&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPathWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;v3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;containsExactly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;v2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;v3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEqualTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;유의해야 할 점은 서로 연결되지 않은 두 정점 사이의 최단경로를 계산하려는
경우, &lt;code&gt;null&lt;/code&gt;이 반환된다는 점이다.
이에 대한 예외처리가 부적절한 경우, &lt;code&gt;NPE&lt;/code&gt;가 발생할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;noneConnectedPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; graph &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v2&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; shortestPath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graph&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;GraphPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; shortestPath&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;v3&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;v1&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isNull&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;도메인 객체에 대한 jgrapht 라이브러리 적용&lt;/h2&gt;&lt;p&gt;이제 본격적으로 지하철역(&lt;code&gt;Station&lt;/code&gt;) 객체들을 정점으로 등록하고,
구간(&lt;code&gt;Section&lt;/code&gt;) 객체들을 간선으로 등록한 그래프를 만들고
최단경로를 계산하여 보자.&lt;/p&gt;&lt;h3&gt;도메인&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;지하철역 : 노드, 정점(vertex)&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 생성자, equals/hashCode 등 세부 사항 생략&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;구간 : 두 개의 지하철역(정점)으로 구성되며, 거리를 가중치로 지니고 방향성을 지니는 간선(weighted edge)&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Long&lt;/span&gt; lineId&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 등록된 노선에 대한 정보&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; upStation&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 정점1&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; downStation&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 정점2&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; distance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 가중치&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 생성자 등 세부 사항 생략&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getUpStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; upStation&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getDownStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; downStation&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; distance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// equals/hashCode 등 세부 사항 생략&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;DefaultWeightedEdge를 그대로 활용하는 방법&lt;/h3&gt;&lt;p&gt;예를 들어 아래와 같은 구조의 노선도가 존재한다고 하자.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/0b9d1054aad2b251ea1d65ac16178c9b/27b7a/graph-with-domains.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:77.91411042944786%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+UlEQVQ4y4VTx4oCQRScr9Yf8CT+gAcR0Zso4kkUc86KOQsGRMWTEUMt9aBl1HW3oJnunherXmt4w+PxeC5iOByiWCyiVCqh1+t92L1Dwy9QhvV6HYPBALfbDff7HdPpFNVq9cXm34DKcLfbSWX7/R79fh/tdhur1Qr5fB7r9fprUO09GCshut0uRqMR7HY7DAYDjEYjLBYLKpWK/CNoq4Kqr/aNu/l8LlWxUvK4XC7lvtVqSeuEokLv/7VlIhaLYbPZPM9sNR6P4y8fTV8yMxLZbBbj8VhaI4+5XE5WoVBAo9HAdruF1+uFyWSCw+F4aV/T86YwmUwQjUZxvV7lzK/aH49HUZrBbTYbQqHQZ0DidDoJT3RcLBZPJfXJ1J52VFxNA5OoLoXDZrMpbXI8kskkwuHwh4rvU0Ab8slhJx2kQjjkhRoDBQbmyChQVSbVU0K19eAkMI5WLpdFTY/HI1ldLpfwwnlj+xRqNpvJq2GFvKNQPLvdbunI6XQiGAyKj8YfgUAAVqsVZrMZPp8PkUgEqVRKMnIxu1KdHTFIJpMRHw6+3++XgLVaDRofPcdATzqJZrZvYBFq0JX6fKJUXjscDlINVaNabI8VUHW9MHpBzucz0um0vCY1HYlEQoKKypfLRUgmn51O55n1t8ev7sgtbelDX8agyj+J1qh4ygRVAAAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;도메인 적용&quot; title=&quot;도메인 적용&quot; src=&quot;/static/0b9d1054aad2b251ea1d65ac16178c9b/a6d36/graph-with-domains.png&quot; srcSet=&quot;/static/0b9d1054aad2b251ea1d65ac16178c9b/222b7/graph-with-domains.png 163w,/static/0b9d1054aad2b251ea1d65ac16178c9b/ff46a/graph-with-domains.png 325w,/static/0b9d1054aad2b251ea1d65ac16178c9b/a6d36/graph-with-domains.png 650w,/static/0b9d1054aad2b251ea1d65ac16178c9b/27b7a/graph-with-domains.png 804w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;만일 &lt;code&gt;선릉역&lt;/code&gt;에서 &lt;code&gt;강남역&lt;/code&gt;까지의 최단경로를 계산함에 있어
(1) 경유하는 지하철역들의 목록과 (2) 해당 경로의 거리합만이 필요하다고 하자.
이 경우 간선으로 굳이 &lt;code&gt;Section&lt;/code&gt; 객체를 사용하지 않고,
&lt;code&gt;DefaultWeightedEdge&lt;/code&gt;를 사용하여 모든 작업을 처리할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;domainAsVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; station1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;선릉역&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; station2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;잠실역&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; station3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;강남역&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; graph &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setEdgeWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setEdgeWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setEdgeWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; shortestPath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graph&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;GraphPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; shortestPath&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; vertexInOrder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getVertexList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; distance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vertexInOrder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;containsExactly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEqualTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;최단경로를 간선으로 반환받기&lt;/h3&gt;&lt;p&gt;문제가 되는 것은 &lt;strong&gt;최단경로를 간선들의 목록으로 반환 받고 싶은 경우&lt;/strong&gt;다.
&lt;code&gt;List&amp;lt;Station&amp;gt;&lt;/code&gt;이 아니라 &lt;code&gt;List&amp;lt;Section&amp;gt;&lt;/code&gt;을 반환받는 경우,
클라이언트 코드에서는 &lt;code&gt;Section&lt;/code&gt;에 담긴 &lt;code&gt;Station&lt;/code&gt;과 &lt;code&gt;distance&lt;/code&gt; 정보를 활용하면
&lt;code&gt;List&amp;lt;Station&amp;gt;&lt;/code&gt; 형식으로 최단경로를 만들어내고 최단거리를 계산하는 것도 가능할 것이다.
그리고 이처럼 &lt;code&gt;Section&lt;/code&gt;에 대한 정보를
반환받고 싶다면 당연히 그래프에서 &lt;code&gt;DefaultWeightedEdge&lt;/code&gt;가 오는 자리에 &lt;code&gt;Section&lt;/code&gt;을 등록해야 할 것이다.
그리고 그래프에 &lt;code&gt;addEdge&lt;/code&gt; 메서드로 간선을 등록할 때, 단순히 두 정점(&lt;code&gt;Station&lt;/code&gt;)만이 아니라
간선(&lt;code&gt;Section&lt;/code&gt;) 객체도 함께 등록해주어야 할 것이다.
이에 따라 위의 코드를 아래와 같이 수정해보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;domainAsEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; station1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;선릉역&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; station2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;잠실역&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; station3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;강남역&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; graph &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; edge1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; edge2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; edge3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUpStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDownStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUpStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDownStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUpStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDownStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; shortestPath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graph&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;GraphPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; shortestPath&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; edgesInOrder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getEdgeList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; vertexInOrder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getVertexList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; distance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edgesInOrder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;containsExactly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vertexInOrder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;containsExactly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEqualTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;문제는 위의 코드를 실행하면 테스트 코드가 실패하게 된다는 점이다.
이때 터미널에 출력되는 메시지를 보면 &lt;code&gt;선릉역&lt;/code&gt; -&amp;gt; &lt;code&gt;잠실역&lt;/code&gt; -&amp;gt; &lt;code&gt;강남역&lt;/code&gt; 순서가 아니라
&lt;code&gt;선릉역&lt;/code&gt; -&amp;gt; &lt;code&gt;강남역&lt;/code&gt; 순서로 최단거리가 계산되었다는 점을 알 수 있다.&lt;/p&gt;&lt;p&gt;왜 이런 일이 일어난 것일까?&lt;/p&gt;&lt;h3&gt;도메인 객체를 간선으로 등록하기&lt;/h3&gt;&lt;p&gt;위의 코드가 지닌 근본적인 문제점은 &lt;strong&gt;간선의 가중치가 그래프에 등록되어있지 않다&lt;/strong&gt;는 점이다.
그렇기 때문에 거리가 &lt;code&gt;2&lt;/code&gt;밖에 되지 않는 &lt;code&gt;선릉역&lt;/code&gt; -&amp;gt; &lt;code&gt;잠실역&lt;/code&gt; -&amp;gt; &lt;code&gt;강남역&lt;/code&gt;보다
거리가 100이나 되지만 정점의 개수가 적은 &lt;code&gt;선릉역&lt;/code&gt; -&amp;gt; &lt;code&gt;강남역&lt;/code&gt;을 선택하게 된 것이다.&lt;/p&gt;&lt;p&gt;그렇다면 이 간단한 실수를 바로잡기 위해 &lt;code&gt;setEdgeWeight&lt;/code&gt; 메서드를 활용하여
등록된 개별 간선에 대한 가중치 정보를 등록해보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;domainAsEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 생략&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; edge1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; edge2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; edge3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUpStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDownStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUpStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDownStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUpStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDownStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setEdgeWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setEdgeWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setEdgeWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 생략&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;실로 완벽한 코드라고 볼 수 있다. 그런데 막상 이 코드를 실행해보면
&lt;code&gt;setEdgeWeight&lt;/code&gt; 메서드 부분에서 예외가 발생하여 테스트가 실패하게 된다.
문제가 되는 &lt;code&gt;setEdgeWeight&lt;/code&gt; 내부를 확인해보면
현재 간선으로 등록된 &lt;code&gt;Section&lt;/code&gt;이
&lt;code&gt;DefaultWeightedEdge&lt;/code&gt;의 하위타입이 아니어서 예외를 발생시켰음을 알 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setEdgeWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;E&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; weight&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e &lt;span class=&quot;token keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;weight &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; weight&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러한 맥락에서 &lt;code&gt;Section&lt;/code&gt;이 &lt;code&gt;DefaultWeightedEdge&lt;/code&gt;를 상속하도록 하면
위의 코드는 문제 없이 통과되고,
기존 목표대로 &lt;code&gt;선릉역&lt;/code&gt; -&amp;gt; &lt;code&gt;잠실역&lt;/code&gt; -&amp;gt; &lt;code&gt;강남역&lt;/code&gt; 순서에 대응되는
&lt;code&gt;Section&lt;/code&gt; 객체들의 리스트를 &lt;code&gt;getVertexList&lt;/code&gt; 메서드로 반환받을 수 있게 된다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 생략&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;가중치 등록 로직 리팩토링&lt;/h3&gt;&lt;p&gt;한편, 현재 간선으로 사용하는 &lt;code&gt;Section&lt;/code&gt; 객체가 &lt;code&gt;DefaultWeightedEdge&lt;/code&gt;를 상속받았으며,
그 내부에 간선의 가중치로 사용되는 &lt;code&gt;distance&lt;/code&gt; 값이 이미 존재한다는 점에 주목하자.&lt;/p&gt;&lt;p&gt;이 경우 우리는 굳이 &lt;code&gt;setEdgeWeight&lt;/code&gt;를 통해 개별 간선에 대한 가중치를
별도로 등록할 필요 없이, 라이브러리 내부에서 알아서 가중치를 꺼내 사용하도록 설정할 수 있다.&lt;/p&gt;&lt;p&gt;그 방법은 &lt;code&gt;DefaultWeightedEdge&lt;/code&gt;에 정의된 &lt;code&gt;getWeight&lt;/code&gt; 메서드에 대해
&lt;code&gt;Section&lt;/code&gt;에서 &lt;code&gt;distance&lt;/code&gt; 값을 반환하도록 재정의하는 것이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 생략&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; distance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 그래프에 등록된 개별 &lt;code&gt;Section&lt;/code&gt;에 대한 가중치를 계산하고자 할 때
자연스럽게 &lt;code&gt;getWeight&lt;/code&gt; 메서드가 호출되어 구간의 거리 정보가 가중치로 사용된다.&lt;/p&gt;&lt;h3&gt;도메인으로부터 jgrapht에 대한 의존성 제거&lt;/h3&gt;&lt;p&gt;리팩토링이 필요하겠지만 기본적으로 위의 코드는 평범하게 잘 작동하는 코드다.
그러나 위의 코드는 &lt;code&gt;Section&lt;/code&gt;이라는 도메인 객체가 &lt;code&gt;jgrapht&lt;/code&gt;라는 외부 라이브러리의
&lt;code&gt;DefaultWeightedEdge&lt;/code&gt;에 의존한다는 근본적인 문제를 지닌다.
만일 &lt;code&gt;jgrapht&lt;/code&gt; 이외의 방식으로 최단거리를 구현하도록 수정하고 싶은 경우,
우리는 &lt;code&gt;Section&lt;/code&gt; 도메인까지 수정해야 할 것이다.&lt;/p&gt;&lt;p&gt;그러한 맥락에서 우리는 기존 &lt;code&gt;Section&lt;/code&gt; 도메인은 그대로 두고,
라이브러리와 관련된 기능만을 위한 일종의 프록시 객체를 만들어
로직에서만 활용하는 방법을 생각해볼 수 있다.&lt;/p&gt;&lt;p&gt;우선 &lt;code&gt;SectionProxy&lt;/code&gt;를 구현하여 &lt;code&gt;Section&lt;/code&gt; 객체 하나를 감싸고,
&lt;code&gt;DefaultWeightedEdge&lt;/code&gt;를 상속하여 &lt;code&gt;getWeight&lt;/code&gt; 메서드를 재정의하도록 하자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultWeightedEdge&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;section &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getSourceVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUpStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getTargetVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDownStation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toSection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; section&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 &lt;code&gt;Section&lt;/code&gt; 대신 &lt;code&gt;SectionProxy&lt;/code&gt;를 간선으로 등록하여
그래프를 생성하고 최단 경로를 계산하도록 해보자. 세부 로직은 다음과 같다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;proxyAsEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; station1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;선릉역&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; station2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;잠실역&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt; station3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;강남역&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; graph &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WeightedMultigraph&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; section1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; section2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; section3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2L&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt; edge1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;section1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt; edge2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;section2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt; edge3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;section3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSourceVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTargetVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSourceVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTargetVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    graph&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEdge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSourceVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTargetVertex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; shortestPath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DijkstraShortestPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;graph&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;GraphPath&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; shortestPath&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; edgesInOrder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getEdgeList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Station&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; vertexInOrder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getVertexList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; distance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getWeight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edgesInOrder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;containsExactly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edge1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; edge2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vertexInOrder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;containsExactly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;station1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; station3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;distance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEqualTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 코드는 문제 없이 테스트를 통과한다.
이때 최단경로를 프록시가 아닌 원본 &lt;code&gt;Section&lt;/code&gt;들의 리스트로 반환받고 싶다면,
아래와 같이 간선들의 타입을 변환해주기만 하면 된다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; edgesInOrder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getEdgeList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SectionProxy&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toSection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;edgesInOrder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;containsExactly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;section1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; section2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 우리는 마음 놓고 &lt;code&gt;Section&lt;/code&gt; 도메인을 초기 상태로 되돌릴 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Section&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 생략&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://jgrapht.org/guide/UserOverview&quot;&gt;JGraphT 공식문서&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[번역] IoC 컨테이너와 빈 개요]]></title><description><![CDATA[스프링 프레임워크 공식문서의 Core Technologies 섹션 중 IoC 컨테이너와 빈의 개요에 대한 번역]]></description><link>https://bugoverdose.github.io/docs/spring/framework/core/ioc-container/container-and-bean-overview/</link><guid isPermaLink="false">https://bugoverdose.github.io/docs/spring/framework/core/ioc-container/container-and-bean-overview/</guid><pubDate>Mon, 23 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;1.1. 스프링 IoC 컨테이너와 빈으로의 입문&lt;/h2&gt;&lt;p&gt;해당 챕터는 제어의 역전 원칙(IoC)에 대한 스프링 프레임워크의 구현을 다룬다.
IoC는 의존성 주입(DI)라고도 알려져있다.
이것은 오로지 생성자의 인자, 팩토리 메서드의 인자,
혹은 생성자에 의해 생성되거나 팩토리 메서드에 의해 반환된 객체 인스턴스에 설정(set)되는 속성들을 통해
객체들의 의존성(함께 일하는 다른 객체들)이 정의되는 과정이다.
이후 컨테이너에서는 빈을 생성할 때 해당 의존성을 주입해준다.
빈에서 스스로의 생성을 통제하거나,
클래스에 대한 직접적인 생성 혹은 서비스 로케이터 패턴 등의 메커니즘을 통해
자신의 의존성의 위치를 찾던 방법과 비교했을 때
이러한 과정은 근본적으로 역전되었다고 볼 수 있다.
이 점 때문에 제어의 역전이라고 불린다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;org.springframework.beans&lt;/code&gt;와 &lt;code&gt;org.springframework.context&lt;/code&gt; 패키지가
스프링 프레임워크의 IoC 컨테이너의 기반이다.
&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/5.3.19/javadoc-api/org/springframework/beans/factory/BeanFactory.html&quot;&gt;BeanFactory&lt;/a&gt;
인터페이스는 어떤 타입의 객체든 다룰 수 있도록 해주는 고급 설정 메커니즘을 제공한다.
&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/5.3.19/javadoc-api/org/springframework/context/ApplicationContext.html&quot;&gt;ApplicationContext&lt;/a&gt;은
&lt;code&gt;BeanFactory&lt;/code&gt;의 하위 인터페이스로 다음과 같은 기능이 추가되었다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;스프링 AOP 기능과의 간편한 통합&lt;/li&gt;&lt;li&gt;메시지 자원 관리 (국제화/다언어 지원 목적)&lt;/li&gt;&lt;li&gt;이벤트 발행(event publication)&lt;/li&gt;&lt;li&gt;&lt;code&gt;WebApplicationContext&lt;/code&gt; 등 웹 애플리케이션에 사용될 수 있는
애플리케이션 계층에 특화된 컨텍스트들&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;간단히 말해 &lt;code&gt;BeanFactory&lt;/code&gt;는 설정 프레임워크와 기초 기능을 제공하며,
그 위에 &lt;code&gt;ApplicationContext&lt;/code&gt;는 엔터프라이즈 측면에서의 기능을 추가한다.
&lt;code&gt;ApplicationContext&lt;/code&gt;는 &lt;code&gt;BeanFactory&lt;/code&gt;을 완전히 포함하는 상위집합으로
해당 챕터에서 스프링의 IoC 컨테이너에 대해 설명하기 위해 사용된다.
&lt;code&gt;ApplicationContext&lt;/code&gt; 대신 &lt;code&gt;BeanFactory&lt;/code&gt;를 사용하는 정보에 대해 더 알고 싶다면
&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-beanfactory&quot;&gt;The BeanFactory&lt;/a&gt;
챕터를 확인하여라.&lt;/p&gt;&lt;p&gt;스프링에서 애플리케이션의 뼈대를 구성하고
스프링 IoC 컨테이너에 의해 관리되는 객체들은 빈(bean)이라고 불린다.
빈은 스프링 IoC 컨테이너에 의해 인스턴스화되고 조립되고 관리되는 객체다.
이 점만 제외하면 빈은 그저 애플리케이션의 수많은 객체들 중 하나일 뿐이다.
빈과 그 사이의 의존성은 컨테이너에 의해 사용되는 설정 메타데이터에 드러난다.&lt;/p&gt;&lt;h2&gt;1.2. 컨테이너 개요&lt;/h2&gt;&lt;p&gt;&lt;code&gt;org.springframework.context.ApplicationContext&lt;/code&gt; 인터페이스는
스프링 IoC 컨테이너를 대표하며 빈의 인스턴스화, 설정, 조립에 대한 책임을 지닌다
컨테이너는 설정 메타데이터(configuration metadata)를 읽음으로써
어떠한 객체를 인스턴스화, 설정, 조립해야 하는지에 대한 지침을 얻는다.
설정 메타데이터는 XML, 자바 어노테이션, 자바 코드를 통해 표현된다.
애플리케이션을 구성하는 객체들과 해당 객체 간의 풍부한 상호의존성을 표현할 수 있게 해준다.&lt;/p&gt;&lt;p&gt;스프링에는 &lt;code&gt;ApplicationContext&lt;/code&gt; 인터페이스의 다양한 구현체들이 함께 제공된다.
단독 애플리케이션들에서는
&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/5.3.19/javadoc-api/org/springframework/context/support/ClassPathXmlApplicationContext.html&quot;&gt;ClassPathXmlApplicationContext&lt;/a&gt;
혹은 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/5.3.19/javadoc-api/org/springframework/context/support/FileSystemXmlApplicationContext.html&quot;&gt;FileSystemXmlApplicationContext&lt;/a&gt;의
인스턴스를 하나 생성하는 것이 일반적이다.
기본적으로 설정 메타데이터를 정의하는 전통적인 형식은 XML이었다.
그러나 XML 설정을 조금 추가함으로써
자바 어노테이션 혹은 코드를 설정 메타데이터 형식으로 사용하도록
컨테이너에게 명시적인 지시를 내릴 수도 있다.&lt;/p&gt;&lt;p&gt;대부분의 애플리케이션 시나리오에서 스프링 IoC 컨테이너를 인스턴스화하기 위해
사용자가 명시적으로 코드를 작성할 필요는 없다.
예를 들어 웹 애플리케이션 시나리오에서는 일반적으로 애플리케이션의 &lt;code&gt;web.xml&lt;/code&gt; 파일에 담긴
간단한 8줄짜리 보일러플레이트 웹 디스크립터 XML만으로도 충분하다
(&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#context-create&quot;&gt;웹 애플리케이션을 위한 편리한 ApplicationContext 인스턴스화&lt;/a&gt;를
확인하라).
&lt;a href=&quot;https://spring.io/tools&quot;&gt;이클립스를 위한 스프링 툴&lt;/a&gt; (이클립스 기반의 개발 환경)을 사용한다면,
몇 번의 마우스 클릭이나 타이핑만으로도 이러한 보일러플레이트 설정을 쉽게 만들어낼 수 있다.&lt;/p&gt;&lt;p&gt;해당 다이아그램은 스프링의 동작방식에 대해 고수준에서 다룬다.
애플리케이션의 클래스들은 설정 메타데이터와 결합되며,
&lt;code&gt;ApplicationContext&lt;/code&gt;이 인스턴스화된 이후에는
완전히 구성되었고 실행가능한 시스템/애플리케이션이 생겨난다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:498px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/87b76a8c31863b67bae9befd3694451f/79e1b/Figure1-The-Spring-IoC-container.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:59.50920245398773%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAByklEQVQoz42Rz0/TYBjHe9EDYZMTXNyNhAOc+M84AOHG3eMSEyUuTONFJ24hEg0mxhHnQibSbPZdux9t18Iosx3kbbv2/fWYpSgDSfRze948n/d58n0kcROeIATj3Oz1tFbrh6IghHRdl2W52+2qqooQwhgDgHQtXFmCUyoYi8PQHQyiMAx9fzQaxXEcBMHoN5RSIcRYhgkIITXLrlon1Z791bBqp2dV0xr6PgBMdiZrSoSQIAgIIZRSQojruvsdY1fr7NTRm7pSarb22nrfGwJAstckEudcVdVCoVAsFiuViuM4ZdN+39affz7Y+rD/9rj+0bCci8tbk5NSAoAoigzDME0TYxzH8V5TKza1EtJ2tfa7dreE1FPPu1tOAvvzxBgb+qHnhy4OzL5j9h3L+Ukog7u4TpsxJrgglNgXln1p9TzjSKvJnWNZ/+5H+O/JV3IC4+Pv1YH6MJeZ3ppOP32QepKezc/ee3w/X88DAOX0H7LiKPMv5xdeLSzvLC8VlhZfL6Zz6e3G9n/JjbPGVHZqJjeTeZFJPUvN5eekR1L2WxYAYhZP3umGnMR2js83v2yullfXymvr5fWNg42VTyuHJ4fjLDm7Jf8CBFB7wpa5IGwAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;The Spring IoC container&quot; title=&quot;The Spring IoC container&quot; src=&quot;/static/87b76a8c31863b67bae9befd3694451f/79e1b/Figure1-The-Spring-IoC-container.png&quot; srcSet=&quot;/static/87b76a8c31863b67bae9befd3694451f/222b7/Figure1-The-Spring-IoC-container.png 163w,/static/87b76a8c31863b67bae9befd3694451f/ff46a/Figure1-The-Spring-IoC-container.png 325w,/static/87b76a8c31863b67bae9befd3694451f/79e1b/Figure1-The-Spring-IoC-container.png 498w&quot; sizes=&quot;(max-width: 498px) 100vw, 498px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;그림 1. 스프링 IoC 컨테이너&lt;/strong&gt;&lt;/p&gt;&lt;h3&gt;1.2.1. 설정 메타데이터&lt;/h3&gt;&lt;p&gt;위의 다이아그램이 보여주듯이, 스프링 IoC 컨테이너는 설정 메타데이터를 소비한다.
이 설정 메타데이터는 당신이 애플리케이션 개발자로서 스프링 컨테이너에게
애플리케이션 내의 객체들을 어떠한 방식으로 인스턴스화, 구성, 조립하도록 지시하였는지를 대표한다.&lt;/p&gt;&lt;p&gt;설정 메타데이터는 전통적으로 간단하고 직관적인 XML 형식으로 제공되었으다.
해당 챕터에서는 스프링 IoC 컨테이너의 핵심 개념 및 기능에 대해 전달하고자 해당 형식을 활용한다.&lt;/p&gt;&lt;div&gt;&lt;p&gt;XML 기반 메타데이터는 설정 메타데이터가 지원되는 유일한 형식은 아니다.
스프링 IoC 컨테이너 자체는 설정 메타데이터가 실제로 작성된 형식과 완전히 분리되어 있다.
오늘날, 대부분의 개발자들은 스프링 애플리케이션에서 자바 기반의 설정을 사용한다.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;스프링 컨테이너와 관련하여 다른 형식의 메타데이터에 대한 정보를 알고 싶다면 다음을 참고하여라.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-annotation-config&quot;&gt;어노테이션 기반 설정&lt;/a&gt;:
스프링 2.5에서 어노테이션 기반의 설정 메타데이터를 지원하기 시작하였다.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-java&quot;&gt;자바 기반 설정&lt;/a&gt;:
스프링 3.0부터 스프링 JavaConfig 프로젝트에서 제공한 많이 기능들이 코어 스프링 프레임워크의 일부가 되었다.
때문에, XML 파일 대신 자바를 사용하여 애플리케이션 클래스의 외부에서 빈을 정의할 수 있게 되었다.
이러한 새로운 기능을 사용하려면 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Configuration.html&quot;&gt;@Configuration&lt;/a&gt;,
&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Bean.html&quot;&gt;@Bean&lt;/a&gt;,
&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Import.html&quot;&gt;@Import&lt;/a&gt;,
&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/DependsOn.html&quot;&gt;@DependsOn&lt;/a&gt;
어노테이션을 참고하여라.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;스프링 설정은 컨테이너가 반드시 관리해야 하는 적어도 하나의 (일반적으로 그 이상의) 빈 정의로 구성된다.
XML 기반의 설정 메타데이터는 이러한 빈들을 최상위의 &lt;code&gt;&amp;lt;beans/&amp;gt;&lt;/code&gt; 요소 내부의 &lt;code&gt;&amp;lt;bean/&amp;gt;&lt;/code&gt; 요소들로 설정한다.
자바 설정은 일반적으로 &lt;code&gt;@Configuration&lt;/code&gt; 클래스 내부에 &lt;code&gt;@Bean&lt;/code&gt;가 붙은 메서드들을 사용한다.&lt;/p&gt;&lt;p&gt;이러한 빈 정의는 애플리케이션을 구성하는 실제 객체들에 대응된다.
일반적으로 서비스 계층의 객체들, 데이터 접근 객체들(DAO),
Structs &lt;code&gt;Action&lt;/code&gt; 인스턴스와 같은 표현(presentation) 객체들,
Hibernate &lt;code&gt;SessionFactories&lt;/code&gt;나 JMS &lt;code&gt;Queues&lt;/code&gt;와 같은 인프라(infrastructure) 객체들을 정의한다.
일반적으로 컨테이너에서 잘 만들어진 도메인 도메인 객체들에 대해 추가적인 설정을 하지는 않는다.
왜냐하면 일반적으로 도메인 객체를 생성하고 로드하는 책임은 DAO와 비즈니스 로직에 있기 때문이다.
다만, 스프링에 통합된 AspectJ를 사용하여 IoC 컨테이너의 통제 밖에서 생성된 객체들에 대해 설정할 수도 있다.
&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#aop-atconfigurable&quot;&gt;스프링에서 AspectJ를 사용하여 도메인 객체를 의존성 주입하기&lt;/a&gt;를
참고하여라.&lt;/p&gt;&lt;p&gt;해당 예시는 XML 기반의 설정 메타데이터의 기본 구조를 보여준다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-xml line-numbers&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token prolog&quot;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;beans&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;xmlns&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;http://www.springframework.org/schema/beans&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;xmlns:&lt;/span&gt;xsi&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;http://www.w3.org/2001/XMLSchema-instance&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;xsi:&lt;/span&gt;schemaLocation&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;

    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;...&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;...&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- [1], [2] --&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 해당 빈의 설정과 협력자들이 오는 위치 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;

    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;...&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;...&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 해당 빈의 설정과 협력자들이 오는 위치 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 추가적인 빈 정의들이 오는 위치 --&amp;gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;beans&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;id&lt;/code&gt; 속성은 개별 빈의 정의를 식별하는 문자열이다.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;class&lt;/code&gt; 속성은 빈의 타입을 정의하며, 온전히 자격이 있는 클래스명(fully qualified
classname)을 사용한다.&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;code&gt;id&lt;/code&gt; 속성의 값은 협력하는 객체를 참조할 때 사용된다.
협력하는 객체를 참조하기 위한 XML은 해당 예제에 포함되어있지 않다. 추가 정보는
&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-dependencies&quot;&gt;의존성&lt;/a&gt;에서
확인하여라.&lt;/p&gt;&lt;h3&gt;1.2.2. 컨테이너 인스턴스화하기&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ApplicationContext&lt;/code&gt;의 생성자에 제공되는 (하나 혹은 복수의) 위치 경로는
로컬 파일시스템, 자바 &lt;code&gt;CLASSPATH&lt;/code&gt; 등 다양한 외부 자원으로부터의 설정 메타데이터를
컨테이너에 로드할 수 있게 해주는 자원 문자열(resource strings)이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;ApplicationContext&lt;/span&gt; context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClassPathXmlApplicationContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;services.xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;daos.xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;&lt;p&gt;스프링 IoC 컨테이너에 대해 배운 이후,
(&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#resources&quot;&gt;Resource&lt;/a&gt;에 기술된)
스프링의 &lt;code&gt;Resource&lt;/code&gt; 추상화에 대해 더 알고 싶을 수 있다.
&lt;code&gt;Resource&lt;/code&gt; 추상화는 URI 문법으로 정의된 위치들로부터의
입력 스트림(InputStream)을 읽는 편리한 메커니즘을 제공한다.
특히 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#resources-app-ctx&quot;&gt;애플리케이션 컨텍스트와 자원 경로&lt;/a&gt;에
나와있듯이 &lt;code&gt;Resource&lt;/code&gt;는 애플리케이션 컨텍스트를 만들 때 사용된다.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;해당 예시는 서비스 계층 객체들(&lt;code&gt;services.xml&lt;/code&gt;)의 설정 파일이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-xml line-numbers&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token prolog&quot;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;beans&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;xmlns&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;http://www.springframework.org/schema/beans&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;xmlns:&lt;/span&gt;xsi&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;http://www.w3.org/2001/XMLSchema-instance&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;xsi:&lt;/span&gt;schemaLocation&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 서비스들 --&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;petStore&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;org.springframework.samples.jpetstore.services.PetStoreServiceImpl&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;property&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;accountDao&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;accountDao&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;property&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;itemDao&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;itemDao&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 해당 빈에 대한 추가적인 협력자들과 설정들 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 추가적인 빈 정의와 서비스들 --&amp;gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;beans&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;해당 예시는 데이터 접근 객체(DAO) &lt;code&gt;daos.xml&lt;/code&gt; 파일이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-xml line-numbers&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token prolog&quot;&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;beans&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;xmlns&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;http://www.springframework.org/schema/beans&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;xmlns:&lt;/span&gt;xsi&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;http://www.w3.org/2001/XMLSchema-instance&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;xsi:&lt;/span&gt;schemaLocation&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;

    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;accountDao&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;org.springframework.samples.jpetstore.dao.jpa.JpaAccountDao&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 해당 빈에 대한 추가적인 협력자들과 설정들 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;

    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;itemDao&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;org.springframework.samples.jpetstore.dao.jpa.JpaItemDao&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 해당 빈에 대한 추가적인 협력자들과 설정들 --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 데이터 접근 객체들을 위한 추가적인 빈 정의들 --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;beans&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 예시에서 서비스 계층은 (JPA ORM 표준에 기반을 두며) &lt;code&gt;PetStoreServiceImpl&lt;/code&gt; 클래스와
&lt;code&gt;JpaAccountDao&lt;/code&gt;, &lt;code&gt;JpaItemDao&lt;/code&gt; 타입의 DAO 객체 두 개로 구성된다.
&lt;code&gt;property name&lt;/code&gt; 요소는 자바 빈 속성의 이름을 가리키며, &lt;code&gt;ref&lt;/code&gt; 요소는 다른 빈 정의의 이름을 가리킨다.
&lt;code&gt;id&lt;/code&gt;와 &lt;code&gt;ref&lt;/code&gt; 요소들 사이의 관계는 협력하는 객체들 간의 의존성을 표현한다.
객체들의 의존성 설정에 대한 세부 사항을 알고 싶다면
&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-dependencies&quot;&gt;의존성&lt;/a&gt;을
참고하여라.&lt;/p&gt;&lt;h4&gt;XML 기반의 설정 메타데이터 구성하기&lt;/h4&gt;&lt;p&gt;복수의 XML 파일들에서 같은 빈 정의를 공유하는 것이 유용한 경우도 있다.
주로, 개별 XML 설정 파일은 애플리케이션 구조에 있는 개별 논리적인 계층 혹은 모듈을 상징한다.&lt;/p&gt;&lt;p&gt;애플리케이션 컨텍스트의 생성자를 사용하여 이러한 XML 부품들의 빈 정의를 전부 로드할 수 있다.
&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-instantiation&quot;&gt;이전 섹션&lt;/a&gt;에서
확인할 수 있듯이 이러한 생성자는 복수의 &lt;code&gt;Resource&lt;/code&gt; 위치를 받는다.
그 외의 대안으로는 &lt;code&gt;&amp;lt;import/&amp;gt;&lt;/code&gt; 요소를 활용하여 다른 파일들의 빈 정의를 로드할 수도 있다.
해당 예시는 그 방법을 보여준다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-xml line-numbers&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;beans&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;import&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;services.xml&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;import&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;resources/messageSource.xml&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;import&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;resource&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;/resources/themeSource.xml&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;

    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;bean1&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;...&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;bean2&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;...&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;beans&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이전 예시에서 외부의 빈 정의는 3개의 파일
&lt;code&gt;services.xml&lt;/code&gt;, &lt;code&gt;messageSource.xml&lt;/code&gt;, &lt;code&gt;themeSource.xml&lt;/code&gt;로부터 로드된다.
모든 위치 경로는 import하는 정의 파일에 대해 상대적이다.
그러므로 &lt;code&gt;services.xml&lt;/code&gt;는 반드시 import하는 파일과 동일한 디렉토리 혹은 클래스패쓰 위치에 존재해야 하며,
&lt;code&gt;messageSource.xml&lt;/code&gt;와 &lt;code&gt;themeSource.xml&lt;/code&gt;는
import하는 파일의 하위의 &lt;code&gt;resources&lt;/code&gt; 위치에 존재해야 한다.
맨앞의 슬래시(/)는 무시되는 것을 확인할 수 있다.
그러나, 이러한 상대 경로라는 가정 하에서 아예 슬래시를 사용하지 않는 것이 권장된다.
스프링 스키마에 따르면, import되는 파일들의 내용은
최상위 레벨에 &lt;code&gt;&amp;lt;beans/&amp;gt;&lt;/code&gt; 요소가 있어야 하며, 유효한 XML 빈 정의에 부합해야 한다.&lt;/p&gt;&lt;div&gt;&lt;p&gt;상대적인 &amp;quot;../&amp;quot; 경로를 통해 부모의 디렉토리를 참조하는 것도 가능하지만 권장되지 않는다.
이러한 방법은 현재 애플리케이션 외부의 파일에 대한 의존성을 생성한다.
특히 이러한 참조는 (&lt;code&gt;classpath:../services.xml&lt;/code&gt;와 같은) &lt;code&gt;classpath:&lt;/code&gt; URL에서 권장되지 않는다.
런타임(runtime resolution process)에 &amp;quot;가장 가까운&amp;quot; classpath 루트를 정한 다음에
그 부모 디렉토리를 확인하기 때문이다. classpath 설정에서의 수정으로 인해
다른 부정확한 디렉토리를 선택하게 될 수 있다.&lt;/p&gt;&lt;p&gt;언제나 상대경로 대신 절대경로(fully qualified resource locations)를 통해 자원의 위치를 표현할 수 있다.
&lt;code&gt;file:C:/config/services.xml&lt;/code&gt; 혹은 &lt;code&gt;classpath:/config/services.xml&lt;/code&gt;가 그 예이다.
그러나 이 경우 구체적인 절대경로에 애플리케이션의 설정이 결합된다는 점에 유의하여라.
일반적으로는 예를 들어 런타임에 JVM 시스템 속성들에 대해 처리되는 &amp;quot;${…​}&amp;quot; 플레이스홀더를 사용하는 등의 방식을
통해 이러한 절대경로에 대해 우회를 하는 것이 권장된다.&lt;/p&gt;&lt;/div&gt;&lt;p&gt;네임스페이스 자체가 import 목적의 기능을 제공한다. 일반적인 빈 정의 이외의 추가적인 설정 기능들은
예를 들어 &lt;code&gt;context&lt;/code&gt;와 &lt;code&gt;util&lt;/code&gt; 네임스페이스 등 스프링에 의해 제공되는 XML 네임스페이스들에서 가능하다.&lt;/p&gt;&lt;h4&gt;그루비 빈 정의 DSL&lt;/h4&gt;&lt;p&gt;외부 설정 메타데이터에 대한 추가적인 예시다.
Grails 프레임워크에서 알려져 있듯,
빈 정의는 스프링의 그루비 빈 정의 DSL(Groovy Bean Definition DSL)을 통해서도 표현될 수 있다.&lt;/p&gt;&lt;p&gt;일반적으로 이러한 설정은 &amp;quot;.groovy&amp;quot; 파일 내에 존재하며,
다음 예시와 같은 구조를 지닌다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;groovy&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-groovy line-numbers&quot;&gt;&lt;code class=&quot;language-groovy&quot;&gt;beans &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BasicDataSource&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        driverClassName &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;org.hsqldb.jdbcDriver&amp;quot;&lt;/span&gt;&lt;/span&gt;
        url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jdbc:hsqldb:mem:grailsDB&amp;quot;&lt;/span&gt;&lt;/span&gt;
        username &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;sa&amp;quot;&lt;/span&gt;&lt;/span&gt;
        password &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;/span&gt;
        settings &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;mynew&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token interpolation-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;setting&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;sessionFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SessionFactory&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        dataSource &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dataSource
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;myService&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;MyService&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        nestedBean &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; AnotherBean bean &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt;
            dataSource &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dataSource
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이러한 설정 스타일은 XML 빈 정의와 거의 유사하며
스프링의 XML 설정 네임스페이스까지 지원한다.
&lt;code&gt;importBeans&lt;/code&gt;를 통해 XML 빈 정의를 import해오는 기능까지 지원된다.&lt;/p&gt;&lt;h3&gt;1.2.3. 컨테이너 사용하기&lt;/h3&gt;&lt;p&gt;&lt;code&gt;ApplicationContext&lt;/code&gt;는 다른 빈들과 그 의존성에 대한 기록을 관리하는 고급 팩토리에 대한 인터페이스다.
&lt;code&gt;T getBean(String name, Class&amp;lt;T&amp;gt; requiredType)&lt;/code&gt; 메서드를 사용하여
빈의 인스턴스를 꺼내올 수 있다.&lt;/p&gt;&lt;p&gt;아래 예제에서 알 수 있듯이 &lt;code&gt;ApplicationContext&lt;/code&gt;는 빈 정의를 읽고 접근할 수 있도록 해준다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 빈을 생성 및 설정하기&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;ApplicationContext&lt;/span&gt; context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClassPathXmlApplicationContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;services.xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;daos.xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 설정된 인스턴스 반환받기&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;PetStoreService&lt;/span&gt; service &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getBean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;petStore&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PetStoreService&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 설정된 인스턴스 사용&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; userList &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; service&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUsernameList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그루비를 통한 설정 방법도 굉장히 유사하다.
(XML 빈 정의도 이해하지만) Grooy도 이해할 수 있는 컨텍스트 구현체 클래스가 존재한다.
아래의 예시는 Grooy 설정을 보여준다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;ApplicationContext&lt;/span&gt; context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GenericGroovyApplicationContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;services.groovy&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;daos.groovy&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;가장 유연한 형태는 &lt;code&gt;GenericApplicationContext&lt;/code&gt;와 reader 위임자의 조합이다.
아래의 예시에서 볼 수 있듯 XML 파일에 대해서는 &lt;code&gt;XmlBeanDefinitionReader&lt;/code&gt;를 함께 사용할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;GenericApplicationContext&lt;/span&gt; context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GenericApplicationContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;XmlBeanDefinitionReader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadBeanDefinitions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;services.xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;daos.xml&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;refresh&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;아래의 예시에서 볼 수 있듯 그루비 파일에 대해서는 &lt;code&gt;GroovyBeanDefinitionReader&lt;/code&gt;를 사용할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;GenericApplicationContext&lt;/span&gt; context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GenericApplicationContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GroovyBeanDefinitionReader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadBeanDefinitions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;services.groovy&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;daos.groovy&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;refresh&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다양한 설정 소스들로부터의 빈 정의를 읽기 위해
하나의 &lt;code&gt;ApplicationContext&lt;/code&gt;에 대해 다양한 reader 위임자를 함께 적용하는 것도 가능하다.&lt;/p&gt;&lt;p&gt;그 이후에는 &lt;code&gt;getBean&lt;/code&gt;를 사용하여 빈의 인스턴스를 가져올 수 있다.
&lt;code&gt;ApplicationContext&lt;/code&gt; 인터페이스는 빈을 가져오기 위한 다른 메서드들도 제공한다.
그러나 해당 메서드들을 애플리케이션 코드에서 절대로 사용하지 않는 것이 권장된다.
물론, 애플리케이션 코드에 &lt;code&gt;getBean()&lt;/code&gt; 메서드도 호출하지 말아야 하며,
스프링 API에 대한 의존성이 전혀 존재하지 말아야 한다.
예를 들어, 스프링의 웹 프레임워크와의 통합은 (컨트롤러 및 JSF에 의해 관리되는 빈들과 같이)
다양한 웹 프레임워크 컴포넌트에 대한 의존성 주입을 제공한다.
이에 따라 (@Autowire와 같은 어노테이션과 같은) 메타데이터만을 통해 특정 빈에 대한 의존성을 선언할 수 있게 된다.&lt;/p&gt;&lt;h2&gt;1.3. 빈 개요&lt;/h2&gt;&lt;p&gt;스프링 IoC 컨테이너는 하나 이상의 빈을 관리한다.
이러한 빈은 컨테이너에게 제공한 설정 메타데이터를 기반으로 생성된다.
XML &lt;code&gt;&amp;lt;bean/&amp;gt;&lt;/code&gt; 정의의 형식이 그 예이다.&lt;/p&gt;&lt;p&gt;컨테이너 내부에서 이러한 빈 정의들은 &lt;code&gt;BeanDefinition&lt;/code&gt; 객체들로 표현된다.
해당 객체들에는 (다른 정보도 있지만) 다음과 같은 메타데이터를 포함한다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;package-qualified 클래스명 : 일반적으로 정의되는 빈의 실제 구현 클래스&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;빈 행동 설정 요소들 (bean behavioral configuration elements) : 스코프, 라이프사이클 콜백 등과 같이 빈이 컨테이너에서 어떻게 행동해야 하는지에 대해 기술&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;빈이 제대로 동작하기 위해 필요한 다른 빈들에 대한 참조. 협력자 혹은 의존성이라고도 불림.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;그 외 새로 생성되는 객체 내에서 설정해야 하는 다른 설정들 - 예를 들어, 풀의 크기 제한, 커넥션 풀을 관리하는 빈의 커넥션 개수 등&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;이러한 메타데이터는 개별 빈 정의를 구성하는 속성들로 변환된다. 이러한 속성들은 다음과 같다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;클래스 : &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-class&quot;&gt;1.3.2. 빈 인스턴스화&lt;/a&gt;&lt;/li&gt;&lt;li&gt;이름 : &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-beanname&quot;&gt;1.3.1. 빈 이름&lt;/a&gt;&lt;/li&gt;&lt;li&gt;스코프 : &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-scopes&quot;&gt;1.5. 빈 스코프&lt;/a&gt;&lt;/li&gt;&lt;li&gt;생성자의 인자 : &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators&quot;&gt;1.4.1. 의존성 주입&lt;/a&gt;&lt;/li&gt;&lt;li&gt;속성 : &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators&quot;&gt;1.4.1. 의존성 주입&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Autowiring 모드 : &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-autowire&quot;&gt;1.4.5. Autowiring 협력자들&lt;/a&gt;&lt;/li&gt;&lt;li&gt;지연 초기화 모드 : &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lazy-init&quot;&gt;1.4.4. 지연 초기화 빈&lt;/a&gt;&lt;/li&gt;&lt;li&gt;초기화 메서드 : &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lifecycle-initializingbean&quot;&gt;1.6.1. 중 초기화 콜백&lt;/a&gt;&lt;/li&gt;&lt;li&gt;파괴 메서드 : &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-lifecycle-disposablebean&quot;&gt;1.6.1. 중 파괴 콜백&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;특정 빈을 생성하는 방법에 대한 정보를 지니는 빈 정의 외에도,
&lt;code&gt;ApplicationContext&lt;/code&gt; 구현체들은 (사용자에 의해) 컨테이너 외부에서 생성된 이미 존재하는 객체들의 등록도 허용한다.
이 작업은 &lt;code&gt;getBeanFactory()&lt;/code&gt; 메서드를 통해
ApplicationContext의 BeanFactory를 접근하는 것을 통해 수행된다. 해당 메서드는 BeanFactory의 &lt;code&gt;DefaultListableBeanFactory&lt;/code&gt; 구현체를 반환한다. &lt;code&gt;DefaultListableBeanFactory&lt;/code&gt;는 &lt;code&gt;registerSingleton(..)&lt;/code&gt;와 &lt;code&gt;registerBeanDefinition(..)&lt;/code&gt; 메서드를 통해 이러한 등록 작업을 지원한다. 다만, 일반적인 애플리케이션은 평범한 빈 정의 메타데이터를 통해 정의된 빈들만으로도 동작한다.&lt;/p&gt;&lt;div&gt;&lt;p&gt;빈 메타데이터와 수동적으로 제공되는 싱글톤 인스턴스들은 최대한 이른 시기에 등록되어야 한다. 그래야 컨테이너에서 autowiring과 그 외 검사 단계들에서 이들을 제대로 다룰 수 있다.
기존 메타데이터와 기존 싱글톤 인스턴스를 재정의(override)하는 것은 어느 정도 수준까지는 지원되지만, 런타임에서 (팩토리에 대한 실시간 접근과 동시에) 새로운 빈을 등록하는 것은 공식적으로 지원되지 않고 있다. 이러한 작업은 동시 접근 예외, 빈 컨테이너의 상태의 비일관성, 혹은 둘 다를 야기할 수 있다.&lt;/p&gt;&lt;/div&gt;&lt;h3&gt;1.3.1. 빈 이름 짓기&lt;/h3&gt;&lt;p&gt;모든 빈은 하나 혹은 그 이상의 식별자를 지닌다.
이러한 식별자는 해당 빈을 관리하는 컨테이너 내에서 고유해야 한다.
하나의 빈은 일반적으로 하나의 식별자만을 지닌다.
다만, 복수의 식별자가 필요한 경우, 추가적인 식별자들을 별명으로 간주할 수 있다.&lt;/p&gt;&lt;p&gt;XML 기반의 설정 메타데이터에서는 &lt;code&gt;id&lt;/code&gt; 속성과 &lt;code&gt;name&lt;/code&gt; 속성 중 하나 혹은 그 둘을 사용하여 빈 식별자를 지정한다. &lt;code&gt;id&lt;/code&gt; 속성은 정확히 하나의 id를 지정할 수 있게 해준다.
관습적으로 이러한 이름은 &amp;#x27;myBean&amp;#x27;, &amp;#x27;someService&amp;#x27;, 등과 같이 영어와 숫자로 구성되지만, 특수문자도 포함할 수 있다.
&lt;code&gt;name&lt;/code&gt; 속성에서는 쉼표(&lt;code&gt;,&lt;/code&gt;), 세미콜론(&lt;code&gt;;&lt;/code&gt;), 공백으로 구분하여 빈에 다른 별칭들을 지정할 수도 있다.
역사적으로 참고하자면, 스프링 3.1 이전의 버전들에서 &lt;code&gt;id&lt;/code&gt; 속성은 &lt;code&gt;xsd:ID&lt;/code&gt; 타입으로 정의되었기 때문에 사용가능한 문자들에 제약이 있었다.
3.1부터는 &lt;code&gt;xsd:string&lt;/code&gt; 타입으로 정의되었다.
이때 빈 id의 고유성은 (더 이상 XML 분석기(parser)에 의해서는 아니지만) 여전히 컨테이너에 의해 강제된다는 점에 유의하자.&lt;/p&gt;&lt;p&gt;빈에 대해 &lt;code&gt;name&lt;/code&gt;이나 &lt;code&gt;id&lt;/code&gt;를 지정하는 것은 필수사항이 아니다.
&lt;code&gt;name&lt;/code&gt; 혹은 &lt;code&gt;id&lt;/code&gt;를 명시적으로 제공하지 않으면 컨테이너에서 고유한 이름을 자동으로 생성해준다.
그러나 &lt;code&gt;ref&lt;/code&gt; 요소를 사용하거나, 서비스 로케이터 스타일로 해당 빈에 대해 참조를 하고 싶다면, 무조건 이름을 제공해줘야 한다.
빈 이름을 지정하지 않을만한 이유는 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-inner-beans&quot;&gt;내부 빈&lt;/a&gt;과 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-autowire&quot;&gt;autowiring 협력자&lt;/a&gt;와 관련이 있다.&lt;/p&gt;&lt;div title=&quot;빈 이름 컨벤션&quot;&gt;&lt;p&gt;빈의 이름 컨벤션은 인스턴스 필드 이름에 대한 자바 컨벤션 표준을 사용하는 것이다.
즉, 빈의 이름은 소문자 글자로 시작하고 카멜케이스로 작성된다.
이러한 이름의 예시로는 &lt;code&gt;accountManager&lt;/code&gt;, &lt;code&gt;accountService&lt;/code&gt;, &lt;code&gt;userDao&lt;/code&gt;, &lt;code&gt;loginController&lt;/code&gt; 등이 있다.&lt;/p&gt;&lt;p&gt;일관된 방식으로 빈의 이름을 짓는 것은 설정 내용을 쉽게 읽고 이해할 수 있게 해준다.
또한 스프링 AOP를 사용한다면 유사한 이름 형식으로 연관된 빈들에 대해 advice를 제공할 때 크게 도움이 된다.&lt;/p&gt;&lt;/div&gt;&lt;div&gt;&lt;p&gt;클래스 경로(classpath)에서의 컴포넌트 스캐닝에서, 스프링은 위에서 설명한 규칙에 기반하여 이름이 없는 빈에 대해 이름을 생성한다. 기본적으로 클래스명을 그대로 사용하되, 첫 글자만 소문자로 만드는 방식으로 말이다.
다만, 첫번째와 두번째 글자 모두 대문자인 (흔하지 않은) 상황에서는 클래스명 그대로 사용된다.
스프링에서 사용하는 이러한 규칙은 &lt;code&gt;java.beans.Introspector.decapitalize&lt;/code&gt;에서 정의된 바와 동일하다.&lt;/p&gt;&lt;/div&gt;&lt;h4&gt;빈 정의 외부에서 빈에 별칭 지정하기&lt;/h4&gt;&lt;p&gt;빈 정의 내부에서는 해당 빈에 대해 하나 이상의 이름을 지정할 수 있다.
&lt;code&gt;id&lt;/code&gt; 속성에서 최대 하나의 이름을 정의하고, &lt;code&gt;name&lt;/code&gt; 속성에서 몇 개든 자유롭게 다른 이름들을 정의하는 방식으로 말이다.
이러한 이름들은 동일한 빈에 대해 대등하게 사용될 수 있는 별칭들이며, 특정 상황들에서 유용하다.
예를 들어 애플리케이션의 복수의 컴포넌트들에서 동일한 의존성에 대해 각자 다른 이름으로 참조하는 등의 방식으로 활용될 수 있다.&lt;/p&gt;&lt;p&gt;다만, 빈이 실제로 정의된 곳에서 모든 별칭들을 정의하는 것이 부적절한 경우도 존재한다.
때로는 다른 곳에 정의된 빈에 대해 별칭을 설정하는 것이 이상적일 수도 있다.
이는 대규모 시스템에서 개별 하위 시스템들에 설정 정보가 분리된 경우,
즉 각 하위 시스템에서 자신의 객체 정의들의 집합을 지니고 있는 경우에 일반적이다.
XML 기반의 설정 메타데이터에서는 &lt;code&gt;&amp;lt;alias/&amp;gt;&lt;/code&gt; 요소를 사용하여 이를 구현할 수 있다. 아래의 예시는 그 방법이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-xml line-numbers&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;alias&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;fromName&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;alias&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;toName&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이와 같은 별칭 정의 이후, 동일한 컨테이너 내의 &lt;code&gt;fromName&lt;/code&gt;라는 이름의 빈은 &lt;code&gt;toName&lt;/code&gt;라고 참조될 수도 있다.&lt;/p&gt;&lt;p&gt;예를 들어, 하위 시스템 A의 설정 메타데이터는 특정 DataSource를 &lt;code&gt;subsystemA-dataSource&lt;/code&gt;라는 이름으로 참조할 수 있다.
하위 시스템 B의 설정 메타데이터는 특정 DataSource를 &lt;code&gt;subsystemB-dataSource&lt;/code&gt;라는 이름으로 참조할 수 있다.
해당 하위 시스템을 모두 사용하는 메인 애플리케이션에서는 이 DataSource를 &lt;code&gt;myApp-dataSource&lt;/code&gt;라는 이름으로 참조한다. 이 세 가지 이름이 동일한 객체를 가리키도록 하고 싶다면, 아래와 같은 별칭 정의를 설정 메타데이터에 추가할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-xml line-numbers&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;alias&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;myApp-dataSource&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;alias&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;subsystemA-dataSource&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;alias&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;myApp-dataSource&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;alias&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;subsystemB-dataSource&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 개별 컴포넌트와 메인 애플리케이션은 데이터소스에 대해 (효과적으로 네임스페이스를 생성함으로써) 고유하면서도 다른 정의들과 충돌하지 않을 것이 보장되는 이름을 통해 참조를 한다. 그러면서도 전부 동일한 빈을 참조한다.&lt;/p&gt;&lt;div title=&quot;자바 기반 설정&quot;&gt;&lt;p&gt;자바 기반 설정을 사용한다면 &lt;code&gt;@Bean&lt;/code&gt; 어노테이션을 사용하여 별칭을 지정할 수 있다.
&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-java-bean-annotation&quot;&gt;&lt;code&gt;@Bean&lt;/code&gt; 어노테이션 사용하기&lt;/a&gt;을 참고하자.&lt;/p&gt;&lt;/div&gt;&lt;h3&gt;1.3.2. 빈 인스턴스화하기&lt;/h3&gt;&lt;p&gt;빈 정의란 본질적으로 하나 혹은 그 이상의 객체를 만들기 위한 레시피이다.
컨테이너는 이름을 지닌 빈에 대한 레시피를 읽고, 해당 빈 정의에 담긴 설정 메타데이터를 사용하여 실제 객체를 새로 생성하거나 찾아낸다.&lt;/p&gt;&lt;p&gt;XML 기반의 설정 메타데이터를 사용하면 &lt;code&gt;&amp;lt;bean/&amp;gt;&lt;/code&gt; 요소의 &lt;code&gt;class&lt;/code&gt; 속성에 인스턴스화되어야 하는 객체의 타입 (혹은 클래스)를 정의해야 한다.
이 &lt;code&gt;class&lt;/code&gt; 속성은 (내부적으로 &lt;code&gt;BeanDefinition&lt;/code&gt; 인스턴스의 &lt;code&gt;Class&lt;/code&gt; 속성이며) 일반적으로 필수다. (예외상황을 알고 싶다면, &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-class-instance-factory-method&quot;&gt;인스턴스 팩토리 메서드를 사용한 인스턴스화&lt;/a&gt;와 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-child-bean-definitions&quot;&gt;빈 정의 상속&lt;/a&gt;를 참고하여라.) &lt;code&gt;Class&lt;/code&gt; 속성은 아래 두 가지 중 한 가지 방법으로 사용될 수 있다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;주로 컨테이너 자체에서 리플렉션으로 생성자를 호출하여 직접적으로 빈을 생성하는 상황에서 생성되어야 하는 빈 클래스를 지정하기 위해 사용한다. &lt;code&gt;new&lt;/code&gt; 키워드를 사용하는 자바 코드와 어느 정도 유사하다.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;빈을 생성하기 위해 컨테이너에서 정적 팩토리 메서드를 호출해야 하는 별로 흔하지 않은 상항에서, 객체 생성을 위해 호출되어야 하는 정적 팩토리 메서드를 지니고 있는 실제 클래스를 지정하기 위해 사용된다. 정적 팩토리 메서드의 호출에 의해 반환되는 객체의 타입은 해당 클래스와 같거나 전혀 다른 클래스일 수도 있다.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div title=&quot;중첩 클래스의 이름&quot;&gt;&lt;p&gt;중첩 클래스에 대한 빈 정의를 설정하고 싶은 경우, 해당 중첩 클래스의 바이너리 이름 혹은 소스명 중 하나를 사용할 수 있다.&lt;/p&gt;&lt;p&gt;예를 들어, &lt;code&gt;com.example&lt;/code&gt; 패키지 내부에 &lt;code&gt;SomeThing&lt;/code&gt;라는 클래스가 있고, &lt;code&gt;SomeThing&lt;/code&gt; 내부에 &lt;code&gt;OtherThing&lt;/code&gt;라는 &lt;code&gt;static&lt;/code&gt; 중첩 클래스가 있는 경우, 이 둘은 달러 표시(&lt;code&gt;$&lt;/code&gt;) 혹은 점(&lt;code&gt;.&lt;/code&gt;)으로 구분될 수 있다. 그러므로 빈 정의의 &lt;code&gt;class&lt;/code&gt; 속성 값은 &lt;code&gt;com.example.SomeThing$OtherThing&lt;/code&gt; 혹은 &lt;code&gt;com.example.SomeThing.OtherThing&lt;/code&gt;이 된다.&lt;/p&gt;&lt;/div&gt;&lt;h4&gt;생성자를 통한 인스턴스화&lt;/h4&gt;&lt;p&gt;생성자 방법으로 빈을 생성하는 경우, 일반적인 클래스들은 모두 사용될 수 있으며 스프링과도 호환된다.
즉, 이러한 클래스를 개발하기 위해 특정한 인터페이스를 구현하거나, 특정한 방식의 코드를 지니게 할 필요가 없다.
단순히 빈 클래스를 지정하는 것만으로도 충분하다.
다만, 해당 빈에 대해 어떠한 종류의 IoC를 사용하는지에 따라, 비어있는 디폴트 생성자가 필요할 수 있다.&lt;/p&gt;&lt;p&gt;스프링 IoC 컨테이너는 JavaBean에만 제한되지 않고, 사실상 그 어떤 클래스든 관리할 수 있다.
대부분의 스프링 사용자들은 (인자를 받지 않는) 디폴트 생성자와 속성들에 부합하는 적절한 세터와 게터들로 구성된 JavaBean들을 선호한다.
빈 스타일이 아닌 특이한 형식의 클래스도 사용할 수 있다.
예를 들어, 만약 자바 빈 규약에 전혀 부합하지 않는 레거시 커넥션 풀을 사용해야 하는 경우 스프링은 이에 잘 대응할 수 있다.&lt;/p&gt;&lt;p&gt;XML 기반 설정 메터데이터에서 다음과 같이 빈 클래스를 정의할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-xml line-numbers&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;exampleBean&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;examples.ExampleBean&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;anotherExample&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;examples.ExampleBeanTwo&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;생성자에게 인자를 제공하고 객체 생성 이후에 인스턴스 속성을 set하는 메커니즘에 대해 세부적으로 알고 싶다면 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-collaborators&quot;&gt;의존성 주입&lt;/a&gt;에 대해 확인해봐라.&lt;/p&gt;&lt;h4&gt;정적 팩토리 메서드를 통한 인스턴스화&lt;/h4&gt;&lt;p&gt;정적 팩토리 메서드로 생성하는 빈을 정의하려는 경우, &lt;code&gt;class&lt;/code&gt; 속성으로 해당 정적 팩토리 메서드가 포함된 클래스를 지정하고 &lt;code&gt;factory-method&lt;/code&gt; 속성으로 팩토리 메서드명을 지정해야 한다.
해당 메서드에 인자를 전달하여 호출하면 객체가 반환되며, 해당 객체는 생성자를 통해 생성된 것처럼 간주된다.
이러한 빈 정의는 레거시 코드의 정적 팩토리를 호출하려는 등의 경우 사용할 수 있다.&lt;/p&gt;&lt;p&gt;아래의 빈 정의는 팩토리 메서드 호출을 통해 빈을 생성한다는 점을 명시한다.
해당 정의는 팩토리 메서드가 포함된 클래스를 지정할 뿐, 반환되는 객체의 타입(클래스)를 지정하지 않는다.
해당 예시에서 &lt;code&gt;createInstance()&lt;/code&gt; 메서드는 반드시 &lt;code&gt;static&lt;/code&gt; 메서드여야 한다. 아래의 예시는 팩토리 메서드를 지정하는 방법을 보여준다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-xml line-numbers&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;clientService&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;examples.ClientService&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;factory-method&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;createInstance&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;아래 예시는 위의 빈 정의와 함께 동작하는 클래스다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClientService&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClientService&lt;/span&gt; clientService &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClientService&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClientService&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClientService&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; clientService&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;팩토리 메서드에 (필수는 아니지만) 인자를 전달하거나,
팩토리로부터 반환된 객체에 대해 인스턴스 속성을 set하는 메커니즘에 대해 자세히 알고 싶다면 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-properties-detailed&quot;&gt;의존성과 설정에 대해 자세하게&lt;/a&gt;를 참고하여라.&lt;/p&gt;&lt;h4&gt;인스턴스 팩토리 메서드를 통한 인스턴스화&lt;/h4&gt;&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-class-static-factory-method&quot;&gt;정적 팩토리 메서드&lt;/a&gt;를 통한 인스턴스화와 유사하게, 인스턴스 팩토리 메서드를 통한 인스턴스화는 컨테이너에 존재하는 빈의 정적이지 않은 메서드를 호출한다.
이러한 메커니즘을 사용하려는 경우, &lt;code&gt;class&lt;/code&gt; 속성을 비워두고
&lt;code&gt;factory-bean&lt;/code&gt; 속성에 해당 객체를 생성하기 위해 호출되어야 하는 인스턴스 메서드를 포함하고 있는 빈의 이름을 지정해야 한다. 해당 빈은 현재 컨테이너 혹은 그 부모 및 조상 컨테이너에 존재해야 한다.
그리고 팩토리 메서드명은 &lt;code&gt;factory-method&lt;/code&gt; 속성에 작성한다.
해당 예시는 이처럼 빈을 설정하는 방법을 보여준다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-xml line-numbers&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 팩토리 빈: createInstance()라는 메서드를 포함함.  --&amp;gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;serviceLocator&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;examples.DefaultServiceLocator&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 해당 로케이터 빈이 필요로 하는 의존성들을 주입--&amp;gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 팩토리 빈을 통해 생성되는 빈 --&amp;gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;clientService&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;factory-bean&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;serviceLocator&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;factory-method&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;createClientServiceInstance&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음 예시는 이에 대응되는 클래스를 보여준다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultServiceLocator&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClientService&lt;/span&gt; clientService &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClientServiceImpl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClientService&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createClientServiceInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; clientService&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;하나의 팩토리 클래스는 복수의 팩토리 메서드를 지닐 수 있다. 다음 예시에서 이를 확인할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;xml&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-xml line-numbers&quot;&gt;&lt;code class=&quot;language-xml&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;serviceLocator&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;examples.DefaultServiceLocator&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;&amp;lt;!-- 해당 로케이터 빈이 필요로 하는 의존성들을 주입--&amp;gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;clientService&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;factory-bean&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;serviceLocator&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;factory-method&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;createClientServiceInstance&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;bean&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;accountService&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;factory-bean&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;serviceLocator&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token attr-name&quot;&gt;factory-method&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;createAccountServiceInstance&lt;span class=&quot;token punctuation&quot;&gt;&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음 예시는 이에 대응되는 클래스를 보여준다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DefaultServiceLocator&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClientService&lt;/span&gt; clientService &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClientServiceImpl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AccountService&lt;/span&gt; accountService &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AccountServiceImpl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ClientService&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createClientServiceInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; clientService&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AccountService&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createAccountServiceInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; accountService&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이러한 방식은 팩토리 빈 그 자체도 관리될 수 잇으며, 의존성 주입(DI)를 통해 설정될 수 있음을 보여준다. &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-properties-detailed&quot;&gt;의존성과 설정에 대해 자세하게&lt;/a&gt;를 참고하여라.&lt;/p&gt;&lt;div&gt;&lt;p&gt;스프링 공식문서에서 &amp;quot;팩토리 빈&amp;quot;은 스프링 컨테이너에서 설정되며 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-class-instance-factory-method&quot;&gt;인스턴스&lt;/a&gt; 혹은 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-class-static-factory-method&quot;&gt;정적&lt;/a&gt; 팩토리 메서드를 통해 객체를 생성하는 객체를 의미한다. 이와는 대조적으로, &lt;code&gt;FactoryBean&lt;/code&gt;은 스프링에 한정된 &lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-factory-extension-factorybean&quot;&gt;FactoryBean&lt;/a&gt; 구현체 클래스를 의미한다.&lt;/p&gt;&lt;/div&gt;&lt;h4&gt;빈의 런타임 타입 판단&lt;/h4&gt;&lt;p&gt;런타임 시점에 특정 빈의 타입을 판단하는 것은 사소한 일이 아니다.&lt;/p&gt;&lt;p&gt;빈 메타데이터 정의에 담긴 클래스는 그저 특정 클래스에 대한 초기 참조다.
이는 정적 팩토리에 대한 정의와 결합되거나, &lt;code&gt;FactoryBean&lt;/code&gt;일 수도 있으므로 최종적으로 해당 빈은 전혀 다른 타입을 지니게 될 수도 있다. (지정된 &lt;code&gt;factory-bean&lt;/code&gt; 이름을 통해 처리되는) 인스턴스 레벨의 팩토리 메서드의 경우 아예 클래스에 대한 정보가 없을 수도 있다.&lt;/p&gt;&lt;p&gt;추가적으로 AOP 프록시를 설정할 경우, 대상이 되는 빈 인스턴스는 인터페이스 기반의 프록시로 감싸지기 때문에 대상 빈의 실제 타입이 아닌 구현된 인터페이스만 드러나게 된다.
특정 빈의 실제 런타임 타입을 확인하기 위해서는 해당 빈의 이름에 대해 &lt;code&gt;BeanFactory.getType&lt;/code&gt;를 호출하는 방법이 권장된다. 이 방법은 위의 모든 방법을 고려하며, 해당 빈에 대해 &lt;code&gt;BeanFactory.getBean&lt;/code&gt;를 호출했을 때 반환될 객체의 타입을 반환한다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;원문&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-introduction&quot;&gt;1.1. Introduction to the Spring IoC Container and Beans&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-basics&quot;&gt;1.2. Container Overview&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-definition&quot;&gt;1.3. Bean Overview&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;버전 5.3.19&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;최종 업데이트 2022-04-13 08:58:09 UTC&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[[번역] 스프링 프레임워크 개요]]></title><description><![CDATA[스프링 프레임워크 공식문서의 Overview 섹션에 대한 번역]]></description><link>https://bugoverdose.github.io/docs/spring/framework/overview/</link><guid isPermaLink="false">https://bugoverdose.github.io/docs/spring/framework/overview/</guid><pubDate>Sun, 08 May 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;스프링은 상업용 자바 애플리케이션을 쉽게 만들 수 있도록 해준다.
상업 환경에서 자바 언어를 사용하는데 필요한 모든 것들을 제공해주며,
JVM에서 동작하는 대안 언어로써 그루비와 코틀린도 지원하며,
애플리케이션의 요구사항에 따라 다양한 종류의 구조를 만들 수 있도록 해주는
유연성까지 겸비한다.
스프링 프레임워크 5.1부터 스프링은 JDK 8+(Java SE 8+) 버전을 요구하며,
JDK 11 LTS 버전들에 대한 지원을 제공한다.
적어도 Java SE 8 업데이트 60버전을 사용해야 하며,
일반적으로 최신 릴리즈 버전을 사용하는 것이 권장된다.&lt;/p&gt;&lt;p&gt;스프링이 지원하는 애플리케이션 시나리오의 범주는 광범위하다.
대규모 기업의 애플리케이션인 경우, 일반적으로 장기간 존재하며
개발자의 통제를 벗어난 수준의 업그레이드 싸이클을 지닌 JDK와 서버 위에서 동작한다.
혹은 클라우드 환경에서, 서버가 내장된 단일 JAR로서 실행되는 경우도 있다.
한편으로는 배치, 통합 워크로드 등과 같이
서버가 필요하지 않은 단독 애플리케이션인 경우도 존재하다.&lt;/p&gt;&lt;p&gt;스프링은 오픈소스다. 대규모와 활발한 커뮤니티가 존재하며,
다양한 종류의 실제 경험에 기반을 둔 피드백이 지속적으로 오간다.
이 덕분에 스프링은 굉장히 오랜 기간 동안 성공적으로 진화할 수 있었다.&lt;/p&gt;&lt;h2&gt;1. 스프링에 담긴 의미&lt;/h2&gt;&lt;p&gt;&amp;quot;스프링&amp;quot;이라는 용어는 다양한 맥락에서 다른 대상을 의미한다.
모든 것이 시작된 스프링 프레임워크 프로젝트 자체를 지칭할 수도 있다.
시간이 지나면서 기존 스프링 프레임워크 위에 다른 스프링 프로젝트들이 생겨났다.
대부분의 사람들은 이러한 모든 프로젝트들을 포괄하는 의미에서 &amp;quot;스프링&amp;quot;이라고 말한다.
해당 공식문서에서는 바로 이 기반, 즉 스프링 프레임워크 그 자체에 초점을 맞춘다.&lt;/p&gt;&lt;p&gt;스프링 프레임워크는 다양한 모듈로 구분되어있다.
애플리케이션은 자신이 필요로 하는 모듈을 선택할 수 있다.
심장부에는 코어 컨테이너의 모듈들이 존재하며,
설정 모델(configuration model)과 의존성 주입 메커니즘을 포함하고 있다.
나아가 스프링 프레임워크는 메세징, 트랜젝션 데이터, 영속성, 웹 등
다양한 애플리케이션 구조의 기반을 지원한다.
또한 서블릿 기반의 스프링 MVC 웹 프레임워크과
스프링 WebFlux 리액티브 웹 프레임워크를 포함하고 있다.&lt;/p&gt;&lt;p&gt;모듈과 관련하여, 스프링의 프레임워크 JAR들은
JDK 9의 모듈 경로(Jigsaw)로의 배포를 지원한다.
Jigsaw를 지원하는 애플리케이션에서의 활용을 위해
스프링 프레임워크 5 JAR들은 &amp;quot;자동 모듈명(Automatic-Module-Name)&amp;quot;
매니페스트 엔트리를 지원한다. 자동 모듈명 매니페스트 엔트리는
JAR 아티팩트명과는 독립적인 안정화된 언어 레벨 모듈명(&amp;quot;spring.core&amp;quot;,
&amp;quot;spring.context&amp;quot;, 등)을 정의한다. JAR들의 경우,
&amp;quot;spring-core&amp;quot;, &amp;quot;spring-context&amp;quot;와 같이 &amp;quot;.&amp;quot; 대신 &amp;quot;-&amp;quot;를 활용한다.
물론 스프링 프레임워크 JAR들은 JDK 8이나 9+버전들에서 모두 문제 없이 동작한다.&lt;/p&gt;&lt;h2&gt;2. 스프링과 스프링 프레임워크의 역사&lt;/h2&gt;&lt;p&gt;스프링은 초기 J2EE 스펙의 복잡성에 대한 반응으로써 2003년에 등장하였다.
Java EE와 스프링이 서로 경쟁한다고 생각하는 사람들도 있지만,
사실 스프링은 &lt;a href=&quot;https://en.wikipedia.org/wiki/Jakarta_EE&quot;&gt;Java EE&lt;/a&gt;를 보완한다.
스프링 프로그래밍 모델은 Java EE 플랫폼 스펙을 따르지 않는다.
그 대신 EE 내에서도 신중하게 선택된 개별 스펙과의 통합을 추구한다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Servlet API (&lt;a href=&quot;https://jcp.org/en/jsr/detail?id=340&quot;&gt;JSR 340&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;WebSocket API (&lt;a href=&quot;https://www.jcp.org/en/jsr/detail?id=356&quot;&gt;JSR 356&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;Concurrency Utilities (&lt;a href=&quot;https://www.jcp.org/en/jsr/detail?id=236&quot;&gt;JSR 236&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;JSON Binding API (&lt;a href=&quot;https://jcp.org/en/jsr/detail?id=367&quot;&gt;JSR 367&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;Bean Validation (&lt;a href=&quot;https://jcp.org/en/jsr/detail?id=303&quot;&gt;JSR 303&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;JPA (&lt;a href=&quot;https://jcp.org/en/jsr/detail?id=338&quot;&gt;JSR 338&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;JMS (&lt;a href=&quot;https://jcp.org/en/jsr/detail?id=914&quot;&gt;JSR 914&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;필요하다면 트랜잭션 관리(transaction coordination)를 위한 JTA/JCA 셋업&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;스프링 프레임워크는 의존성 주입(&lt;a href=&quot;https://www.jcp.org/en/jsr/detail?id=330&quot;&gt;JSR 330&lt;/a&gt;)과
표준 어노테이션(&lt;a href=&quot;https://jcp.org/en/jsr/detail?id=250&quot;&gt;JSR 250&lt;/a&gt;) 스펙도 지원한다.
애플리케이션 개발자들은 스프링 프레임워크에서 지원되는 스프링에 제한된 메커니즘 대신 이를 사용할 수 있다.&lt;/p&gt;&lt;p&gt;스프링 프레임워크 5.0부터 스프링은 Java EE 7레벨(서블릿 3.1+, JPA 2.1+ 등)을
최소한의 필수요건으로 하고 있다.
이와 동시에 런타임에는 Java EE 8레벨의 최신
API(Servlet 4.0, JSON Binding API 등)에 대한 지원도 제공한다.
이 덕분에 스프링은 Tomcat 8과 9, WebSphere 9, JBoss EAP 7 등과 완전히 호환된다.&lt;/p&gt;&lt;p&gt;시간이 지나면서 애플리케이션 개발에서 Java EE의 역할은 진화하였다.
Java EE와 스프링의 초기에, 애플리케이션은 서버로 배포되기 위해 만들어졌다.
오늘날의 애플리케이션들은 스프링 부트의 도움 덕분에
데브옵스와 클라우드에 친화적인 방식으로 만들어지며,
서블렛 컨테이너는 내장되며 변화에 취약하지도 않다.
스프링 프레임워크 5부터 지원된 WebFlux 애플리케이션들의 경우
서블릿 API을 직접적으로 다루지도 않으며
서블릿 컨테이너가 아닌 (Netty와 같은) 서버들에서 실행될 수 있다.&lt;/p&gt;&lt;p&gt;스프링은 꾸준히 혁신하며 진화하고 있다.
스프링 프레임워크 이외에도 스프링 부트, 스프링 시큐리티,
스프링 데이터, 스프링 클라우드, 스프링 배치 등 다양한 프로젝트들이 존재한다.
각 프로젝트마다 자신만의 소스 코드 저장소, 이슈 트래커,
릴리즈 기록을 관리하고 있다는 점은 중요하다.
&lt;a href=&quot;https://spring.io/projects&quot;&gt;spring.io/projects&lt;/a&gt;에서
스프링 프로젝트들의 완전한 목록을 확인할 수 있다.&lt;/p&gt;&lt;h2&gt;3. 설계 철학&lt;/h2&gt;&lt;p&gt;프레임워크에 대해 배울 때 무엇을 하는지만이 아니라
어떠한 원칙을 따르고 있는지에 대해 아는 것이 중요하다.
다음은 스프링 프레임워크이 따르는 원칙들이다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;모든 레벨에서 선택지를 제공한다. 스프링은 설계에 대한 결정을 최대한
나중으로 연기할 수 있도록 해준다. 예를 들어,
코드를 수정하지 않고도 설정 변경만으로도 영속성 제공자를 갈아끼우는 것이 가능하다.
다양한 인프라 관련 고민 및 제3자 API와의 통합에 있어서도 마찬가지다.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;다양한 관점을 수용한다. 스프링은 유연성을 추구하며,
어떠해야 하는지에 대해 독단적이지 않다.
다양한 관점을 지닌 애플리케이션 요구사항들에 대해 광범위하게 지원한다.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;강력한 하위호환성을 유지한다. 버전 간 차이를 최소화하기 위해
스프링의 진화는 신중하게 관리되었다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;
스프링에 의존하는 애플리케이션과 라이브러리의 유지보수를 위해
스프링은 신중하게 선정된 JDK 버전들과 제3자 라이브러리만을 지원한다.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;API 설계에 신경을 쓴다. 스프링 팀은 직관적이면서도 수년에 걸쳐
다양한 버전들을 받아들일 수 있는 API를 만들기 위한 노력에
굉장히 많은 시간을 투자한다.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;코드의 질에 대해 높은 기준을 설정한다. 스프링 프레임워크는
의미 있고, 최신이며, 정확한 자바독을 강조한다.
패키지 간의 순환 참조 없이 깨끗한 코드 구조를 지니고 있다고
당당하게 주장할 수 있는 몇 안 되는 프로젝트 중 하나다.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;4. 피드백과 기여&lt;/h2&gt;&lt;p&gt;방법에 대한 질문, 이슈에 대한 진단 및 디버깅의 경우
스택 오버플로우를 사용하는 것을 권장한다.
스택 오버플로우에서 사용하는 것을 권장하는 태그들의 목록을 보려면
&lt;a href=&quot;https://stackoverflow.com/questions/tagged/spring+or+spring-mvc+or+spring-aop&quot;&gt;여기&lt;/a&gt;를
클릭하여라.
만약 스프링 프레임워크에 문제가 있다고 확신하고 있거나 기능을 제안하고 싶다면
&lt;a href=&quot;https://github.com/spring-projects/spring-framework/issues&quot;&gt;깃헙 이슈&lt;/a&gt;를 사용하여라.&lt;/p&gt;&lt;p&gt;만약 해결책을 제안하고 싶다면
&lt;a href=&quot;https://github.com/spring-projects/spring-framework&quot;&gt;Github&lt;/a&gt;에서
PR을 제출해도 된다.
다만, 대부분의 경우 논의를 진행하고 향후에 참조될 수 있도록 이슈 트래커에
티켓을 만드는 것이 기대된다는 점을 염두에 두기를 바란다.&lt;/p&gt;&lt;p&gt;자세한 사항은 프로젝트의 최상위 페이지에 있는
&lt;a href=&quot;https://github.com/spring-projects/spring-framework/blob/main/CONTRIBUTING.md&quot;&gt;CONTRIBUTING&lt;/a&gt;의
가이드라인을 참고하여라.&lt;/p&gt;&lt;h2&gt;5. 시작하기&lt;/h2&gt;&lt;p&gt;스프링이 완전히 처음이라면 스프링 부트 기반의 애플리케이션을 만들면서
스프링 프레임워크에 입문하는 것을 추천한다.
스프링 부트는 스프링 기반의 애플리케이션을 (독단적이지만) 빨리 개발할 수 있는 방법을 제공한다.
스프링 부트는 스프링 프레임워크에 기반을 두고 있으며,
설정보다는 컨벤션을 추구하며, 최대한 빨리 개발을 할 수 있도록 설계되어있다.&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://start.spring.io/&quot;&gt;start.spring.io&lt;/a&gt;를 사용하여
기본적인 프로젝트를 생성하거나,
&lt;a href=&quot;https://spring.io/guides/gs/rest-service/&quot;&gt;RESTful한 웹 서비스 만들기&lt;/a&gt;와
같은 &lt;a href=&quot;https://spring.io/guides&quot;&gt;가이드&lt;/a&gt;들 중 하나를 따라해보는 것을 권장한다.
해당 가이드들은 소화하기 쉬울뿐만 아니라, 특정 과업에 초점을 맞추고 있으며,
거의 대부분 스프링 부트 기반이다.
특정한 문제를 해결하는 데 고려해볼 필요가 있는 스프링 포트폴리오의 프로젝트들도 다룬다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;원문&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-framework/docs/current/reference/html/overview.html&quot;&gt;Spring Framework Overview&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;버전 5.3.19&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;최종 업데이트 2022-04-13 08:58:09 UTC&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;만일 이게 당연한 것이라고 생각한다면 Gatsby를 배워보는 것을 권장한다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[OOP] SOLID 압축 정리본]]></title><description><![CDATA[우아한테크코스 레벨 인터뷰 준비 과정에서 작성한 SOLID에 대한 개념 정리이다. 너무 깊지도, 얕지도 않도록 최소한의 예제만을 활용한 압축본을 만드는 것을 목표로 하였다. 오브젝트 스터디 종료 후 수정할 계획이다.]]></description><link>https://bugoverdose.github.io/computer-science/solid-basics/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/solid-basics/</guid><pubDate>Tue, 26 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;SOLID란 쉽고 안정적으로 변경될 수 있는 코드를 작성하기 위한 5가지 객체지향 설계 원칙을 의미한다.
OOP에 대해 논할 때 빠질 수 없는 개념이지만
막상 인터뷰에서 개별 원칙에 대해 깔끔하고 명료하게 설명하는 것은 생각보다 어렵다.&lt;/p&gt;&lt;p&gt;한 줄로 요약해버리면 실제로 그 뜻을 이해하고 있는지 파악하기 힘들고,
그렇다고 자세히 설명하는 경우 너무 시간이 오래 걸린다.
SRP에 대해 30분 동안 설명하는 &lt;a href=&quot;https://www.youtube.com/watch?v=AdANHDp5dTM&quot;&gt;영상&lt;/a&gt;이
존재한다는 것만 보아도 이는 명백하다.&lt;/p&gt;&lt;p&gt;해당 게시글은 우아한테크코스 레벨1 모의 인터뷰 준비 과정에서 작성한
SOLID에 대한 자신만의 개념 정리이다.&lt;/p&gt;&lt;h2&gt;단일 책임 원칙&lt;/h2&gt;&lt;p&gt;단일 책임 원칙(SRP; Single Responsibility Principle)이란
&lt;strong&gt;하나의 클래스는 하나의 책임만을 지녀야 한다&lt;/strong&gt;는 원칙이다.
이때의 책임은 단순히 객체에서 제공하는 퍼블릭 메서드 하나 하나를 의미하지 않는다.&lt;/p&gt;&lt;p&gt;OOP의 핵심은 자율적인 객체들 사이의 협력을 통해 비즈니스 로직을 구현함에 있다.
기본적으로 하나의 객체는 여러 클라이언트 코드들에서 사용될 수 있다.
그러한 상황에서 SRP는 &lt;strong&gt;하나의 객체가 오직 한 가지 부류의 협력에 대해서만 책임을 지녀야 한다&lt;/strong&gt;는 의미이다.
즉, 하나의 객체는 모든 곳에서 동일한 맥락에서의 요구사항 및 기대를 받아야 하며,
이를 위한 데이터를 알고 있고, 이를 위한 메서드를 퍼블릭 인터페이스로서 제공해야 한다.&lt;/p&gt;&lt;p&gt;SRP를 위배한 경우를 한번 생각해보자. &lt;code&gt;Employee&lt;/code&gt;라는 객체가 있을 때,
&lt;em&gt;회계&lt;/em&gt;를 담당하는 비즈니스 로직에서는 &lt;code&gt;calculateSalary&lt;/code&gt; 메서드를 활용하여
사원의 월급 및 연봉 정보를 반환받는 방식으로 사원 객체를 활용할 수 있을 것이다.
한편,&lt;em&gt;인사&lt;/em&gt;를 담당하는 로직에서는 &lt;code&gt;promote&lt;/code&gt;와 &lt;code&gt;fire&lt;/code&gt;와 같은 메서드를 활용하여
특정 사원을 승진 및 해고시키는 등의 작업을 수행할 수 있을 것이다.
이 경우 &lt;code&gt;Employee&lt;/code&gt; 객체는 &lt;em&gt;회계&lt;/em&gt;와 &lt;em&gt;인사&lt;/em&gt;라는 &lt;strong&gt;복수의 협력에 대해 책임을 지니게 된다.&lt;/strong&gt;
이러한 상황에서는 &lt;em&gt;회계&lt;/em&gt;와 관련된 변경사항과 &lt;em&gt;인사&lt;/em&gt;와 관련된 변경사항 모두에 대해
&lt;code&gt;Employee&lt;/code&gt; 클래스를 수정해야 하며 이는 해당 객체의 &lt;strong&gt;응집도가 낮은 것&lt;/strong&gt;으로 볼 수 있다.&lt;/p&gt;&lt;p&gt;SRP를 지키는 방법 중 하나는 &lt;code&gt;Employee&lt;/code&gt; 객체와는 별개로 &lt;code&gt;Salary&lt;/code&gt; 객체를 관리하는 것이다.
&lt;code&gt;Employee&lt;/code&gt; 객체에 존재하던 연봉에 대한 책임을 전부 &lt;code&gt;Salary&lt;/code&gt; 객체로 이전할 경우,
&lt;code&gt;Employee&lt;/code&gt; 객체는 더 이상 &lt;code&gt;calculateSalary&lt;/code&gt; 메서드를 제공하지 않으며
클라이언트는 &lt;em&gt;회계&lt;/em&gt;와 관련된 비즈니스 로직을 위해 &lt;code&gt;Salary&lt;/code&gt; 객체와 협력하게 된다.
결과적으로 &lt;em&gt;회계&lt;/em&gt;와 관련된 변경사항에서는 &lt;code&gt;Salary&lt;/code&gt;만 수정하면 되며,
&lt;em&gt;인사&lt;/em&gt;와 관련된 변경사항에서는 &lt;code&gt;Employee&lt;/code&gt;만 고려하면 된다.&lt;/p&gt;&lt;p&gt;즉, 그리고 하나의 클래스가 하나의 책임만을 지녀야 한다는 말은
&lt;strong&gt;클래스를 변경하는 이유는 단 한 개여야 한다&lt;/strong&gt;는 의미를 지닌다.&lt;/p&gt;&lt;h2&gt;개방 폐쇄 원칙&lt;/h2&gt;&lt;p&gt;개방 폐쇄 원칙(OCP; Open-Closed Principle)이란
&lt;strong&gt;객체는 확장에 대해서는 열려있고, 변경에 대해서는 닫혀있어야 한다&lt;/strong&gt;는 원칙이다.&lt;/p&gt;&lt;p&gt;확장에 대해 열려있다는 뜻은 요구사항이 변경되었을 때 &lt;strong&gt;쉽게 새로운 기능을 추가&lt;/strong&gt;할 수 있음을 뜻한다.
그리고 변경에 대해 닫혀있다는 뜻은 새로운 기능을 추가하기 위해 코드를 수정했을 때,
해당 코드를 사용하는 &lt;strong&gt;클라이언트 코드를 매번 변경할 필요가 없어야 함&lt;/strong&gt;을 뜻한다.&lt;/p&gt;&lt;p&gt;이를 위해서는 기본적으로 &lt;strong&gt;변하기 쉬운 부분을 추상화&lt;/strong&gt;해야 한다.
예를 들어 하나의 인터페이스에 대해 다양한 구현체를 만들고,
클라이언트 코드에서는 인터페이스에 의존하도록 설계할 수 있을 것이다.
런타임에는 다양한 구체클래스들 중 하나로부터 생성된 객체가 협력에 참여할 수 있으며
이와 같은 다형성을 통해 클라이언트 코드는 상황에 따라 다양한 방식으로 동작할 수 있게 된다.
또한 요구사항의 변화에 따라 구체클래스들을 새로 추가하거나, 수정하거나, 제거할 수 있는데,
이러한 코드 수정이 이루어지더라도 &lt;strong&gt;추상 타입에 의존하는 클라이언트 코드에서는 별도의 수정이 일어나지 않는다&lt;/strong&gt;.&lt;/p&gt;&lt;p&gt;다만, 추상화를 제대로 활용하지 않은 경우 자동으로 OCP를 위배하게 된다.
만일 클라이언트 코드에서 다운캐스팅을 수행해야 하거나,
클라이언트 코드에 너무 긴 조건문이 존재하는 경우 OCP 위배 여부를 의심해보아야 한다.&lt;/p&gt;&lt;h2&gt;리스코프 치환 원칙&lt;/h2&gt;&lt;p&gt;리스코프 치환 원칙(LSP; Liskov Substitution Principle)이란
&lt;strong&gt;상위 타입의 객체를 하위 타입의 객체로 대체하여도, 상위 타입을 사용하는 프로그램은 정상적으로 동작해야 한다&lt;/strong&gt;는 원칙이다.&lt;/p&gt;&lt;p&gt;상위 타입을 사용하는 클라이언트 코드에는 기본적으로
상위 타입만이 아니라 하위 타입의 객체가 업캐스팅되어 들어올 수도 있다.
그런데 특정한 하위 타입의 객체가 들어왔을 때 프로그램이 비정상적으로 동작한다는 것은
해당 타입들의 상속 과정에서 &lt;strong&gt;동일한 메서드 시그니처에 대해 서로 별개의 기능을 수행하도록 설계되었음&lt;/strong&gt;을 의미한다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;p&gt;객체에서 제공하는 퍼블릭 인터페이스는 호출되었을 때 &amp;quot;특정한 방식으로 동작할 것&amp;quot;이라는 &lt;strong&gt;약속&lt;/strong&gt;을 담고 있다.
그리고 자식클래스는 기본적으로 부모클래스의 public 메서드를 전부 상속받는다.
그런데 자식클래스에서 부모클래스로부터 받은 메서드를 기존 약속에 위배되는 방식으로 재정의하는 경우, LSP가 위배되는 것으로 볼 수 있다.&lt;/p&gt;&lt;p&gt;LSP 위배 상황에 관한 가장 보편적인 예시가 바로 &lt;code&gt;Rectangle&lt;/code&gt;과 &lt;code&gt;Square&lt;/code&gt; 사례이다.
수학적으로 정사각형은 직사각형의 일종이기 때문에 &lt;code&gt;Rectangle&lt;/code&gt; 클래스를 &lt;code&gt;Square&lt;/code&gt; 클래스가 상속받도록 설계하는 것은
딱히 이상하다고 느껴지지 않는다.
그런데 문제는 &lt;code&gt;Rectangle&lt;/code&gt;에서 제공하는 모든 퍼블릭 인터페이스를
&lt;code&gt;Square&lt;/code&gt;에서 기존 약속을 어기지 않은 체 제공할 수 있느냐에 있다.
만일 직사각형 객체가 &lt;code&gt;setWidth(int)&lt;/code&gt;와 &lt;code&gt;setHeight(int)&lt;/code&gt; 메서드를 제공하는 경우,
각 메서드는 해당 직사각형의 가로 길이와 세로 길이 중 한 가지만 수정하는 기능이라고 볼 수 있다.
그런데 정사각형의 경우 가로 길이와 세로 길이가 언제나 동일해야 한다.
이 상황에서 만일 정사각형 객체에서 &lt;code&gt;setWidth(int)&lt;/code&gt;와 &lt;code&gt;setHeight(int)&lt;/code&gt;가 호출되었을 때
두 길이를 모두 수정되도록 한다면 &lt;strong&gt;동일한 메서드 시그니처에 대해 상위 타입과 다른 별개의 기능을 수행&lt;/strong&gt;하는 것으로 볼 수 있다.&lt;/p&gt;&lt;p&gt;이처럼 LSP를 위배하는 상황이 발생한다면 애초에 해당 클래스들 사이에 상속 관계가 성립할 수 있는지에 대해 의문을 가져야 한다.&lt;/p&gt;&lt;p&gt;한편, LSP를 지키기 위한 방법 중 하나는
상속 관계에 있는 모든 클래스와 메서드를 &lt;code&gt;final&lt;/code&gt; 혹은 &lt;code&gt;abstract&lt;/code&gt;로 설정하는 것이다.
이 경우 모든 상위 타입이 추상클래스가 되므로 애초에 상위 타입의 인스턴스가 생성될 수 없다.
물론 완벽하게 LSP를 예방할 수는 없지만 좋은 습관이라고 볼 수 있다.&lt;/p&gt;&lt;h2&gt;인터페이스 분리 원칙&lt;/h2&gt;&lt;p&gt;인터페이스 분리 원칙(ISP; Interface Segregation Principle)이란
&lt;strong&gt;클라이언트는 자신이 사용하는 메서드에만 의존해야 한다&lt;/strong&gt;는 원칙이다.
사실 설계보다는 프로그래밍 언어의 특징과도 관련이 크다.&lt;/p&gt;&lt;p&gt;우선 하나의 객체가 복수의 메서드를 제공하는 상황을 생각해보자.
만일 해당 객체에 의존하는 클라이언트 코드마다 완전히 별개의 메서드만을 사용하고 있다면,
해당 객체는 복수의 협력(A,B,C)에 참여하고 있는 것으로 볼 수 있다.&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;
이러한 구조에서 특정한 협력(A)과 관련된 요구사항 변경에 따라 해당 객체를 수정하는 경우,
전혀 무관한 협력들(B,C)의 클라이언트 코드까지 그 영향이 미칠 수 있다.&lt;/p&gt;&lt;p&gt;특히 C++의 경우 의존하는 객체가 수정되면, 해당 객체에 의존하는 모든 클라이언트 코드까지 재컴파일되어야 하는 특성을 지닌다.
즉, 위의 상황에서 클라이언트 코드에서의 수정이 전혀 일어나지 않았더라도
의존하는 객체가 내부적으로 수정되었다는 이유만으로 재컴파일 및 재배포되어야 하는 것이다.
이처럼 불필요한 컴파일 및 배포 과정을 예방하기 위해서는 해당 객체가 인터페이스 A,B,C를 다중 구현하도록 하고,
각각의 클라이언트 코드는 구체클래스에 직접 의존하지 않고, 개별 인터페이스에 의존하도록 해야 한다.&lt;/p&gt;&lt;p&gt;물론 자바는 수정된 클래스만 .class 파일로 재컴파일되므로 이러한 문제를 경험하지는 않는다.
그러나 제공하는 퍼블릭 인터페이스를 최대한 분리시켜야 한다는 원칙은
객체에 적절한 책임을 할당하는 작업과 관련되므로 중요하다고 볼 수 있다.&lt;/p&gt;&lt;h2&gt;의존성 역전 원칙&lt;/h2&gt;&lt;p&gt;의존성 역전 원칙(DIP; Dependency Inversion Principle)이란
고수준 모듈은 저수준 모듈의 구현(구체클래스)에 직접적으로 의존해서는 안되며,
&lt;strong&gt;고수준 모듈에서 의존하도록 정의한 추상 타입을 저수준 모듈에서 구현/상속하도록 한다&lt;/strong&gt;는 원칙이다.&lt;/p&gt;&lt;p&gt;간단히 말해서 추상화와 다형성을 활용하여 변경에 유연하게 대처할 수 있는 구조를 만들어야 한다는 의미이다.&lt;/p&gt;&lt;p&gt;만일 자동차와 관련된 비즈니스 로직에서
&lt;code&gt;Car&lt;/code&gt;라는 객체가 현재 &lt;code&gt;SnowTire&lt;/code&gt;라는 객체에 의존하는 경우를 생각해보자.
스노우타이어는 겨울이라는 특정한 맥락과 관련되었기 때문에
언젠가는 &lt;code&gt;NormalTire&lt;/code&gt;, &lt;code&gt;SturdyTire&lt;/code&gt; 등 다른 종류의 타이어에 의존할 일이 생겨날 것이라 예상할 수 있다.
그에 비해 &lt;code&gt;Car&lt;/code&gt;라는 객체가 변경될 가능성은 상대적으로 낮다고 가정해보자.
이러한 상황에서 &lt;code&gt;Car&lt;/code&gt;에서 &lt;code&gt;SnowTire&lt;/code&gt;, &lt;code&gt;NormalTire&lt;/code&gt;, &lt;code&gt;SturdyTire&lt;/code&gt;와 같은 구체클래스에 의존하는 경우
의존하는 타이어의 종류가 변경될 때마다 클라이언트 코드를 매번 수정해줘야 한다.&lt;/p&gt;&lt;p&gt;이러한 코드를 DIP에 부합하는 방식으로 수정하려면
&lt;code&gt;Car&lt;/code&gt;에서 &lt;code&gt;Tire&lt;/code&gt;라는 인터페이스에 의존하도록 정의해놓고,
&lt;code&gt;NormalTire&lt;/code&gt; 등의 구체클래스가 인터페이스를 구현하도록 설정해야 한다.
이처럼 각각의 구체클래스가 &lt;code&gt;Tire&lt;/code&gt;의 구현체가 된다는 것은 &lt;code&gt;Tire&lt;/code&gt;에 의존한다는 것을 의미한다.
그리고 &lt;code&gt;Car&lt;/code&gt;에서 각각의 구체클래스로 향하던 의존성의 방향이
구체클래스에서 추상 타입인 &lt;code&gt;Tire&lt;/code&gt;로 향하기 때문에 &lt;strong&gt;의존의 방향이 역전된다&lt;/strong&gt;고 표현하는 것이다.&lt;/p&gt;&lt;p&gt;또한 패키지 구성에 있어 만일 개별 구체클래스들이 각각
&lt;code&gt;snow_tire&lt;/code&gt;, &lt;code&gt;normal_tire&lt;/code&gt;, &lt;code&gt;sturdy_tire&lt;/code&gt;와 같은 별개의 패키지에 정의되었다고 생각해보자.
이 경우 &lt;code&gt;Car&lt;/code&gt; 클래스가 포함된 &lt;code&gt;car&lt;/code&gt; 패키지 내부에 &lt;code&gt;Tire&lt;/code&gt;라는 인터페이스를 정의하는 것이 적절할 것이다.
이러한 구조에서 생각해보면 상위 모듈(&lt;code&gt;car&lt;/code&gt; 패키지)에서 하위 모듈(&lt;code&gt;normal_tire&lt;/code&gt; 등)로 향하던 의존성의 방향이
DIP를 통해 하위 모듈에서 상위 모듈(&lt;code&gt;car&lt;/code&gt; 패키지의 &lt;code&gt;Tire&lt;/code&gt;)을 향하도록 역전된다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;유의할 점은 런타임에서의 의존을 역전시키는 것이 아니라
&lt;strong&gt;컴파일 타임, 즉 소스 코드에서의 의존을 역전시킨다&lt;/strong&gt;는 점이다.
런타임에는 여전히 각각의 구체클래스로부터 생성된 개별 객체들을 &lt;code&gt;Car&lt;/code&gt;에서 의존한다.&lt;/p&gt;&lt;p&gt;정리하자면 의존 역전 원칙에는 &lt;strong&gt;자신보다 변하기 쉬운 것에 의존하지 마라&lt;/strong&gt;는 뜻이 담겨 있다.
변하기 쉬운 구현에 직접적으로 의존하지 말고,
의존하는 대상을 한 단계 추상화시킴으로써 구현이 변했을 때 그 변경의 여파를 최소화하자는 것이다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;우아한테크코스 레벨 인터뷰에서 일부러 SOLID에 대해 질문 받고 싶어서 관련 내용을 공유했었는데,
생각보다 관련 질문을 많이 못 받아서 아쉬웠다.
아직 오브젝트 스터디가 끝나지 않았는데 완독할 때 쯤에
모든 개념을 다시 한번 정리해보는 것도 좋을 듯 하다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;오브젝트 : &lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9791158391409&quot;&gt;책 링크&lt;/a&gt;&lt;/li&gt;&lt;li&gt;개발자가 반드시 정복해야 할 객체 지향과 디자인 패턴 : &lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9788969090010&quot;&gt;책 링크&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;물론 &lt;code&gt;instanceOf&lt;/code&gt; 등의 방식으로 클라이언트 코드에 문제가 되는 타입이 들어왔는지를 체크하고
그에 따라 예외를 발생시키거나 디폴트 값을 반환하는 방식으로 프로그램의 이상 동작을 막을 수도 있다.
그러나 이처럼 처리해야 한다면 이는 바로 위에서 언급한 &lt;strong&gt;추상화를 제대로 활용하지 않아 OCP를 위배하는 상황&lt;/strong&gt;으로 볼 수 있다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;사실 이 상황에서 이미 SRP를 위배한 것으로 볼 수 있다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[보안] 비밀번호 암호화: 해쉬와 솔트]]></title><description><![CDATA[DB에 비밀번호를 변형시킨 값을 저장해놓으면 DB 정보가 외부에 유출되더라도 이를 쉽게 악용하기 힘들어진다. 솔트와 해쉬 함수를 활용하여 비밀번호의 해쉬 값을 생성하고 이를 DB에 저장하는 기법을 생각해볼 수 있다.]]></description><link>https://bugoverdose.github.io/development/hashing-password-with-salt/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/hashing-password-with-salt/</guid><pubDate>Mon, 25 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;우아한테크코스 미션 수행 도중 해쉬와 솔트 개념을 잘못 활용한 것 같아 다시 공부해볼 필요성을 느꼈다.
이번 기회에 관련 개념 및 구현방법에 대해 간략히 정리해보고자 한다.&lt;/p&gt;&lt;h2&gt;개념 정리&lt;/h2&gt;&lt;p&gt;기초적인 용어들에 대해 우선 정리하고 시작하고자 한다.
너무 자세히 들어가지는 않고 딱 현재 목적에 필요한 만큼만
각 개념들을 조작적으로 정의하여 사용하고자 한다.
해쉬라는 개념 자체에 대해 알고 싶다면 별도로 공부하는 것을 권장한다.&lt;/p&gt;&lt;h3&gt;해쉬 함수&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;해쉬 함수&lt;/strong&gt;란 임의의 길이를 지닌 입력값에 대해 그에 대응되는 고정된 길이의 값을 출력해주는 함수를 뜻한다.
이때 해쉬함수에 입력되는 값을 키(key)라고 하며, 그 출력값을 해쉬(hash)라고 한다.
함수이기 때문에 언제나 동일한 입력값에 대해 동일한 출력값이 나온다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:424px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/034452d32bf575d1e02c552845488da2/1cfa9/hash-function.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:83.43558282208589%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAADUElEQVQ4y42Uy28bVRSHs2JZdq1gY1VFYoOqChV1g4qAVSkbVhUs+CPYsGCDxIod4iWKgmq1wSFxm9RSosa1HSc4id9OYtdKJjNje/yIH/FkbMd24szjQ35SoBI90lnc8/h0f/fce6cALMv6j4/jpmkOfGzP5/vxcc04PjUu+reNC/sWi8VwOp04HA5qtdoE9iKb6qNMy6JQLFI7OuJY09ANA2vUJEkSckZme2eHwMYGkizRPe0OmrPZLIqiIBwIFItFNE1jitHuvCsrzNjtLLtcnHeHDZZpEg6GWPOu8qd/jVWPj8ePFqiVK4P8+vr6YNeepx5cj10kEgmmzi2LfrsB6EAPOAU6IwkVOoT0PPFeYeAxvUjyrIRl/n1MKXmX1llzKPkL4JVMhtf39rioKFwSBF5LJrnQ6+G24ODwGdN5HzNqmAdqGHt9i6VGcgJrd7ss+73IBWUIvAvcLhb5rFDgTr3OnUKBT/N5PtF14oBYF3FIHlwZPwvlIPZSgLncFs1Wm3AiwkZE5vtfjwnGR0PhBRN+3lLnFWYaUX7PrWGPLnAvscgTZQur2aKj5FBD23g+/wplzj0Efgm8qqpcEUVsmQw2Weby3h6XTAO3CanqPj8KK9hza8w2EjgL6/jSPmh3OBMEOqteorc+RJ3+ZQj8Frimaby/v8/NfJ6buRzviSI3DIOABbvVfe5VN3nYhx3HmT9ws9J4NlHQw8C7tURJzf+P5FE8rVdxaBEenuzySPYxm1tluQ80LFpNjUq1yZxrlz1RGwK/BmzdLm+LIlfLZa4qCtcOD3kT8BkW24dpfs75uC885UF0kbuylzk5QFNrEk+ECYdFfvohQyjYHgK/Ad5ot7mRSnFdUbguCLwjirwFrFmQViWmS+vMJ5dxHkWY1WK4W+mJkDP9jEXvEtlK/uWmnNSr/JH1sljaZL6RwFEP86Qv2Rq+957eI1uWaXVHF/s70+TdSoWPSyVulct8VC5zW1H44LRLGJBrAg7RjbOxjVONMatGJkOZ/DqGOVkPrs0FSeJKLIYtmcSWzXI5GuVitYoHkEopfqttDkAONcz9evAfL6Vn9vDH/ORrLylZ0TUCJyKhkwzBdobNE4mdTmGSPzd10pk0aksdAP8CI/O/z0Hp4DsAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;해쉬함수&quot; title=&quot;해쉬함수&quot; src=&quot;/static/034452d32bf575d1e02c552845488da2/1cfa9/hash-function.png&quot; srcSet=&quot;/static/034452d32bf575d1e02c552845488da2/222b7/hash-function.png 163w,/static/034452d32bf575d1e02c552845488da2/ff46a/hash-function.png 325w,/static/034452d32bf575d1e02c552845488da2/1cfa9/hash-function.png 424w&quot; sizes=&quot;(max-width: 424px) 100vw, 424px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;한 가지 주의할 점은 복수의 입력값들이 동일한 출력값을 공유하는 경우가 가능하다는 점이다.
위의 예시를 보면 &lt;code&gt;John Smith&lt;/code&gt;와 &lt;code&gt;Sandra Dee&lt;/code&gt;라는 키들 사이에 &lt;strong&gt;충돌&lt;/strong&gt;이 발생한 것을 볼 수 있다.&lt;/p&gt;&lt;h3&gt;해쉬 테이블&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;해쉬 테이블&lt;/strong&gt; 혹은 &lt;strong&gt;해쉬 맵&lt;/strong&gt;이란 해쉬 함수를 활용하여 키-값 쌍으로 데이터를 관리하는 자료구조를 뜻한다.
해쉬 함수를 거치면서 각각의 키(key)는 &lt;strong&gt;해쉬(인텍스, 해쉬 코드 등)&lt;/strong&gt; 값을 생성하고,
이렇게 생성된 해쉬는 특정한 &lt;strong&gt;버켓(buckets, slots 등)&lt;/strong&gt;에 연결된다.
그리고 이러한 버켓들에 관리될 데이터가 담기게 된다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:612px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/0c6fc57e01348b197e0c7a76d6c61eb5/8c76f/hash-table.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:71.16564417177914%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAADGElEQVQ4y22T3W/bZBTGLXHPNRLign9klwMhgRAXu+Pf2MUkphFpmrRJAwkmBhOgfWQtXfnooMlYSdQoTZs0TlPapYvrfLh27dhxnNSJ4/TD9g/F3SpAPdKjc/Q+73nO+3GOEEUR/7cwDGMvyzKVSoVarXbGTfefl/OaE6bB4eEhiqJgWRa+78dkr9ejWq2SzWbJ5/N0u90zsSmmvG3bdDodDMPAdd04LxYceR6LqRSZTAbTsmKiLkmsFFao7dQoFAr8vbUVF35tZbFM+lmaTDbDwtMFNqobrwTPO34EPidk/V2WvV0yvsT2sRFTitVkUxLRLA3d0TEcA8u1UEyFrt1FCIBj4OhfmJZwTjyS/RJzA5FHgxJpaxNL1ymsa/yR2ebX9i/MNGaYlWd5sPWA5G6Slt1C+DQMeXNvj3c0jbd1nbd2Jd71xjyfuDxRc8yYRe41lljURPZaDZ7+1ufHpMyXe19wZfMKCSnB5bXLXJOvUR/UEVJRxFeuy3e+z7e+zzeuyw9ByMujEbOdAvfqf/L19u8s7ld4+WKLVMomOS9zp32HRPVzbrdvkxAT3KjfQOpLCPUoYhVYjyJKQUAxiqgAejjhoZbjkZZnblhh2a3Hb7jdbPDX2gpltYxoioiGSKVToagWUU0V4b0wRFBVhHodQZIQdnZ4w5+wMHL4Scky71Z57JTIDaVY8GA8wO5bWLaF2TXRDI1Ot0PH6uB5HsK064bT1nmFaTxdc0Kf+eEGPw82mOmvnwm64yG9QQ/nwIm9burYfTuGP/EREkHARdPkE8PgY8fhI03jkjemMDlgVs0x54g87hXPBJumwnI5z3pjHXFPRFROsSavoRoqwmdBwIX9fT7Qdd7vdrmoKHw48lg9GvFkP899Jcf3rQwp7fRTnqVdkvMN7mp3uV67zi35FldXr3KzeRP5QD6dlPNsFIx5OCgxOyhzv7/G88ELgskhm3WNdK7EUnuJVDNFupUm1Uix2FykbbYRTqKI4/8gZNrsXnBIyWshjhWKXhNpYsaF7KFJQ5Pi62mmhtpR46lR9hX6gz7/AOy14vWT9+UaAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;해쉬함수&quot; title=&quot;해쉬함수&quot; src=&quot;/static/0c6fc57e01348b197e0c7a76d6c61eb5/8c76f/hash-table.png&quot; srcSet=&quot;/static/0c6fc57e01348b197e0c7a76d6c61eb5/222b7/hash-table.png 163w,/static/0c6fc57e01348b197e0c7a76d6c61eb5/ff46a/hash-table.png 325w,/static/0c6fc57e01348b197e0c7a76d6c61eb5/8c76f/hash-table.png 612w&quot; sizes=&quot;(max-width: 612px) 100vw, 612px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;예를 들어, 자바의 &lt;code&gt;HashMap&amp;lt;K,V&amp;gt;&lt;/code&gt;의 경우 &lt;code&gt;K&lt;/code&gt;에 들어오는 객체에 대해
&lt;code&gt;hashCode()&lt;/code&gt; 메서드를 호출하여 해쉬 값을 생성하고 그에 대응되는 &lt;code&gt;V&lt;/code&gt; 데이터를 맵해준다.
&lt;code&gt;equals&lt;/code&gt; 메서드를 재정의할 때 &lt;code&gt;hashCode&lt;/code&gt; 메서드도 함께 재정의하는 것이 권장되는 이유도 이와 관련됐다.
동등한 필드 값을 지닌 객체들이 동일한 해쉬 값을 생성하도록 해줘야
서로 동등한 객체들이 해쉬맵의 동일한 &lt;code&gt;V&lt;/code&gt; 데이터에 연결된다.&lt;/p&gt;&lt;h3&gt;해슁&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;해슁&lt;/strong&gt;이란 특정 입력값에 대해 해쉬함수를 거치면서 특정한 데이터를 생성하는 작업이라고 볼 수 있다.
해쉬 알고리즘과 맥락에 따라 그 출력값은 &lt;code&gt;int&lt;/code&gt;, &lt;code&gt;byte[]&lt;/code&gt; 등 다양한 타입을 지닐 수 있다.&lt;/p&gt;&lt;h2&gt;해쉬를 통한 비밀번호 암호화&lt;/h2&gt;&lt;p&gt;소셜로그인이 아니라 아이디와 비밀번호를 활용한 로컬로그인을 구현하는 경우,
당연히 DB에 각 계정의 정보를 저장하고 관리해줘야 한다.
이때 만일 DB에 아이디와 비밀번호를 그대로 저장하게 되면
DB 조회가 가능한 모든 사람들은 모든 사용자들의 계정에 로그인할 수 있게 된다.&lt;/p&gt;&lt;p&gt;물론 DB에 대한 제3자의 접근은 철저히 예방되어야 하며,
DB 정보가 외부로 유출되지만 않으면 문제될 일이 없다고 생각할 수 있다.
그러나 DB 정보가 &lt;em&gt;외부에 유출되더라도 이를 악용하기 힘들도록&lt;/em&gt;
&lt;strong&gt;비밀번호를 변형시킨 값을 저장&lt;/strong&gt;해놓는 것이 사용자들의 피해를 최소화하기 위한 이상적인 방법일 것이다.&lt;/p&gt;&lt;p&gt;그리고 이러한 방법 중 하나가 바로 해쉬 함수를 활용하여 비밀번호의 해쉬 값을 DB에 저장하는 것이다.
해쉬 함수는 일방향성을 띠기 때문에
DB에 해쉬 값을 저장하게 되면 &lt;em&gt;일반적인 방법으로는&lt;/em&gt; &lt;strong&gt;해쉬 값을 통해 이전 값을 복원해내는 것은 불가능하다&lt;/strong&gt;.
이는 특정 사용자 계정의 비밀번호에 대한 해쉬값이 유출되더라도 이 정보만을 통해서는
본래 비밀번호를 알아내는 것이 불가능에 가깝다는 의미다.&lt;/p&gt;&lt;h2&gt;레인보우 테이블&lt;/h2&gt;&lt;p&gt;그런데 문제는 &lt;strong&gt;해쉬 값을 통해 본래 값을 추측할 수 있는 방법은 존재한다&lt;/strong&gt;는 점이다.
&lt;strong&gt;레인보우 테이블(rainbow table)&lt;/strong&gt;은 특정 해쉬 알고리즘에 대해
모든 입력값에 대한 모든 출력값들이 어떻게 맵핑되는지를 정리해놓은 테이블을 뜻한다.
DB에 저장된 해쉬 값에 대해 이러한 테이블들을 활용한다면
&lt;strong&gt;언젠가는 해당 서버에서 활용된 해쉬 알고리즘을 유추&lt;/strong&gt;해내는 것이 논리적으로는 가능한 일이다.
그리고 이 과정에 성공한다면 레인보우 테이블을 활용하여
&lt;strong&gt;현재 DB에 저장된 각 해쉬 값들의 본래 키 값을 유추&lt;/strong&gt;할 수 있게 된다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/525533a579261b92194cf4230499990b/9937c/rainbow-table.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:54.601226993865026%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAChElEQVQoz2WTW0hUURSGdwZaiWlFNaGO5aXoavkgJAVCSvQSCV1eIoQKCiKKIiEMRaILYTUZpY2lKWX0EBIihGReyESLkB5SLBpNhZyZc/RcbTwzX5zJUakfNgsWa3+sH/4lQqEQtuwamraIyNJUzI73aLcfMHmhhIlzxUyeL0a9WYHZ8g5rQpqdtf9FOCICIxgMN6Z9PtSr5fgzc5EcKcjrHEhZyXjztiJlJSGnOZAcTqSNOShFZQSGh2aooTBHhDebgemNTfg37ERaswqlIBn9chqaKxW9NgO1YRva0wz0ilS0K+moR1KQU1bjd25Hf1yPvZ/9RMj6a1Mtr8C3yIG6by3GrXSMZ8nQmgCfo+FrLAw6oD8W+qKhfSlGQyLGnTTUg+vwL16JcrF4zvKEaeCrf4l+Yj2mO5FQywr4HoXnWxyVn5yc6dzGyfbdnGrPxNW7lv7BBPgRBW3xmDVJ6KedSPerUH9PITRNY3TkJ7IVQu5/Dd3L0IYXcKljC3Ev8hDVxxBVRURVX0dUXUa4C4l5vpcTrZl4h2KgdyH61zrGpwKYho6wLAvDMMJQSQliKq/Ib96NcB9FuCoR19uIL+0ho7SLhJIexLVOxN1ahPs4m17lIPkf4ZVMNEWZsxwMBlFVFY/nB4oc4NlANzE3Gllytpvs/HoO7HBRuOsBBTtc5OTWsPxMF6KsCdeXNiSfgaaqs9ETkfxEoKOjI1iaRnPfOIey71G65yFv3B/oeztAa10vN/Y/4fDmW9S3edAlGUPX5nJsA2dzOCNZlhkdG2NKlRn86GFC0pkvwwww0DOEJntRNJX5hxG2/G/Dlt/v59e4d+5qpoNhB3aNaNoK/gezN/wDAAjEDHZbGfAAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;레인보우 테이블&quot; title=&quot;레인보우 테이블&quot; src=&quot;/static/525533a579261b92194cf4230499990b/a6d36/rainbow-table.png&quot; srcSet=&quot;/static/525533a579261b92194cf4230499990b/222b7/rainbow-table.png 163w,/static/525533a579261b92194cf4230499990b/ff46a/rainbow-table.png 325w,/static/525533a579261b92194cf4230499990b/a6d36/rainbow-table.png 650w,/static/525533a579261b92194cf4230499990b/e548f/rainbow-table.png 975w,/static/525533a579261b92194cf4230499990b/9937c/rainbow-table.png 1156w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;예를 들어 위의 레인보우 테이블을 활용한다면
우리는 &lt;code&gt;853c3622&lt;/code&gt;라는 값을 직접적으로 변형시킴으로써 &lt;code&gt;bris&lt;/code&gt;에 도달할 수는 없지만
적어도 &lt;code&gt;bris&lt;/code&gt;라는 입력값으로부터 &lt;code&gt;853c3622&lt;/code&gt;라는 해쉬값이 생성되었음은 알 수 있다.&lt;/p&gt;&lt;p&gt;그런데 이러한 공격을 막을 수 있는 방법은 생각보다 간단하다.
바로 개별 키에 곧바로 해쉬 함수를 실행하지 않고,
개별 키를 &lt;strong&gt;비일관적인 방식으로 1차적으로 변형한 후&lt;/strong&gt;에
그 변형된 값에 대한 해쉬를 생성하면 된다.
그리고 이러한 기법이 바로 &lt;strong&gt;솔트(salt)&lt;/strong&gt;를 활용하는 것이다.&lt;/p&gt;&lt;h2&gt;솔트를 통한 원본 데이터 사전 변형&lt;/h2&gt;&lt;p&gt;솔트(salt)란 해쉬 함수에 넣기 전에 키를 변형시키는 데 활용할 &lt;em&gt;임의의 문자열 데이터&lt;/em&gt;를 의미한다.
각 사용자별로 솔트를 배정하고, 솔트를 활용하여 변형된 비밀번호 값을
해쉬 함수에 넣으면 어떠한 일이 일어날까?&lt;/p&gt;&lt;p&gt;아래는 솔트와 해쉬 함수의 적용에 대해 최대한 간략화하여 설명한 공식이다.
여러 사용자가 동일한 비밀번호를 사용하더라도
할당된 솔트 값에 따라 최종적으로 출력되는 해쉬 값은 서로 달라짐을 알 수 있다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;password&lt;/code&gt; + &lt;code&gt;SALT1&lt;/code&gt; = &lt;code&gt;passwordSALT1&lt;/code&gt; =&amp;gt; &lt;code&gt;A7981C...&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;code&gt;password&lt;/code&gt; + &lt;code&gt;SALT2&lt;/code&gt; = &lt;code&gt;passwordSALT2&lt;/code&gt; =&amp;gt; &lt;code&gt;F1389E...&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;그렇다면 최종적으로 생성되는 해쉬 값만을 DB에 저장한다면 레인보우 테이블을 활용하더라도
원본이 된 비밀번호가 무엇인지에 대해 알 방법이 완전히 없어진다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;그런데 이 경우 치명적인 문제가 하나 있다.
외부의 해커만이 아니라 서버 애플리케이션 내에서도
원본 비밀번호(&lt;code&gt;password&lt;/code&gt;)만으로는 해당 해쉬 값을 재생성할 방법이 없다는 점이다.
바로 이 점 때문에 개별 사용자에게 할당된 솔트 값이 &lt;code&gt;SALT1&lt;/code&gt;인지, &lt;code&gt;SALT2&lt;/code&gt;인지 DB에서 별도로 관리해줘야 한다.&lt;/p&gt;&lt;h2&gt;해쉬와 솔트를 통한 비밀번호 인증&lt;/h2&gt;&lt;p&gt;이제 DB에 저장된 암호화된 비밀번호를 어떻게 활용할 수 있는지에 대해 가볍게 설명하고자 한다.
클라이언트에서 아이디와 비밀번호를 입력하면
서버에서는 해당 아이디에 부합하는 사용자 계정 정보가 담긴 로우(row)를 DB에서 찾고
올바른 비밀번호가 입력되었는지를 대조해야 한다.&lt;/p&gt;&lt;p&gt;이때 DB에 저장된 해쉬 값을 원본 값으로 복원시키는 작업은 기본적으로 불가능하다.
이 때문에 서버 애플리케이션에서는
&lt;strong&gt;새로 입력된 비밀번호 값을 활용하여 해쉬 값을 재생성&lt;/strong&gt;하고,
&lt;strong&gt;그 값이 DB에 저장된 해쉬 값과 동일한지를 체크&lt;/strong&gt;해줘야 한다.&lt;/p&gt;&lt;p&gt;이를 위해서는 입력된 아이디를 통해 해당 사용자에게 할당된 &lt;strong&gt;솔트&lt;/strong&gt; 값과 &lt;strong&gt;해쉬된 비밀번호&lt;/strong&gt;를 우선 받아오고,
조회된 솔트와 비밀번호 입력값에 대해 해쉬 함수를 실행한 결과가 DB에 해쉬된 비밀번호와 일치하는지를 확인해주면 된다.&lt;/p&gt;&lt;h2&gt;해쉬 알고리즘의 선택 기준&lt;/h2&gt;&lt;p&gt;해쉬 알고리즘의 종류는 다양하다.
그 중 비밀번호를 암호화하는 데 사용되기 부적절한 알고리즘도 존재하기 때문에
알고리즘을 선택하기 위한 필수적인 기준을 정리해보았다.
실제로 &lt;strong&gt;어떠한 알고리즘이 권장&lt;/strong&gt;되며 &lt;strong&gt;자바에서 어떻게 이를 구현할 수 있는지&lt;/strong&gt; 알고 싶다면
&lt;a href=&quot;https://www.baeldung.com/java-password-hashing&quot;&gt;원본 문서&lt;/a&gt;를 참고하는 것을 권장한다.&lt;/p&gt;&lt;p&gt;우선 결정론적(deterministic)이어야 한다. 이렇게만 말하면 무슨 의미인지 전혀 이해가 안될 것 같다.
간단히 말하자면 동일한 입력값에 대해 언제나 동일한 출력값을 생성해야 한다는 뜻이다.&lt;/p&gt;&lt;p&gt;또한 비가역적, 즉 일방향적이어야 한다. 만일 해쉬 함수의 출력값으로부터 입력값을 재생성할 수 있다면
여태까지 이야기한 모든 논의가 무의미해진다.&lt;/p&gt;&lt;p&gt;엔트로피(entropy)가 높아야 한다. 입력값이 아주 조금만 변하더라도 그 결과값은 크게 변해야 한다.
&lt;code&gt;password1&lt;/code&gt;와 &lt;code&gt;password2&lt;/code&gt;에 대한 출력값이 &lt;code&gt;ABC&lt;/code&gt;와 &lt;code&gt;ABD&lt;/code&gt;처럼 거의 비슷해서는 안된다는 의미이다.
&lt;code&gt;kgh2skfe&lt;/code&gt;와 &lt;code&gt;1ad4g9Ah&lt;/code&gt;처럼 전혀 연관짓기 힘든 별개의 값이 생성되는 것이 이상적이다.&lt;/p&gt;&lt;p&gt;충돌(collision)이 발생해서는 안된다. 위에서 해쉬 함수에 대해 설명하면서 이미 언급된 개념이다.
기본적으로 &lt;em&gt;함수&lt;/em&gt;라는 것은 복수의 입력값이 같은 출력값을 공유할 수 있다.
그러나 해쉬 함수의 경우 개별 입력값에 대해 완전히 별개인 출력값이 존재하는 것이 이상적이다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;작년에 졸업논문으로 &lt;em&gt;소셜로그인과 로컬로그인에 대한 사용자의 인식을 비교&lt;/em&gt;하는 실험을 진행하였다.
위의 기법은 그 당시 로컬 로그인 기능을 구현하기 위해 활용했었다.
이 방식이 올바른지는 잘 모르겠지만 한번쯤은 실험삼아 구현해볼 가치가 있다고 생각한다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;편의를 위해 &lt;code&gt;SALT1&lt;/code&gt;, &lt;code&gt;SALT2&lt;/code&gt;라는 문자열을 솔트 값으로 사용했으나,
실제로는 개별 솔트 값은 완전히 임의로 생성되는 문자열이어야 한다.
또한 솔트를 활용하여 원본 문자열을 변형하는 방법 역시 다양할 수 있다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[Java] 스트림: 지연 연산과 최적화]]></title><description><![CDATA[Stream API의 주요 특성인 지연 연산의 의미, 그리고 이를 기반으로 일어나는 루프퓨전과 쇼트서킷에 대해 알아보자. Stream API가 스트림이라고 불릴 수 있는 원인이 바로 여기에 있는 것으로 보인다.]]></description><link>https://bugoverdose.github.io/development/stream-lazy-evaluation/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/stream-lazy-evaluation/</guid><pubDate>Wed, 13 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;스트림의 대표적인 특징 중 하나는 바로 &lt;strong&gt;지연 연산(Lazy Evaluation)&lt;/strong&gt;&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;을
수행한다는 데에 있다. 이에 대해 가볍게 알아보자. 해당 게시글은
&lt;strong&gt;&lt;div to=&quot;/development/stream-and-java&quot;&gt;스트림 개념&lt;/div&gt;&lt;/strong&gt;과
&lt;strong&gt;&lt;div to=&quot;/development/stream-operations&quot;&gt;스트림 연산&lt;/div&gt;&lt;/strong&gt;을 다룬
지난 게시글들로부터 이어진다.&lt;/p&gt;&lt;h2&gt;Lazy vs Eager&lt;/h2&gt;&lt;p&gt;지연 연산이란 간단히 말해 &lt;strong&gt;결과값이 필요할 때까지 계산을 늦추는 기법&lt;/strong&gt;이다.
즉, 눈앞에 코드가 주어졌을 때 곧바로 해당 코드를 실행하는 것이 아니라
실행 결과가 필요해지는 시점에 실행하도록 하는 것이다.
다만, 이러한 방식으로 코드가 동작하기 위해 내부적으로 준비해주는 작업이 필요하므로
무조건 효율적인 방식이라고는 보기 어렵다.&lt;/p&gt;&lt;p&gt;이에 반해 어떠한 작업이 &lt;strong&gt;즉시(eager)&lt;/strong&gt; 수행된다면 말 그대로
실행할 코드가 보이는 순간 곧바로 실행된다는 의미이다.
사실 특정 작업의 실행 결과가 향후 필요하다는 점이 확실하다면
미리 실행해놓는 것이 기본적으로 성능 측면에서 우월하다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;실제 Stream API의 동작 방식을 분석해보며 이에 대해 조금만 더 생각해보자.&lt;/p&gt;&lt;h2&gt;스트림이 게으르지 않았다면&lt;/h2&gt;&lt;p&gt;우선 &lt;code&gt;Data&lt;/code&gt;라는 클래스가 있다고 가정하자.
&lt;code&gt;Data&lt;/code&gt; 클래스로부터 생성되는 인스턴스는 특정한 &lt;code&gt;value&lt;/code&gt;를 필드 값으로 지니고 있으며
&lt;code&gt;runOperationA&lt;/code&gt;, &lt;code&gt;runOperationB&lt;/code&gt;, &lt;code&gt;runOperationC&lt;/code&gt; 메서드를 호출했을 때
메서드를 호출한 인스턴스와 호출된 메서드에 대한 정보를 콘솔에 출력한다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;runOperationA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;데이터 %d의 작업A%n&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;runOperationB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;데이터 %d의 작업B%n&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;runOperationC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;데이터 %d의 작업C%n&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Data{&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token char&quot;&gt;&amp;#x27;}&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 이러한 &lt;code&gt;Data&lt;/code&gt; 인스턴스로 구성된 스트림을 형성하고
아래와 같이 순차적으로 각 메서드를 호출한다고 생각해보자.
&lt;code&gt;peek&lt;/code&gt;은 각 스트림 요소를 활용하여 특정 작업을 수행하고
사용했던 스트림 요소들로 구성된 스트림을 그대로 반환하는 중간연산이다.
그리고 &lt;code&gt;forEach&lt;/code&gt;은 각 스트림 요소를 소비하여 특정 작업을 수행하고 스트림을 닫는 최종연산이다.
각 연산의 반환형은 &lt;code&gt;Stream&amp;lt;T&amp;gt;&lt;/code&gt;와 &lt;code&gt;void&lt;/code&gt;다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;우선 &lt;strong&gt;개별 스트림 연산이 즉각적으로(eager) 실행&lt;/strong&gt;된다고 가정하자.
그렇다면 첫 번째 &lt;code&gt;peek&lt;/code&gt; 연산은 현재 스트림의 3가지 &lt;code&gt;Data&lt;/code&gt; 인스턴스에 대해
각각 &lt;code&gt;runOperationA&lt;/code&gt; 메서드를 호출하고, 기존의 &lt;code&gt;Stream&amp;lt;Data&amp;gt;&lt;/code&gt; 데이터를 그대로 반환할 것이다.
그러면 두 번째 &lt;code&gt;peek&lt;/code&gt; 연산은 각 스트림 요소에 대해 &lt;code&gt;runOperationB&lt;/code&gt; 메서드를 수행한 후
다시 기존의 스트림을 반환할 것이며,
마지막으로 &lt;code&gt;forEach&lt;/code&gt;에서는 &lt;code&gt;runOperationC&lt;/code&gt;를 개별 스트림 요소에 대해 실행하면서
스트림을 소비할 것이다.
이러한 방식으로 각 스트림 연산이 수행된다면 콘솔에는 아래와 같이 출력될 것이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;데이터 1의 작업A
데이터 2의 작업A
데이터 3의 작업A
데이터 1의 작업B
데이터 2의 작업B
데이터 3의 작업B
데이터 1의 작업C
데이터 2의 작업C
데이터 3의 작업C&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 위의 코드를 실제로 실행해보면 놀랍게도 아래와 같이 콘솔에 출력된다.
실로 귀신이 곡할 노릇이다. 어찌하여 이렇게 된 것인지 알아보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;데이터 1의 작업A
데이터 1의 작업B
데이터 1의 작업C
데이터 2의 작업A
데이터 2의 작업B
데이터 2의 작업C
데이터 3의 작업A
데이터 3의 작업B
데이터 3의 작업C&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;지연 연산과 최적화&lt;/h2&gt;&lt;p&gt;스트림 파이프라인을 실행하게 되면 JVM은 곧바로 스트림 연산을 실행시키지 않는다.
그 대신 최소한의 필수적인 작업만을 수행하고자, 즉 &lt;strong&gt;지연 연산을 위한 준비작업&lt;/strong&gt;을 수행한다.
이 준비 작업이란 우선 &lt;strong&gt;스트림 파이프라인이 어떠한 중간연산과 최종연산으로 구성되어있는지에 대한 검사&lt;/strong&gt;로 시작된다.
이러한 검사 결과를 바탕으로 JVM은 사전에 어떠한 방식으로 최적화를 진행할지 미리 계획하고,
그 계획에 따라 스트림의 개별 요소에 대한 스트림 연산을 수행하게 된다.&lt;/p&gt;&lt;p&gt;그리고 스트림에서 제공하는 최적화 전략으로는 루프퓨전과 쇼트서킷이 대표적이다.&lt;/p&gt;&lt;h3&gt;루프퓨전&lt;/h3&gt;&lt;p&gt;루프퓨전(loop fusion)이란 파이프라인에서
&lt;strong&gt;연속적으로 체이닝된 복수의 스트림 연산을 하나의 연산 과정으로 병합&lt;/strong&gt;시키는 것을 뜻한다.&lt;/p&gt;&lt;p&gt;위의 코드의 실행결과를 통해 이를 확인해보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 데이터 1의 작업A&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 1의 작업B&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 1의 작업C&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 2의 작업A&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 2의 작업B&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 2의 작업C&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 3의 작업A&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 3의 작업B&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 3의 작업C&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;콘솔에 출력된 결과를 보면 우선 &lt;em&gt;데이터 1&lt;/em&gt;에 대해
&lt;code&gt;runOperationA&lt;/code&gt;, &lt;code&gt;runOperationB&lt;/code&gt;, &lt;code&gt;runOperationC&lt;/code&gt; 메서드가 순차적으로 실행되었고,
&lt;em&gt;데이터 2&lt;/em&gt;에 대해서도 3가지 메서드가 호출된 후에
마지막으로 &lt;em&gt;데이터 3&lt;/em&gt;에 대해 동일한 작업이 수행되었음을 알 수 있다.
이는 두 개의 중간연산 &lt;code&gt;peek&lt;/code&gt;과 최종연산 &lt;code&gt;forEach&lt;/code&gt;가
&lt;strong&gt;하나의 과정으로 병합&lt;/strong&gt;되었음을 의미한다.&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;p&gt;혹시 조금이라도 헷갈린다면 그냥 아래와 같이 동작한다고 생각하면 쉬울 것이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; source &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 이처럼 복수의 스트림 연산이 하나로 병합되는 것을 최적화라고 볼 수 있는 이유는
기본적으로 &lt;strong&gt;개별 스트림 요소에 접근하는 횟수가 최소화&lt;/strong&gt;되기 때문이다.
만일 루프병합이 일어나지 않는다면 개별 스트림 연산에서
매번 스트림의 요소를 처음부터 전부 다 순회해야 했을 것이다.
즉, 위의 예시를 생각해보면 3개의 스트림 요소는 원래 각각 3번씩, 총 9번 접근되어야 했다.
그러나 루프병합 과정 덕분에 각각 단 1번씩, 총 3번만 접근되었음을 알 수 있다.&lt;/p&gt;&lt;p&gt;다만, 주의할 점은 &lt;strong&gt;모든 스트림 연산에 대해 이처럼 루프 병합 작업이 적용되는 것은 아니라는 점&lt;/strong&gt;이다.
이에 대해서는 나중에 아래에서 다시 자세히 알아보자.&lt;/p&gt;&lt;h3&gt;쇼트서킷&lt;/h3&gt;&lt;p&gt;쇼트서킷(short circuit)이란 기본적으로
&lt;strong&gt;불필요한 연산을 의도적으로 수행하지 않음으로써 실행 속도를 높이는 기법&lt;/strong&gt;을 의미한다.&lt;div num=&quot;3&quot;&gt;&lt;/div&gt;
그리고 스트림에서의 쇼트서킷은 &lt;code&gt;limit&lt;/code&gt;과 같은 연산을 활용하여
&lt;strong&gt;스트림의 일부 요소들에 대한 연산을 완전히 생략&lt;/strong&gt;하는 것을 의미한다.&lt;/p&gt;&lt;p&gt;위의 코드를 조금만 변형하여 실행해보자.
우리는 &lt;code&gt;filter&lt;/code&gt;를 통해 값이 2 이상인 데이터에 대해
&lt;code&gt;peek&lt;/code&gt;을 통해 작업A, 작업B, 작업C를 호출한 이후,
&lt;code&gt;limit&lt;/code&gt;을 통해 최대 1개의 스트림 요소만 선택하여 &lt;code&gt;collect&lt;/code&gt;를 통해 리스트에 담도록 할 것이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; dataList &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dataList&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 데이터 2의 작업A&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 2의 작업B&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 2의 작업C&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [Data{2}]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;콘솔을 확인해보자.
첫 번째 스트림 요소가 &lt;code&gt;filter&lt;/code&gt;에 의해 &lt;code&gt;peek&lt;/code&gt;에 도달하지 못한 것은 쉽게 이해할 수 있다.
그런데 &lt;code&gt;filter&lt;/code&gt; 조건을 충족하는 나머지 요소들 중
오직 두 번째 스트림 요소에 대해서만 &lt;code&gt;peek&lt;/code&gt;과 &lt;code&gt;collect&lt;/code&gt;이 수행된 것은 어째서일까?
이는 &lt;code&gt;limit(n)&lt;/code&gt; 연산이 자신에게 도달한 요소가 n개가 되었을 때
스트림 내 다른 요소들에 대해 더 이상 순회하지 않고 탈출하도록 만들기 때문이다.&lt;/p&gt;&lt;p&gt;이를 전통적인 반복문을 통해 이해하자면 아래와 같다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; source &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; limitState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// limit 연산 내부에서 관리되는 상태 (현재 요소가 몇 번째인가)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; shouldExit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// filter를 충족하는 데이터에 대해서만 작업&lt;/span&gt;
        data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 데이터 2의 작업A&lt;/span&gt;
        data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 데이터 2의 작업B&lt;/span&gt;
        data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 데이터 2의 작업C&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;limitState &lt;span class=&quot;token operator&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            shouldExit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// limit(1)을 충족했으므로 탈출해야 한다는 정보를 전달&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shouldExit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 탈출 여부 체크&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [Data{1}]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이러한 최적화 전략은 특히 무한스트림을 다루는데 필수적이다.
예를 들어 아래는 값이 100인 &lt;code&gt;Data&lt;/code&gt; 인스턴스 5개의 리스트를 생성하기 위해
무한스트림에서 5개의 요소만을 활용하고 스트림을 닫는 코드이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; dataList &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IntStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;generate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mapToObj&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toUnmodifiableList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dataList&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [Data{100}, Data{100}, Data{100}, Data{100}, Data{100}]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그런데 위의 예시들에서 스트림 내의 모든 요소가 전부 순회하지 않은 것은
파이프라인의 전 과정이 &lt;em&gt;루프퓨전을 통해 하나로 병합&lt;/em&gt;되었기 때문이다.
그렇다면 파이프라인의 연산들이 제대로 병합되지 않았다면 어떻게 될까?&lt;/p&gt;&lt;h3&gt;제약사항&lt;/h3&gt;&lt;p&gt;연산의 종류에 따라 스트림 파이프라인 전체에 대해 루프퓨전이 일어나지 않는 경우도 분명 존재한다.&lt;/p&gt;&lt;p&gt;우선 아래는 루프퓨전이 제대로 발생하는 경우이다.
첫 번째 요소에 대해 &lt;code&gt;peek&lt;/code&gt; 작업을 수행한 이후,
&lt;code&gt;limit(1)&lt;/code&gt;에 도달하자 나머지 스트림 요소들에 대한 순회를 멈추도록 하고,
&lt;code&gt;forEach&lt;/code&gt; 연산 수행 후 그대로 스트림을 닫는 것을 콘솔을 통해 알 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 데이터 100의 작업A&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 100의 작업B&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 100의 작업C&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그런데 위의 파이프라인 중간에 &lt;code&gt;sorted&lt;/code&gt;를 통한 정렬 작업이 추가되면 어떻게 되는지 확인해보자.
이 경우 &lt;strong&gt;스트림 내의 모든 요소들에 대해&lt;/strong&gt; 개별적으로 &lt;code&gt;peek&lt;/code&gt; 작업이 수행된 이후,
&lt;code&gt;sorted&lt;/code&gt;에 의해 정렬된 스트림 내의 첫 번째 요소에 대해 나머지 작업이 수행되는 것이 확인된다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Comparator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;comparing&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;runOperationC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 데이터 100의 작업A&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 100의 작업B&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 1의 작업A&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 1의 작업B&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 10의 작업A&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 10의 작업B&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 데이터 1의 작업C&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이처럼 동작하는 이유는 &lt;code&gt;sorted&lt;/code&gt;를 통한
&lt;strong&gt;정렬 작업을 수행하기 위해서는 스트림을 구성하는 모든 요소가 필요&lt;/strong&gt;하기 때문이다.
위의 예시에서 만일 값이 &amp;#x27;데이터 1&amp;#x27;이 스트림 내에 첫번째로 정렬될 것임을 예상할 수 있었다면
&amp;#x27;데이터 10&amp;#x27;에 대한 &lt;code&gt;peek&lt;/code&gt; 작업은 생략되고 곧바로 &lt;code&gt;limit&lt;/code&gt;와 &lt;code&gt;forEach&lt;/code&gt;가 수행되었을 것이다.
그러나 현재 요소가 스트림 내에서 몇 번째로 정렬되어야 하는지를 어떻게 해당 요소만으로 알 수 있겠는가.&lt;/p&gt;&lt;p&gt;물론 해당 파이프라인에 루프퓨전이 아예 발생하지 않은 것은 아니다.
&lt;code&gt;sorted&lt;/code&gt;에 도달하기 이전의 &lt;code&gt;peek&lt;/code&gt; 연산 두 개는 하나로 병합되었으며,
&lt;code&gt;sorted&lt;/code&gt; 이후의 &lt;code&gt;limit&lt;/code&gt;와 &lt;code&gt;forEach&lt;/code&gt;도 하나로 병합되었음을 출력을 통해 알 수 있다.&lt;/p&gt;&lt;p&gt;한편, 상황에 따라 루프병합이 발생하지 않을 수 있다는 점은 &lt;strong&gt;무한스트림에서 특히 문제가 될 수 있다.&lt;/strong&gt;
예를 들어 생성될 때 임의의 정수값을 필드로 지니는 객체들로 구성된 무한스트림에 대해
&lt;code&gt;limit(5)&lt;/code&gt;로 첫 5개의 데이터를 고르고,
해당 5개의 요소들을 &lt;code&gt;sorted&lt;/code&gt;로 정렬하려는 경우를 생각해보자.
만일 실수로 아래와 같이 limit와 sorted의 순서를 반대로 적용한다면
기본적으로 서버가 다운될 때까지 연산은 종료되지 않을 것이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;generate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RandomInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sorted&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Comparator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;comparingInt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 코드에서 한 가지 유의할 점은 위의 경우 &lt;code&gt;sorted&lt;/code&gt; 작업 자체가 종료되지 않는 것이 아니라,
&lt;code&gt;sorted&lt;/code&gt;에 전달할 스트림을 준비하는 작업이 끝나지 않는다는 것이다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;&lt;div to=&quot;/development/stream-and-java&quot;&gt;지난 게시글&lt;/div&gt;&lt;/strong&gt;에서는
스트림 처리의 핵심은 데이터를 첫 번째부터 하나씩 순차적으로
&lt;em&gt;준비가 완료된 상태&lt;/em&gt;로 만드는 데에 있다고 설명하였다.
Stream API가 지연 연산이라는 특징을 지니는 이유는 바로 이와 같은 맥락이라고 생각된다.
즉, 지연 연산을 기반으로 한 루프퓨전과 쇼트서킷 등의 최적화 덕분에
스트림의 요소들은 하나씩 스트림 파이프라인에 입력되며 개별적으로
모든 작업이 수행되는 방식으로 동작할 수 있는 것이다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;Stream API specs : &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Statelessness&quot;&gt;공식문서 링크&lt;/a&gt;&lt;/li&gt;&lt;li&gt;모던 자바 인 액션 : &lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9791162242025&quot;&gt;책 링크&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;지연 연산, 지연 평가, 게으른 연산, 느긋한 연산 등 다양한 용어로 표현되지만
그 의미는 전부 하나로 통한다고 생각된다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;지연 연산과 루프퓨전을 &lt;em&gt;중간연산&lt;/em&gt;의 특징이라고 설명하는 글들도 많다.
그러나 위의 예시에서 &lt;code&gt;forEach&lt;/code&gt;까지 하나의 연산으로 병합되는 것을 보면
기본적으로 &lt;em&gt;조건을 충족하는&lt;/em&gt; 모든 스트림 연산에 대해 적용될 수 있는 성질이라고 생각된다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;3&quot;&gt;&lt;p&gt;사실 쇼트서킷의 가장 대표적인 예시는 &lt;code&gt;||&lt;/code&gt;, &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt; 연산이다.
&lt;code&gt;A || B&lt;/code&gt;에서 &lt;code&gt;A&lt;/code&gt;의 값이 참이면 전체 결과는 무조건 참이기 때문에
굳이 &lt;code&gt;B&lt;/code&gt;에 대한 확인은 일어나지 않게 된다.
마찬가지로 &lt;code&gt;A &amp;amp;&amp;amp; B&lt;/code&gt;에서 &lt;code&gt;A&lt;/code&gt;의 값이 거짓이면 전체 결과는 무조건 거짓이 되므로
굳이 &lt;code&gt;B&lt;/code&gt;에 대한 확인은 일어나지 않는다.&lt;/p&gt;&lt;p&gt;특히 리액트의 경우 특정 조건의 충족 여부에 따라
컴포넌트를 렌더링하고 싶을 때에도 해당 문법의 이러한 특성을 적극적으로 활용한다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[Java] 스트림 연산의 분류]]></title><description><![CDATA[스트림 파이프라인은 중간연산과 최종연산으로 구성된다. 스트림 연산은 다시 내부적으로 관리되는 상태의 유무와 상태의 크기에 따라서도 구분된다. 이러한 분류는 Stream API의 내부 동작을 이해하는 데 도움이 된다.]]></description><link>https://bugoverdose.github.io/development/stream-operations/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/stream-operations/</guid><pubDate>Mon, 11 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;스트림 파이프라인을 구성하는 연산의 종류와 그 특징에 대해 자세히 알아보자.&lt;/p&gt;&lt;h2&gt;스트림 파이프라인의 기본 구성&lt;/h2&gt;&lt;p&gt;스트림 파이프라인은 기본적으로 소스, 복수의 중간연산, 하나의 최종연산으로 구성된다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9c1a0af6b47a8783190cf09ba308b495/07a9c/intermediate-vs-teminate.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:36.19631901840491%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB0klEQVQoz0WQ32tScRjGD/0B/QFdd9V13XUdQVDQbqOuokZ3kZQQ1MVo0JAayLwZ3RT9cpaKW7nplI7znOamNud0ypljbug5y4WeU/44+v3ElNUDH3gvngee95Fm1V0uziiM+3KcqN8XNJsG5e0kxa0U2XQYXa+zs1OkkI/Tblv/vH+6Xe5FvFzyzvB+aw3JEcxxZiLG+ecR5j9+Jj7nIxtJUsiFUL89JrPqJq0+wTINDqoqq/JDNtcjLHoDqMEQGysKl70ezs5OMKUsId33b3DKuci5Z0t88YWQAyEyUYVcJkgi6iQRc5GMO2k09tHKceToA36kIsQCYRL+BZRlmQuvXZx2P+KpPI/05rvGFXcMx5wKDIb0bJufDYNKpYBu1NHKeWwbWuZvSqU0ptUaeQcmpqXj+PqBsbcePuXXkYZD2APYf4W2Ms5u8i5d3Y/oNenseTAKLznMT1PLTdHSphFdfRipbb4gu3SbknwHqxIEe7SpNBBi2Ms8CKKlJtnLTNI+XEZ0qhylb5BduEoxOsZa6Bo15TqilRwGf5VcZMO32I7fxKq+o3/cWQyQhBAM4b+O737PxDIULD2JeUI9Qa9tjJ7qHGG3dex2nX6vNcoJwV8r4d2gvbrArgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;중간연산과 최종연산&quot; title=&quot;중간연산과 최종연산&quot; src=&quot;/static/9c1a0af6b47a8783190cf09ba308b495/a6d36/intermediate-vs-teminate.png&quot; srcSet=&quot;/static/9c1a0af6b47a8783190cf09ba308b495/222b7/intermediate-vs-teminate.png 163w,/static/9c1a0af6b47a8783190cf09ba308b495/ff46a/intermediate-vs-teminate.png 325w,/static/9c1a0af6b47a8783190cf09ba308b495/a6d36/intermediate-vs-teminate.png 650w,/static/9c1a0af6b47a8783190cf09ba308b495/e548f/intermediate-vs-teminate.png 975w,/static/9c1a0af6b47a8783190cf09ba308b495/3c492/intermediate-vs-teminate.png 1300w,/static/9c1a0af6b47a8783190cf09ba308b495/07a9c/intermediate-vs-teminate.png 1440w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;소스(source)란 스트림을 구성하기 위해 사용되는 배열, 컬렉션, I/O 채널 등을 의미한다.
&lt;code&gt;collection.stream()&lt;/code&gt;, &lt;code&gt;Arrays.stream(array)&lt;/code&gt; 등의 방식으로
소스로부터 스트림을 생성하게 되면 메서드 체이닝 방식으로 중간연산과 최종연산을
연결하여 스트림 파이프라인을 생성하고 소비할 수 있게 된다.&lt;/p&gt;&lt;p&gt;이해를 돕기 위해 아래의 가볍게 확인해보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 소스&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; dataSource &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Arrays&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;asList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RED&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RED&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;GREEN&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;YELLOW&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; redApplePriceList &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dataSource&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 스트림 생성&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isRed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 중간연산&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPrice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 중간연산&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 최종연산&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;redApplePriceList&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [1000, 1500]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 예제에서는 사과들의 리스트(&lt;code&gt;dataSource&lt;/code&gt;)로부터
빨간 사과들의 가격 목록(&lt;code&gt;redApplePriceList&lt;/code&gt;)을 추출하는 과정을 보여준다.
이때 &lt;code&gt;filter&lt;/code&gt;, &lt;code&gt;map&lt;/code&gt;는 중간연산에 해당되고, &lt;code&gt;collect&lt;/code&gt;는 최종연산에 해당된다.
이에 대해 조금만 더 자세히 알아보자.&lt;/p&gt;&lt;h3&gt;중간연산&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;중간연산(intermediate operation)&lt;/strong&gt;은 기본적으로
메서드 체이닝 방식으로 서로 연결되어 파이프라인을 구성할 수 있다.
이는 각각의 &lt;strong&gt;중간연산이 스트림을 반환&lt;/strong&gt;한다는 점을 의미한다.
실제로 &lt;code&gt;filter&lt;/code&gt;, &lt;code&gt;map&lt;/code&gt;, &lt;code&gt;limit&lt;/code&gt;, &lt;code&gt;sorted&lt;/code&gt; 등
모든 중간연산의 반환형은 &lt;code&gt;Stream&amp;lt;T&amp;gt;&lt;/code&gt;으로 정의되어 있다.&lt;/p&gt;&lt;h3&gt;최종연산&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;최종연산(terminal operation)&lt;/strong&gt;의 경우
스트림 파이프라인의 마지막에 실행되어야 하는 연산임을 쉽게 유추할 수 있을 것이다.
실제로 최종연산은 중간연산과는 달리 &lt;code&gt;Stream&amp;lt;T&amp;gt;&lt;/code&gt;이 아닌
&lt;code&gt;void&lt;/code&gt;, &lt;code&gt;long&lt;/code&gt;, 컬렉션 등을 반환하기 때문에
그 결과에 대해 또 다른 스트림 연산을 적용할 수 없다.&lt;/p&gt;&lt;p&gt;그런데 이보다도 중요한 특징은 바로 &lt;strong&gt;스트림을 소비&lt;/strong&gt;한다는 점이다.
스트림에 최종연산을 적용하게 되면 해당 스트림은 소비된 것으로 간주되며,
&lt;strong&gt;이미 소비된 스트림에 대해 스트림 연산을 적용하는 경우 예외가 발생한다.&lt;/strong&gt;
그리고 바로 이 점 때문에 최종연산은 언제나 파이프라인의 마지막에 위치하게 된다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;IntStream&lt;/span&gt; stream &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IntStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;stream&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 45&lt;/span&gt;

stream&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// IllegalStateException: stream has already been operated upon or closed&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;만일 동일한 작업을 반복적으로 수행하고 싶다면, 스트림이 아니라 데이터 소스를 사전에 변수에 저장해두고
해당 소스로부터 매번 스트림을 새로 생성하여야 할 것이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; source &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; sum1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; sum2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sum1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 45&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sum2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 45&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;스트림 연산과 상태&lt;/h2&gt;&lt;p&gt;한편 스트림 연산은 &lt;strong&gt;상태가 없는 연산(stateless operation)&lt;/strong&gt;과
&lt;strong&gt;상태가 있는 연산(stateful operation)&lt;/strong&gt;으로도 구분된다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;
그리고 상태가 있는 연산은 다시 &lt;em&gt;상태의 크기&lt;/em&gt;가 &lt;strong&gt;한정된(bounded) 연산&lt;/strong&gt;과
&lt;strong&gt;한정되지 않은(unbounded) 연산&lt;/strong&gt;으로 구분가능하다.
이러한 분류에 대해 모르더라도 Stream API를 사용할 수는 있지만
스트림의 내부 동작을 이해함에 있어 이러한 분류를 이해하는 것은 생각보다 의미를 지닌다.&lt;/p&gt;&lt;h3&gt;상태가 없는 연산&lt;/h3&gt;&lt;p&gt;상태가 없는 연산(stateless operation)은 현재 순회 중인 스트림 요소를 처리하기 위해
&lt;strong&gt;이전에 처리한 요소에 대한 정보를 필요로 하지 않는다.&lt;/strong&gt;
예를 들어 &lt;code&gt;filter&lt;/code&gt;의 경우 오직 현재 처리 중인 요소에 대한 특정 프레디케이트(Predicate)의
실행 결과가 참인지만 판단하면 된다.
&lt;code&gt;map&lt;/code&gt;의 경우 오직 현재 처리 중인 요소에 대해 특정 함수(Function)를 수행하고 그
반환값을 스트림의 요소로 반환하면 된다.&lt;/p&gt;&lt;p&gt;이처럼 개별 스트림 요소에 대한 처리가 다른 요소와
완전히 독립되어 수행될 수 있다는 점은 성능상으로 이점을 지닌다.
상태가 없는 중간 연산만으로 구성된 파이프라인의 경우
각 데이터에 단 한번씩만 접근하도록 자동으로 최적화가 이루어지며,
병렬 스트림이더라도 연산 과정에서 데이터 버퍼링이 최소화된다.&lt;/p&gt;&lt;h3&gt;상태가 있는 연산&lt;/h3&gt;&lt;p&gt;상태가 있는 연산(stateful operation)은
&lt;strong&gt;새로 순회 중인 요소들을 처리할 때 이전에 순회된 요소들에 대한 정보, 즉 &amp;#x27;상태&amp;#x27;를 필요로 한다.&lt;/strong&gt;
이러한 상태는 연산의 목적에 따라 단순히 &lt;em&gt;여태까지&lt;/em&gt; 순회된 데이터에 대한 정보일수도,
&lt;em&gt;스트림의 구성 요소 전체&lt;/em&gt;일수도 있다.
또한 해당 연산 바로 &lt;em&gt;직전에 수행된 중간연산에서 반환한 요소의 실제 값들&lt;/em&gt;일수도,
해당 연산 내부에서 &lt;em&gt;자체적으로 생성하여 관리하는 값&lt;/em&gt;일수도 있다.&lt;/p&gt;&lt;p&gt;중요한 점은 이처럼 연산이 상태를 지니게 되면 성능상 불이익을 얻을 수 있다는 점이다.
특히 병렬 스트림의 파이프라인에 상태가 있는 연산이 포함되는 경우,
같은 데이터 요소에 대해 보다 빈번하게 접근해야 하거나
주요 데이터를 별도로 관리(buffer)하는 작업이 추가될 수 있다.
이러한 작업이 추가되는 경우 오히려 순차적으로 처리할 때보다 성능이 저하될 수도 있을 것이다.&lt;/p&gt;&lt;p&gt;상세한 예시를 위해 연산에서 관리되는 상태의 크기에 따라 분류하여 설명하고자 한다.&lt;/p&gt;&lt;h4&gt;한정된 상태&lt;/h4&gt;&lt;p&gt;우선 스트림을 구성하는 전체 데이터 요소의 개수와 무관하게,
&lt;strong&gt;수행되기 위해 관리되어야 하는 상태의 크기가 언제나 한정된 연산&lt;/strong&gt;들이 있다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;limit&lt;/code&gt;, &lt;code&gt;skip&lt;/code&gt;와 같은 중간연산의 경우 &lt;em&gt;현재까지 순회된 요소의 개수 정보&lt;/em&gt;만을
상태로 관리한다. 예를 들어 &lt;code&gt;limit(5)&lt;/code&gt;의 경우 상태로 관리되는 값을 1씩 증가해가며
현재 순회된 요소가 5번째일 때까지는 통과시키고, 그 이후의 스트림 요소들을 무시하게 된다.&lt;/p&gt;&lt;p&gt;한편 &lt;code&gt;reduce&lt;/code&gt;, &lt;code&gt;sum&lt;/code&gt;, &lt;code&gt;max&lt;/code&gt;와 같은 최종연산의 경우
&lt;em&gt;여태까지 순회한 요소를 활용한 최종적인 연산결과&lt;/em&gt;를 상태로 관리한다.
예를 들어 &lt;code&gt;sum&lt;/code&gt;의 경우 상태로 관리되는 &lt;em&gt;여태까지의 합&lt;/em&gt; 정보에 현재 순회되는 요소를 더하고
그 값으로 상태를 업데이트한다.
&lt;code&gt;max&lt;/code&gt;의 경우 상태로 관리되는 &lt;em&gt;여태까지의 최대값&lt;/em&gt; 정보와 순회되는 요소를 비교하고
더 큰 값으로 상태를 업데이트한다.&lt;/p&gt;&lt;p&gt;즉, 한정된 상태가 있는 연산(stateful but bounded operation)이란
스트림을 구성하는 요소가 5개든, 1000개든, 혹은 무한하든,
&lt;strong&gt;요소의 개수와 무관하게 언제나 동일한 개수의 상태만을 필요로 하는 연산&lt;/strong&gt;을 의미한다.&lt;/p&gt;&lt;h4&gt;한정되지 않은 상태&lt;/h4&gt;&lt;p&gt;한정되지 않은 상태를 지닌 연산(stateful and unbounded operation)이란
말 그대로 &lt;strong&gt;연산을 수행하는 데 필요한 상태의 크기가 정해져있지 않은 연산들&lt;/strong&gt;이다.&lt;/p&gt;&lt;p&gt;스트림 내의 모든 데이터가 제공되어야 비로소 &lt;code&gt;sorted&lt;/code&gt;를 통해 정렬 작업을 수행할 수 있다.
&lt;code&gt;distinct&lt;/code&gt;를 통해 현재 순회되는 요소와 중복되는 요소가 스트림 내에 있었는지를
확인하기 위해서는 여태까지 순회된 요소들의 값들이 목록으로 관리되어야 한다.&lt;/p&gt;&lt;p&gt;이러한 연산들에서 관리되어야 하는 상태의 크기는
&lt;strong&gt;스트림을 구성하는 요소의 개수에 따라 함께 변한다&lt;/strong&gt;고 볼 수 있다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;Stream API specs : &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Statelessness&quot;&gt;공식문서 링크&lt;/a&gt;&lt;/li&gt;&lt;li&gt;모던 자바 인 액션 : &lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9791162242025&quot;&gt;책 링크&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;조사하는 과정에서 &amp;quot;중간연산은 상태가 있는 연산과 상태가 없는 연산으로 분류된다&amp;quot;고
설명하는 자료들을 많이 접하였다. 그러나 &lt;em&gt;모던 자바 인 액션&lt;/em&gt;의 경우
&lt;code&gt;reduce&lt;/code&gt;, &lt;code&gt;sum&lt;/code&gt;, &lt;code&gt;max&lt;/code&gt;를 상태가 있는 연산의 예시에 포함시켰다.
이 때문에 해당 글에서는 중간연산-최종연산의 분류와 상태의 유무에 따른 분류를 별개로 취급하였다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[Java] 값 객체: 동등성과 동일성]]></title><description><![CDATA[동등성과 동일성 개념을 토대로 값과 객체를 비교해보고, 값 객체에 대해 이해해보자. 로또 번호와 위치 정보를 값 객체로 구현해보고, 체스말의 이동경로 검증 예시를 통해 값 객체가 지니는 이점에 대해 알아보자.]]></description><link>https://bugoverdose.github.io/development/value-object/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/value-object/</guid><pubDate>Sat, 09 Apr 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;값과 객체: 동등성과 동일성&lt;/h2&gt;&lt;p&gt;값 객체(value object)에 대해 설명하기 전에 우선 값(value)과 객체(object)에 대해 생각해보자.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;값은 불변상태(immutable state)를 지닌다.&lt;/strong&gt; 상태가 절대로 변하지 않기 때문에
특정 시점에 동일한 타입의 두 값이 동일한 상태를 지니면 두 값은 언제나 동등한 것이 된다.
특정 변수에 담긴 값이 1에서 2로 변하는 경우 &lt;strong&gt;이는 다른 값이 할당된 것이지, 값 자체가 변한 것은 결코 아니다.&lt;/strong&gt;
이처럼 상태를 이용해 두 값이 같은지 판단할 수 있는 성질을 &lt;strong&gt;동등성(equality)&lt;/strong&gt;이라고 한다.&lt;/p&gt;&lt;p&gt;그에 반해 &lt;strong&gt;객체는 기본적으로 가변 상태(mutable state)를 지닌다고 가정된다.&lt;/strong&gt;
상태가 변할 수 있다는 점은 더 이상 상태를 통해 두 객체가 같은지 판단할 수 없다는 것을 의미한다.
내부 상태가 변하더라도 해당 객체는 다른 객체로 변한 것이 아니기 때문이다.
이 때문에 특정 객체가 다른 객체와 다른지를 판별하기 위해 개별 객체는 생성될 때 고유한 &lt;strong&gt;식별자&lt;/strong&gt;를 지니게 된다.
그리고 상태가 아니라 식별자를 기반으로 객체가 같은지를 판단할 수 있는 성질을 &lt;strong&gt;동일성(identity)&lt;/strong&gt;이라고 한다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; jason1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jason&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; jason2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jason&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;jason1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// study.ValueObjectTest$Person@752325ad&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;jason2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// study.ValueObjectTest$Person@279fedbd&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;jason1 &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; jason2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// false&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;값 객체: 동등성을 통한 동일성 판단&lt;/h2&gt;&lt;p&gt;종종 우리는 &lt;strong&gt;동등성을 통해 동일성을 판단할 수 있는 객체&lt;/strong&gt;를 원한다.
이러한 객체가 지니는 이점은 다양하다. 테스트 코드를 예로 생각해보자.
테스트 대상이 되는 메서드의 실행 결과를 &lt;code&gt;actual&lt;/code&gt; 변수에 담고,
그 결과로 예상되는 객체를 별도로 생성하여 &lt;code&gt;expected&lt;/code&gt;에 변수에 담아
두 객체의 타입과 상태가 동일한지를 테스트한다면 코드가 직관적이고 간결하지 않은가?&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;value_object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; actual &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PersonFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;generate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jason&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; expected &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;jason&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;assertThat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;actual&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEqualTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;expected&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이처럼 두 객체가 동일한 상태를 지닌다는 이유로 동일하다고 인정받을려면 어떠한 조건을 충족해야 할까?
답은 이미 위에 나왔다. 바로 &lt;strong&gt;객체가 값의 성질을 지니도록 만들면 된다.&lt;/strong&gt;
이를 위해서는 (1) 우선 &lt;code&gt;final&lt;/code&gt; 키워드를 통해 객체 내부의 상태를 전부 불변으로 만들고,
(2) 상태를 기준으로 동등성을 판단하도록 &lt;code&gt;equals&lt;/code&gt;와 &lt;code&gt;hashCode&lt;/code&gt; 메서드를 재정의하면 된다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;p&gt;자바에서는 한 개 이상의 값을 묶어 객체로 나타내기 위해 이처럼
&lt;code&gt;equals&lt;/code&gt;와 &lt;code&gt;hashCode&lt;/code&gt; 메서드가 재정의된 &lt;em&gt;불변객체&lt;/em&gt;를 구현한 것을 &lt;strong&gt;값 객체&lt;/strong&gt;라고 부른다.&lt;/p&gt;&lt;p&gt;몇 가지 간단한 예시를 통해 이 개념에 대해 자세히 알아보자.&lt;/p&gt;&lt;h2&gt;로또와 로또번호&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Lotto&lt;/code&gt;는 로또 번호를 관리하는 객체이다.
한 장의 로또는 서로 중복되지 않는 6개의 로또 번호로 구성된다.
로또번호는 1~45 사이의 값만을 지닌다. 6개의 로또번호는 오름차순으로 정렬되어 관리된다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lotto&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;NUMBERS_SIZE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MINIMUM_NUMBER&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MAXIMUM_NUMBER&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; chosenNumbers&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lotto&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;validateNumberSize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;validateNoDuplicateNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;validateNumberRange&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Collections&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;chosenNumbers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Collections&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmodifiableList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validateNumberSize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;NUMBERS_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;로또는 6개의 숫자로 구성되어야 합니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validateNoDuplicateNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; noDuplicateValues &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashSet&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; noDuplicateValues&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;중복된 로또번호를 선택할 수 없습니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validateNumberRange&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; lottoNumber &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumber &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MINIMUM_NUMBER&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; lottoNumber &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MAXIMUM_NUMBER&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;로또 번호는 1~45 범위의 숫자로 구성되어야 합니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;아직 생성자밖에 구현하지 않았는데도 실로 복잡해보인다.
그런데 위의 메서드들의 매개변수를 보면 일관되게 &lt;code&gt;lottoNumbers&lt;/code&gt;라는 이름을 사용하고 있다는 점이 보인다.
이는 &lt;code&gt;Lotto&amp;lt;Integer&amp;gt;&lt;/code&gt; 데이터가 임의의 숫자가 아니라 애플리케이션에서 특정한 의미를 지니고 있음을 보여준다.&lt;/p&gt;&lt;p&gt;그렇다면 &lt;code&gt;Integer&lt;/code&gt; 대신 &lt;code&gt;LottoNumber&lt;/code&gt;라는 타입을 별도로 만들어해보는 것은 어떠할까?&lt;/p&gt;&lt;h3&gt;로또번호 구현&lt;/h3&gt;&lt;p&gt;아래의 &lt;code&gt;LottoNumber&lt;/code&gt;는 로또 번호를 관리하는 값 객체다.
로또번호는 1~45 사이의 값만을 지닌다. 정렬될 수 있어야 한다.
동일한 값을 관리하는 로또번호 객체는 서로 동일하다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LottoNumber&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Comparable&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LottoNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MINIMUM_NUMBER&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MAXIMUM_NUMBER&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LottoNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;validateNumberRange&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validateNumberRange&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MINIMUM_NUMBER&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MAXIMUM_NUMBER&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;로또 번호는 1~45 범위의 숫자로 구성되어야 합니다.&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;o &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;LottoNumber&lt;/span&gt; that &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LottoNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; that&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hashCode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Objects&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;compareTo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LottoNumber&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;compare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 코드를 분석해보자.
우선 &lt;code&gt;Lotto&lt;/code&gt; 클래스에 있던 &lt;code&gt;MINIMUM_NUMBER&lt;/code&gt;, &lt;code&gt;MAXIMUM_NUMBER&lt;/code&gt; 상수와
이를 활용한 숫자 범위 방어로직이 &lt;code&gt;LottoNumber&lt;/code&gt;로 옮겨졌다.
또한 &lt;code&gt;Comparable&lt;/code&gt; 인터페이스와 &lt;code&gt;compareTo&lt;/code&gt; 메서드를 구현하였기 때문에 &lt;code&gt;List&amp;lt;LottoNumber&amp;gt;&lt;/code&gt; 데이터에 대해
&lt;code&gt;Collections.sort(lottoNumbers)&lt;/code&gt;와 같은 작업을 수행하면 컬렉션의 데이터는 오름차순으로 정렬될 수 있다.
그리고 &lt;code&gt;equals&lt;/code&gt;, &lt;code&gt;hashCode&lt;/code&gt; 메서드를 구현함에 따라
동일한 값을 관리하는 &lt;code&gt;LottoNumber&lt;/code&gt; 객체는 서로 동등한 것으로 간주된다.&lt;/p&gt;&lt;p&gt;여기서 중요한 점은 바로 &lt;code&gt;value&lt;/code&gt; 필드에 &lt;code&gt;final&lt;/code&gt; 키워드가 붙어있다는 점이다.
만일 로또번호를 1에서 2로 변경하고 싶다면 기존 로또번호 인스턴스를 변경시키는 것이 아니라
새로운 로또번호 인스턴스로 대체하여 사용해야 함을 의미한다.&lt;/p&gt;&lt;h3&gt;값 객체의 적용과 OOP&lt;/h3&gt;&lt;p&gt;이제 &lt;code&gt;Lotto&lt;/code&gt; 객체로 돌아와 &lt;code&gt;Integer&lt;/code&gt; 객체를 &lt;code&gt;LottoNumber&lt;/code&gt; 객체로 대체해보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lotto&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;NUMBERS_SIZE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LottoNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; chosenNumbers&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lotto&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LottoNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;validateNumberSize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;validateNoDuplicateNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Collections&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;chosenNumbers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Collections&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmodifiableList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validateNumberSize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LottoNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;validateNoDuplicateNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;LottoNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; lottoNumbers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;로또 번호와 관련된 로직, 즉 &lt;em&gt;책임&lt;/em&gt;이 &lt;code&gt;LottoNumber&lt;/code&gt;로 분리되었기 때문에
&lt;code&gt;Lotto&lt;/code&gt;는 &lt;code&gt;LottoNumber&lt;/code&gt;에 대한 일급컬렉션으로서의 역할만을 담당할 수 있게 되었다.
또한 타입을 통해 해당 객체에서 관리되는 숫자들이 로또 번호라는 점을 명시적으로 확인할 수 있다.
나아가 &lt;code&gt;Lotto&lt;/code&gt; 외에도 애플리케이션 곳곳에서 로또 번호를 나타내기 위해 &lt;code&gt;Integer&lt;/code&gt; 대신
&lt;code&gt;LottoNumber&lt;/code&gt;를 사용하는 것은 가독성 차원에서 이점을 지닌다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;그러나 한편으로는 &lt;code&gt;Integer&lt;/code&gt;가 기본적으로 제공하는 수많은 기능을 버리고,
별도의 클래스를 만들어 일일이 &lt;code&gt;equals&lt;/code&gt;, &lt;code&gt;hashCode&lt;/code&gt;, &lt;code&gt;compareTo&lt;/code&gt; 메서드를 오버라이드한 것은
꽤 번거로운 작업이다.
그에 반해 &lt;code&gt;LottoNumber&lt;/code&gt;를 별도로 구현함으로써 얻는 효용이 비용에 비해 충분히 크다고 볼 수 있을까?&lt;/p&gt;&lt;p&gt;특히 현재 &lt;code&gt;LottoNumber&lt;/code&gt;는 1~45 사이의 값을 관리하고
&lt;code&gt;getValue()&lt;/code&gt; 메서드를 통해 그 값을 꺼낸다는 점 외에는
그다지 객체 간의 협력에 참여한다고 보기 어렵다. 즉, 자율성을 지니지 못한 수동적인 존재라는 것이다.
&lt;strong&gt;값 객체는 그 자체로 객체이기 때문에 다양한 public 인터페이스를 외부에 제공하고 협력에 참여하도록 할 수 있다.&lt;/strong&gt;
그리고 데이터를 협력에 참여할 수 있는 객체로 만들 수 있다는 점이 바로
값 객체를 통해 얻을 수 있는 이점이라고 생각한다.
아래 예제를 통해 이에 대해 알아보자.&lt;/p&gt;&lt;h2&gt;위치와 방향&lt;/h2&gt;&lt;p&gt;위치와 방향 정보를 통해 구현할 수 있는 로직은 다양할 것이다.
해당 예제에서는 두 위치가 주어졌을 때
위치1에서 위치2로 향하는 방향이 &lt;strong&gt;특정 방향에 부합하는지&lt;/strong&gt;를 판별하고,
두 위치 사이의 &lt;strong&gt;x축상의 거리&lt;/strong&gt; 및 &lt;strong&gt;y축상의 거리&lt;/strong&gt;를 계산하는 기능을 구현해보자.&lt;/p&gt;&lt;p&gt;그리고 이를 활용하여 룩, 나이트 등의 체스말이 이동가능한 경로를 검증하는 로직을 구현해보자.&lt;/p&gt;&lt;h3&gt;방향 구현&lt;/h3&gt;&lt;p&gt;우선 &lt;code&gt;Direction&lt;/code&gt;는 상하좌우 그리고 대각선 방향에 대한 정보를 관리하는 enum(열거형)이다.
&lt;code&gt;angle&lt;/code&gt;이라는 필드는 좌표평면을 기준으로 x축 양의 방향을 기준으로 계산한 각도 값이다.
각 각도 값은 &lt;code&gt;hasAngleOf&lt;/code&gt; 메서드에서 사용되는 &lt;code&gt;Math.toDegrees(Math.atan2(y, x))&lt;/code&gt;를 통해 구해진 값이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Direction&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;UP_RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;UP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;UP_LEFT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;135&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;LEFT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;180&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;DOWN_LEFT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;135&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;DOWN&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;DOWN_RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;NO_DIFFERENCE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; angle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token class-name&quot;&gt;Direction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; angle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;angle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; angle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hasAngleOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; theta &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;atan2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt; targetAngle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toDegrees&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;theta&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;NO_DIFFERENCE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; y &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;NO_DIFFERENCE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; angle &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; targetAngle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;인스턴스 메서드 &lt;code&gt;hasAngleOf&lt;/code&gt;는 좌표평면을 기준으로
현재 위치로부터의 x축, y축으로 떨어진 위치로의 각도가
현재 인스턴스가 나타내는 방향의 각도에 부합하는지의 여부를 알려준다.
이렇게 설명하면 무슨 소리인지 전혀 이해가 되지 않을 것이다.
그냥 아래릐 활용 예제를 읽는 것이 더 편할 것이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// (0,0)을 기준으로 (3,0)은 오른쪽&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Direction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hasAngleOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true 반환&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Direction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;UP_RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hasAngleOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// false 반환&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// (0,0)을 기준으로 (3,3)은 오른쪽 위쪽&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Direction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;UP_RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hasAngleOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true 반환&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Direction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hasAngleOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// false 반환&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;위치 구현&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Position&lt;/code&gt; 객체는 x축과 y축 위치를 관리하는 값 객체다.
현재 코드에서 x와 y의 값은 임의의 정수가 들어올 수 있도록 하였지만,
요구사항에 따라 다양한 방식으로 위치의 범위를 설정할 수 있을 것이다.
그보다 중요한 점은 내부 필드가 아니라 public 메서드이다.&lt;/p&gt;&lt;p&gt;인스턴스 메서드 &lt;code&gt;horizontalDistance&lt;/code&gt;와 &lt;code&gt;verticalDistance&lt;/code&gt;는
각각 인자로 받는 다른 위치 인스턴스까지의 x축 혹은 y축 거리값(절대값)을 반환한다.
그리고 &lt;code&gt;checkDirection&lt;/code&gt;는 인자로 특정 위치 인스턴스와 방향 인스턴스를 받아서
해당 위치로의 방향이 방향 인스턴스에 해당되는 방향에 부합하는지를 반환한다.&lt;/p&gt;&lt;p&gt;개별 &lt;code&gt;Position&lt;/code&gt; 인스턴스에 담긴 &lt;code&gt;x&lt;/code&gt;, &lt;code&gt;y&lt;/code&gt; 값을 모르더라도
클라이언트 코드에서는 해당 메서드들을 활용하여 두 위치를 비교할 수 있다.
이는 현재 &lt;code&gt;Position&lt;/code&gt; 인스턴스에서는 자신만이 아니라
다른 &lt;code&gt;Position&lt;/code&gt; 인스턴스의 private 필드에도 자유롭게 접근할 수 있기 때문이다.
이를 통해 &lt;em&gt;캡슐화&lt;/em&gt;가 잘 지켜질 수 있다고 볼 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;horizontalDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; targetPosition&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; targetPosition&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;verticalDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; targetPosition&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; targetPosition&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;checkDirection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; targetPosition&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Direction&lt;/span&gt; direction&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; xDiff &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; targetPosition&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; yDiff &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; targetPosition&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; direction&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hasAngleOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;xDiff&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; yDiff&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hashCode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/**/&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;아래는 &lt;code&gt;Position&lt;/code&gt; 객체가 제공하는 public 인터페이스를 이해하기 위한 간단한 예제이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; centerPosition &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; eastPosition &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

centerPosition&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;horizontalDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;eastPosition&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 10&lt;/span&gt;
centerPosition&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;verticalDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;eastPosition&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 0&lt;/span&gt;
centerPosition&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;checkDirection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;eastPosition&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Direction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true&lt;/span&gt;
centerPosition&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;checkDirection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;eastPosition&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Direction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;UP_RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// false&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; centerPosition &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; easternNorthPosition &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

centerPosition&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;horizontalDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;easternNorthPosition&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 5&lt;/span&gt;
centerPosition&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;verticalDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;easternNorthPosition&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 5&lt;/span&gt;
centerPosition&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;checkDirection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;easternNorthPosition&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Direction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// false&lt;/span&gt;
centerPosition&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;checkDirection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;easternNorthPosition&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Direction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;UP_RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러면 본격적으로 이 코드를 활용해보자.&lt;/p&gt;&lt;h3&gt;활용: 체스말 이동 경로 검증 로직&lt;/h3&gt;&lt;p&gt;체스말은 폰, 나이트, 비숍, 룩, 퀸, 킹으로 총 6가지가 존재한다.
이 중 폰은 &lt;em&gt;색깔&lt;/em&gt;과 &lt;em&gt;현재 초기화된 위치에 있는가&lt;/em&gt;에 따라 이동 가능한 방향과
이동 가능한 칸의 수가 달라지기 때문에 일단은 논외로 하겠다.
또한 생성된 모든 &lt;code&gt;Position&lt;/code&gt; 인스턴스 데이터가 8x8 크기의 체스판 위의
특정 위치에 대응된다고 기본적으로 가정하겠다.&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;p&gt;우선 &lt;strong&gt;나이트(Knight)&lt;/strong&gt;를 구현해보자. 나이트는 현재 위치로부터
가로 2칸과 세로 1칸 혹은 가로 1칸과 세로 2칸 떨어진 곳으로 이동할 수 있다.
이는 두 위치 사이의 x축과 y축 절대값 거리를 활용하여 아래와 같이 쉽게 판별할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 나이트 이동 가능 경로: O는 중앙으로부터 이동 가능한 위치, X는 이동 불가능한 위치&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// XOXOX&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// OXXXO&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// XX♘XX&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// OXXXO&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// XOXOX&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isKnightMovable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; from&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fileDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; y &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;rankDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; y &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; y &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음은 &lt;strong&gt;킹(King)&lt;/strong&gt;의 로직이다. 킹은 현재 위치를 기준으로
상하좌우, 대각선 등 임의의 방향으로 1칸 떨어진 곳으로 이동할 수 있다.
이 역시 두 위치 사이의 절대값 거리를 활용하여 쉽게 판별할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 킹 이동 가능 경로: O는 중앙으로부터 이동 가능한 위치, X는 이동 불가능한 위치&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// XXXXX&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// XOOOX&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// XO♔OX&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// XOOOX&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// XXXXX&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isKingMovable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; from&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fileDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; y &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;rankDistance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;NO_DIFFERENCE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; y &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;NO_DIFFERENCE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; x &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;KING_MAX_MOVE_DIFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; y &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;KING_MAX_MOVE_DIFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;비숍(Bishop)&lt;/strong&gt;, &lt;strong&gt;룩(Rook)&lt;/strong&gt;, &lt;strong&gt;퀸(Queen)&lt;/strong&gt;의 로직은 한번에 구현하겠다.
각 체스말은 대각선 방향, 수직 방향, 대각선 및 수직 방향으로 몇 칸이든 자유롭게 이동 가능하다.
이 경우는 전부 위에서 구현한 &lt;code&gt;checkDirection&lt;/code&gt; 메서드와 &lt;code&gt;Direction&lt;/code&gt; 열거형 값들을 활용하면 된다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 룩: 수직 방향&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isRookMovable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; from&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;UP&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;DOWN&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;LEFT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;anyMatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;direction &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;checkDirection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; direction&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 비숍: 대각선 방향&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isBishopMovable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; from&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;UP_RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;UP_LEFT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;DOWN_LEFT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;DOWN_RIGHT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;anyMatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;direction &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;checkDirection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; direction&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 퀸: 룩+비숍. 수직 및 대각선 방향&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isQueenMovable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; from&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Position&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isRookMovable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;from&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isBishopMovable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;from&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;비즈니스 로직을 구현함에 있어 가장 최하단의 객체부터 구현하며 올라가야 한다는 우테코 크루들의 의견을 접한 적이 있다.
그러나 한편으로 객체 간의 협력을 올바르게 설계하기 위해서는
최상단에서부터 최하단으로 순차적을 구현해야 한다는 의견도 들었다.&lt;/p&gt;&lt;p&gt;그러나 개인적으로 도메인 지식이 부족한 상태에서는 &lt;em&gt;그 중간 지점&lt;/em&gt;에서 시작하고 최상단까지 구현한 이후
리팩토링 차원에서 값 객체 등의 최하단 로직을 구현하는 것이 가장 효율적이라고 생각한다.
예를 들어 로또를 활용한 로직을 구현해야 한다면 (1) 우선 &lt;code&gt;Lotto&lt;/code&gt;를 구현하고,
(2) 로또를 활용한 모든 로직을 구현한 후, (3) 마지막으로 로또 번호 로직의 모든
&lt;code&gt;Integer&lt;/code&gt;와 &lt;code&gt;int&lt;/code&gt; 타입의 데이터를 전부 &lt;code&gt;LottoNumber&lt;/code&gt;로 대체하는 것이다.&lt;/p&gt;&lt;p&gt;그 이유는 간단하다. 값 객체를 구현하는 것은 애플리케이션 전체에 있어
&lt;strong&gt;필요사항(requirement)이 아니라 개선사항(enhancement)의 영역이기 때문이다.&lt;/strong&gt;
물론 로직을 구현하는 도중 &lt;code&gt;LottoNumber&lt;/code&gt;의 구현 필요성을 느낄 수 있으며,
초기부터 값 객체를 구현하여 로직을 구현하는 것이 실제로 효용이 있을 수 있다.
그러나 도메인 설계에 대한 확신이 부족하며 전체 구조를 앞으로
몇 번이고 갈아엎을 예정이라면 값 객체 구현에 드는 비용은 낭비일 수도 있다.
이러한 상황이라면 값 객체를 구현할 시간에
차라리 도메인 지식을 확보하기 위해 한 번 초고속으로 모든 요구사항을 구현해봐야 한다고 생각한다.&lt;/p&gt;&lt;p&gt;그래도 구조가 어느 정도 자리 잡힌 상태라면 값 객체를 통한 구조 개선은 대부분의 경우 효용을 지닐 것이다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;객체지향의 사실과 오해 : &lt;a href=&quot;http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&amp;amp;ejkGb=KOR&amp;amp;barcode=9788998139766&quot;&gt;책 링크&lt;/a&gt;&lt;/li&gt;&lt;li&gt;마틴 파울러의 Value Object : &lt;a href=&quot;https://martinfowler.com/bliki/ValueObject.html&quot;&gt;글 링크&lt;/a&gt;&lt;/li&gt;&lt;li&gt;VO(Value Ojbect)란 무엇일까? : &lt;a href=&quot;https://tecoble.techcourse.co.kr/post/2020-06-11-value-object/&quot;&gt;Tecoble 링크&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;물론 &lt;code&gt;equals&lt;/code&gt;를 재정의하더라도 &lt;code&gt;==&lt;/code&gt;를 통해 식별자가 다른 두 객체의
&lt;strong&gt;동일성을 비교&lt;/strong&gt;하는 경우 여전히 &lt;code&gt;false&lt;/code&gt;가 나올 것이다.
&lt;code&gt;equals&lt;/code&gt;를 활용한 &lt;strong&gt;동등성 비교&lt;/strong&gt;를 수행할 수 있도록 메서드를 재정의한 것이지
각 객체에 할당된 식별자 자체는 여전히 유효하기 때문이다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;위에서 x와 y를 사용한 이유는 좌표평면을 기준으로 사고하는 편이 로직을 이해하기 쉽기 때문이다.&lt;/p&gt;&lt;p&gt;만일 체스판상의 위치라는 점을 나타내고 싶다면 &lt;code&gt;x&lt;/code&gt; 대신 &lt;code&gt;Rank&lt;/code&gt;라는 타입을, &lt;code&gt;y&lt;/code&gt; 대신 &lt;code&gt;File&lt;/code&gt;이라는 타입을 만들어볼 수 있다.
&lt;code&gt;Rank&lt;/code&gt;와 &lt;code&gt;File&lt;/code&gt;을 각각 8가지 인스턴스만을 지닌 enum으로 만들면
&lt;em&gt;A1&lt;/em&gt;부터 &lt;em&gt;H8&lt;/em&gt;까지 64개의 조합만이 가능하도록 만들 수 있다.
물론 &lt;code&gt;File&lt;/code&gt;이라는 이름은 기존에 존재하는 &lt;em&gt;파일&lt;/em&gt; 관련 기능과 겹치기 때문에 별도의 네이밍을 고려해볼 필요가 있을 것이다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[Java] 스트림 기초: I/O Stream과 Stream API]]></title><description><![CDATA[Stream API을 통해 생성되는 스트림은 말 그대로 '데이터의 흐름'이다. 이 흐름이라는 개념에 포함된 다양한 의미 중 가장 중요한 것은 스트림이 흘러가는 과정에서 데이터가 순차적으로 사용되고 사라진다는 점이다.]]></description><link>https://bugoverdose.github.io/development/stream-and-java/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/stream-and-java/</guid><pubDate>Mon, 21 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;음성 파일이나 동영상 파일을 온라인으로 (합법) 다운로드하고 로컬 머신에서 재생하는 경우를 생각해보자.
한 번 다운로드가 완료된 파일은 몇 번이고 재생할 수 있다는 이점이 있다.&lt;/p&gt;&lt;p&gt;하지만 처음 접한 곡을 맛보기로 몇 초 정도만 들어보고 싶은 경우는 어떠할까?
우리는 아직 해당 음성 파일이 우리의 작고 소중한 컴퓨터의 메모리를 차지하는 것을 원하지 않는다.
그럼에도 불구하고 우리는 음악을 듣기 위해 (1) 파일을 다운로드해야 하며,
(2) 파일 전체가 100%로 완전히 다운로드될 때까지 기다려야 한다는 부담이 있다.&lt;/p&gt;&lt;p&gt;이 경우 음성 데이터의 10% 정도만 로컬에 받아 즉석에서 플레이해보고 싶다는 생각이 드는 것이 정상일 것이다.
즉, 우리는 때때로 음악을 온라인 &lt;strong&gt;스트리밍&lt;/strong&gt;을 통해 실시간으로 들어보고 싶다는 것이다.
해당 게시글은 이때 말하는 &lt;strong&gt;스트림&lt;/strong&gt;과 관련한 기능을 자바에서 어떻게 제공하는지에 대해 이야기해보고자 한다.&lt;/p&gt;&lt;h2&gt;스트림&lt;/h2&gt;&lt;p&gt;컴퓨터과학에서 스트림(stream)은 기본적으로
&lt;strong&gt;시간의 흐름에 따라 순차적으로 사용할 수 있게 되는 일련의 데이터 요소&lt;/strong&gt;를 가리킨다.
이 말의 의미가 무엇인가?
스트림을 구성하는 모든 데이터에 대해 작업A, 작업B, 작업C를 수행해야 하는 경우를 생각해보자.
컴퓨터는 기본적으로 스트림을 구성하는 &lt;em&gt;모든 데이터&lt;/em&gt;에 대해 작업A를 수행하고,
그 다음에 &lt;em&gt;모든 데이터&lt;/em&gt;에 대해 작업B를 수행하지 &lt;strong&gt;않는다&lt;/strong&gt;.
스트림에서는 우선 &lt;em&gt;첫 번째 데이터&lt;/em&gt;에 대해 작업A, 작업B, 작업C를 전부 다 수행하고,
&lt;em&gt;두 번째 데이터&lt;/em&gt;에 대해 작업A, 작업B, 작업C를 수행하게 된다.&lt;/p&gt;&lt;p&gt;실제 예시를 위해 동영상 스트리밍 상황을 한 번 생각해보자.
웹브라우저는 몇 분짜리 영상을 실행하기 위해 영상 파일의 맨 처음부터 1초, 2초에 해당되는 데이터를
순차적으로 브라우저에 다운로드받고 순서대로 실행하게 된다.
물론 데이터가 사용가능해지는 시점에 즉시 로컬에서 실행하는 경우,
1초짜리 데이터가 0.5배속으로 2초에 걸쳐 실행되거나, 2배속으로 0.5초에 걸쳐 실행되는 등의 문제가 발생할 것이다.
이러한 문제를 예방하고자 수신되는 데이터를 일시적으로 캐슁해주는 &lt;strong&gt;버퍼링&lt;/strong&gt; 작업이 수행된다.&lt;/p&gt;&lt;p&gt;이때 우리가 갑자기 동영상의 뒷부분을 실행하려고 하면 어떻게 되겠는가?
아마 해당 부분이 실행되기까지는 시간이 좀 걸릴 것이다.
이는 영상이 실행되기 위한 작업이 종료된 앞부분과는 달리,
&lt;strong&gt;뒷부분은 아직 준비되지 않았기 때문&lt;/strong&gt;일 것이다. 그리고 이것이 바로 스트림의 본질이라고 볼 수 있다.&lt;/p&gt;&lt;p&gt;그리고 근본 있는 언어인 자바에는 이 스트림과 관련된 API를 두 종류나 지니고 있다.
이 둘은 사용되는 맥락과 방법이 서로 다르기 때문에 서로 혼용하지 않도록 주의해야 한다.
특히 &lt;strong&gt;각 API에서 만들어내는 스트림은 자바 애플리케이션 내에서 서로 구분되는 별개의 존재&lt;/strong&gt;라는
점을 명확히 알고 있어야 한다.&lt;/p&gt;&lt;h2&gt;I/O Stream&lt;/h2&gt;&lt;p&gt;위의 스트리밍 관련 예시를 읽었다면 입출력 관련 기능이 스트림과 관련되었다는 점은 전혀 이상하지 않을 것이다.
&lt;code&gt;java.io&lt;/code&gt; 패키지에서 제공하는 추상클래스와 그 구체클래스들을 통해
자바 애플리케이션은 콘솔에 입력된 값이나 파일의 데이터를 읽어들이고,
콘솔에 값을 출력하거나 파일에 데이터를 남길 수 있다.&lt;/p&gt;&lt;p&gt;이러한 입출력 관련 작업은 I/O 스트림 관련 클래스로부터 &lt;strong&gt;스트림 인스턴스를 생성&lt;/strong&gt;하고,
스트림 인스턴스의 메서드를 호출하는 방식으로 진행된다.
바로 이러한 작업방식 때문에 스트림을 &lt;em&gt;&amp;quot;데이터가 이동하는 통로&amp;quot;&lt;/em&gt; 혹은
&lt;em&gt;운영체제에 의해 생성되는 데이터의 중간 매개자&lt;/em&gt;와 같이 설명하는 경우가 종종 있다.
입출력 작업에 한해 이러한 설명은 딱히 틀렸다고 보기 어렵다.
실제로 자바 애플리케이션 입장에서는 스트림 인스턴스를 통해 외부로부터 데이터를 받고,
외부로 데이터를 보내는 것이기 때문이다.
그러나 이는 해당 API에서 사용되는 &lt;strong&gt;스트림 인스턴스&lt;/strong&gt;에 대한 설명이지
스트림 자체에 대한 설명으로 보면 안 될 것이다.&lt;/p&gt;&lt;p&gt;주석에 있는 바이트 기반 스트림&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;과
문자 기반 스트림&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;에 대한 설명은
가볍게 읽고 넘어가도 무관하다.&lt;/p&gt;&lt;h2&gt;Stream API&lt;/h2&gt;&lt;p&gt;Stream API는 컬렉션, 배열 등의 &lt;strong&gt;데이터 소스를 스트림으로 만들어 작업&lt;/strong&gt;하기 위한 기능을
제공하기 위해 Java 8 때 등장하였다.
주의할 점은 Stream API를 통해 만들어지는 스트림은
I/O Stream으로 인해 만들어지는 스트림 인스턴스와는 별개라는 점이다.&lt;/p&gt;&lt;p&gt;Stream API는 맨 위에서 정의내린 바로 그 스트림에 그대로 부합한다.
&lt;em&gt;자바 애플리케이션 내에서&lt;/em&gt; 데이터 소스를 스트림으로 변환함으로써
스트림 연산이 지니는 다양한 이점을 활용할 수 있게 된다는 점이 Stream API의 핵심이다.&lt;div num=&quot;3&quot;&gt;&lt;/div&gt;
Stream API를 통해 우리는 가독성 높은 코드로 아주 간편하게
데이터를 필터링하고, 변환하는 등의 작업을 수행할 수 있게 되었다.&lt;/p&gt;&lt;p&gt;Stream API에 대해 이야기할 요소는 아주 많지만
해당 게시글에서는 이 Stream API가 만들어내는 &amp;quot;스트림&amp;quot;에 대해 아주 가볍게만 알아보자.&lt;/p&gt;&lt;h2&gt;Stream API의 스트림&lt;/h2&gt;&lt;p&gt;&lt;em&gt;모던 자바 인 액션&lt;/em&gt;에서는 스트림을 &amp;quot;데이터 처리 연산을 지원하도록
소스에서 출력된 연속된 요소&amp;quot;라고 정의한다.
&lt;strong&gt;데이터 처리 연산을 지원하기 위해&lt;/strong&gt;
기존에 존재하는 데이터 소스를 굳이 &lt;strong&gt;스트림으로 변환&lt;/strong&gt;하여 사용한다는 점을
제외하면 이미 반복적으로 언급된 스트림의 정의와 사실상 동일하다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;코드를 통해 이를 이해해보자.
아래와 같이 &lt;code&gt;AppleWrapper&lt;/code&gt; 인스턴스들의 리스트가 하나 있다고 가정하자.
&lt;code&gt;Apple&lt;/code&gt; 인스턴스는 id와 color 값을 지니며,
&lt;code&gt;AppleWrapper&lt;/code&gt; 인스턴스는 그러한 &lt;code&gt;Apple&lt;/code&gt; 인스턴스를 감싸고 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;AppleWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; appleWrappers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
         &lt;span class=&quot;token class-name&quot;&gt;AppleWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RED&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;token class-name&quot;&gt;AppleWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RED&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;token class-name&quot;&gt;AppleWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;GREEN&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;token class-name&quot;&gt;AppleWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;GREEN&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;token class-name&quot;&gt;AppleWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;YELLOW&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;token class-name&quot;&gt;AppleWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;YELLOW&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;token class-name&quot;&gt;AppleWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;YELLOW&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그리고 아래 예시는 Stream API를 통해 &lt;code&gt;appleWrappers&lt;/code&gt; 리스트를 스트림으로 변환하고,
3개의 &lt;code&gt;AppleWrapper&lt;/code&gt; 인스턴스로부터 &lt;code&gt;Apple&lt;/code&gt; 인스턴스를 추출하고,
최종적으로 &lt;code&gt;Dto&lt;/code&gt;로 변환하여 리스트에 담는 과정을 보여준다.
사과의 &lt;code&gt;id&lt;/code&gt;와 &lt;code&gt;color&lt;/code&gt; 값을 출력하는 과정 덕분에 우리는 첫 번째 데이터부터
순차적으로 모든 작업이 수행되며, 필요 없는 데이터는 무시된다는 점을 알 수 있다.
이러한 과정은 위에서 언급한 스트림의 특성과 동일하다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Dto&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; threeAppleData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; appleWrappers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
         &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;AppleWrapper&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ripOpen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
         &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;apple &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;apple&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
         &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;peek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;apple &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;apple&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
         &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;apple &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Dto&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;apple&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
         &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
         &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;threeAppleData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 1&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// RED&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 2&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// RED&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 3&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// GREEN&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// [Dto{id=1, color=RED}, Dto{id=2, color=RED}, Dto{id=3, color=GREEN}]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그런데 이러한 작업은 사실 리스트를 스트림으로 변환하지 않더라도 충분히 수행할 수 있는 작업이다.
아래와 같은 코드를 실행하게 되면 동일하게 각 데이터에 대해 모든 작업이 순차적으로 수행되며,
동일하게 3개의 데이터에 대해서만 작업을 한 상태로 동일한 리스트를 반환하게 된다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Dto&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; threeDto &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;AppleWrapper&lt;/span&gt; appleWrapper &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; appleWrappers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;threeDto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
         &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
   &lt;span class=&quot;token class-name&quot;&gt;Apple&lt;/span&gt; apple &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; appleWrapper&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ripOpen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;apple&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;apple&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getColor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   threeDto&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Dto&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;apple&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;threeDto&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 이러한 작업을 거치게 되면 &lt;code&gt;apple&lt;/code&gt; 인스턴스가 매번 생성되며
메모리를 순간적으로라도 차지하게 된다는 문제가 있다.
물론 이 경우 GC의 처리대상이 되겠지만
&lt;code&gt;apple&lt;/code&gt; 인스턴스는 분명 &lt;code&gt;Dto&lt;/code&gt; 인스턴스를 생성하는 &lt;strong&gt;연산 과정에서만 필요&lt;/strong&gt;한데,
자바 애플리케이션 자체에 인스턴스를 생성하는 것은 분명 리소스 낭비라고 볼 수 있다.
만일 &lt;code&gt;apple&lt;/code&gt;이 아니라 훨씬 더 리소스를 잡아먹는 데이터가 이렇게 중간 단계에
매번 생성된다면 애플리케이션의 부담은 커질 수 밖에 없다.&lt;/p&gt;&lt;p&gt;그에 반해 Stream API을 통해 만들어지는 스트림은 말 그대로 &amp;#x27;데이터의 흐름&amp;#x27;이다.
이 흐름이라는 개념은 다양한 의미를 함축하고 있다.
기본적으로 불순물이 섞이지 않은 일련의 흐름을 구성하기 위해
&lt;strong&gt;동일한 형식을 지닌 복수의 데이터&lt;/strong&gt;가 필요하다는 점도 자연스럽게 함의하고 있다.
그러나 그보다 중요한 것은 스트림이 &lt;em&gt;흘러가는&lt;/em&gt; 과정에서
데이터가 &lt;strong&gt;순차적으로 하나씩 사용되고, 사라지게 된다&lt;/strong&gt;는 점이다.
위의 예제에서는 억지로 &lt;code&gt;collect&lt;/code&gt; 메서드를 통해 스트림의 데이터를 리스트에 담았지만,
이러한 작업이 없었다면 &lt;code&gt;Apple&lt;/code&gt;과 &lt;code&gt;Dto&lt;/code&gt; 인스턴스에 대한 정보는 터미널에 출력되기만 했을 뿐,
자바 애플리케이션에는 전혀 남지 않았을 것이다.&lt;/p&gt;&lt;p&gt;즉, Stream API는 이처럼 &lt;strong&gt;효율적인 데이터 처리&lt;/strong&gt;에 특화된 문법이며,
스트림을 활용하여 이러한 메모리 및 성능상의 이점을 얻을 수 있다고 볼 수 있다.
자바의 세계에서 일어난 가장 혁명적인 사건 중 하나인
Stream API에 대해 더 자세히 알고 싶다면 아래 참고자료에 기재된
&lt;em&gt;모던 자바 인 액션&lt;/em&gt;을 참고하기를 권한다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;모던 자바 인 액션 : &lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9791162242025&quot;&gt;책 링크&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;&lt;strong&gt;바이트 기반 스트림&lt;/strong&gt;: InputStream/OutputStream 계열&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Java 1.0 때부터 존재&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;1바이트 단위&lt;/strong&gt;로 데이터를 전송&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;추상클래스로 &lt;code&gt;InputStream&lt;/code&gt;과 &lt;code&gt;OutputStream&lt;/code&gt;이 제공되어 각각 입력과 출력 스트림을 담당&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;각 추상클래스를 구현하는 구체클래스는 파일, 오디오, 메모리 등 특정 종류의 데이터 소스에 대한 스트림 작업을 지원&lt;/p&gt;&lt;ul&gt;&lt;li&gt;파일: &lt;code&gt;FileInputStream&lt;/code&gt;, &lt;code&gt;FileOutputStream&lt;/code&gt;&lt;/li&gt;&lt;li&gt;메모리: &lt;code&gt;ByteArrayInputStream&lt;/code&gt;, &lt;code&gt;ByteArrayOutputStream&lt;/code&gt;&lt;/li&gt;&lt;li&gt;오디오: &lt;code&gt;AudioInputStream&lt;/code&gt;, &lt;code&gt;AudioOutputStream&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;보조 스트림을 활용하여 최적화 등의 작업 수행 가능&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;&lt;strong&gt;문자 기반 스트림&lt;/strong&gt;: Reader/Writer 계열&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Java 1.1 때 등장&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;2바이트 단위&lt;/strong&gt;로 데이터를 전송하는 바이트 기반 스트림 (char형은 2바이트 단위)&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;추상클래스로 &lt;code&gt;Reader&lt;/code&gt;과 &lt;code&gt;Writer&lt;/code&gt;이 제공되어 각각 입력과 출력 스트림을 담당&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;각 추상클래스를 구현하는 구체클래스는 파일, 메모리, &lt;strong&gt;문자열&lt;/strong&gt; 등 특정 종류의 데이터 소스에 대한 스트림 작업을 지원&lt;/p&gt;&lt;ul&gt;&lt;li&gt;파일: &lt;code&gt;FileReader&lt;/code&gt;, &lt;code&gt;FileWriter&lt;/code&gt;&lt;/li&gt;&lt;li&gt;메모리: &lt;code&gt;CharArrayReader&lt;/code&gt;, &lt;code&gt;CharArrayWriter&lt;/code&gt;&lt;/li&gt;&lt;li&gt;문자열: &lt;code&gt;StringReader&lt;/code&gt;, &lt;code&gt;StringWriter&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;문자 기반 스트림을 위한 보조 스트림이 별도로 제공됨&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div num=&quot;3&quot;&gt;&lt;p&gt;사실 &lt;code&gt;Stream.generate()&lt;/code&gt;, &lt;code&gt;IntStream.range()&lt;/code&gt;와 같이 스트림 내부에서
스트림의 요소를 생성해내는 문법도 분명 존재한다.
위의 설명을 읽고 별도로 정의된 데이터 소스가 있어야만
Stream API를 활용할 수 있다고 오해해서는 안 된다.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Stream API는 단순히 컬렉션에 대한 데이터 처리 방법이 아니다.&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[Java] 람다: 람다 캡처링]]></title><description><![CDATA[람다 캡처링이란 파라미터로 넘겨받은 데이터가 아닌 람다식 외부에서 선언된 변수를 참조하는 변수를 람다식 내부에 저장하고 사용하는 동작을 의미한다. 이번 글에서는 이를 둘러싼 제약사항 및 주의사항을 다루어보고자 한다.]]></description><link>https://bugoverdose.github.io/development/lambda-capturing-and-free-variable/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/lambda-capturing-and-free-variable/</guid><pubDate>Mon, 14 Mar 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;람다 캡처링&lt;/h2&gt;&lt;p&gt;람다식은 기본적으로 &lt;code&gt;(파라미터) -&amp;gt; 바디&lt;/code&gt;와 같은 구조를 지니며,
바디에서는 파라미터로 넘겨진 변수를 활용하여 작업을 수행한다.&lt;/p&gt;&lt;p&gt;람다 캡처링(capturing lambda)이란 간단히 말해 이처럼 파라미터로 넘겨받은 데이터가 아닌
&lt;strong&gt;람다식 외부에서 정의된 변수를 참조하는 변수를 람다식 내부에 저장하고 사용하는 동작&lt;/strong&gt;을 의미한다.&lt;/p&gt;&lt;p&gt;아래는 &lt;code&gt;localVariable&lt;/code&gt;라는 이름의 지역변수를 람다에서 캡처하고,
해당 람다식을 &lt;code&gt;r&lt;/code&gt;이라는 변수에 할당하는 간단한 예제이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lambdaCapturing&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; localVariable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

   &lt;span class=&quot;token class-name&quot;&gt;Runnable&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;localVariable&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위의 예제에서 유의할 점은 람다식 내부에서 사용되는 &lt;strong&gt;자유변수&lt;/strong&gt; &lt;code&gt;localVariable&lt;/code&gt;과
지역변수로 선언한 &lt;code&gt;localVariable&lt;/code&gt;는 서로 별개라는 점이다.
이를 이해하기 위해 람다 캡처링의 제약 조건에 대해 알아보자.&lt;/p&gt;&lt;h2&gt;제약 조건: final 지역변수만 캡처 가능&lt;/h2&gt;&lt;p&gt;람다식 내부에서 클래스의 static 필드나 인스턴스 필드를 캡처하는 데에는 아무런 제약이 존재하지 않는다.
그러나 유독 지역변수를 람다식의 바디에서 캡처하려는 경우 다음과 같은 제약 사항이 존재한다.&lt;/p&gt;&lt;p&gt;&lt;code&gt;local variables referenced from a lambda expression must be final or effectively final&lt;/code&gt;&lt;/p&gt;&lt;p&gt;의역하자면 &lt;strong&gt;람다 바디에서는 값이 단 한 번만 할당되는 지역변수만을 캡처할 수 있다&lt;/strong&gt;는 뜻이며,
실제로 만일 람다에서 캡처하려는 지역변수의 값을 재할당하려는 경우 위와 같은 문구가 터미널에 출력되며 컴파일 에러가 발생한다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;람다에서 사용된 지역변수를 해당 메서드 내에서 재할당 시도하는 경우 컴파일 에러 발생&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lambdaCapturing_localVarMustBeFinal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; localVariable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

   &lt;span class=&quot;token class-name&quot;&gt;Runnable&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;localVariable&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

   localVariable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1002&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 컴파일 에러 발생!&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;람다 내부에서 지역변수의 값을 직접 재할당하려는 경우에도 동일하게 컴파일 에러 발생&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lambdaCapturing_localVarMustBeFinal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; localVariable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

   &lt;span class=&quot;token class-name&quot;&gt;Runnable&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; localVariable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1001&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 컴파일 에러 발생!&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2&gt;제약 조건의 원인: 자유변수&lt;/h2&gt;&lt;p&gt;지역변수에만 이러한 제약이 걸리는 이유는 JVM 메모리 구조와 관련이 있다.
JVM 메모리상으로 힙이나 메서드 영역에 저장되는 인스턴스나 클래스 변수 등과는 달리,
지역변수는 스택에 저장되기 때문이다.&lt;/p&gt;&lt;p&gt;예를 들어 &amp;#x27;지역변수의 값을 캡처하는 람다&amp;#x27;를 &lt;strong&gt;반환하는 메서드&lt;/strong&gt;가 있다고 한 번 생각해보자.
해당 메서드의 실행이 종료되었을 때 해당 메서드에서 선언되고 사용된 모든 지역변수의 할당은 해제된다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;p&gt;그럼에도 불구하고 람다는 더 이상 메모리에 존재하지 않는 지역변수의 값을 아무런 문제 없이 참조하여 사용할 수 있다.
이는 &lt;strong&gt;람다 내부에서 사용되는 지역변수는 원본 지역변수를 복제한 데이터&lt;/strong&gt;이기 때문이다.
그렇기 때문에 원본이 되는 지역변수의 할당이 해제되어도 람다 내부에서 사용되는 데이터는 그대로 유지되는 것이며,
&lt;strong&gt;복제품의 값이 변경되지 않아야 한다는 이유로 단 한 번만 값을 할당해야 한다는 제약이 생겨난 것&lt;/strong&gt;이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 지역변수를 캡처하여 사용하는 람다를 외부로 반환하는 메서드&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Supplier&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getLambda&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; localVariable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 지역변수 localVariable&lt;/span&gt;

   &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; localVariable &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 자유변수 localVariable&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useLambda&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token class-name&quot;&gt;Supplier&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; lambda &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getLambda&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

   &lt;span class=&quot;token comment&quot;&gt;// 자유변수 localVariable에 담긴 1000에 5를 더한 값을 반환 받고 변수 actual에 저장&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; actual &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lambda&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

   &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;actual&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 1005&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;자유변수(free variable)&lt;/code&gt;란 이처럼 &lt;strong&gt;람다식 외부에서 정의된 지역변수를 람다식 내부에서 참조하는 변수&lt;/strong&gt;를 의미한다.
람다식이 포함되었던 메서드의 종료 여부에 종속되지 않고, 자유롭게 존재할 수 있기 때문에 자유변수라는 이름이 붙은 것으로 보인다.&lt;/p&gt;&lt;p&gt;다시 정리하자면 람다식에서 사용하려는 지역변수의 데이터를 자유변수에 저장하고,
람다식에서 자유변수를 참조하는 행위를 람다 캡쳐링(capturing lambda)이라고 한다.&lt;/p&gt;&lt;h2&gt;주의 사항&lt;/h2&gt;&lt;p&gt;한편, 클래스에 static으로 선언된 필드나 인스턴스 필드의 경우
람다 내부에서 접근하는 데에 아무런 제약이 존재하지 않는다.
람다에서 캡처되는 필드의 경우 값이 자유자재로 변해도 되며,
람다는 자신이 실행될 때 해당 시점의 필드 값을 사용하게 된다.
이는 이들이 JVM 메모리상으로 힙 영역 혹은 메서드(데이터) 영역에 저장되어 있으며,
람다식 내부에서는 클래스 혹은 인스턴스를 통해 해당 데이터에 접근하기 때문이다.
이는 필드의 값이 객체든, 원시값이든 동일하게 적용된다.&lt;/p&gt;&lt;p&gt;아래는 람다에서 참조되는 인스턴스 필드의 값이 &lt;code&gt;final&lt;/code&gt;이 아니어도 되며,
인스턴스 필드의 값을 람다에서 변경시켜도 무관하다는 점을 보여주는 몇 가지 예제다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LambdaCapturingTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; instanceField &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; instanceField2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 람다 내부에서 사용되는 인스턴스 필드의 값을 재할당하여도 컴파일 에러가 발생하지 않는다.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lambdaCapturing_fieldDoesNotHaveToBeFinal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Supplier&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instanceField&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 100&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instanceField &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 컴파일 에러가 발생하지 않는다.&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 200&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 람다 내부에서 인스턴스 필드의 값을 직접 재할당할 수 있다.&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lambdaCapturing_canChangeFieldValueFromInsideOfLambda&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 컴파일 에러가 발생하지 않는다.&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Consumer&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; changeFieldValue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instanceField2 &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;// 1~100의 값을 순차적으로 instanceField2에 더하며 재할당&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;IntStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;rangeClosed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;changeFieldValue&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instanceField2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 5050&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;그러나 이처럼 제약 조건이 없다는 점은 좋은 것만은 아니다.
오히려 람다식 내부에서의 무분별한 참조로 인해 다양한 side effect를 유발할 위험이 있다.&lt;/p&gt;&lt;p&gt;이해하기 쉬운 예로 &lt;code&gt;instanceField&lt;/code&gt; 필드의 값을 특정 값으로 재할당하는 람다를 &lt;em&gt;병렬 스트림&lt;/em&gt; 내부에서 호출한다고 생각해보자.
병렬 스트림은 대량의 데이터를 여러 그룹으로 쪼개어 병렬적으로 처리하기 때문에
리스트의 개별 데이터가 실질적으로 몇 번째로 처리될 지 알 방법이 없다.&lt;/p&gt;&lt;p&gt;즉, 아래와 같이 1부터 100으로 구성된 &lt;code&gt;IntStream&lt;/code&gt;의 값을 &lt;code&gt;instanceField&lt;/code&gt;에 재할당하는 작업을 수행하도록 했을 때,
우리는 100번째로 수행된 람다가 어떤 것인지를 알 수가 없으며,
이 때문에 최종적인 &lt;code&gt;instanceField&lt;/code&gt;의 값을 예상할 수가 없다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LambdaCapturingTest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; instanceField &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lambdaCapturing_parallelStreamCanCauseSideEffects&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Consumer&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; changeFieldValue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instanceField &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;IntStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;rangeClosed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parallel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;changeFieldValue&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;instanceField&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ??: 알 수 없다.&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;checkParallelStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Consumer&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; changeFieldValue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;IntStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;rangeClosed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                 &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parallel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                 &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;changeFieldValue&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 63&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 82&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 32&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// ... (94줄 생략)&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 24&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 25&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 75&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이러한 경우가 아니더라도 애플리케이션 전체에서 공유되는 가변 자원을
스트림 내부에서 사용하게 되면 예상치 못한 버그들이 발생할 것이다.
그러므로 람다 캡처링을 사용하더라도 가급적이면 불변 데이터만을 사용하기 위해 노력하는 것이 이상적일 것이다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;정리하자면 람다식은 파라미터만이 아니라 람다식 외부의 선언된 변수를 활용할 수 있으며,
이러한 동작을 람다 캡처링이라고 부른다.
이때 컴파일러는 캡처하려는 지역 변수에 대해 불변성을 강제하는데, 이는 딱히 문제라고 보기 어렵다.
불변 데이터가 지니는 다양한 이점도 있겠지만, 외부 변수의 값을 변화시키는
일반적인 절차형/명령형 프로그래밍 패턴을 문법 차원에서 예방한다는 이점도 크다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;다만, 스택 영역에 저장되지 않는 각종 인스턴스 필드와 static 변수의 경우
이러한 제약이 존재하지 않기 때문에 side effect가 발생하지 않도록 주의해야 할 것이다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;모던 자바 인 액션 : &lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9791162242025&quot;&gt;책 링크&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;물론 함수의 실행이 종료되더라도 다른 함수에 의해 참조되고 있다는 이유로
지역변수의 할당이 해제되지 않는 프로그래밍 언어들도 존재한다.
해당 언어들에서 이러한 이유로 변수가 GC에 의해 수거되지 않는 현상 및 언어의 성질을 일컬어
클로저(closure)라고 부르기도 한다.
이는 클로저의 다양한 정의 중 하나이지만
자바에서 클로저라고 부르는 개념과는 거리가 다소 있기 때문에 혼동하지 않도록 주의해야 한다.&lt;/p&gt;&lt;p&gt;참고로 이러한 언어의 대표격 중 하나가 바로 자바스크립트라고 한다. 자세한 내용은
&lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9791158391720&quot;&gt;코어 자바스크립트&lt;/a&gt;라는
서적을 참고하기를 바란다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[클래스와 프로토타입에 담긴 철학]]></title><description><![CDATA[우테코 강의 중 클래스라는 개념이 플라톤의 이데아 개념에 기반을 두고 있다는 내용이 나왔다. 다만, 코치님이 이 부분에 대해 너무 가볍게 다룬 것 같아 정말 마음이 아팠다. 그런 의미에서 그 분이 쏘아올린 작은 공을 살짝 리시브해보고자 한다.]]></description><link>https://bugoverdose.github.io/computer-science/class-vs-prototype-philosophy/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/class-vs-prototype-philosophy/</guid><pubDate>Thu, 17 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;우테코 강의 중 클래스라는 개념이 플라톤의 이데아 개념에 기반을 두고 있다는 내용이 나왔다.
다만, 코치님이 이 부분에 대해 너무 가볍게 다룬 것 같아 정말 마음이 아팠다.
그런 의미에서 그 분이 쏘아올린 작은 공을 살짝 리시브해보고자 한다.&lt;/p&gt;&lt;p&gt;미리 결론만 간략하게 정리하자면 다음과 같다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;자바와 같은 &lt;strong&gt;클래스 기반의 OOP&lt;/strong&gt;는 플라톤의 세계관과 아리스토텔레스의 분류법에 기반을 두고 있다.
실제로 &lt;em&gt;클래스(class)&lt;/em&gt;라는 용어는 &lt;em&gt;분류(classification)&lt;/em&gt;와 직접적으로 관련된 용어다.&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;자바스크립트와 같은 &lt;strong&gt;프로토타입(prototype)&lt;/strong&gt; 기반의 OOP는
비트겐슈타인의 가족유사성 이론과 &lt;em&gt;로쉬의 프로토타입 이론&lt;/em&gt;에 기반을 두고 있다.&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;플라톤의 이데아와 클래스&lt;/h2&gt;&lt;p&gt;플라톤은 우리가 살고 있는 구체적인 현실 세계에 대응되는
추상적인 본질의 세계, &lt;em&gt;이데아(idea)&lt;/em&gt;가 존재한다고 보았다.
이 관점의 핵심은 현실 세계에서는 이 본질의 세계에 직접적으로 접근할 수가 없지만,
현실 세계에 실존하는 모든 구체적인 물질들의 본질은 이 본질의 세계에 존재한다는 것이다.&lt;/p&gt;&lt;p&gt;간단히 말해 현실에 존재하는 모든 새들을 생각해보자.
참새, 비둘기, 두루미, 펭귄, 타조, 키위 등 현실에 구체적으로 존재하는 모든 새들은
&lt;em&gt;새&lt;/em&gt;라는 본질을 공유하고 있으며, 그 본질은 이데아에 존재하는 것이다.&lt;/p&gt;&lt;h3&gt;이데아를 통해 이해한 우주의 생성 원리&lt;/h3&gt;&lt;p&gt;그렇다면 한 번 이데아 개념에 빅뱅 이론을 접목하여 우리가 사는 세상에 대해 해석해보자.&lt;/p&gt;&lt;p&gt;기본적으로 본질의 세계는 우리가 사는 세계와는 전혀 다른 차원에 존재하며,
우리 차원의 우주가 탄생하기 전부터 존재했을 것이라고 가정하자.
그리고 우리가 사는 차원에 빅뱅이 일어나 우주가 탄생하면서
다른 차원으로부터 행성의 본질을 토대로 구체적인 행성들이 생겨나고,
식물의 본질을 토대로 구체적인 식물들이 생겨나고,
동물의 본질을 토대로 구체적인 동물들이 생겨났을 것이라고 생각할 수 있다.&lt;/p&gt;&lt;p&gt;그리고 우리가 사는 세상에서 새로운 동식물이 생겨나고, 변화하고, 죽어가더라도
각 동물, 식물의 본질만큼은 본질의 세계에 그대로 존재하고 있을 것이라 생각할 수 있다.
또한 언젠가 이 본질의 세계 자체가 소멸하게 된다면,
그것은 아마 우리가 사는 현실 세상이 소멸한 이후일 것이다.
왜냐면 본질의 세계 없이는 우리가 사는 현실 세상은 성립될 수 없기 때문이다.&lt;/p&gt;&lt;h3&gt;JVM 메모리 구조에 대한 철학적 이해&lt;/h3&gt;&lt;p&gt;Java 등 대부분의 &lt;strong&gt;클래스 기반 객체지향 언어&lt;/strong&gt;들은 바로 이러한 관점에 기반을 두고 있다.
아래 코드를 함께 봐보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt; sparrow &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;참새&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt; pigeon &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;비둘기&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;프로그램에서 &lt;code&gt;Bird&lt;/code&gt;라는 클래스를 선언하는 경우,
해당 클래스에 대한 정보는 프로그램이 실행되고 메모리에 올라가 프로세스가 되는 시점에
JVM의 &amp;#x27;data 영역&amp;#x27;에 담기게 된다.
이 data 영역은 프로그램 전반에 걸쳐 공통적으로 사용되는 정보들이 관리되는 메모리 영역인데,
기본적으로 &lt;code&gt;1,2,3&lt;/code&gt;이나 &lt;code&gt;a,b,c&lt;/code&gt;와 같은 리터럴 정보들이 담겨 있는 곳이다.&lt;/p&gt;&lt;p&gt;그리고 &lt;code&gt;new Bird(&amp;quot;참새&amp;quot;)&lt;/code&gt;라는 명령어는
이 data 영역에 존재하는 Bird 클래스에 대한 정보를 활용하여
&amp;quot;참새&amp;quot;라는 구체적인 name 속성 값을 토대로 인스턴스를 하나 생성하라는 의미이다.
이러한 인스턴스는 &amp;#x27;heap 영역&amp;#x27;에서 생성되고 관리되며,
&lt;code&gt;sparrow&lt;/code&gt;와 &lt;code&gt;pigeon&lt;/code&gt;과 같은 변수들에는 바로 이 heap 영역에 존재하는 인스턴스의 메모리 주소, 즉 참조값이 담기게 된다.&lt;/p&gt;&lt;p&gt;그리고 이 클래스 정보가 관리되는 &lt;strong&gt;data 영역&lt;/strong&gt;과
인스턴스 정보가 관리되는 &lt;em&gt;heap 영역&lt;/em&gt;이 각각
플라톤이 설명한 &lt;strong&gt;본질의 세계 이데아&lt;/strong&gt;와 &lt;em&gt;구체적인 현실 세계&lt;/em&gt;라고 볼 수 있다.
Bird 클래스라는 &lt;strong&gt;본질&lt;/strong&gt;을 토대로 &amp;quot;참새&amp;quot;, &amp;quot;비둘기&amp;quot;와 같은 정보를 지닌
&lt;em&gt;구체적으로 실존하는 물질&lt;/em&gt;로서 Bird 인스턴스들이 생성된다는 것이다.&lt;/p&gt;&lt;h3&gt;아리스토텔레스의 분류법과 클래스&lt;/h3&gt;&lt;p&gt;이제 플라톤의 철학적 관점이 자바에 반영되었다는 점은 어느 정도 알겠다.
그런데 대체 클래스(class)라는 키워드는 어디에서 온 것일까?&lt;/p&gt;&lt;p&gt;이는 플라톤의 제자 아리스토텔레스의 &lt;strong&gt;분류(classification) 작업&lt;/strong&gt;과 관련이 있다.
그는 세상에 존재하는 모든 사물들을 각 사물끼리 서로 공유하는 속성들을 기준으로 분류하였다.&lt;/p&gt;&lt;p&gt;간단히 예를 들자면 살아 움직이는 동물 중에서도
&amp;quot;물 속에서 헤엄을 치고 공기 없이도 호흡이 가능한 동물들&amp;quot;은 기본적으로 &amp;#x27;어류&amp;#x27;에 해당된다고 볼 수 있다.
한편 &amp;quot;부리가 있고 날개가 있는 동물들&amp;quot;은 기본적으로 &amp;#x27;조류&amp;#x27;에 해당된다고 볼 수 있다.
이처럼 &lt;strong&gt;모든 개체가 공유하는 속성과 능력을 기반으로 개체들을 하나의 집단으로 분류한 것&lt;/strong&gt;이 바로 자바의 &lt;strong&gt;클래스&lt;/strong&gt;라고 볼 수 있다.&lt;/p&gt;&lt;p&gt;물론 조류 중에서도 각 개체들이 공유하는 속성들을 기반으로 &amp;#x27;비둘기&amp;#x27;, &amp;#x27;참새&amp;#x27;, &amp;#x27;앵무새&amp;#x27; 등 보다 더욱 세부적으로 구분할 수 있을 것이다.
이 경우 아마 모든 비둘기들이 공유하는 속성들과 모든 참새들이 공유하는 속성들 사이에는 다소 차이가 있을 것이다.
그러나 이처럼 다양한 개체차를 지닌 개별 사례(instance)들 중에서도 이들이 전원 공유하는 속성(부리가 있고 날개가 있는 동물)을
통해 조류라는 하나의 추상적인 범주(class)를 만들어내는 것이 가능하다는 것이 아리스토텔레스의 분류법의 핵심이다.&lt;/p&gt;&lt;p&gt;이 점을 이해하고 위의 자바 코드를 다시 본다면,
&lt;code&gt;Bird&lt;/code&gt;가 왜 &lt;strong&gt;클래스, 즉 &amp;#x27;범주&amp;#x27;&lt;/strong&gt;라고 불리고
&lt;code&gt;new Bird(~)&lt;/code&gt;로 생성된 개별 객체들이 왜 &lt;strong&gt;인스턴스(instance), 즉 &amp;#x27;사례&amp;#x27;&lt;/strong&gt;라고 불리는지에 대해 이해할 수 있을 것이다.
어떠한 개체차를 지니든 모든 조류는 근본적으로 &lt;code&gt;Bird&lt;/code&gt; 클래스의 인스턴스라고 볼 수 있기 때문이다.&lt;/p&gt;&lt;p&gt;여기서 나아가 수많은 새들 중에서도
&amp;quot;인간의 말을 따라하는 새&amp;quot;라는 공유 속성을 지닌 개체들을 &amp;quot;앵무새&amp;quot;로 분류하고,
&amp;quot;잠수를 할 수 있는 새&amp;quot;는 속성을 공유하는 개체들은 &amp;quot;펭귄&amp;quot;으로 분류할 수 있을 것이다.&lt;/p&gt;&lt;p&gt;이러한 세부 범주는 전부 &amp;#x27;조류&amp;#x27;라는 더 큰 클래스를 기반으로 생성된다고 볼 수 있다.
이러한 관계를 우리는 자바의 &lt;strong&gt;상속(inheritance)&lt;/strong&gt; 개념으로 이해할 수 있을 것이다.
아래는 &amp;#x27;조류&amp;#x27;를 &amp;quot;부리가 있고, 날개가 있으며, 날 수 있는 능력을 지닌 동물&amp;quot;로 보았을 때,
&amp;#x27;앵무새&amp;#x27;를 &amp;quot;조류의 모든 특성과 함께 말할 수 있는 능력도 지닌 동물&amp;quot;로 보는 경우를 자바의 상속 문법으로 간략히 표현한 결과이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; hasBeak &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; hasWings &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;I&amp;#x27;m a bird! I can fly!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Bird{&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;hasBeak=&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; hasBeak &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;, hasWings=&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; hasWings &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token char&quot;&gt;&amp;#x27;}&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Parrot&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;speak&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;I&amp;#x27;m a parrot! I can speak!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Parrot{&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;hasBeak=&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; hasBeak &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;, hasWings=&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; hasWings &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token char&quot;&gt;&amp;#x27;}&amp;#x27;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Application&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt; bird &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bird&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bird&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Bird{hasBeak=true, hasWings=true}&lt;/span&gt;
        bird&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// I&amp;#x27;m a bird! I can fly!&lt;/span&gt;

        &lt;span class=&quot;token class-name&quot;&gt;Parrot&lt;/span&gt; parrot &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Parrot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;out&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;parrot&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Parrot{hasBeak=true, hasWings=true}&lt;/span&gt;
        parrot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fly&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// I&amp;#x27;m a bird! I can fly!&lt;/span&gt;
        parrot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;speak&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// I&amp;#x27;m a parrot! I can speak!&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;보면 알겠지만 앵무새 인스턴스는 &lt;code&gt;Bird&lt;/code&gt; 클래스를 상속받았기 때문에
다른 모든 조류와 동일하게 &lt;code&gt;hasBeak&lt;/code&gt;과 &lt;code&gt;hasWings&lt;/code&gt; 속성의 값이 &lt;code&gt;true&lt;/code&gt;이며, &lt;code&gt;fly&lt;/code&gt; 메서드를 실행할 수 있다.
여기서 나아가 다른 조류는 못하는 &lt;code&gt;speak&lt;/code&gt; 메서드도 실행할 수 있다는 특수성을 지닌다.&lt;/p&gt;&lt;p&gt;물론 실제 생물학자들이 이러한 기준으로 조류를 분류하지 않는다.
만일 이러한 기준을 적용할 경우, 타조나 키위새와 같이 날지 못하는 조류는 존재할 수가 없기 때문이다.&lt;/p&gt;&lt;p&gt;그런데 솔직히 일반적인 대중의 입장에서 비둘기, 참새와 같은 동물들이나
타조, 키위새와 같은 동물들이 조류라는 점에서 서로 대등하다고 보는 것은 다소 이상하게 느껴질 수 있다.
일반 대중이 지닌 새에 대한 이미지는 분명 &lt;em&gt;날개를 지니고 날아다닐 수 있는 동물&lt;/em&gt;이다.
그렇다면 대체 우리의 머릿속에 존재하는 이 새라는 일반적인 이미지는 무엇일까?&lt;/p&gt;&lt;p&gt;바로 이러한 의문에 대한 답변을 최초로 제시한 것이 바로 비트겐슈타인이다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;h2&gt;비트겐슈타인과 프로토타입&lt;/h2&gt;&lt;p&gt;비트겐슈타인은 간단히 말해 철학, 언어학, 심리학에 지대한 영향을 미친 인물로 수백년에 한 명씩 나오는 천재라고 볼 수 있다.&lt;/p&gt;&lt;p&gt;기본적으로 그는 &lt;strong&gt;범주 내의 모든 개체들 사이에 공유되는 속성&lt;/strong&gt;을 기반으로 분류를 시도하는 행위 자체에 근본적인 한계가 있다고 보았다.
예를 들어 조류를 단순히 &amp;quot;날아다니는 동물&amp;quot;로 볼 경우 펭귄과 타조와 같은 예외들이 당연히 생겨날 수 밖에 없다.
그렇다고 이들을 조류가 아닌 포유류 혹은 양서류로 보기에는 어려움이 있기 때문에
생물학자들은 이들을 조류에 포함시키기 위해 조류에 대한 분류법을 인위적으로 수정하여야 했을 것이다.
그런데 예를 들어 펭귄과 타조를 포함시키기 위해 조류를 &amp;quot;날개가 있는 동물&amp;quot;로 규정한 경우
다시 키위새라는 예외가 생겨난다.&lt;/p&gt;&lt;p&gt;전통적인 분류법에서는 이처럼 공유 속성을 수정함으로써 점점 조류의 본질에 대한 정의에 가까워진다고 생각했을 것이다.
그러나 이러한 과정을 보며 비트겐슈타인은 애초에 조류라는 본질 자체가 존재하지 않기 때문에
이처럼 인위적인 수정 작업이 끝없이 생겨난다고 보았을 것이다.&lt;/p&gt;&lt;p&gt;그러한 관점에서 비트겐슈타인은 &amp;quot;세계에 미리 내재되어서 대상과 언어를 완전히 규정하는 어떤 언어란 존재하지 않는다&amp;quot;고 말하였다.
어렵게 느껴질 수 있지만, 간단히 말해 위에서 설명한 이데아를 통한 우주의 생성 원리를 부정한 것이라고 볼 수 있다.
만일 세상을 하나의 자바 애플리케이션이라고 보았을 때
비트겐슈타인은 애플리케이션이 실행되는 시점에 JVM의 data 영역에 클래스 정보가 미리 내재되고,
이를 기반으로 세상에 존재하는 수많은 사물들이 만들어지는 구조를 부정한 것이라고 볼 수 있다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/bc604c2a1b202f91ffe3c5e2ccf3b458/dd104/family-resemblance.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:66.25766871165644%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACd0lEQVQ4y42TaU8TURiF+6f9ARK/EeWLGjWCfMCaoCLKIpEUBsTK0tJ1SqftdJmW6TLTlbaztX3MTG0REqNv8t5kbt577plzzvUBKM0bCqpCOp+icF1EqSpIRQmpNG3323Ec7le7XkSvSHf2fO7ijMa0bnpklSwpWUSuyOQreVL5FJF0hHKtzHg89g50dI2TL+u09QaisEUisEFbaxAPHmFbFr7JZDJHzyk54pkYQkjgOHxMTa+htRoYljGfqRdlAq+f0igriAcbRHffkk/EOFxbpt/tTAFnoOlimlAq5P2uy7LVbVHVVGzbht8zHb3B6sMHaNcVqtlz1MwpcizCh8cL2KZ5y9AZOZRrisfKsi16/R6dXhvTMhlPxnOG7rReVxmPbjXttnSyicuphjPAgTGgplfR2hqqplJv1imqReRyzmPuaiuVMghHu/iXnxBOnhM53idyuOedD+3vkAweTU2Zgf6p599Kla74sbbisYwF9jj9/J7RaITwbhXxRLjVcDQeec667TKbsXOddmNTqVdodHVyV3HWlx55rge3P7L5bNG7aHvlOT+/bk4Z/qua3SZVverJ4F5yIOwQSV6QKUokpTi2Y9GsFjAGfXy2Y2OYhie+q6MbkaE59IwZGkNM27wDbg76BPxvkKNhlEKGSDhIVRYJ+hdpqQV8jVaDC/GCaDpCIpsgKkW9dgMdToW4vLr08mmYQw+w3+uy82KJghgn+m2b8NYnKukoB68W6Gp1fFpLI56JI+ZEsqUs+bLs5TAmxciUMiSzSdKF9Pzp2ZbJ5sslapUSCWEfwb9Kt3nN2eZjHMv4Pw3nGbyXgkIqTvLs+523/Avyxr4F1cLtPgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;가족유사성&quot; title=&quot;가족유사성&quot; src=&quot;/static/bc604c2a1b202f91ffe3c5e2ccf3b458/a6d36/family-resemblance.png&quot; srcSet=&quot;/static/bc604c2a1b202f91ffe3c5e2ccf3b458/222b7/family-resemblance.png 163w,/static/bc604c2a1b202f91ffe3c5e2ccf3b458/ff46a/family-resemblance.png 325w,/static/bc604c2a1b202f91ffe3c5e2ccf3b458/a6d36/family-resemblance.png 650w,/static/bc604c2a1b202f91ffe3c5e2ccf3b458/e548f/family-resemblance.png 975w,/static/bc604c2a1b202f91ffe3c5e2ccf3b458/dd104/family-resemblance.png 1064w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이러한 맥락에서 비트겐슈타인은 실제 현실에서도
사람들이 물질을 분류할 때 &lt;strong&gt;모든 개체들이 확실히 공유하는 최소한의 속성들만을 통해 분류하지 않는다&lt;/strong&gt;고 주장하였다.
그 대신 그는 사람들이 &lt;strong&gt;가족유사성(family resemblance)에 기반을 둔 분류&lt;/strong&gt;를 수행한다고 주장하였다.
위의 그림은 이 가족유사성을 설명할 때 가장 일반적으로 사용되는 예시이다.
9명의 남성들 전원이 공유하는 속성은 오로지 풍성한 턱수염을 지닌 남성이라는 점일 뿐이다.
만일 전통적인 분류법을 사용한다면 &amp;quot;턱수염을 지닌 남성&amp;quot;을 위의 범주의 공유 속성이라고 결론 내렸을 것이다.
그러나 9명의 남성들을 보면 몇몇 예외가 있더라도, &lt;em&gt;전반적으로&lt;/em&gt; 공유하는 속성이 몇 가지 있다고 느낀다.
이들은 &lt;em&gt;전반적으로&lt;/em&gt; 검은 머리(7/9), 큰 코(7/9), 안경(5/9), 콧수염(5/9) 등의 속성을 지니고 있다.&lt;/p&gt;&lt;p&gt;이러한 상황에서 만일 턱수염은 없지만 검은 머리, 큰 코,
안경, 콧수염을 지니고 있는 10번째 남성이 나타났다고 생각하자.
전통적인 분류법에 따르면 &amp;quot;턱수염을 지닌 남성&amp;quot;이라는 공유 속성을 더 이상 적용할 수 없으므로 이 기준으로는 이들을 동일 범주로 간주할 수 없게 되었다.
그러나 이 10명은 여전히 턱수염(9/10), 검은 머리(8/10), 큰 코(8/10), 안경(6/10), 콧수염(6/10) 등의 &lt;em&gt;전반적&lt;/em&gt;으로 공유한다.&lt;/p&gt;&lt;p&gt;가족유사성 이론이란 이처럼 개체들 사이에 존재하는 &lt;strong&gt;전형적인(typical) 속성들을 통해 이들을 동일한 범주로 간주할 수 있다&lt;/strong&gt;는 이론이다.
그리고 하나의 범주 내에는 이러한 전형적인 속성을 유난히 많이 지닌 개체도 존재할 수 있고,
유난히 덜 지닌 개체가 존재한다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;그리고 이러한 관점을 계승하고 발전시킨 것이 바로 로쉬의 프로토타입 이론이다.&lt;/p&gt;&lt;h3&gt;프로토타입 이론&lt;/h3&gt;&lt;p&gt;로쉬는 사람들이 동일 범주 내의 사물들을 분류할 때 가족유사성이 높은 전형적인 것과
가족유사성이 낮은 비전형적인 것들로 등급을 매겨 분류한다고 설명하였다.
그리고 특정 범주의 모든 사물들 중 가장 전형적인 사물이
바로 해당 범주의 &lt;strong&gt;원형(prototype)&lt;/strong&gt;이 되는 것이다.&lt;/p&gt;&lt;p&gt;그동안 예시로 든 조류를 기준으로 생각해보자.
전통적인 분류법에서는 동물들을 분류할 때 공유 속성에 기반을 두어 조류가 맞는지, 아닌지의 여부로 조류를 분류하였다.
이는 참새, 두루미, 타조, 키위새, 앵무새 등 조류로 분류된 모든 개체들이 조류라는 측면에서 서로 대등한 지위를 지닌다는 것을 의미한다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/6a14318fadbb71d425d61a7e0f827603/9685e/prototype-theory.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:85.88957055214723%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACIElEQVQ4y3VUyaoCMRD05z3rWfQgeBFERT2pICjuIoK7KO6K+74v9aiGyMzoC4RMetLV1dWdmN7vN9Tk2O/32O12eL1e8r1er2XP781mg+12i8vlAjWUn1pN6gcBOOr1OgKBAMbjsYCpw9frFbfb7ROI4MpHC2rSsuM6mUzgcDgEeD6fIxKJIB6Po1ar4XQ6CcPn84nH44HVaiWrjqEWkAx4oFAooN/vi61YLMLn88HtdoudrMiO4ASmHApQGBq1YGqcdMxms2g0GhKENjorhgRUWupSNhqUbh6PB3a7HbPZTPQcjUaiHc8QlIFCoRCGw6GuBjpARiQTOlQqFQwGAzSbTQnSbreRTCbR6/WwXC4RDAZRKpV0LL8YkgF1PB6POJ/PAtbtdpHP52WdTqfodDrIZDLCkIF59qtt1OZwOOB+v4tzOp0WJpzRaFRaiVqSbTgcFmBqSZ9/AVXFyuUyrFbrR89cLgev1ytMCWSz2aSNqNvPKmsrzBTIkgXx+/3CioVxuVxwOp3yjymTOeWhND8ZKoNixYKkUinRNZFIiARschaCfchBDY1t9wVIXXgDmA6dmRJTjsViUhQGIkuyJiCz4v5nH7IFOJkmD7daLSwWi49N9RpTJTBbiQ2u09D42jAd6khnRmfKrCSZ0pm3x2KxwGw2S4GMGX5dPdU+WmCy4+RjUa1WpYUIbAT7+dpotVSvC8HVW0g7gfkqaX0Uwz8xOAd2Ls4AWQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;프로토타입 이론&quot; title=&quot;프로토타입 이론&quot; src=&quot;/static/6a14318fadbb71d425d61a7e0f827603/a6d36/prototype-theory.png&quot; srcSet=&quot;/static/6a14318fadbb71d425d61a7e0f827603/222b7/prototype-theory.png 163w,/static/6a14318fadbb71d425d61a7e0f827603/ff46a/prototype-theory.png 325w,/static/6a14318fadbb71d425d61a7e0f827603/a6d36/prototype-theory.png 650w,/static/6a14318fadbb71d425d61a7e0f827603/e548f/prototype-theory.png 975w,/static/6a14318fadbb71d425d61a7e0f827603/3c492/prototype-theory.png 1300w,/static/6a14318fadbb71d425d61a7e0f827603/9685e/prototype-theory.png 1336w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;그러나 프로토타입 이론은 &lt;em&gt;&amp;quot;새인가, 새가 아닌가&amp;quot;&lt;/em&gt;라는 &lt;strong&gt;이분법적 구조&lt;/strong&gt;에서 벗어나
다시 &lt;strong&gt;동일 범주 내에서&lt;/strong&gt; &lt;em&gt;&amp;quot;얼마나 조류스러운가&amp;quot;&lt;/em&gt;라는 &lt;strong&gt;정도&lt;/strong&gt;의 측면으로 대상을 분류하고자 한다.&lt;/p&gt;&lt;p&gt;프로토타입에 기반한 분류법에 따르면 인간들은 기본적으로
&lt;em&gt;대부분의&lt;/em&gt; 조류들이 &lt;em&gt;전반적으로 공유&lt;/em&gt;하는 속성들을 파악하고,
그러한 &lt;em&gt;전형적인 속성&lt;/em&gt;을 가장 많이 지니고 있는 &lt;strong&gt;전형적인 조류 개체&lt;/strong&gt;를 새의 &lt;strong&gt;원형, 즉 프로토타입&lt;/strong&gt;으로 설정한다.
이후 프로토타입으로 설정된 개체(robin, 지빠귀)를 중심으로
얼마나 조류의 전형적인 특성들을 덜 지녔는지에 따라 각 조류를 위계적으로 구분한다.
이러한 작업을 거침으로써 우리는
프로토타입으로부터 거리가 있는 타조와 펭귄이 다른 조류들에 비해 &amp;#x27;비전형적인 새&amp;#x27;라고 말할 수 있게 된다.&lt;/p&gt;&lt;p&gt;이는 플라톤/아리스토텔레스의 관점에 대응되는 철학적인 주장임과 동시에
사람들이 실제로 무의식적으로 사물을 분류하는 인지 메커니즘이다.&lt;/p&gt;&lt;h3&gt;프로토타입 기반의 객체지향&lt;/h3&gt;&lt;p&gt;이제 다시 프로그래밍 이야기로 돌아오자.&lt;/p&gt;&lt;p&gt;자바스크립트는 전통적인 &lt;strong&gt;클래스 기반의 객체지향&lt;/strong&gt;과는 다른
&lt;strong&gt;프로토타입 기반의 객체지향&lt;/strong&gt;이라는 새로운 개념을 내세우며 등장하였다.
이 둘은 어떠한 차이를 지닐까?&lt;/p&gt;&lt;p&gt;자바에서의 객체는 data 영역에 관리되고 있는 클래스 정보라는 틀에 맞추어 생성된다.
이 클래스 정보는 그 자체로는 heap 영역과 stack 영역이라는 &amp;#x27;현실 세계&amp;#x27;와는 동떨어진 차원에 존재하고 있다.&lt;/p&gt;&lt;p&gt;그러나 자바스크립트에서의 객체는 기본적으로 &lt;strong&gt;다른 객체를 기반으로 생성&lt;/strong&gt;된다고 볼 수 있다.
현실에 존재하는 또 다른 객체인 &lt;em&gt;프로토타입&lt;/em&gt;를 복제/참조하는 방식으로
데이터가 생성되기 때문에 클래스와는 구조 자체가 다르다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;또한 상속에 있어서도 자바는 &lt;strong&gt;추상적인 두 클래스 사이에서&lt;/strong&gt; 상속이 일어나지만
자바스크립트는 &lt;strong&gt;구체적인 객체들 사이에서&lt;/strong&gt; 복제를 통해 데이터가 생성된다.&lt;/p&gt;&lt;p&gt;이에 대해 아주 가볍게만 알아보자.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; stringObject &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;a,b&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

stringObject&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;,&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [&amp;#x27;a&amp;#x27;, &amp;#x27;b&amp;#x27;]&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;stringObject&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__proto__&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// String { constructor: ƒ String(), ..., split: ƒ split(), ... }&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;stringObject&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__proto__&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__proto__&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// { constructor: ƒ Object(), ... }&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;stringObject&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__proto__ &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;stringObject&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__proto__&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;__proto__ &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;위와 같이 &lt;code&gt;new String(&amp;quot;a,b&amp;quot;)&lt;/code&gt;를 통해 String 인스턴스를 생성한 경우,
우리는 자연스럽게 split과 같은 다양한 메서드를 호출할 수 있게 된다.&lt;/p&gt;&lt;p&gt;이러한 메서드들은 &lt;code&gt;String.prototype&lt;/code&gt; 객체에 담겨있는데,
String 인스턴스에서는 &lt;code&gt;__proto__&lt;/code&gt; 속성을 통해 이 프로토타입 객체에
접근하고 그 기능들을 호출할 수 있게 된다.&lt;/p&gt;&lt;p&gt;그리고 모든 프로토타입 객체들은 최종적으로 Object.prototype을 가리키고 있다.
이처럼 실체를 지닌 객체들 간의 참조 관계가 바로 자바스크립트에서의 상속이다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;개인적으로 철학 및 심리학 이론으로서
프로토타입 이론이 플라톤의 관점에 비해 더 합리적이고 과학적이라고 생각한다.
다만, 프로그래밍 언어로서 클래스와 프로토타입 개념을 굳이 비교한다면
성능, 안정성 등의 요소를 복합적으로 고려해야 한다고 생각된다.&lt;/p&gt;&lt;p&gt;솔직히 이러한 주제에 대해 나도 흥미를 느낄 뿐이지 정확히 아는 것은 아니다.
또한 해당 게시글에서 억지로 비유를 사용하다보니 해석 방식에 따라 충분히 불편할 수 있는 내용들도 있다고 생각한다.&lt;/p&gt;&lt;p&gt;다만, 어떤 분야에서든 그동안 당연하게 여겨온 개념들에 대해 자세히 파고드는 것은 중요하다고 생각한다.
이런 주제에 대해 보다 깊게 알아보고 싶다면 아래에 기재한 참고문헌이나 각종 서적을 참고하기를 바란다.
그리고 해당 게시글을 일종의 화두라고 생각하고 각자 본인만의 관점과 해석을 정립해나가는 것이 좋지 않을까 한다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.56.4713&amp;amp;rep=rep1&amp;amp;type=pdf&quot;&gt;Classes vs Prototypes - Some Philosophical and Historical Observations&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://medium.com/@limsungmook/%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%8A%94-%EC%99%9C-%ED%94%84%EB%A1%9C%ED%86%A0%ED%83%80%EC%9E%85%EC%9D%84-%EC%84%A0%ED%83%9D%ED%96%88%EC%9D%84%EA%B9%8C-997f985adb42&quot;&gt;자바스크립트는 왜 프로토타입을 선택했을까(임성묵 개발자)&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;엄밀히 말해 아리스토텔레스의 구분법(classification)은 19세기에 와서 휴얼(Whewell)과 제번스(Jevons)에 의해
최초로 비판받게 되었다. 이에 대해 알고 싶으면 한 번 검색해보기를 바란다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[JS] 프록시 패턴과 프런트엔드 커스텀 캐쉬 구현]]></title><description><![CDATA[애플리케이션 외부 대상을 대리자를 통해 간접적으로 접근하는 방식으로 프록시 패턴이 사용될 수 있다. 대리자는 외부 서버로부터 받은 데이터와 그 유효기간을 캐쉬의 형태로 관리함으로써 서버에 대한 접근 빈도를 줄이고 과한 리소스 낭비를 절감할 수 있다.]]></description><link>https://bugoverdose.github.io/development/proxy-and-frontend-custom-cache/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/proxy-and-frontend-custom-cache/</guid><pubDate>Sat, 05 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;strong&gt;프록시 패턴(proxy pattern)&lt;/strong&gt;이란
특정 데이터에 대한 접근을 중간에서 가로채는 대리자(proxy)를 두는 디자인 패턴을 의미한다.&lt;/p&gt;&lt;p&gt;애플리케이션에서 해당 데이터에 직접적으로 접근할 권한은 오직 이 대리자에게만 있으며,
애플리케이션 내 다른 요소들은 오직 이 대리자를 통해서만 해당 데이터에 대한 접근을 시도할 수 있다.&lt;/p&gt;&lt;h2&gt;Proxy 클래스의 이해&lt;/h2&gt;&lt;p&gt;자바스크립트와 자바에 모두 &lt;code&gt;Proxy&lt;/code&gt;라는 클래스가 내장되어있을 정도로
많은 프로그래밍 언어들에서 프록시 패턴을 위한 문법을 별도로 지원한다.&lt;/p&gt;&lt;p&gt;아래는 &lt;code&gt;Proxy&lt;/code&gt;를 통해 가볍게 구현한 자바스크립트 예제 코드이다.
&lt;code&gt;new Proxy&lt;/code&gt;의 첫 번째 인자에는 해당 프록시가 직접적으로 접근할 원본 객체가 담기며,
두 번째 인자에는 해당 프록시가 호출될 때 실행될 코드인 &lt;code&gt;handler&lt;/code&gt; 객체이다.&lt;/p&gt;&lt;p&gt;애플리케이션 내에서 &lt;code&gt;proxyPerson&lt;/code&gt; 객체를 사용하는 경우
아래와 같이 유효성 검증 등 다양한 작업을 수행할 수 있으며
&lt;code&gt;person&lt;/code&gt; 객체에 대한 &lt;strong&gt;직접적인 접근 여부&lt;/strong&gt;를 결정할 수 있다.
아래 코드에서 가장 중요한 방어로직은 &lt;code&gt;age&lt;/code&gt;와 &lt;code&gt;name&lt;/code&gt; 이외의 속성을
원본 객체에 추가하려는 경우 에러라고 간주한다는 점이다.
한편, 이와 같은 방어로직 외에도 들어온 set에서 데이터에 변형을 가하여 각 prop에 저장하거나,
원본 객체는 그대로 두고 get에서 데이터를 반환하는 시점에만 변형을 가하는 등의 작업도 수행할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; person &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;Jeong&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; personProxy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Proxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;prop&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// return `${prop} is ${obj[prop]}` // 예시) formatting한 데이터를 반환하는 경우&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Reflect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prop&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// == `obj[prop]`&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prop&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prop &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;age&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; prop &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;only age and name property are allowed&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prop &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;age&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;number&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;age should be a number&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prop &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;name should be at least 2 letters long&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    Reflect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prop&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// == `obj[prop] = value;`&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제 실제로 위에서 설정한 프록시 객체를 사용해보자.
유의해야 할 점은 &lt;code&gt;handler&lt;/code&gt; 객체에 설정해놓은 &lt;code&gt;get&lt;/code&gt;과 &lt;code&gt;set&lt;/code&gt;은
일반적인 함수처럼 &lt;code&gt;get()&lt;/code&gt;, &lt;code&gt;set()&lt;/code&gt;와 같이 호출하는 것이 아니라는 점이다.
자바스크립트의 경우 이처럼 getter와 setter를 설정하는 경우,
아래와 같이 일반적인 속성을 다루듯이 값을 호출하고 할당할 수 있다.
이는 자바스크립트 클래스 문법 등 다양한 곳에서 옅볼 수 있는 기능이다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;personProxy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Jeong&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;personProxy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 10&lt;/span&gt;

personProxy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;70&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;personProxy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 70&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;다음은 프록시 객체에 설정해놓은 유의성 검증 과정에서 예외 처리되어
실제 원본 객체에 접근하지 못하게 된 경우이다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;personProxy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nonExistentProperty&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// null&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  personProxy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nonExistentProperty &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// only age and name property are allowed&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  personProxy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;J&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// name should be at least 2 letters long&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;personProxy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Jeong&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  personProxy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;100&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;quot;age should be a number&amp;quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;personProxy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 70&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;마지막으로 &lt;code&gt;handler&lt;/code&gt; 객체에 사용된 &lt;code&gt;Reflect&lt;/code&gt;에 대해 가볍게 알아보자.
&lt;code&gt;Reflect&lt;/code&gt;는 자바스크립트에 내장된 객체로 &lt;code&gt;Proxy&lt;/code&gt; 클래스와는 별개의 존재이다.
때문에 Proxy handler의 get과 set에서 굳이 &lt;code&gt;Reflect&lt;/code&gt;를 사용하지 않고
&lt;code&gt;obj[property]&lt;/code&gt;와 같이 값에 접근하고, &lt;code&gt;obj[property] = value&lt;/code&gt;와 같이 값을 재할당하여도 문제는 없다.
다만, &lt;code&gt;Reflect&lt;/code&gt;의 get과 set 메서드의 매개변수가
&lt;code&gt;Proxy&lt;/code&gt; handler의 get과 set에 들어오는 인자에 적절하게 대응되기 때문에
함께 쓰는 것이 가독성 측면에서 나쁘지 않다고 생각된다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Reflect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Jeong&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Reflect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;age&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Reflect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;age&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 1&lt;/span&gt;

Reflect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;new_key&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true&lt;/span&gt;
Reflect&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;new_key&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 100&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// {name: &amp;#x27;Jeong&amp;#x27;, age: 1, non-existing-key: 100}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;대안: 커스텀 클래스 활용&lt;/h3&gt;&lt;p&gt;사실 위의 같은 기능은 굳이 중간에 대리자를 두지 않더라도 구현될 수 있다.
특히 직접 클래스를 정의하고 인스턴스를 생성하는 방법이 가장 일반적일 것이다.&lt;/p&gt;&lt;p&gt;아래 예시 코드에서 클래스의 속성명들과 유효성 검증에 사용되는 메서드명들은 전부 &lt;code&gt;#&lt;/code&gt;로 시작한다.
즉, 이들은 전부 &lt;code&gt;private&lt;/code&gt; 속성 및 메서드이므로 인스턴스 내부에서만 호출될 수 있다.&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;p&gt;때문에 외부에서는 &lt;strong&gt;원본 객체 자체에는 직접 접근&lt;/strong&gt;할 수 있지만,
&lt;strong&gt;해당 객체 내부의 속성들&lt;/strong&gt;은 오직 &lt;code&gt;public&lt;/code&gt; 메서드들인
&lt;code&gt;getter&lt;/code&gt;와 &lt;code&gt;setter&lt;/code&gt;를 통해서만 간접적으로 접근할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  #name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// == [typescript] private name;&lt;/span&gt;
  #age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// == [typescript] private age;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;#validateName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;#validateAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;getAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;setName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;#validateName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;setAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;#validateAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#age &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; age&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;#validateName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;string&amp;quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;name should be a string at least 2 letters long&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;#validateAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; age &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;number&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;age should be a number&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;아래는 실제로 인스턴스를 생성하고, &lt;code&gt;getter&lt;/code&gt;와 &lt;code&gt;setter&lt;/code&gt;를 실행한 결과이다.
&lt;code&gt;constructor&lt;/code&gt;와 &lt;code&gt;setter&lt;/code&gt;에서 유효성 검증 코드가 실행되기 때문에
속성의 값은 언제나 특정 요건들을 충족할 것임을 보장할 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; person &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;Jeong&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;J&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: name should be at least 2 letters long&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: Jeong&lt;/span&gt;

person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;person&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 출력: 100&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3&gt;예제 비교&lt;/h3&gt;&lt;p&gt;위와 같이 &lt;code&gt;Proxy&lt;/code&gt;를 사용한 경우와 별도로 클래스를 선언하는 경우를 비교해보자.&lt;/p&gt;&lt;p&gt;기본적으로 Proxy 객체를 사용하는 경우
프록시 생성 과정도 클래스 선언 과정에 비해 코드가 간결하며,
마치 원본 객체를 직접 다루듯이 일반적인 자바스크립트 문법의 스타일로 프록시 객체를 다룰 수 있기 때문에
코드 가독성이 더 높다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;다만, 기본적으로 하나의 Proxy 객체는 하나의 객체에 대해 등록된다.
그에 반해 하나의 클래스를 사용하면 복수의 인스턴스를 생성할 수 있기 때문에
동일한 구조의 데이터가 동시에 여러 개 존재해야 하는 경우,
클래스를 사용하는 것이 합리적이라고 볼 수 있다.&lt;/p&gt;&lt;h2&gt;프록시 패턴과 캐쉬&lt;/h2&gt;&lt;p&gt;위의 예제처럼 &lt;code&gt;Proxy&lt;/code&gt; 클래스를 사용하여
특정 데이터에 접근할 때마다 자동으로 일련의 코드가 실행되도록 하는 것은
유지보수 차원에서 분명 중요하다.
하지만 이는 리팩토링 차원의 이야기일 뿐, 그 자체로 새로운 기능을 수행한다고 보기는 어렵다.
실제로 위의 클래스 활용 예제를 통해
우리는 굳이 중간에 대리자 역할을 하는 프록시 객체를 두지 않더라도
이러한 작업을 수행할 수 있음을 알 수 있다.&lt;/p&gt;&lt;p&gt;그러나 이는 철저히 애플리케이션 내부에 존재하는 데이터만을 다루고 있기 때문이다.
애플리케이션 내부에 존재하는 데이터에 대해 프록시를 두어 간접적으로 접근하는 것은
직접적으로 접근하는 상황과 비교했을 때 성능상으로 딱히 유의미한 차이가 없다.&lt;/p&gt;&lt;p&gt;그러한 맥락에서 프록시 패턴은
&lt;strong&gt;접근하는 데 어느 정도 리소스가 드는 대상&lt;/strong&gt;에 대해 대리자를 두었을 때
리팩토링 이상의 의미가 비로소 생겨난다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;접근하는 데 리소스가 드는 상황의 가장 대표적인 예는
백엔드 애플리케이션에서 DBMS에 요청을 보내거나,
프런트엔드 애플리케이션에서 HTTP 요청을 보내는 등
&lt;strong&gt;외부 서버에 데이터를 요청하는 상황&lt;/strong&gt;일 것이다.&lt;/p&gt;&lt;p&gt;만일 외부 서버에 1초 간격으로 동일한 데이터를 반복적으로 요청한다고 가정해보자.
이때 SELECT문이나 GET 요청을 통해 응답받는 데이터가
&lt;strong&gt;빈번하게 변하지 않거나 실제 데이터베이스에 존재하는 데이터와 실시간으로 정확하게 일치할 필요가 없는 경우&lt;/strong&gt;,
우리는 1초마다 실제로 외부 서버에 요청을 보내는 대신
&lt;strong&gt;이전에 동일한 요청에 대해 응답받은 데이터를 그대로 재사용&lt;/strong&gt;해도 무관하다.
이를 통해 외부 대상에 대한 접근 빈도가 줄어들면
클라이언트 쪽은 성능 개선의 효과를 얻으며,
서버 쪽은 처리해야 하는 요청이 줄어들게 됨으로써 불필요한 자원 낭비를 줄일 수 있게 된다.&lt;/p&gt;&lt;p&gt;물론 아무리 실제 데이터와의 차이가 허용되더라도
얼마나 오랜 기간 동안 이전에 받은 데이터를 그대로 사용할지에 대해 정할 필요는 있을 것이다.
10분, 1시간, 1주일 등 데이터의 유효기간을 설정하고 그 유효기간을 넘어가게 되면
외부 서버로 요청을 보내 데이터를 업데이트하는 과정까지 있어야 비로소 &lt;strong&gt;캐쉬(cache)&lt;/strong&gt;가 구현되었다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;즉, 캐쉬는 애플리케이션 내부에서 관리되는 [1] 특정 요청에 대해 응답받은 데이터와 [2] 해당 데이터의 유효기간 정보를 의미한다.
이는 개별적인 백엔드, 프론트엔드 애플리케이션만이 아니라 인터넷 곳곳에 자연스럽게 존재하는 기능이며,
프록시 패턴을 통해 이러한 캐쉬 기능을 쉽게 구현할 수 있다.
이해하기 쉬운 예로 대규모 서비스의 경우 별도의 캐쉬 서버를 두는 경우가 종종 있는데,
이 캐쉬 서버를 통해서 백엔드 애플리케이션에 접근한다는 점에서 캐쉬 서버는 백엔드 애플리케이션에 대한 대리자라고 볼 수 있다.&lt;/p&gt;&lt;h2&gt;프런트엔드 커스텀 캐쉬 구현&lt;/h2&gt;&lt;p&gt;아래는 프런트엔드 애플리케이션 내부에서 캐쉬 저장소를 프록시 패턴을 통해 구현한 예제이다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;api.js&lt;/code&gt;: &lt;code&gt;fetch&lt;/code&gt; 함수를 통해 외부 서버로 GET 요청을 보내고 응답받은 데이터를 반환받는 함수들.&lt;ul&gt;&lt;li&gt;&lt;code&gt;fetchCoinWithNoCache&lt;/code&gt;: 캐쉬 존재 여부 확인하지 않고 무조건 요청을 보내고, 캐쉬도 저장하지 않음.&lt;/li&gt;&lt;li&gt;&lt;code&gt;fetchCoinWithDefaultCache&lt;/code&gt;: 브라우저에 HTTP 캐쉬가 존재하는 경우 활용, 없으면 요청을 보내고 캐쉬 저장함.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// cache: no-store : the browser does not look for cache &amp;amp; don&amp;#x27;t update the cache&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;fetchCoinWithNoCache&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;coinId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;https://api.coinpaprika.com/v1/tickers/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;coinId&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token literal-property property&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;no-store&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// default : the browser looks for a matching request in its HTTP cache&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;fetchCoinWithDefaultCache&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;coinId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;https://api.coinpaprika.com/v1/tickers/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;coinId&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt;
    response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;CoinCache.js&lt;/code&gt;: 데이터와 데이터의 만료시점으로 구성된 개별 캐쉬 데이터.&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CoinCache&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  #data&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  #expirationTime&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#expirationTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;#generateExpirationTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;getData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#data&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;updateData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#expirationTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;#generateExpirationTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;isExpired&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; curTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#expirationTime &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; curTime&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 캐쉬 생성 및 업데이트 시점으로부터 1분 후를 만료 기간으로 설정&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;#generateExpirationTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; registeredTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; minuteInMiliseconds &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; registeredTime &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; minuteInMiliseconds&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; CoinCache&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;CacheRepository.js&lt;/code&gt;: 커스텀 캐쉬 저장소. 싱글톤 패턴으로 관리되며, 외부 서버와 직접적으로 통신하는 프록시 객체.&lt;ul&gt;&lt;li&gt;&lt;code&gt;#coins&lt;/code&gt;: 모든 캐쉬 정보가 담긴 객체. coinId를 key값으로 하여
CoinCache 인스턴스를 개별적으로 관리.&lt;/li&gt;&lt;li&gt;&lt;code&gt;findById&lt;/code&gt;: 인자로 받은 해당 coinId에 해당되는 캐쉬의 존재 여부와 유효기간을 확인하여,
필요에 따라 외부 서버로 요청을 보내 캐쉬를 생성 혹은 수정.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CoinCache &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;./CoinCache&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fetchCoinWithNoCache &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;../api&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheRepository&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  #coins&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#coins &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;coinId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;look for cache in application!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; coin &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#coins&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;coinId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// (1) 캐쉬가 존재하고 만료기간이 지나지 않았다면 그대로 반환&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;coin &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;coin&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isExpired&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; coin&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; newData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchCoinWithNoCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;coinId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;fetch data &amp;amp; generate new cache!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// (2) 캐쉬가 없는 경우 외부 서버로 요청을 보내고 캐쉬를 생성하여 저장하고 데이터 반환&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;coin&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#coins&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;coinId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CoinCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; newData&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// (3) 존재하는 캐쉬의 만료기간이 지난 경우 외부 서버로 요청을 보내어 캐쉬 업데이트하고 데이터 반환&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;#coins&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;coinId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;updateData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; newData&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; CacheRepository&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;FetchButtons.js&lt;/code&gt;: 외부 서버로 데이터를 요청하는 버튼 3가지를 지닌 컴포넌트.&lt;ul&gt;&lt;li&gt;각 버튼은 각기 다른 캐쉬 기능을 사용하며, 특정 coinId에 해당되는 데이터에 접근하는 데 걸린 시간을 콘솔에 출력.&lt;/li&gt;&lt;li&gt;&lt;code&gt;onNoCacheClick&lt;/code&gt;: fetch 함수의 디폴트 캐쉬 기능을 사용하지 않고 무조건 요청을 보내는 경우&lt;/li&gt;&lt;li&gt;&lt;code&gt;onDefaultCacheClick&lt;/code&gt;: fetch 함수의 디폴트 캐쉬 기능을 사용하여 필요에 따라 요청을 보내는 경우&lt;/li&gt;&lt;li&gt;&lt;code&gt;onCustomCacheClick&lt;/code&gt; 커스텀 캐쉬 저장소를 사용하여 필요에 따라 요청을 보내는 경우&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useState &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;react&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fetchCoinWithDefaultCache&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fetchCoinWithNoCache &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;../api&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CacheRepository &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;../domains/CacheRepository&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;FetchButtons&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; coinId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinName &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;cacheRepository&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CacheRepository&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// (1) fetch 함수의 디폴트 캐쉬 기능을 사용하지 않고 무조건 요청을 보내는 경우&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;onNoCacheClick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Get &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;coinName&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; data : (no cache)&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; startTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchCoinWithNoCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;coinId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; endTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;It took &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;endTime &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; startTime&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;ms.&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// (2) fetch 함수의 디폴트 캐쉬 기능을 사용하여 필요에 따라 요청을 보내는 경우&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;onDefaultCacheClick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Get &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;coinName&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; data : (default cache)&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; startTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchCoinWithDefaultCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;coinId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; endTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;It took &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;endTime &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; startTime&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;ms.&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// (3) 커스텀 캐쉬 저장소를 사용하여 필요에 따라 요청을 보내는 경우&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;onCustomCacheClick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Get &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;coinName&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; data : (custom cache)&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; startTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; cacheRepository&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;coinId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; endTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;It took &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;endTime &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; startTime&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;ms.&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;coinName&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onNoCacheClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
          No Cache
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onDefaultCacheClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
          Default Cache
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;onCustomCacheClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
          Custom Cache
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; FetchButtons&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;기타 React 애플리케이션 기본 코드들 생략&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;최종 결과물&lt;/h3&gt;&lt;p&gt;다음은 위의 애플리케이션을 브라우저에 실행하고, 3가지 버튼을 각각 3번씩 클릭해본 결과이다.
버튼에 설정한 이벤트리스너 함수가 호출되면서 콘솔에 출력한 결과를 차근차근 확인해보자.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/5b1f319d52e6cddd1d352382dc93731b/b1ffc/compare-cache-example.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:66.87116564417178%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC3klEQVQ4y32TS08bVxiG50d0kUWp72N7PGPPjO+3REiov6rNohgiudl000r9AU2VRRdVK1nIt9r4IhzicUNISABRELdySwu4kgM81TkIpG76SZ/es5h59L7fd45yfHyM4zhcXV3xf3VzcyP1+2+/I+n38/n0DFnTxtajFDQNn9ePxxtAOT09ZW9v7x748e8PbPXabA97/L7m4Lwb8f6PNd6tveH45E++efqUqBok/WiGsGHhj5gktAg+jw+3AAqHOzs7fJxMJPDirw90KhWarV951n7Gj90feP5blec/9am23vLlF0+Iezzkkxnimo6hhkirKl4BdAdQDg8PWVlZ4eTkRLocj/+h1mjS6fVp1Js06w1a7QE//1Kn13/F49l5fPanpB6aWLkIejKAkQmhpjX8D0MoIu5wOJQuJ5MJ4/GYWq1Gt9ORWq3V6Pe7VKsLjIYvKZXncNlB0tlHxOIpVM0gbJho4RhqQUM5OjpifX1dgkRdXl7S6XRYWlpicXFRngeDAa1Wm9XXq5TK83gtP9lMAdOOE9Yi6NEouhYlWIygiKgi9l0JYLPZpNvtSm00GvR6ParVKiPHYfbJHA9sFWO6gD9j85ml44obuEXnAii7u7tsbW3dA+8jd7tSRQvgwsICw+FLZktlprxpzHgRPZbHMAvYqWm0WBGXJ4pycHDA5uYm19fXt1u+uKBer0ugUNF3Dh1nKIG+UIp8oUAimcGyE5iWjR5N4vJZt5H39/flQu4iC5iYm5jf3Qzb7TZvVl9Tmv8aj5okmy9i2ikihoVlJ9GMFC6veXsPNzY2ZGyxoPPzc+lKgIT+N/KydOhVE2RzOYyoiW7EpMNwxL4FimuzvLx8vxjhUPwsHAkVLeCVSoUXLwZ8VSrjCRbJ5GcwzDx6LIeZKBLS87i8FsrZ2Zm8Ntvb2/K9iqWIiOJ9CxU9Go3o9/vyu7n5Mp88CKBqSVxegym3zpQ7ItXtCfIvMbXVTFJFxSQAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;예제 데모&quot; title=&quot;예제 데모&quot; src=&quot;/static/5b1f319d52e6cddd1d352382dc93731b/a6d36/compare-cache-example.png&quot; srcSet=&quot;/static/5b1f319d52e6cddd1d352382dc93731b/222b7/compare-cache-example.png 163w,/static/5b1f319d52e6cddd1d352382dc93731b/ff46a/compare-cache-example.png 325w,/static/5b1f319d52e6cddd1d352382dc93731b/a6d36/compare-cache-example.png 650w,/static/5b1f319d52e6cddd1d352382dc93731b/e548f/compare-cache-example.png 975w,/static/5b1f319d52e6cddd1d352382dc93731b/3c492/compare-cache-example.png 1300w,/static/5b1f319d52e6cddd1d352382dc93731b/b1ffc/compare-cache-example.png 1492w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;우선 빨간 부분은 &lt;code&gt;fetch&lt;/code&gt; 함수의 cache 옵션을 통해
&lt;strong&gt;브라우저에 내장된 HTTP 캐쉬 기능을 끈 상태&lt;/strong&gt;로 같은 요청을 3번 보낸 결과이다.
기본적으로 3번 모두 외부 서버로 요청을 직접 보냈음에도
두 번째 요청부터 응답 시간이 &lt;code&gt;1/3&lt;/code&gt; 정도로 감소하였음을 알 수 있다.
이는 &lt;em&gt;우리가 고려하지 못한 어딘가에서 (아마 서버 쪽의) 캐쉬 기능이 실행된 것으로 추측된다&lt;/em&gt;.&lt;/p&gt;&lt;p&gt;녹색 부분은 &lt;code&gt;fetch&lt;/code&gt; 함수의 디폴트 cache 옵션을 그대로 사용함으로써
&lt;strong&gt;브라우저에 내장된 HTTP 캐쉬 기능을 그대로 사용하는 상태&lt;/strong&gt;로 같은 요청을 3번 보낸 결과이다.
마찬가지로 두 번째 요청부터는 응답 시간이 감소하였는데
&lt;code&gt;1/20&lt;/code&gt; 정도로 급격히 감소했다는 점에서
외부 서버로 요청을 보내지 않고 브라우저에 내장된 캐쉬를 그대로 사용하고 있음을 확인할 수 있다.
이 캐쉬를 사용하는 데 약간이라도 시간이 걸리는 이유는
애플리케이션 입장에서 자신을 실행시키는 브라우저 자체가
엄밀히 말해 &lt;em&gt;애플리케이션 외부에서 실행되고 있는 별개의 프로그램이기 때문이다&lt;/em&gt;.
즉, 동일한 로컬 머신 내에서 우리의 애플리케이션은 브라우저로 요청을 보내야 한다는 것이다.
실제로 우리의 컴퓨터 입장에서 웹 브라우저와 브라우저의 각 탭에서 실행되는 사이트들은 하나 하나가 별개의 프로세스다.&lt;div num=&quot;3&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;p&gt;마지막으로 파란 부분은 브라우저의 디폴트 캐쉬 기능을 끈 상태로
커스텀 캐쉬 저장소를 웹 애플리케이션 내에서 관리하며, 같은 요청을 3번 보낸 결과이다.
이 경우 두 번째 요청부터 응답 시간이 단순히 감소한 것이 아니라,
&lt;code&gt;0ms&lt;/code&gt;만큼 걸렸다는 점에서 &lt;strong&gt;아예 요청과 응답이라는 개념 자체가 없어진 것을 확인할 수 있다.&lt;/strong&gt;
이는 우리가 구현한 캐쉬 저장소가 우리의 애플리케이션 내부 요소이기 때문에 생겨난 현상이다.&lt;/p&gt;&lt;p&gt;정리하자면 3가지 버튼 모두 캐쉬를 활용하고 있다.
3가지 경우 모두 첫 번째 요청에서는 아무런 캐쉬를 사용하지 않고
실제 외부 서버로 요청을 보내기 때문에 그 응답 시간은 일관되게 &lt;code&gt;300ms&lt;/code&gt; 정도이다.
그 이후 두 번째와 세 번째 요청의 응답 기간이 서로 동일하다는 점에서 동일한 캐쉬를 사용하고 있음을 알 수 있다.
다만 &lt;strong&gt;3가지 요청의 차이는 캐쉬가 어디에 위치하고 있는지에 있다&lt;/strong&gt;.
위에서부터 각각 서버 측, 로컬 머신의 브라우저 내부, 애플리케이션 내부에 캐쉬가 저장된다.
즉, 위에서 아래로 내려올수록 캐쉬의 위치가 점점 애플리케이션에 가까워지기 때문에
캐쉬의 존재 여부를 확인하고 이를 활용할 때까지의 시간이 감소한 것을 알 수 있다.&lt;/p&gt;&lt;h3&gt;Proxy 활용 리팩토링&lt;/h3&gt;&lt;p&gt;그런데 위의 &lt;code&gt;CacheRepository&lt;/code&gt; 인스턴스는
개별 캐쉬들이 &lt;code&gt;coins&lt;/code&gt;라는 자바스크립트 객체 하나에 전부 저장되고,
특정 해당 객체에서 특정 key에 해당되는 데이터를 가져오는 &lt;code&gt;findById&lt;/code&gt; 메서드를 지니며,
싱글톤으로 관리되고 있다.&lt;/p&gt;&lt;p&gt;때문에 &lt;code&gt;coins&lt;/code&gt; 객체에 대해 &lt;code&gt;Proxy&lt;/code&gt; 인스턴스를 생성하고,
&lt;code&gt;handler&lt;/code&gt; 객체의 &lt;code&gt;get&lt;/code&gt;으로 &lt;code&gt;findById&lt;/code&gt; 메서드를 사용하도록 하면
사실상 동일한 기능의 코드가 된다는 점을 알 수 있다.&lt;/p&gt;&lt;div class=&quot;gatsby-highlight has-highlighted-lines&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useState &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;react&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; fetchCoinWithDefaultCache&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; fetchCoinWithNoCache &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;../api&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; CoinCache &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;../domains/CoinCache&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;FetchButtons&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; coinId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinName &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;cacheStorage&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Proxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// cache 데이터: coinId를 key로 하는 CoinCache 인스턴스를 값으로 받음.&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;        &lt;span class=&quot;token function-variable function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;obj&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;          &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; coin &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; obj&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;coinId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;          console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;look for cache in application!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;          &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;coin &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;coin&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isExpired&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; coin&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;          &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; newData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchCoinWithNoCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;coinId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;          console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;fetch data &amp;amp; generate new cache!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;          &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;coin&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;            obj&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;coinId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CoinCache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; newData&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;          obj&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;coinId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;updateData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;          &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; newData&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// onNoCacheClick 생략&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// onDefaultCacheClick 생략&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;onCustomCacheClick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; coinName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;Get &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;coinName&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; data : (custom cache)&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; startTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;gatsby-highlight-code-line&quot;&gt;    &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; cacheStorage&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;coinId&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 일반적인 자바스크립트 객체에 접근하듯이 사용&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; endTime &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;It took &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;endTime &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; startTime&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;ms.&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 생략&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; FetchButtons&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;사실 &lt;code&gt;Proxy&lt;/code&gt; 객체를 거쳐 캐쉬 객체에 간접적으로 접근하든(&lt;code&gt;cacheStorage[coinId]&lt;/code&gt;),
&lt;code&gt;CacheRepository&lt;/code&gt; 인스턴스 내부의 캐쉬 객체에 간접적으로 접근하든(&lt;code&gt;cacheRepository.findById(coinId)&lt;/code&gt;)
커스텀 캐쉬를 생성 및 관리하는 객체를 둔다는 점에서 근본적인 차이는 없다고 볼 수 있다.
물론 &lt;code&gt;Proxy&lt;/code&gt; 객체를 사용하는 경우 명시적으로 프록시 패턴임을 알 수 있거나
코드의 가독성이 높아진다고 생각할 수도 있다.
다만, 관리해야 하는 캐쉬의 종류가 늘어나고 로직이 복잡해지는 경우
&lt;code&gt;Proxy&lt;/code&gt; 객체보다는 자유롭게 다양한 속성과 메서드를 추가할 수 있도록 별도로 클래스를 생성하는 것이
유지보수 측면에서 더 장점이 많다고 생각된다.
또한 클래스에서도 get과 set 키워드를 사용하는 경우
프록시 객체와 같이 일반적인 자바스크립트 객체처럼 일련의 코드를 실행하도록 할 수 있다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;이번 게시글은 프록시 패턴과 캐쉬라는 개념을 중점적으로 다뤘다.&lt;/p&gt;&lt;p&gt;애플리케이션 외부 대상이 존재하는 경우, 매번 외부 대상에 직접적으로 접근하는 것이 아니라
&lt;strong&gt;캐쉬 저장소(CacheRepository)라는 대리자를 통해 간접적으로 통신하는 것이 클라이언트와 백엔드 양측의 리소스 낭비를 줄일 수 있다&lt;/strong&gt;는
점이 이번 글의 핵심이라고 볼 수 있다.
캐쉬 기능은 브라우저만이 아니라 검색엔진 등 다양한 서비스와 라이브러리에 아주 일반적으로 존재하는 요소인 만큼
이에 대해 이해하는 것은 개발자로서 중요한 소양 중 하나라고 생각된다.&lt;/p&gt;&lt;p&gt;또한 자바와 자바스크립트의 &lt;code&gt;Proxy&lt;/code&gt; 클래스를
상황에 따라 나름 유용하게 사용할 수 있다는 점에 대해서도 이야기하였다.
다만, &lt;code&gt;Proxy&lt;/code&gt; 객체는 프록시 패턴을 구현하기 위한 필수 조건은 아니며
결국 애플리케이션 내부의 객체들 사이에서의 상호작용을 다루는 기능이기 때문에
일반적인 클래스로 충분히 대체될 수 있다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Learning Patterns : &lt;a href=&quot;https://play.google.com/store/books/details/Learning_Patterns_Patterns_for_building_powerful_w?id=BnJLEAAAQBAJ&amp;amp;hl=en&amp;amp;gl=US&quot;&gt;책 링크&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;MDN: &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy&quot;&gt;자바스크립트 Proxy 클래스&lt;/a&gt;
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Private_class_fields&quot;&gt;자바스크립트 접근제어자&lt;/a&gt;,
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get&quot;&gt;자바스크립트의 getter&lt;/a&gt;,
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Request/cache&quot;&gt;fetch의 cache 옵션&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;엄밀히 말하자면 get과 set 자체는 모든 자바스크립트 객체들에서 지원되는 기능으로,
클래스 문법만이 아니라 일반적인 객체들에서도 사용될 수 있다.
다만, 프록시의 &lt;code&gt;handler&lt;/code&gt; 객체에 get과 set을 설정하는 경우
마치 원본 객체를 직접 다루듯이 프록시를 다룰 수 있게 되므로
깊이(depth)라는 측면에서 구조적으로 다소 차이가 있다고 생각된다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;타입스크립트의 경우 자바와 같이 &lt;code&gt;private&lt;/code&gt;와 &lt;code&gt;public&lt;/code&gt;라는 키워드가 지원되지만,
순수 자바스크립트의 클래스 문법에서는 변수와 메서드명 앞에 접두사(prefix)로 &lt;code&gt;#&lt;/code&gt;를 추가함으로써
&lt;code&gt;private&lt;/code&gt;임을 표시한다. &lt;code&gt;#&lt;/code&gt;가 없는 경우 디폴트 접근제어자인 &lt;code&gt;public&lt;/code&gt;를 그대로 사용한다고 간주된다.&lt;/p&gt;&lt;p&gt;이 때문에 필자는 일반적으로 클래스를 사용할 일이 많으면 타입스크립트를 사용하여 개발을 한다.
다만, 해당 예제 코드는 tsconfig 작업 없이도
브라우저나 로컬 머신에서 쉽게 실행될 수 있도록 자바스크립트로 작성되었다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;3&quot;&gt;&lt;p&gt;과거 웹 브라우저들의 경우 싱글 쓰레드로 모든 사이트를 처리하는 등 다양한 방식으로 동작하였으나,
적어도 구글 크롬의 경우 마치 일반적인 운영체제와 같이 복수의 프로세스를 생성하고 관리하는 멀티 프로세스 애플리케이션이다.
이에 대해 자세히 알고 싶다면 구글 개발자들이 직접 만든 이 &lt;a href=&quot;https://www.google.com/googlebooks/chrome/&quot;&gt;만화&lt;/a&gt;를
참고하기를 바란다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[[JS] 싱글톤 패턴과 React 상태 관리]]></title><description><![CDATA[자바스크립트의 클래스 문법은 다른 객체지향언어들을 흉내내기 위해 등장한 문법적 설탕일 뿐이다. 때문에 굳이 클래스를 정의하고, 클래스를 통해 인스턴스를 생성하는 등 자바에서의 싱글톤 패턴을 억지로 모방하는 것은 안티패턴이라고 볼 수 있다.]]></description><link>https://bugoverdose.github.io/development/singleton-and-react-state-management/</link><guid isPermaLink="false">https://bugoverdose.github.io/development/singleton-and-react-state-management/</guid><pubDate>Tue, 18 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;strong&gt;싱글톤 패턴(singleton pattern)&lt;/strong&gt;이란 하나의 인스턴스(객체)를
애플리케이션 전체에서 공유하는 디자인 패턴을 의미한다.&lt;/p&gt;&lt;p&gt;자바, C++과 같은 객체지향언어의 경우
클래스를 정의하고, 해당 클래스를 통해서 복수의 인스턴스를 생성할 수 있다.
이때 애플리케이션이 실행될 때 특정 클래스를 기반으로
&lt;em&gt;하나의 인스턴스만을 생성&lt;/em&gt;하여,
애플리케이션 전체에서 해당 인스턴스를 공유함으로써 싱글톤 패턴을 구현할 수 있다.&lt;/p&gt;&lt;p&gt;그렇다면 자바스크립트에서는 어떠할까?&lt;/p&gt;&lt;h2&gt;클래스 문법을 통한 싱글톤 패턴 구현&lt;/h2&gt;&lt;p&gt;엄밀히 말하자면 사실 자바스크립트에도 클래스 문법이 존재한다.
때문에 자바에서 싱글톤 패턴을 구현하는 방식을
자바스크립트에서 그대로 흉내내는 것도 가능하기는 하다.
아래 예시를 확인해보자.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;counter.js&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; instance&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 싱글톤으로 생성/관리되는 객체가 담기는 변수&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 전역 스코프에서 관리되는 데이터&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Counter&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;instance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;생성된 인스턴스가 이미 존재합니다!&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    instance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// new Counter()로 최초로 생성된 인스턴스를 저장&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;getCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;increment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// count를 1만큼 증가시키고 그 값을 반환.&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;decrement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// count를 1만큼 감소시키고 그 값을 반환.&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; singletonCounter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;freeze&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Counter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; singletonCounter&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;counter.js&lt;/code&gt; 파일은 Counter 클래스를 선언하고,
이를 통해 하나의 Counter 인스턴스를 생성하여 export하고 있다.
이때 Counter 클래스 자체는 export되지 않고 있기 때문에
다른 자바스크립트 파일들에서는 &lt;code&gt;new Counter()&lt;/code&gt;를 실행하여
새로운 Counter 인스턴스를 생성할 수 없다.
만일 &lt;code&gt;new Counter()&lt;/code&gt;의 실행이 가능했더라도,
instance 변수가 이미 다른 Counter 인스턴스로 초기화되었는지를 체크해주는
방어로직이 constructor에서 실행되기 때문에 Counter 인스턴스는
싱글톤으로 유지될 수 있다.&lt;/p&gt;&lt;p&gt;그리고 let으로 선언된 &lt;code&gt;instance&lt;/code&gt;와 &lt;code&gt;count&lt;/code&gt;는 직접적으로 export되지 않고 있다.
때문에 논리적으로 다른 자바스크립트 파일들에서 &lt;code&gt;count&lt;/code&gt; 변수에 접근하고 그 값을 변경하는 방법은
singletonCounter 객체를 import받고 해당 객체의 메서드(함수)를 실행하는 방법밖에 없다.&lt;/p&gt;&lt;p&gt;마지막으로 &lt;code&gt;Object.freeze()&lt;/code&gt;는 해당 객체가 수정될 수 없도록 &lt;em&gt;얼리는&lt;/em&gt; 기능을 수행한다.
이제 해당 객체가 import되어 사용될 때 해당 객체를 변경시킬 방법은 없으므로
언제나 &lt;code&gt;counter.js&lt;/code&gt; 파일에서 정의된 객체가 그 자체로 일관되게 사용될 것임을 보장할 수 있다.&lt;/p&gt;&lt;p&gt;그런데 중요한 점은 자바스크립트의 클래스 문법이
다른 객체지향언어들의 클래스 문법을 흉내내기 위해 ES6에서 등장한
문법적 설탕(syntactic sugar)&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;일 뿐이라는 점이다.
때문에 이처럼 굳이 클래스를 정의하고, 클래스를 통해 인스턴스를 생성하는 등
자바에서의 싱글톤 패턴을 억지로 모방하는 것은 안티패턴이라고 볼 수 있다.&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;
실제로 클래스 문법을 사용하지 않더라도 위와 동일한 기능을 구현할 수 있다.&lt;/p&gt;&lt;h2&gt;전역 스코프에서의 상태관리&lt;/h2&gt;&lt;p&gt;아래는 위의 코드를 클래스 문법 없이 구현한 결과이다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;counter.js&lt;/code&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; counter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;getCount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;increment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;decrement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;freeze&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;counter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; counter &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;보면 알겠지만 다양한 클래스의 정의로 구성된 자바 코드와는 달리
자바스크립트는 기본적으로 객체를 그대로 정의할 수 있다.
때문에 위와 같이 &lt;code&gt;counter.js&lt;/code&gt; 파일에서 그냥 객체를 정의하고
이를 export하면 그 자체로 싱글톤이 구현되었다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;중요한 점은 다른 자바스크립트 파일들에서 &lt;code&gt;counter.js&lt;/code&gt;의
counter 객체를 import하여 사용하는 경우,
counter 객체의 값을 &lt;strong&gt;직접 가져오거나 이를 복사하는 것이 아니라&lt;/strong&gt;,
counter 객체의 메모리 주소값만을 &lt;strong&gt;참조하여 사용한다&lt;/strong&gt;는 점이다.
때문에 다양한 파일들에서 counter 객체를 import하여 사용하더라도
언제나 단 하나의 counter 객체만이 애플리케이션 전체에서 공유되어 사용된다.&lt;/p&gt;&lt;p&gt;그리고 다른 파일들에서는 &lt;code&gt;counter.js&lt;/code&gt;의 &lt;code&gt;count&lt;/code&gt; 변수 값에 직접 접근하는 것이 아니라
&lt;strong&gt;&lt;code&gt;counter&lt;/code&gt; 객체의 메서드를 그때마다 실행하여 해당 시점의 &lt;code&gt;count&lt;/code&gt; 변수 값을 읽거나 그 값을 변경시키기 때문에&lt;/strong&gt;
마찬가지로 애플리케이션 전체에서 단 하나의 &lt;code&gt;count&lt;/code&gt; 변수가 실시간으로 관리될 수 있음을 보장할 수 있다.&lt;/p&gt;&lt;p&gt;실제로 &lt;code&gt;Express&lt;/code&gt;, &lt;code&gt;Electron&lt;/code&gt; 등
다양한 &lt;code&gt;Node.js&lt;/code&gt; 기반의 프레임워크들에서 이런 방식만으로도
충분히 싱글톤 패턴의 상태 관리를 구현할 수 있다.&lt;/p&gt;&lt;p&gt;그런데 문제는 React와 같은 프런트엔드 프레임워크들에 있다.&lt;/p&gt;&lt;h2&gt;React 상태관리&lt;/h2&gt;&lt;p&gt;React에서 상태관리는 굉장히 중요한 요소 중 하나이다.
상태(state)란 기본적으로 특정 컴포넌트에서 사용되고 있는 데이터를 의미한다.
기본적으로 이 데이터는 컴포넌트 라이프사이클 과정에서
특정 값에서 다른 값으로 변할 수 있으며,
이러한 변화에 따라 해당 컴포넌트는 사용자의 화면에 다시 렌더링되도록 설정된다.
중요한 점은 &lt;strong&gt;하나의 컴포넌트에서 특정 상태를 변경하는 경우&lt;/strong&gt;, 해당 상태를 공유하는
&lt;strong&gt;다른 컴포넌트들에서 이 변화를 실시간으로 감지하고 동일한 시점에 새로운 상태 값에 맞게 재렌더링되어야 한다는 점이다.&lt;/strong&gt;
그리고 이를 위해서는 복수의 컴포넌트에서 공유되는 특정 상태를 단 하나의 변수로 생성하고 관리하는 과정이 필요하다.
특히 애플리케이션 전체에서 공유되는 전역 상태(global state)는 싱글톤 패턴으로 관리된다고 말할 수 있다.&lt;/p&gt;&lt;p&gt;Redux, Recoil, MobX 등 각종 상태관리 도구들을 사용하는 경우도 흔하지만
React에서의 상태관리는 이러한 도구가 없더라도 충분히 가능하다.&lt;/p&gt;&lt;p&gt;과거 React 개발자들은 기본적으로
각종 속성과 메서드를 지닌 &lt;code&gt;React.Component&lt;/code&gt;라는 클래스를 상속받아 &lt;em&gt;클래스 컴포넌트&lt;/em&gt;를 생성하였다.
이러한 클래스 컴포넌트들은 상속 받은 속성과 메서드들을 사용함으로써
해당 컴포넌트의 상태와 라이프사이클에 관여하였고,
이 때문에 클래스 컴포넌트는 stateful하다고 평가받았다.
&lt;em&gt;함수형 컴포넌트&lt;/em&gt;의 경우 기본적으로 stateless하지만
useState, useEffect, useContext 등 다양한 hook 문법을 import받아 사용함으로써 동일한 기능을 더 간단한 문법을 통해 구현할 수 있게 되었다.
사용하지도 않을 속성과 메서드를 언제나 무지성으로 상속받는 클래스 컴포넌트에 비해
필요에 따라 기능을 추가해가는 함수형 컴포넌트가 더 가벼우며,
기본적으로 코드의 가독성도 더 높다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;본 예제에서는 useState와 Context를 통해
어떻게 React 애플리케이션에서의 전역 상태관리를 어떻게 구현할 수 있는
방법 중 한 가지를 가볍게 탐구해보고자 한다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;index.js&lt;/code&gt;: 기본적으로 애플리케이션의 최상위 컴포넌트는 App이며, 별도의 코드는 불필요.&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;react&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ReactDOM &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;react-dom&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; App &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;./App&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

ReactDOM&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;StrictMode&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;App &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;StrictMode&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;root&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;utils/nerdpoint-context.js&lt;/code&gt;: 컨텍스트를 생성. 컴포넌트들에서 공유할 데이터의 형식 지정.&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;react&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; NerdPointContext &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token literal-property property&quot;&gt;nerdPoint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 전달할 state&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;increment&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// state를 변경시키는 메서드들&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;decrement&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 해당 메서드들로만 state 변경 가능하도록 지정&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;App.js&lt;/code&gt;&lt;ul&gt;&lt;li&gt;useState를 통해 애플리케이션 전체에서 공유될 state 생성.&lt;/li&gt;&lt;li&gt;Provider를 통해 하위의 모든 컴포넌트들에서 실질적으로 공유될 컨텍스트를 제공.&lt;/li&gt;&lt;li&gt;Provider 내부의 Router의 모든 컴포넌트들은 깊이와 무관하게 주입받은 컨텍스트 사용 가능.&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useState &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;react&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Router &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;./Router&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; NerdPointContext &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;./utils/nerdpoint-context&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 최상위 컴포넌트인 App에서 단 하나의 state를 생성&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;nerdPoint&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setNerdPoint&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 실제로 하위 컨텍스트들에 제공할 컨텍스트 정보 구성. 형식은 자유.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; nerdPointContext &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 공유될 state 값 전달&lt;/span&gt;
    nerdPoint&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// setState를 직접 전달하지 않고 정해진 메서드들로만 state 변경 가능하도록 지정&lt;/span&gt;
    &lt;span class=&quot;token function-variable function&quot;&gt;increment&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setNerdPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nerdPoint &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function-variable function&quot;&gt;decrement&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setNerdPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nerdPoint &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;NerdPointContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Provider value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;nerdPointContext&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Router &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;NerdPointContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Provider&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; App&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;Router.js&lt;/code&gt;: 서로 다른 컴포넌트를 사용하는 서로 다른 라우트를 2개 설정.&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;react&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; BrowserRouter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Routes&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Route &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;react-router-dom&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ContextConsumerComponent &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;./components/consumer&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; UseContextComponent &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;./components/use-context&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Router&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;BrowserRouter&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Routes&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Route path&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/use-context&amp;quot;&lt;/span&gt; element&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;UseContextComponent &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Route path&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt; element&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ContextConsumerComponent &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Routes&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;BrowserRouter&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; Router&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;components/consumer.js&lt;/code&gt;: 제공받은 Context를 Context.Consumer 내부에서 받아서 사용.&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;react&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Link &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;react-router-dom&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; NerdPointContext &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;../utils/nerdpoint-context&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;ContextConsumerComponent&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;NerdPointContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Consumer&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; nerdPoint&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; increment&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; decrement &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;nerdPoint&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;nerdPoint&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;increment&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;증가시키기&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;decrement&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;감소시키기&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Link to&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/use-context&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; useContext&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Link&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;NerdPointContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Consumer&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; ContextConsumerComponent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;code&gt;components/use-context.js&lt;/code&gt;: useContext 훅으로 현재 context 값을 그대로 받아서 사용.&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset:linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useContext &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;react&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Link &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;react-router-dom&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; NerdPointContext &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;quot;../utils/nerdpoint-context&amp;quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;UseContextComponent&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; nerdPoint&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; increment&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; decrement &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;NerdPointContext&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;nerdPoint&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;nerdPoint&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;increment&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;증가시키기&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;decrement&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;감소시키기&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Link to&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; Context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Consumer&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Link&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; UseContextComponent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space:normal;width:auto;left:0&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;최종 결과물&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;/7a4f853b6ed1b1d270733af0138e8a65/context-demo.gif&quot; alt=&quot;예제 데모&quot;/&gt;&lt;/p&gt;&lt;p&gt;코드가 많아보이지만 다루고 있는 내용은 전반적으로 굉장히 간단하다.
핵심은 애플리케이션 내 모든 컴포넌트의 부모가 되는
최상위 컴포넌트 &lt;code&gt;App&lt;/code&gt;에서 useState 훅으로 공유될 상태를 생성하고,
이를 &lt;code&gt;context&lt;/code&gt;라는 형식으로 하위 컴포넌트들에 Provider로 제공하는 것이다.
하위 컴포넌트들에서는 깊이와 무관하게 전부 제공받은 &lt;code&gt;context&lt;/code&gt;에 접근할 수 있는데,
Consumer를 통해 접근하는 방법과 보다 간단하게 useContext 훅을 사용하는 방법이 존재한다.
중요한 점은 어떤 방식으로 접근하든, 또 어떠한 컴포넌트 및 라우트에서 접근하든,
페이지가 새로고침되지 않는 이상 &lt;strong&gt;컨텍스트에 담긴 상태 및 각종 데이터는 그 값을 서로 공유한다&lt;/strong&gt;는 점이다.&lt;/p&gt;&lt;p&gt;그리고 이처럼 공유되는 상태와 컨텍스트는 전부 컴포넌트들 &lt;code&gt;App&lt;/code&gt;, &lt;code&gt;ContextConsumerComponent&lt;/code&gt;,
&lt;code&gt;UseContextComponent&lt;/code&gt; 내부에서만 선언 및 사용되고 있다.
&lt;code&gt;utils/nerdpoint-context.js&lt;/code&gt;에서 createContext로 생성한 데이터의 경우
생성할 컨텍스트의 &lt;em&gt;형식&lt;/em&gt;에 대한 정보일 뿐이며, &lt;code&gt;const&lt;/code&gt;로 선언되었기 때문에 변경될 수 없다.
그 외에도 위의 코드에는 전역 스코프에서 &lt;code&gt;let&lt;/code&gt;으로 선언된 변수가 전혀 없음을 알 수 있다.
즉, 전역 스코프에서의 상태관리가 가져올 수 있는 문제를 제대로 회피하고 있다는 것이다.&lt;/p&gt;&lt;p&gt;물론 useState로 생성된 state 변수와 setState 함수를
하위 컴포넌트들에 prop으로 전달하는 경우,
결과적으로 위와 동일한 기능을 구현할 수도 있다.
그러나 &lt;strong&gt;각 컴포넌트는 전달받은 prop을 해당 컴포넌트 내에서만 사용할 수 있다.&lt;/strong&gt;
때문에 이 경우 하위 컴포넌트1에서 다시 하위 컴포넌트2에 prop으로 state를 전달하고,
하위 컴포넌트2는 다시 하위컴포넌트3에 prop으로 state를 전달해야 하는 상황이 발생할 수 있다.
이 때문에 어느 정도 규모가 있는 프로젝트에서는 이와 같은 방식으로 상태관리를 하거나,
별도의 상태관리 라이브러리를 사용하는 것이 일반적이다.&lt;/p&gt;&lt;p&gt;실제로 위와 같은 구조는 styled-components의 ThemeProvider와 같이
각종 라이브러리들에서 흔하게 접할 수 있다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;p&gt;Learning Patterns : &lt;a href=&quot;https://play.google.com/store/books/details/Learning_Patterns_Patterns_for_building_powerful_w?id=BnJLEAAAQBAJ&amp;amp;hl=en&amp;amp;gl=US&quot;&gt;책 링크&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;React 공식문서: &lt;a href=&quot;https://reactjs.org/docs/context.html&quot;&gt;Context&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;syntactic sugar: 개발자가 특정 기능을 간편하게 구현할 수 있도록 도와주기 위한 보조 문법.
개인적으로 &lt;em&gt;달달한 문법&lt;/em&gt;이라고 부르고 싶다.&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;물론 클래스 문법을 필요로 하는 경우도 많으며,
동일한 코드를 클래스 문법을 통해 리팩토링하는 것이 효과적인 경우도 매우 흔하다.
다만, 자바에서 클래스를 통해 인스턴스를 하나만 생성하는 방식으로 싱글톤 패턴을 구현하는 것은
애초에 자바 문법 자체가 클래스를 기반으로 동작하기 때문이다.
자바스크립트에서
&lt;strong&gt;클래스 문법을 사용함으로써 딱히 얻을 수 있는 이점이 없음에도 무지성으로 자바 스타일을 억지로 모방하는 것은 분명 안티패턴이라고 볼 수 있다.&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[메모리 회로의 핵심: 플립플롭의 이해]]></title><description><![CDATA[오늘은 입력값으로부터 0과 1이라는 출력값을 만들어내고, 외부로부터의 입력이 사라지더라도 그 출력값을 그대로 유지하는 구조의 회로에 대해 이야기해보고자 한다. 다양한 구조의 래치를 차근차근 살펴보며 최종적으로 D 플립플롭을 자세히 이해해보자.]]></description><link>https://bugoverdose.github.io/computer-science/latch-and-flip-flop/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/latch-and-flip-flop/</guid><pubDate>Thu, 13 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;strong&gt;&lt;div to=&quot;/computer-science/analog-and-digital&quot;&gt;지난 게시글&lt;/div&gt;&lt;/strong&gt;에서
우리는 안정성을 위해 입력되는 자극을
0과 1이라는 데이터로 간주하여 연산에 사용하는 것이
회로의 기본 원리라고 이야기하였다.
또한 &lt;strong&gt;&lt;div to=&quot;/computer-science/bit-and-logic-operation&quot;&gt;그 이전 게시글&lt;/div&gt;&lt;/strong&gt;에서는
이러한 0과 1이라는 데이터를 적절히 조합함으로써
보다 복잡한 데이터를 표현하고 다양한 연산을 수행할 수 있음을 설명하였다.
그러나 실제로 연산을 수행하기 위해서는
여전히 풀어야 할 과제가 존재한다.&lt;/p&gt;&lt;h2&gt;메모리의 필요성&lt;/h2&gt;&lt;p&gt;회로를 구성하는 개별 부품이 0 혹은 1이라는 출력값을 꾸준히 내기 위해서는
그에 해당되는 입력이 각 부품에 꾸준히 들어와야 한다.
그렇다면 예를 들어 &lt;code&gt;5+1&lt;/code&gt;라는 연산을 회로가 어떻게 처리할 수 있을까?
기본적으로 &lt;code&gt;5&lt;/code&gt;, &lt;code&gt;+&lt;/code&gt;, &lt;code&gt;1&lt;/code&gt;에 해당되는 데이터를
3가지 입력 장치를 통해 &lt;em&gt;동시에&lt;/em&gt; 생성하고 연산의 결과가 나올 때까지
입력을 유지하는 방법을 생각해볼 수 있다.&lt;/p&gt;&lt;p&gt;단순히 두 수를 더하는 상황에서는 이 방법을 오답이라고 보기는 힘들다.
그러나 예를 들어 &lt;code&gt;5-1&lt;/code&gt;라는 연산을 수행하려는 경우에는 어떠할까?
덧셈과 달리 뺄셈과 나눗셈은 두 피연산자의 &lt;em&gt;순서&lt;/em&gt;가 굉장히 중요하다.
&lt;code&gt;5-1&lt;/code&gt;과 &lt;code&gt;1-5&lt;/code&gt;는 서로 다른 결과이니 말이다.
위와 같은 방법을 고수하고 싶다면 예를 들어
&lt;code&gt;5&lt;/code&gt;라는 데이터를 &lt;code&gt;좌측 5&lt;/code&gt;, &lt;code&gt;우측 5&lt;/code&gt;라는 두 가지로 구분하는 방법을 생각해볼 수 있다.
즉, &lt;code&gt;5-1&lt;/code&gt;라는 연산을 위해 &lt;code&gt;좌측 5&lt;/code&gt;, &lt;code&gt;-&lt;/code&gt;, &lt;code&gt;우측 1&lt;/code&gt;라는 데이터를
&lt;em&gt;동시에&lt;/em&gt; 3가지 입력 장치를 통해 회로에 생성한다는 것이다.
뭔가 찝찝하지만 이 방법을 도입한다고 해보자.
그렇다면 &lt;code&gt;5-4+1&lt;/code&gt;라는 연산은 어떻게 수행될 수 있을까?
여전히 &lt;code&gt;첫번째 5&lt;/code&gt;, &lt;code&gt;첫번째 -&lt;/code&gt;, &lt;code&gt;두번째 4&lt;/code&gt;, &lt;code&gt;두번째 +&lt;/code&gt;, &lt;code&gt;세번째 1&lt;/code&gt;이라는
데이터를 생성하기 위해 5가지 입력장치를 &lt;em&gt;동시에&lt;/em&gt; 사용해야 한다고 생각하는가?
딱 보아도 범용성이 떨어진다는 점을 느낄 수 있을 것이다.&lt;/p&gt;&lt;p&gt;실제 계산기의 경우 &lt;code&gt;5-1&lt;/code&gt;이라는 연산을 위해
&lt;code&gt;5&lt;/code&gt;, &lt;code&gt;-&lt;/code&gt;, &lt;code&gt;1&lt;/code&gt;라는 데이터를 &lt;em&gt;순차적으로&lt;/em&gt; 입력한다.
즉, &lt;code&gt;5&lt;/code&gt;, &lt;code&gt;-&lt;/code&gt;, &lt;code&gt;1&lt;/code&gt;라는 버튼을 단 한번만 눌러도
회로 내에 각각에 대응되는 데이터가 순차적으로 생성되며,
이렇게 &lt;strong&gt;생성된 데이터가 회로 내에 유지된다&lt;/strong&gt;는 것이다.&lt;/p&gt;&lt;p&gt;오늘은 입력값으로부터 0과 1이라는 출력값을 만들어내고,
외부로부터의 입력이 사라지더라도
그 출력값을 그대로 유지하는 구조의 회로에 대해 이야기해보고자 한다.&lt;/p&gt;&lt;h2&gt;래치&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:299px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9c4c401041cbe1d47f69c5670e1f7987/aeb78/or-gate-latch.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:54.601226993865026%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABY0lEQVQoz31SyarCQBCcb/dD/AoPHlTEDXHFuIseIihJXBNU3OtRDR1G5aWgmWEyXVNdFQMA7/dbirhcLjgcDjgejz8VhqEU91EUxT26EsY+eDweyGazGAwGGA6HH9XtdtHpdGR1HAeZTEaIEwmpjg232w2r1Qq+78PzPGy3W3xjOp1it9slE57PZ1HX6/WQy+Uwn88xHo/RbrdRLpflQQXv7fd72JaxfkauVCpoNpuo1+sfithcKBRi0n6//6FQOYzNTtB013VRrVZxv9/l/Pl8yjcS8EFiNptJMDZ43+AfMACSqwKqJxqNhqhPpVJIp9PiLy3K5/OYTCYwr9dLQlAlbOS+1WqJpwTvKOjlZrORKdbrNa7XK06nk/xq7DVBEKBUKsklmk9varUaisXij2qeL5dLJMFwbr6iStVwklMxVTIQKlssFrFiLTuDOGWFBjMajYSApEycvukvouPbQdoK/wCMl0GS/TtwWQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;OR 게이트 래치&quot; title=&quot;OR 게이트 래치&quot; src=&quot;/static/9c4c401041cbe1d47f69c5670e1f7987/aeb78/or-gate-latch.png&quot; srcSet=&quot;/static/9c4c401041cbe1d47f69c5670e1f7987/222b7/or-gate-latch.png 163w,/static/9c4c401041cbe1d47f69c5670e1f7987/aeb78/or-gate-latch.png 299w&quot; sizes=&quot;(max-width: 299px) 100vw, 299px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;위와 같은 구조의 회로를 한번 보자.
초기 상태로 in에는 0이라는 값이 입력되며 이 때문에
OR 게이트의 출력값은 0이 된다고 가정하자(&lt;code&gt;0 OR 0 = 0&lt;/code&gt;).
이후 in에 1이라는 값이 입력되는 경우 OR 게이트의 출력값은 무조건 1이 되며,
out에는 1이라는 값이 출력된다.
그런데 이때 OR 게이트의 출력값인 1은 그대로 OR 게이트 자신의
입력값으로 들어오게 되며,
OR 게이트는 1과 1을 입력값으로 받아들이게 된다(&lt;code&gt;1 OR 1 = 1&lt;/code&gt;).
이렇게 출력값을 자신의 입력값으로 사용하는 순환구조를
피드백(feedback)이라고 한다.
그리고 이러한 피드백으로 인해 in의 입력값이 다시 0으로 변하더라도
OR 게이트의 출력값은 여전히 1로 유지될 수 있다(&lt;code&gt;0 OR 1 = 1&lt;/code&gt;).&lt;/p&gt;&lt;p&gt;이처럼 입력값을 외부로부터 꾸준히 입력받지 않더라도,
특정한 출력값을 유지할 수 있는 구조의 회로가 바로 &lt;strong&gt;래치(latch)&lt;/strong&gt;의 특성이다.
그러나 위와 같은 OR 게이트 래치로는
출력값을 1로 변경하고 이를 유지시키는 것은 가능하지만,
다시 출력값을 0으로 되돌리는 것은 불가능하다.
자유자재로 1로 값을 설정(set)하고 0으로 값을 리셋(reset)하기 위해서는
피드백 과정에 간섭할 수 있는 수단을 추가해야 한다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/ce0eb5c7816f92b4addf0c24a6ac907c/d0c0e/and-or-gate-latch.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:30.67484662576687%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA2ElEQVQY03VQ1wrEMAzL//9c6UOfukv33pvqkCHlODiDSSLbiiz1PA+YDH3X767rUFWVZF3XKMsSRVHIyTfxLMvQNM07r35JdIERRRHCMESapkiSBOd5Cn7fN6ZpwnVdkqy/hJpk33d4nveSHschCnTzPM/ywbIsCIJAlFEtcW6iQ+mVWOSwZVnwfR+GYcBxHBn8JuQZxzGGYRDcdV2Ypom+7yUVG9Z1FU9s2xZ/WKCScRxFTZ7nklTStq1g7N+2Tch5pwXc8l2Z/mhz/wW9o09UR0/5+W98AOYGy9zyC5/xAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;AND-OR 게이트 래치&quot; title=&quot;AND-OR 게이트 래치&quot; src=&quot;/static/ce0eb5c7816f92b4addf0c24a6ac907c/a6d36/and-or-gate-latch.png&quot; srcSet=&quot;/static/ce0eb5c7816f92b4addf0c24a6ac907c/222b7/and-or-gate-latch.png 163w,/static/ce0eb5c7816f92b4addf0c24a6ac907c/ff46a/and-or-gate-latch.png 325w,/static/ce0eb5c7816f92b4addf0c24a6ac907c/a6d36/and-or-gate-latch.png 650w,/static/ce0eb5c7816f92b4addf0c24a6ac907c/d0c0e/and-or-gate-latch.png 715w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;위는 기존 구성에서 AND 게이트와 NOT 게이트(혹은 인버터)를 추가한 결과이다.
reset에 0이라는 값이 들어오는 동안 set의 입력값을 0에서 1로 변경하면
출력값은 0에서 1로 변하며, AND 게이트 역시 1을 출력함으로써(&lt;code&gt;1 AND 1 = 1&lt;/code&gt;)
OR 게이트에는 1이라는 값이 그대로 들어오게 된다.
그리고 set의 값이 다시 0으로 돌아가더라도
AND 게이트와 OR 게이트는 여전히 1을 출력하기 때문에(&lt;code&gt;1 AND 1 = 1&lt;/code&gt;; &lt;code&gt;1 OR 0 = 1&lt;/code&gt;)
out은 여전히 1로 유지된다.
이는 in이 set이라는 표현으로 변경되었을 뿐 이전과 동일한 논리라고 볼 수 있다.
다만, reset의 값이 1로 변할 경우 &lt;div&gt;reset&lt;/div&gt;의 값은 0이 되며,
AND 게이트와 OR 게이트는 0을 출력하도록 변하기 때문에(&lt;code&gt;1 AND 0 = 0&lt;/code&gt;; &lt;code&gt;0 OR 0 = 0&lt;/code&gt;)
최종적으로 out은 0이라는 값을 출력하게 된다.
이후 reset의 값이 0으로 돌아가더라도 피드백으로 인하여&lt;br/&gt;
AND 게이트와 OR 게이트는 0을 여전히 출력하게 된다(&lt;code&gt;0 AND 1 = 0&lt;/code&gt;; &lt;code&gt;0 OR 0 = 0&lt;/code&gt;).&lt;/p&gt;&lt;h2&gt;S-R 래치&lt;/h2&gt;&lt;p&gt;기본적으로 위와 같은 방식으로 우리는
회로 내에 비트 단위로 데이터를 자유롭게 저장할 수 있다.
그리고 이러한 논리는 다양한 방식으로 구현될 수 있는데,
그 중 가장 보편적으로 사용되는 방법이 바로 &lt;strong&gt;S-R 래치(set-reset latch)&lt;/strong&gt;라는 구조다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:372px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/7b643fcaceb7129332dd47c0b700ef88/98b6e/s-r-latch.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:82.82208588957054%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB+ElEQVQ4y3VUR8/qMBDM//8Z3BAXTnQBB4QA0Xvvoogqep+nWWnz8oWw0mISx+PZmbUNAPh8PnCK5XKJZrOJTqcjud1uzTldYx2Zhr44HA5YLBa43W643+94PB7I5XLYbDbY7XYy1ut1lEolE/T9fuP1eplgAsiXjEqlgmg0in6/j2q1inK5jEQi8cV6Mpmg1WrhV5gMyYhpjVqtJiyYBNLNw+EwstmsMI7H4yIF5+fzOQy7htb/ZM1nbkQNdS4UCgkgK3G5XDgej8J6NBr9Z8hRGVCzfD6PTCbzVdJsNhPmGr1e72/J1gcFHI/HKBaLkjSLSVPoOLXVYKlqEteKKVZAZXu9XtFoNMQkn88nbLvdLlarFS6Xi2kcwbSVTJftJdl7cr/fi17BYFAyEAhgOBxKezmtcWRI+tSGQOl0WjSjg2x06svS6TCrYDU/GaqGdIsfJ5NJWdhutwWEwHSbQYbcoFAo/CFjWNEVkFqlUilhaA8CDgaDL5dNU5zOMSfP57OYoX1IlhqRSETYshu8Xq85T20NdfV0OklaN2DZfKaz1uPm9/ulA6ivx+ORO4DMeVoEkKW53W7EYjEph0BkQA3tsV6v5QT9PMv84Y1BkTk+n08pl89kwIZmr9Hd6XQqm/MbXfd12/y6CxkE0PuQJVMjp3vQ2jb/AC91CV/1QJ8QAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;S-R 래치&quot; title=&quot;S-R 래치&quot; src=&quot;/static/7b643fcaceb7129332dd47c0b700ef88/98b6e/s-r-latch.png&quot; srcSet=&quot;/static/7b643fcaceb7129332dd47c0b700ef88/222b7/s-r-latch.png 163w,/static/7b643fcaceb7129332dd47c0b700ef88/ff46a/s-r-latch.png 325w,/static/7b643fcaceb7129332dd47c0b700ef88/98b6e/s-r-latch.png 372w&quot; sizes=&quot;(max-width: 372px) 100vw, 372px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;해당 회로에서 사용되는 NAND 게이트&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;의 경우
두 가지 입력값이 모두 1인 경우에만 출력값이 0이 되며,
그 외에는 출력값이 1이 된다.
처음 보면 낯설 수도 있겠지만 기본적인 원리는 앞서 다룬 래치와 크게 다르지 않다.&lt;/p&gt;&lt;p&gt;입력값 set과 reset이 각각 1과 0일 때, &lt;div&gt;set&lt;/div&gt;과 &lt;div&gt;reset&lt;/div&gt;은
각각 0과 1이 된다.
S 게이트는 입력값 중 하나가 0이므로 무조건 출력값이 1이 되는데(&lt;code&gt;0 NAND ? = NOT (0 AND ?) = NOT 0 = 1&lt;/code&gt;),
이에 따라 출력값 Q는 1의 값을 지니게 된다.
한편 R 게이트의 경우 입력값으로 1과 1이 들어오게 되므로 출력값이 0이 되고, &lt;div&gt;Q&lt;/div&gt;의 값은 0이 된다.
그리고 S 게이트의 또 다른 입력값(&lt;div&gt;set&lt;/div&gt; 이외의 값)으로는 0이 들어오게 되면서
결과적으로 S 게이트는 &lt;code&gt;0 NAND 0 = 1&lt;/code&gt;, R 게이트는 &lt;code&gt;1 NAND 1 = 0&lt;/code&gt;의 값을 출력하게 된다.&lt;/p&gt;&lt;p&gt;이후 set의 값이 0으로 돌아가게 되면 &lt;div&gt;set&lt;/div&gt;의 값은 1로 변한다.
이에 따라 S 게이트의 입력값은 0과 0에서 1과 0로 변하게 되지만
그 출력값은 여전히 1로 유지되기 때문에(&lt;code&gt;1 NAND 0 = 1&lt;/code&gt;)
Q와 &lt;div&gt;Q&lt;/div&gt;의 값은 그대로 1과 0으로 유지됨을 알 수 있다.&lt;/p&gt;&lt;p&gt;그리고 S-R 래치는 기본적으로 대칭적인 설계를 지니고 있다.
때문에 set과 reset에 0과 1을 넣었을 때 위와 동일한 방식으로 동작하여
Q와 &lt;div&gt;Q&lt;/div&gt;이 0과 1이라는 값을 출력할 것임을 쉽게 예상할 수 있을 것이다.&lt;/p&gt;&lt;p&gt;결과적으로 S-R 래치는 대부분의 경우 set과 reset이 모두 0인 상태로 존재하며,
이전 입력값에 따라 정해진 Q와 &lt;div&gt;Q&lt;/div&gt;의 값을 그대로 출력값으로 유지하게 된다.
비트 단위로 데이터를 저장하는 것이 핵심 기능인 회로에 부합한다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;한편 set과 reset이 모두 1인 경우에는 어떠할까?
이 경우 &lt;div&gt;set&lt;/div&gt;과 &lt;div&gt;reset&lt;/div&gt;은 0과 0라는 입력값으로 회로에 들어오게 된다.
NAND의 입력값에 0이 존재하므로 출력값은 무조건 1이 되며,
이에 따라 Q와 &lt;div&gt;Q&lt;/div&gt; 모두 1이라는 값을 지니게 되는데, &lt;div&gt;Q&lt;/div&gt;은
Q를 반전시킨 값을 지녀야 하므로 논리적으로 옳지 않은 결과라고 볼 수 있다.
애초에 set과 reset이 1이라는 뜻은 데이터를 1로 설정하면서 동시에 0으로 초기화하라는
모순되는 지시를 넣은 것으로 볼 수 있다. 때문에 S-R 래치를 사용할 때
이러한 입력값이 존재할 수 없도록 유의해야 한다.&lt;/p&gt;&lt;h2&gt;안정성 문제&lt;/h2&gt;&lt;p&gt;비트 단위에서 생각했을 때 위와 같은 구조는 논리적으로 틀리지 않았다.
그런데 한 가지 고려해야 할 점은 회로란 철저히
물리적인 특성을 지닌 기계라는 점이다.&lt;/p&gt;&lt;h3&gt;데이터 변화 시점&lt;/h3&gt;&lt;p&gt;우선 현재 회로에서는 1이라는 데이터를 저장할 때에만 set에 1이라는 값이 들어오고,
0으로 데이터를 되돌릴 때에만 reset에 1이라는 값이 들어오는 것을 가정하고 있다.
그렇다면 혹시라도 데이터를 변경할 생각이 없음에도
순간적으로 set이나 reset에 1이라는 입력값이 들어온다면 어떻게 될까?
래치는 이를 문제라고 인식하지 못하고 당연히 1이나 0으로 출력값을 설정할 것이다.&lt;/p&gt;&lt;p&gt;이러한 가능성을 최소화하기 위해서는
저장하려는 데이터에 대한 입력값만이 아니라,
해당 정보를 사용하여 실제로 &lt;strong&gt;회로에 데이터를 저장하라고 명령을 내리는 입력값&lt;/strong&gt;도
함께 받아들이는 것이 가장 확실한 안전장치라고 볼 수 있다.
즉, 회로의 출력값을 변경하라는 명령이 들어오지 않는 동안에는
저장하려는 입력값이 0이 되든 1이 되든 회로에 아무런 영향도 미치지 못하게 하는 것이다.&lt;/p&gt;&lt;h3&gt;전파지연&lt;/h3&gt;&lt;p&gt;한편 입력값들에 부합하는 연산 결과가
게이트들을 지나 출력값으로 나올 때까지는 당연히 시간이 걸리며,
우리는 이를 &lt;strong&gt;전파지연(propagation delay)&lt;/strong&gt;이라고 부른다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/76fc055ece1232dbfcb614cee4de492f/18c13/propagation-delay.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:31.901840490797547%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+klEQVQY022QSWvDQAyF/f//RkNj55zk7nMcu2BIfUiNwfuO992vSGAT2gjEY+aNPkkjrOuKd0nRdR3iOIbruqx5niPLMlY627a936Vpyir8hbxG27YwTRNhFP3z5nmGZVnwfZ/BlGEYQqiqCmVZgpS6bAbBmqbBsiyIogiGYcDzPJ52gziOg2ma9iZUz0B6QCuQUkEQBDuwrmuodxUn6YS+7znJK4oC4lGErusMo3OSJBCogDoRhC5fgzyaSpZlHD4OuF6ucGyHPQKLn0dIooTL+cwTE0PAm9j+cxgGjOPIUyu3G+6Kgp/nk1ejRl+aBk1V8f148Oq07S8El8L2WsvHjgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;전파지연&quot; title=&quot;전파지연&quot; src=&quot;/static/76fc055ece1232dbfcb614cee4de492f/a6d36/propagation-delay.png&quot; srcSet=&quot;/static/76fc055ece1232dbfcb614cee4de492f/222b7/propagation-delay.png 163w,/static/76fc055ece1232dbfcb614cee4de492f/ff46a/propagation-delay.png 325w,/static/76fc055ece1232dbfcb614cee4de492f/a6d36/propagation-delay.png 650w,/static/76fc055ece1232dbfcb614cee4de492f/e548f/propagation-delay.png 975w,/static/76fc055ece1232dbfcb614cee4de492f/18c13/propagation-delay.png 1005w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;위의 그림을 보면 알 수 있겠지만
B라는 입력값이 변화했을 때 NOT 게이트의 출력값인 C가 변하는 데에는 시간이 걸리며,
다시 C를 입력값으로 받아 생성되는 D라는 출력값이 변하는 데에도 시간이 걸린다.
문제는 이 시간이 확실하게 고정된 값이 아니라 회로의 구성 등을 토대로
계산된 통계적인 예측값이라는 점이다.
이로 인해 회로에 입력값이 변경되었을 때
위의 회색 구간처럼 실제 출력값을 &lt;strong&gt;예측할 수 없는 구간&lt;/strong&gt;이 생겨나게 된다.&lt;/p&gt;&lt;p&gt;이러한 구간이 구체적으로 어떠한 문제를 발생시킬 수 있을까?
예를 들어 메모리에 &lt;code&gt;1&lt;/code&gt;과 &lt;code&gt;1&lt;/code&gt;을 저장하고
해당 비트 데이터에 대해 덧셈 연산을 수행하도록 지시를 내린다고 생각해보자.
만일 두 비트 데이터 중 하나가 아직 &lt;code&gt;0&lt;/code&gt;에서 &lt;code&gt;1&lt;/code&gt;로 변하기 전에
연산이 실행된다면 &lt;code&gt;1 + 1 = 2&lt;/code&gt; 대신 &lt;code&gt;1 + 0 = 1&lt;/code&gt;이라는 결과가 출력될 것이다.&lt;/p&gt;&lt;p&gt;때문에 회로가 안정적으로 동작하기 위해서는
하나의 작업을 수행했을 때마다 가급적 최악의 경우를 가정하고
&lt;strong&gt;예상되는 지연 시간의 최댓값만큼 다음 연산의 수행을 지연&lt;/strong&gt;해야 한다.&lt;/p&gt;&lt;p&gt;바로 이러한 두 가지 목적을 달성하기 위해 일반적인 메모리 회로에서는
&lt;strong&gt;클록(clock)&lt;/strong&gt;이라는 개념을 활용한다.&lt;/p&gt;&lt;h2&gt;클록&lt;/h2&gt;&lt;p&gt;클록이란 무엇인가.
이름만 보면 회로 내에서 시계와 같은 기능을 하는 부품이라고 생각할 수 있겠지만
정확히는 &lt;strong&gt;시간의 경과를 알려주는 데이터 입력값&lt;/strong&gt; 자체를 의미한다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:359px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/701fcfc84d754e0048fda11b68711098/f5eb6/oscillator.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:44.78527607361963%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABUElEQVQoz41SXYuCUBD1//+D/kMvPUYQRZqoUKlRlIRlVg+aGaFlX2c5A1d2oWV3YJj7Mffcc2ZG2263mE6nWCwWmM1mmM/ndeR5WZagvd9v/Me0yWSCNE1xPp9RVRWKohC/3+8IggD7/V4SX69XDcr4m2tkFscx2u02brdb/Zi22+1qQGV/MRVAPiSb0WgkTJUlSYIsy2TNz/I8l/X1epU9P6YaRnWmeZ6H8XgsLGm2bcMwDERRBF3XZU1Wz+ezBhwMBjBNU950u11sNhvZU412PB7R7/exWq0keTgcotlswnEcdDodKQVZXC4XqTVBSMJ1Xfmc+16vJ40UyUoa0ZnErn8ySucd88j0dDphvV7j8XggDMO6/poqfqvVwuFw+NFFyqR/bwTrxWmg845AHC0y5JkAUo4CUx3+NBK8Wy6X8H1fZpSR82pZFhqNhij9AlUVpVknaddWAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;발진자&quot; title=&quot;발진자&quot; src=&quot;/static/701fcfc84d754e0048fda11b68711098/f5eb6/oscillator.png&quot; srcSet=&quot;/static/701fcfc84d754e0048fda11b68711098/222b7/oscillator.png 163w,/static/701fcfc84d754e0048fda11b68711098/ff46a/oscillator.png 325w,/static/701fcfc84d754e0048fda11b68711098/f5eb6/oscillator.png 359w&quot; sizes=&quot;(max-width: 359px) 100vw, 359px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;주기적으로 0과 1 사이의 출력을 오가는 회로 내의 부품을 발진자(oscillator)라고 하는데,
이러한 부품의 출력값을
&lt;strong&gt;입력값으로 받음으로써 주기적으로 값이 1이 되었을 때에만 특정 작업을 반복하여 수행하도록 설정&lt;/strong&gt;할 수 있다.
그리고 이렇게 사용되는 입력값이 바로 클록(clock)이다.
물론 위와 같이 NOT 게이트를 사용하는 경우 다시 전파 지연이라는 문제로 인해
0이 되고 1이 되는 시점이 불확실해진다.
때문에 실제로는 크리스탈과 같이 별도의 부품을 활용하여
안정적이고 적은 비용으로 발전기를 만들어내고, 이를 통해 클록이라는 자극을 구현한다.&lt;/p&gt;&lt;p&gt;우리는 이제 이 클록을 래치의 입력값으로 받아 적절하게 사용함으로써
위에서 이야기한 문제점들을 해결할 수 있다.
드디어 우리는 이 게시물의 핵심인 D 플립플롭에 대해 이야기할 준비가 끝났다.&lt;/p&gt;&lt;h2&gt;플립플롭&lt;/h2&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/828c51e178ab2af439055368e686c483/1cfc2/d-flip-flop.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:73.00613496932516%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABaklEQVQ4y5WU2YrCQBRE/f8fUxREVHxwiQtuiUvivlvDudAhE3vCeKFJTNrqU3W7U1Km3u93Op7Ppy6XizabjbbbrT1zc4qqlBekbrebwjDUfD7XarXS/X5Xv9/X4XD4tfC/Bc/ns06nkxaLhdbrtR6PhwaDgZbL5YdgXtgriNX9fq8kSVSpVFStVk0Ycl882d+FhNPpVKPRyOwPh8OUMo5j+f6XEubxIYQOKoSpTqejcrlslNfrVd1u195z7yXM4tME8pvNZnalIVAiCh0L8ozBbvgQdEKv18u6ikir1TLLkBIBxTvyrNfrtgNcpoWWEcVGFEXq9XrWHAbFAlBjdTwe25X52QZ5LbMylM1m06xikeZgmXts4iAIAh2Px78tZzPEXq1Ws65CDFGj0Uj3psvOa9l3/Kjdbmd5ITSZTNKO++YW7kNyoaByew8y7H99UvI5ug632237SHx9lt1EcuNLQ2ch9G0Rn+APpO+L3dioMPgAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;D 플립플롭&quot; title=&quot;D 플립플롭&quot; src=&quot;/static/828c51e178ab2af439055368e686c483/a6d36/d-flip-flop.png&quot; srcSet=&quot;/static/828c51e178ab2af439055368e686c483/222b7/d-flip-flop.png 163w,/static/828c51e178ab2af439055368e686c483/ff46a/d-flip-flop.png 325w,/static/828c51e178ab2af439055368e686c483/a6d36/d-flip-flop.png 650w,/static/828c51e178ab2af439055368e686c483/1cfc2/d-flip-flop.png 900w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;핵심만 말하자면 플립플롭은 비트 단위로 데이터를 저장하는 회로 구조이다.
그 중에서 특히 D 플립플롭이 메모리 회로를 구성하기 위해 흔하게 사용되며
위와 같은 구조를 지닌다.
그러나 엄밀히 말하자면 플립플롭이란
&lt;strong&gt;에지에 의해 데이터 변화가 촉발되는 래치(edge-triggered latch)&lt;/strong&gt;이며,
D 플립플롭은 &lt;strong&gt;양의 에지에 의해 변화가 촉발되는(positive edge-triggered) 플립플롭&lt;/strong&gt;을
의미한다.
대체 이게 무슨 의미일까?
위의 구조를 한 번 자세히 들여다봐보자.&lt;/p&gt;&lt;p&gt;우선 D 플립플롭의 우측 부분만 보았을 때 위에서 다룬
S-R 래치와 동일함을 알 수 있다.
Q와 &lt;div&gt;Q&lt;/div&gt;는 플립플롭의 최종적인 출력값으로 사용되며,
clock과 D라는 입력값을 토대로
정해지는 &lt;div&gt;S&lt;/div&gt;와 &lt;div&gt;R&lt;/div&gt;라는 데이터는
S-R 래치의 두 입력값 &lt;div&gt;set&lt;/div&gt;와 &lt;div&gt;reset&lt;/div&gt;에 대응된다.
그렇다면 clock과 D라는 입력값의 변화와 그 조합에 따라 S와 R의 값이
어떻게 정해지는지만 파악하면 이 회로를 완전히 파악할 수 있다.&lt;/p&gt;&lt;h3&gt;클록이 변할 때 D의 값이 저장된다&lt;/h3&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/67b2e6e9336cfced888421b1b4cc68ee/2d2d6/edge-triggering-process.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:41.104294478527606%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABEklEQVQoz1WSV47DMAxEff/r+TPuDe69NwaPgYBdAkJEajgzZGy97yvzPP87x3HIuq4yjqNM0yQmqBVFIfu+a/2+b8nzXO/LsmhuPc+jyefzEd/3leS6LgWa3ASNVVVJEATSNI0SIEBeluWPECCu6rqWLMskjmN1CIBmiE2A6/teiTFA3rat1hCHw8INjSjyCBnEphFVE+AMFueM7nme1oZhEKa1aEjTVA93CMMwVBBi5AAJHDAeuwTLqmzbVnGwHB0ZdkZjTNQB4pL9cEz8dYSB8zzFdV29d10n27b9CHGAMg+oE0mSqFPzLxuXCDqOo3iCCdh7FEUqqIQw08gvqlgnh5wGE3xi7BkM74gYHFNS/wK26GSsLNOFcgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;에지에 따른 변화&quot; title=&quot;에지에 따른 변화&quot; src=&quot;/static/67b2e6e9336cfced888421b1b4cc68ee/a6d36/edge-triggering-process.png&quot; srcSet=&quot;/static/67b2e6e9336cfced888421b1b4cc68ee/222b7/edge-triggering-process.png 163w,/static/67b2e6e9336cfced888421b1b4cc68ee/ff46a/edge-triggering-process.png 325w,/static/67b2e6e9336cfced888421b1b4cc68ee/a6d36/edge-triggering-process.png 650w,/static/67b2e6e9336cfced888421b1b4cc68ee/e548f/edge-triggering-process.png 975w,/static/67b2e6e9336cfced888421b1b4cc68ee/2d2d6/edge-triggering-process.png 1205w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;위의 회로도를 한번 봐보자. 굵은 색은 1에 해당되는 값의 전파가 흐르고 있음을 의미한다.&lt;/p&gt;&lt;p&gt;좌측의 두 회로도를 보면 D의 값이 1로 고정되었을 때
clock이 0에서 1로 변하자 S의 값이 0에서 1로 변함을 알 수 있다(&lt;div&gt;S&lt;/div&gt;은 1에서 0으로 변화).
이는 플립플롭의 출력값이 1로 설정되었음을 의미한다.&lt;/p&gt;&lt;p&gt;우측의 두 회로도의 경우 D의 값이 0으로 고정되었을 때
clock이 0에서 1로 변하자 R의 값이 0에서 1로 변함을 알 수 있다(&lt;div&gt;R&lt;/div&gt;은 1에서 0으로 변화).
이는 출력하는 값이 0으로 설정되었음을 의미한다.&lt;/p&gt;&lt;p&gt;그렇다. &lt;strong&gt;D라는 입력값은 회로에 저장하고 싶은 데이터를 의미한다.&lt;/strong&gt;
그리고 클록이 0에서 1로 변하는 순간이 바로 이 D라는 입력값을 회로에 저장하라는 신호이다.
이러한 신호를 우리는 &lt;strong&gt;에지(edge)&lt;/strong&gt;라고 부르며,
이것이 바로 위에서 우리가 희망하던 &lt;strong&gt;회로에 데이터를 저장하라고 명령을 내리는 입력값&lt;/strong&gt;이라고 볼 수 있다.&lt;/p&gt;&lt;p&gt;이제야 우리는 위에서 언급한 &lt;strong&gt;에지에 의해 데이터 변화가 촉발&lt;/strong&gt;된다는
플립플롭의 정의를 이해할 수 있게 되었다.
특히 D 플립플롭은 &lt;em&gt;양의 에지&lt;/em&gt;에 의해 변화가 촉발된다고 하였는데,
그 의미가 바로 클록이 0에서 1로 변화할 때 D의 값을 저장한다는 의미이다.
만약 클록이 1에서 0으로 변할 때 변화가 촉발될 경우
&lt;em&gt;음의 에지&lt;/em&gt;에 의해 변화가 촉발(negative edge-triggered)된다고 정의되었을 것이다.&lt;/p&gt;&lt;h3&gt;클록이 일정할 때 D는 영향력이 없다&lt;/h3&gt;&lt;p&gt;이번에는 클록이 고정되어있을 때 D의 변화가 출력값에 미치는 영향에 대해 알아보자.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/545905e6ff2ef894d2f911879ce9b420/2e694/d-powerless.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:34.355828220858896%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA8klEQVQoz02Rh6oFMQhE8//fuLCV7Y3t3csZyOMJkmTUcTRu2zZb19Xu+zaMc5omYdd16Zzn2Y7jUPx9X72XZbF935XPyZuYa9vW0jQVgFFY17UwiMdx1J087Hkea5rGsiyzvu/tPE8rikKOAEe3siwFYCgisaoqy/PchmGwrussSRKR4cQgBUcIdxwxDjJIkIuhKIqivzWEYagGfiUUEfcr8MTf9+nt6AaAEowRIGFEdsNoqGd8mlIYx7FU0hycOE2lECLGYXRvYBSRzF6IQ+CnIB4EgXaNct+Uu4P1/y9j/udRC86ewPxY1HiMnZKLE/8Bwa0ZZ+gBQkcAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;D의 무력함&quot; title=&quot;D의 무력함&quot; src=&quot;/static/545905e6ff2ef894d2f911879ce9b420/a6d36/d-powerless.png&quot; srcSet=&quot;/static/545905e6ff2ef894d2f911879ce9b420/222b7/d-powerless.png 163w,/static/545905e6ff2ef894d2f911879ce9b420/ff46a/d-powerless.png 325w,/static/545905e6ff2ef894d2f911879ce9b420/a6d36/d-powerless.png 650w,/static/545905e6ff2ef894d2f911879ce9b420/e548f/d-powerless.png 975w,/static/545905e6ff2ef894d2f911879ce9b420/2e694/d-powerless.png 1048w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;좌측의 회로도는 클록이 0으로 고정된 경우를 나타낸다.
이때 클록의 값은 각각 &lt;div&gt;S&lt;/div&gt;와 &lt;div&gt;R&lt;/div&gt;의 값을 결정하는
두 NAND 게이트의 입력값으로 사용된다는 점에 유의하자.
NAND 게이트는 입력값이 모두 1인 경우에만 0을 출력하기 때문에
클록값이 0이라면 D의 값이 어떻든지와는 무관하게
언제나 1이라는 값을 일관되게 출력할 것임을 쉽게 예상할 수 있다.&lt;/p&gt;&lt;p&gt;중앙에 있는 두 회로도의 경우 클록이 1이고, &lt;div&gt;S&lt;/div&gt;와 &lt;div&gt;R&lt;/div&gt;의 값이
1과 0일 때 D가 변화하는 경우를 다루고 있다.
이 경우 &lt;div&gt;S&lt;/div&gt;와 &lt;div&gt;R&lt;/div&gt;의 값은 그대로 1과 0으로 유지된다.
이는 D가 0인 상태로 클록이 1이 되었을 때 촉발된 &lt;em&gt;데이터를 0으로 설정하라&lt;/em&gt;는 지시는
이후 D의 값이 변화하더라도 그대로 수행될 것임을 알 수 있다.&lt;/p&gt;&lt;p&gt;마지막으로 우측에 있는 두 회로도의 경우 클록이 1이고, &lt;div&gt;S&lt;/div&gt;와 &lt;div&gt;R&lt;/div&gt;의 값이
0과 1일 때 D가 변화하는 경우를 다루고 있다.
이 경우에도 마찬가지로 &lt;div&gt;S&lt;/div&gt;와 &lt;div&gt;R&lt;/div&gt;의 값은 그대로 0과 1으로 유지된다.&lt;/p&gt;&lt;p&gt;이를 통해 우리는 클록이 0에서 1로 변하는 시점(에지)에서의 D의 값만이
회로에 변화를 일으킬 뿐,
&lt;strong&gt;D의 변화 자체는 아무런 영향도 미치지 못함&lt;/strong&gt;을 알 수 있다.
이는 클록이 0과 1 사이를 오가는 주기를 적절하게 설정함으로써
회로에 변화가 일어나는 시점을 온전히 통제할 수 있음을 의미한다.
이에 따라 우리는 위에서 이야기한 &lt;strong&gt;예상되는 지연 시간의 최댓값만큼 다음 연산의 수행을 지연&lt;/strong&gt;한다는
목적을 이룰 수 있게 되었다.&lt;/p&gt;&lt;h3&gt;클록 에지 시점에 D는 고정되어야 한다&lt;/h3&gt;&lt;p&gt;다만, 오해하면 안 되는 점이 한 가지 있다.
바로 클록 에지가 발생하는 시점에는 D의 값이 마음대로 변해서는 안 된다는 점이다.
클록의 값이 0에서 1로 변화하는 시점에 D의 값이 안정적으로 유지되어야만
의도한 방식으로 회로의 출력값을 변화시킬 수 있다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/a506178f665aa746ffad61322470e3b4/42d54/setup-and-hold-time.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:22.699386503067483%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABCklEQVQY0z2O3Y6CMBSEef/3WUlW/EGglcINSAGlXtkCATQahdvZ9CTrxZeZ007OHOf5fOKmNbqug9aaMG1Lc9u2X/q+pzfLvzem/Wa7vscwDHCyLEMQRYhFgt+1h7W3QRCGEGmKIIyQJCmiiCEWAr5/wG7vI2QMe/+AleviZ+Vis93RDsaPcGzb6/XC5/Mh5nnGsiyk7/cbyzzjfr/DGIPH44FpmjCOI8ZhIG//LNbbXU5+OlHrMRaIGMfa86h5s92CxzH4MaZrpCxRFBJpkiLPTzifL8jyHIxzMMYhRIJClnC0NqiqGup6RaMUBau6JrWzUlfySik0jUJVVaSXpiEvyxJSShRSUuYPU81h1Q+xWNYAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;셋업타임과 홀드타임&quot; title=&quot;셋업타임과 홀드타임&quot; src=&quot;/static/a506178f665aa746ffad61322470e3b4/a6d36/setup-and-hold-time.png&quot; srcSet=&quot;/static/a506178f665aa746ffad61322470e3b4/222b7/setup-and-hold-time.png 163w,/static/a506178f665aa746ffad61322470e3b4/ff46a/setup-and-hold-time.png 325w,/static/a506178f665aa746ffad61322470e3b4/a6d36/setup-and-hold-time.png 650w,/static/a506178f665aa746ffad61322470e3b4/42d54/setup-and-hold-time.png 858w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;위의 그림을 통해 이에 대해 자세히 알 수 있다.
CK의 값이 0에서 1로 변화하는 시점을 기준으로 그 직전과 직후에 D의 값이
안정적으로 유지되어야만 하는 기간을 각각 셋업타임과 홀드타임이라고 불린다.
이 기간 동안 D 값이 유지되어야 이를 제대로 사용하여 NAND 게이트들이 동작할 수 있다.
그리고 NAND 게이트들의 출력값이 변하고 Q와 &lt;div&gt;Q&lt;/div&gt;의 값이
최종적으로 결정될 때까지의 기간이 바로 그동안 지겹도록 이야기한 전파 지연의 기간이다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;참고문서&lt;/div&gt;&lt;ul&gt;&lt;li&gt;컴퓨터 과학 총론: &lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9788993712629&quot;&gt;링크&lt;/a&gt;&lt;/li&gt;&lt;li&gt;한 권으로 읽는 컴퓨터 구조와 프로그래밍: &lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9791189909284&quot;&gt;링크&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;NAND 게이트의 경우 이전 게시글들에서 설명하지 않은 개념이지만
그 명칭이나 회로도만 보더라도 그 기능을 어느 정도 유추할 수 있을 것이다.
NOT 게이트의 세모 부분은 입력값을 그대로 반환한다는 의미이며,
출력부의 작은 동그라미는 출력값을 반전시킨다는 의미이다.
그리고 NAND 게이트는 기본적으로 AND 게이트의 출력부에
바로 이 동그라미가 추가된 구조라고 볼 수 있다.
때문에 NAND 게이트는 일반적인 &lt;strong&gt;AND 연산을 수행한 이후,&lt;/strong&gt;
&lt;strong&gt;그 결과에 대해 NOT 연산을 수행한다&lt;/strong&gt;는 의미를 지닌다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[아날로그에서 디지털로: 회로의 기초]]></title><description><![CDATA[회로란 안정성을 위해 현실에 존재하는 아날로그적인 자극을 디지털적인 동작으로 바꿔주는 도구라고 볼 수 있다. 이산적인 데이터를 일관된 논리에 따라 적절하게 활용하면 매번 동일한 입력값에 대해 동일한 출력값을 안정적으로 도출해낼 수 있게 된다.]]></description><link>https://bugoverdose.github.io/computer-science/analog-and-digital/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/analog-and-digital/</guid><pubDate>Mon, 10 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;아날로그(analog)와 디지털(digital)의 차이는 정확히 어디에 있을까?
일반적으로 우리는 오래된 기술을 의미하기 위해 아날로그라는 표현을,
동작하는 데 전기를 필요로 하는 기계에 대해서는 디지털이라는 표현을 사용한다.
현실에서 이러한 용법은 틀리지 않는 경우가 일반적이지만,
이는 결과론일뿐 해당 용어의 정의에 부합한다고 보기는 어렵다.
오늘은 해당 용어를
중심으로 &lt;strong&gt;&lt;div to=&quot;/computer-science/bit-and-logic-operation&quot;&gt;지난 게시글&lt;/div&gt;&lt;/strong&gt;에서
언급한 회로(circuit)에 대해 조금만 더 이야기해보고자 한다.&lt;/p&gt;&lt;h2&gt;아날로그와 디지털의 정의&lt;/h2&gt;&lt;p&gt;결론부터 말하자면 아날로그와 디지털은 다루는 데이터의 성격에 대한 이야기이다.
간단히 말해
&lt;strong&gt;아날로그는 연속적인 데이터를, 디지털은 이산적인 데이터를 다룬다는 의미다.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;간단한 예를 들어보자,
30cm 자가 있을 때 우리는 cm 단위로만 길이를 측정하지 않는다.
눈금 사이의 값을 토대로 우리는 대상의 길이를
0.5cm, 0.1cm, 0.15cm 정도라고 유추할 수 있다.
이는 자의 0cm와 1cm 사이에 소수 값들이 무한하게 존재하고 있기 때문이다.
그리고 세상의 존재하는 모든 물건들의 높이, 넓이 등은 0.00001cm보다도 더
작은 단위로 측정될 수 있는데,
바로 이러한 측면에서 길이란 &lt;strong&gt;연속적인 데이터&lt;/strong&gt;라고 볼 수 있다.
현실에 존재하는 모든 물질이 지닌 길이, 부피, 무게와 같은 성질들은
이처럼 연속적인 데이터로 표현될 수 있다.&lt;/p&gt;&lt;p&gt;그렇다면 이산적인 데이터란 무엇일까?
간단히 말해 &lt;strong&gt;정수만을 다룬다&lt;/strong&gt;는 의미이다.
0과 1 사이에 다른 값이 존재하지 않는다고 간주하는 것이 바로 이산적인 데이터의 핵심이다.
그렇다. 연속적인 데이터에 비해 이산적인 데이터는
&lt;strong&gt;다루는 값의 범위가 실수에서 정수로 줄어든 것에 불과하다&lt;/strong&gt;는 것이다.&lt;/p&gt;&lt;p&gt;&lt;em&gt;엥? 범위가 줄어들었다면 정확도가 떨어지지 않나?&lt;/em&gt;라는 의문이 드는 것이 정상일 것이다.
실제로 1.5cm를 1cm나 2cm로 표현하는 것을 정확하다고 보기는 어렵다.
그러나 디지털은 단순히 아날로그적인 방식으로 도출한 결과물을 그대로 반올림하는 것을 의미하지 않는다.&lt;/p&gt;&lt;p&gt;아날로그란 현실에 존재하는 연속적인 데이터를
있는 그대로 나타내는 것이라 볼 수 있다.
다만, 이처럼 연속적인 값을 그대로 측정할 경우
누가 언제 측정하였느냐에 따라 매번 결과가 달라질 수 있다는 문제점을 내포하고 있다.
이 때문에 디지털은 0과 1 사이에 존재하는 무한한 값을 완전히 버림으로써
안정성을 추구한다고 볼 수 있다.
즉, 디지털이란 &lt;strong&gt;내부적으로 이산적인 데이터를 활용하여&lt;/strong&gt;
물리적인 현실을 나타내는 데이터를 &lt;strong&gt;안정적이고 일관되게 도출&lt;/strong&gt;해내는 것을 의미한다.&lt;/p&gt;&lt;h2&gt;회로의 필요성&lt;/h2&gt;&lt;p&gt;이산적인 데이터가 안정적이라는 것은 알겠다.
그런데 한 가지 문제가 있다.
숫자라는 것은 추상화된 개념일 뿐이며,
물리적인 실체를 지닌 도구를 만들려면 물리적인 대상과 현상을 활용해야 한다는 점이다.
그리고 현실에 존재하는 모든 물리적인 실체는
(양자역학의 세계로 들어가지 않는 한) 아날로그, 연속적이라는 특성을 지닌다.&lt;/p&gt;&lt;p&gt;바로 이 지점에서 회로가 등장한다.
회로란 전류가 흐르는 길 혹은 그러한 구조를 포괄적으로 지칭한다.
컴퓨터 자체를 하나의 회로라고 정의하는 경우도 있으며,
컴퓨터를 구성하는 개별 부품의 가장 작은 구성 단위를 회로라고 부르기도 한다.&lt;/p&gt;&lt;p&gt;그러나 회로가 지니는 의미는 본질적으로 간단하다.
회로란 안정성을 위해
&lt;strong&gt;현실에 존재하는 아날로그적인 자극을 디지털적인 동작으로 바꿔주는 도구&lt;/strong&gt;라고
볼 수 있다.
그리고 이산적인 데이터를 일관된 논리에 따라 적절하게 활용하면 우리는
매번 동일한 입력값에 대해 동일한 출력값을 안정적으로 도출해낼 수 있게 된다.&lt;/p&gt;&lt;h2&gt;전이함수&lt;/h2&gt;&lt;p&gt;그렇다면 구체적으로 어떠한 방식으로 회로가 동작하며 구성되는지를 한 번 알아보자.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/9e15258daf0af0505b88fc9d814d8723/d0cc0/transfer-function.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:48.46625766871166%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABHklEQVQoz3VSSY6EMAzk/+/hFRw5cYADIIY9kGZfPSprHEUMbckK2HG5XLFz3zfB1nWlYRhonmeapumfj+PIJ/LwoigoTVOq65ratqWu6xjHoT/bto3O86RvNgwfyn8yUq0ipRQ3EDKwZVn439Fak/hxHJxEwr5sN/V9nxnhW5iDcVmWlGUZOZ7nkeu6FASBAYNd10UfrVmGvu9ZEhTBkbMdNQDGhMwQeqDIHhkXoQsAi6KkJEl4gn3fOfc0sOWR7XFw+c2apjHNUCiAtjQGUAIQVTREAQDQAOylEeLQ601fiRtABAAqRVEUsV5P1mCCZk8d5dUdew/xelgJsMIJYMTjOKYwDNnzPDe7KC77afbwbQTb0AhAVVUxk28Ghr9SwAqTLNM+fgAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;전이함수&quot; title=&quot;전이함수&quot; src=&quot;/static/9e15258daf0af0505b88fc9d814d8723/a6d36/transfer-function.png&quot; srcSet=&quot;/static/9e15258daf0af0505b88fc9d814d8723/222b7/transfer-function.png 163w,/static/9e15258daf0af0505b88fc9d814d8723/ff46a/transfer-function.png 325w,/static/9e15258daf0af0505b88fc9d814d8723/a6d36/transfer-function.png 650w,/static/9e15258daf0af0505b88fc9d814d8723/d0cc0/transfer-function.png 732w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;전이함수란 외부에서 들어오는 자극의 정도에 따라
데이터가 어떻게 수치화되는지에 대한 함수이다.
기본적으로 외부에서 들어오는 자극, 즉 입력값이
직선부(linear region)의 범위를 벗어나지 않을 경우
출력값은 입력값의 정도에 1대1로 대응되는 데이터로 변환된다고 볼 수 있다.
이처럼 입력값을 그대로 데이터화하는 것이 바로 아날로그적인 방식이라고 볼 수 있다.
그렇다면 어떻게 해야 디지털적인 방식으로 입력을 데이터화할 수 있을까?&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:496px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/7f8f19b3c583b94eff40ae1028566494/bb630/clipping.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:65.03067484662577%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABkElEQVQ4y41T6crCQAzs+z+SUsFfgojoJ4jF1qOt1R5e2Najx8jkc0u9wEDY7W4ym5mkGn60JElwuVxkjeMYRVEgSWI4to0oDKs4LcsyCbxer29+Pp9h2zYMw0Cj0UC73Yau62g2mxiNRtjtdvgbDtHr9bBer5GmKTQm5lmGsixRFoWsfJ12OBxgmaZUxTM+XjximExbeR6CIIDjOP8V3m63CkAZE2jH4xGe573d05hHm8/nCMNQQCvAPM8rIOXy+moF3/elUiUBnRKdTiep2LIsiVsul58B6yuDoyjCdrsVIFKnE3yxWIiGs9lM7tko5omGdUrcq+/xeFx199WoGQE3m82TVNJlVqjo1G0ymQjYJ0DXdbHf758AhTIPO50OWq0WBoOBlE/dTNNEt9uVpvCMlVI3Oh9mM6bTqchClgpcKLOb1EAlEJBzRUoEJT0y4agoJnQ2i3n1hmn1cgOf8+TKBR+h8KyC+19Nq8akLB+/Viprv9+XUeBeDXF9rL659jrMqtOky/niWJHSa8y3Cu9FHeq763Ng9gAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;클리핑&quot; title=&quot;클리핑&quot; src=&quot;/static/7f8f19b3c583b94eff40ae1028566494/bb630/clipping.png&quot; srcSet=&quot;/static/7f8f19b3c583b94eff40ae1028566494/222b7/clipping.png 163w,/static/7f8f19b3c583b94eff40ae1028566494/ff46a/clipping.png 325w,/static/7f8f19b3c583b94eff40ae1028566494/bb630/clipping.png 496w&quot; sizes=&quot;(max-width: 496px) 100vw, 496px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;위는 곡선의 가파른 정도, 즉 게인(gain)을 최대한으로 설정했을 때의 그래프를 보여준다.
해당 그래프의 핵심은 &lt;strong&gt;입력값의 범위가 직선부를 넘어선다는 점&lt;/strong&gt;이다.
이러한 구조는 더 이상 외부 자극에 1대1로 대응되는 값을 출력하는 것을 목표로 하지 않는다.
기본적으로 모든 입력값은 기본적으로
포화(saturation)라고 불리는 상단부 영역 혹은
차단(cutoff)이라고 불리는 하단부 영역의 데이터 중 하나를 출력하게 된다.
&lt;strong&gt;바로 이 값이 개별 비트에 담기는 0 혹은 1이라는 데이터의 물리적인 형태&lt;/strong&gt;라고 볼 수 있다.&lt;/p&gt;&lt;p&gt;그리고 회로를 구성하는 모든 요소들은 전기를 입력받아
이처럼 0 혹은 1의 해당되는 데이터를 전기의 형태로 출력하고,
다시 서로로부터 해당 출력값을 입력값으로 받음으로써
&lt;em&gt;0과 1의 세계&lt;/em&gt;가 만들어지게 된다.&lt;/p&gt;&lt;h3&gt;어째서 0과 1만 다루는가&lt;/h3&gt;&lt;p&gt;사실 위의 내용을 읽으면 의문이 들어야 정상이다.
이산적인 데이터를 정수라고 설명해놓고는 왜 0과 1만을 다루는 것일까?&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/4413cefa6932a6439e1d0871c4f4d199/3fca6/possibilities.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:31.288343558282207%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA1klEQVQY002QWwqFMAxE3f/i9E9FEAVFQfGJWm3VuUwg3gbSlrSdnEnwPA/u+4a/n+eJfd9xHAecc3jfF9ZaOTP1zPq6rui6Tt7zb8CFF37oJetMNmIyWNeo6xpJkqBpGlRVhW3bECiVkBmD67rkQol9eg0SZlmGKIpQlqUQcidIoB2NMVKgID+TTCl9F9M0iVAYhojjGHmeo23bvyBnwZkty/LZUavOOhG3zmEYBrGWpimKoviSYvM8o+97masQkoo21LoS8YFaZne6YGMKjOMoTTgeP35kPdBDSLdMjQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;가능성들&quot; title=&quot;가능성들&quot; src=&quot;/static/4413cefa6932a6439e1d0871c4f4d199/a6d36/possibilities.png&quot; srcSet=&quot;/static/4413cefa6932a6439e1d0871c4f4d199/222b7/possibilities.png 163w,/static/4413cefa6932a6439e1d0871c4f4d199/ff46a/possibilities.png 325w,/static/4413cefa6932a6439e1d0871c4f4d199/a6d36/possibilities.png 650w,/static/4413cefa6932a6439e1d0871c4f4d199/e548f/possibilities.png 975w,/static/4413cefa6932a6439e1d0871c4f4d199/3fca6/possibilities.png 1112w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;사실 위와 같은 방법으로 3진법이나 10진법을 구현하는 것도 가능은 할 것이다.
그러나 보면 알겠지만 3진법부터는 전이함수의 중앙에 있는 범위에
값을 유지시킬 수 있어야 모든 값을 제대로 사용할 수 있게 된다.
이는 입력값을 단순히 최대 혹은 최소로 지정하는 것에 비해
안정성이 떨어진다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;뿐만 아니라 두 가지 종류의 데이터만으로도
비트 단위에 대해 논리연산을 조합함으로써
보다 복잡한 연산을 구현해내는 것이 충분히 가능하다.
이에 대해서는 &lt;strong&gt;&lt;div to=&quot;/computer-science/bit-and-logic-operation&quot;&gt;지난 게시글&lt;/div&gt;&lt;/strong&gt;에서 다루었다.&lt;/p&gt;&lt;h2&gt;잡음내성과 글리치&lt;/h2&gt;&lt;p&gt;아날로그에서 디지털로 넘어온 것도,
이산적인 데이터 중에서도 오직 0과 1만을 사용하는 것도
전부 &lt;strong&gt;안정성&lt;/strong&gt;을 추구하기 때문이었다.
그러나 이것만으로는 안정성이 충분히 확보되었다고 보기 어렵다.
다양한 문제점 중 대표적인 예가 바로 잡음(noise)으로 인한 글리치(glitch) 현상이다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/4c39ee28c27426fe4dab31a8afc311dc/2b2c6/glitch.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:36.19631901840491%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA/klEQVQoz11QXW+DMAzM//9vCKTupX1oM0GRMkggQMI3ns7FaNpJkWL7fD5bbdtG67pebxgGGseRmqahIs85Rn7fd1qWhYQvPGctFUXBMeoqDIEJCGKMpLWmvu+p6zom/xjDtTFGmqaJhZ1zVJYli7Rty8OzLKMQAimICCBiraX1dAJyXdd0HAeLCZAHD+LzPHNfkiT8Z0E0AMYYdgciIA4ArCd5DIErAIOhkabpR9B7zwRMfD2flJ93Awk5NOIPXlVVPOBxv9PX7cauYQC5b63J+44UJttTsHy/L0f/wTd17roXtgFkO4HCGnILuMAKshrI0iA8uIVT/KX+9/0CLk4cN6bgjlYAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;글리치&quot; title=&quot;글리치&quot; src=&quot;/static/4c39ee28c27426fe4dab31a8afc311dc/a6d36/glitch.png&quot; srcSet=&quot;/static/4c39ee28c27426fe4dab31a8afc311dc/222b7/glitch.png 163w,/static/4c39ee28c27426fe4dab31a8afc311dc/ff46a/glitch.png 325w,/static/4c39ee28c27426fe4dab31a8afc311dc/a6d36/glitch.png 650w,/static/4c39ee28c27426fe4dab31a8afc311dc/2b2c6/glitch.png 869w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;일반적으로 우리는 회로에서 입력값이 0에서 1로 변화할 때 (느리든 빠르든)
&lt;code&gt;0 -&amp;gt; 0.5 -&amp;gt; 1&lt;/code&gt;과 같은 느낌으로 매끄럽게 값이 변화한다고 생각하기 쉽다.
그러나 입력값에 잡음이 포함되는 경우도 분명 존재하며
특히 0에서 1로 느리게 변화할 때 잡음으로 인해
역치(threshold)를 여러번 오가게 될 위험이 존재한다.
이 경우 출력값은 &lt;code&gt;0 -&amp;gt; 1 -&amp;gt; 0 -&amp;gt; 1&lt;/code&gt;과 같이 양극단을 여러번 오가게 된다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:368px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/e71772c6848c4bb8f876f093f5d28ce7/2b727/hysteresis.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:69.93865030674846%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABz0lEQVQ4y4VU7Y6iQBDk/R/F+MMXMHtRc6iLaySuIIqAgBJPhQERxY/adF9gPVe9TirTMxTFdHeptN1usdvtEEURYiE4T+KY95Qvl0so7+8YfY4gyzIajQYmkwksy4Jt23AchzGbzeD7PqQkSfAqVFWF53nI8xy9Xu8lly4g0Q0pLpcLrtdrCdpTGIaB1WqF/X6PbrfLZ+fzmZ8XID6dbTYbSFEYMqkQKqIQrFar0DQNp9MJnU7nH+7tO8QPw/C75GeCtVqN+3g4HDAcDn9wb1fSkkQkHpKKfDAY8GqaZnnD4mO3gnRGgyx7+EyQpkrRarVQqVTKHj4S/NvDKCoP7kHRbDZ5JVsQHg2wGKKgG2ZZ9tQGNIh+v8/5dDotBZ8F95B6Qya9B5m23W6jXq/DdV38envj4RyPR8RxzEjTlMF7IbBeryFR3WRccvk9eoqC37LMQiQ6ty2EkWARMjF5k0A5gT4mvSqB+yJEme/TFP8LyZ3P8aEo0HUDrmOziU1zitFIw6c6wJ/1piQ71gy6rsO2HVjmFOPxBObEgKaNofb7SLOMjB0jCAIs/AUc2+bRU7lU5nKxQJLsvpseC/4Z0p+B7/ncM9/zECwD5ub5CV+gmSwhmIJS0wAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;이력 전이 함수&quot; title=&quot;이력 전이 함수&quot; src=&quot;/static/e71772c6848c4bb8f876f093f5d28ce7/2b727/hysteresis.png&quot; srcSet=&quot;/static/e71772c6848c4bb8f876f093f5d28ce7/222b7/hysteresis.png 163w,/static/e71772c6848c4bb8f876f093f5d28ce7/ff46a/hysteresis.png 325w,/static/e71772c6848c4bb8f876f093f5d28ce7/2b727/hysteresis.png 368w&quot; sizes=&quot;(max-width: 368px) 100vw, 368px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;이런 글리치를 방지하는 기법 중 하나가 바로 이력 현상(hysteresis)을
사용하는 것이다.
이력 현상을 사용한다는 의미는
이력, 즉 과거에 일어난 사건을 토대로 역치를 다르게 설정한다는 의미이다.
실제로 위의 그림을 보면 0에서 1로 갈 때와 1에서 0으로 갈 때
서로 다른 전이함수를 적용된다는 것을 확인할 수 있다.&lt;/p&gt;&lt;p&gt;이처럼 추가적인 기법을 통해
잡음내성 즉, 외부의 잡음 및 간섭이 있더라도 제대로 작동할 수 있는 능력을 높일 수 있다.&lt;/p&gt;&lt;h3&gt;성능과 안정성&lt;/h3&gt;&lt;p&gt;대부분의 경우 효율성, 생산성과 같은 가치는 종종 안정성과
트레이드 오프(trade-off) 관계를 지닌다.
이 점은 하드웨어도 크게 다르지 않은 것으로 보인다.&lt;/p&gt;&lt;p&gt;하드웨어의 경우 기본적으로 안정성이 충분히 확보되었다는
전제 하에서 성능 개선을 추구한다고 볼 수 있다.
그렇다면 하드웨어는 어떠한 방식으로 성능을 개선할 수 있을까?&lt;/p&gt;&lt;p&gt;회로의 구조나 부품의 재질을 변경하지 않은 상황에서는
전기가 회로 내의 특정 부품에서 다음 부품으로 도달하는 데
걸리는 시간을 줄이는 방법이 가장 확실하다.
다만 전기 자체의 속도를 가속화하거나
전기보다 빠르면서 전기를 대체하기에 적절한 매개체는 아직 존재하지 않는다.
때문에 기업들은 꾸준히 회로의 물리적인 크기를 줄이는 것을 추구하였다.&lt;/p&gt;&lt;p&gt;그러나 문제는 회로의 소형화로 인해 성능이 개선되었을 뿐만 아니라
자연스럽게 회로의 온도가 상승한다거나,
잡음이 증가하는 등의 부작용도 함께 따라오게 되었다고 한다.
이 점을 생각했을 때 안정성에 대한 추구는
하드웨어의 발전에 있어 끝나지 않는 숙제가 아닌가 생각된다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;세상에 존재하는 모든 것은 물리적인 실체를 지니고 있다.
그리고 물리적인 실체를 있는 그대로 측정할 경우 연속적인 데이터가 되며
이러한 방식으로 연속적인 데이터를 다루는 것을 보고 아날로그라고 부른다.
이에 반해 디지털이란 아날로그적인 성질을 지닌 대상을 토대로
연속적인 데이터를 이산적인 데이터로 변환하여 사용하는 것을 의미한다.&lt;/p&gt;&lt;p&gt;회로란 전기가 지닌 아날로그적인 성질을 활용하여
0과 1이라는 이산적인 데이터를 만들어내는 대표적인 디지털 도구라고 볼 수 있다.
특히 회로는 실수 대신 정수를, 정수 중에서도 0과 1만을 사용하는 등
경우의 수를 최소화함으로써 안정성을 극대화시켰다고 볼 수 있다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;컴퓨터 과학 총론: &lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9788993712629&quot;&gt;링크&lt;/a&gt;&lt;/li&gt;&lt;li&gt;한 권으로 읽는 컴퓨터 구조와 프로그래밍: &lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9791189909284&quot;&gt;링크&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[컴퓨터는 어떻게 사고하는가: 비트와 논리연산]]></title><description><![CDATA[논리 게이트란 입력값들에 대해 일정한 불리언 연산을 수행한 결과를 출력하는 장치라고 볼 수 있다. 기본적으로 AND, OR, XOR, NOT 연산을 수행하며, 이러한 게이트가 기본 단위로 모여 더욱 복잡한 기능을 수행하는 회로를 구성하게 된다.]]></description><link>https://bugoverdose.github.io/computer-science/bit-and-logic-operation/</link><guid isPermaLink="false">https://bugoverdose.github.io/computer-science/bit-and-logic-operation/</guid><pubDate>Thu, 06 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;논리연산(logic operation)이란 기본적으로 불리언 값,
즉 참 혹은 거짓 중 하나의 값을 반환하는 연산을 의미한다.
예를 들어 자바스크립트 및 JSX 문법을 기준으로
&lt;code&gt;if (a &amp;gt; 5) return true&lt;/code&gt;의 &lt;code&gt;a &amp;gt; 5&lt;/code&gt; 부분,
&lt;code&gt;a === 1 ? &amp;quot;1이다&amp;quot; : &amp;quot;1이 아니다&amp;quot;&lt;/code&gt;의 &lt;code&gt;a === 1&lt;/code&gt; 부분,
&lt;code&gt;{!loading &amp;amp;&amp;amp; &amp;lt;Component /&amp;gt;}&lt;/code&gt;의 &lt;code&gt;!loading&lt;/code&gt; 부분과 같이
조건문에 해당되는 코드들에서는 전부 논리연산이 발생한다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;그러나 논리연산은 이처럼 프로그래밍 언어에서 조건문을
수행하도록 명시적으로 지정하는 경우에만 일어난다고 볼 수 없다.
하드웨어 레벨에서 보았을 때 컴퓨터에서 일어나는 모든 처리는
본질적으로 논리연산에 기반을 두고 동작하는 것으로 보인다.&lt;/p&gt;&lt;h2&gt;컴퓨터의 개념과 기계어&lt;/h2&gt;&lt;p&gt;사실 컴퓨터라는 용어는 기계로서의 컴퓨터가 발명되기 이전부터 존재했다.
당시 컴퓨터는 계산 도구를 활용하여 숫자와 관련된 단순 계산 작업을 하는 사람들, 즉 직종을 의미하였다.
물론 현대에 와서 기계로서의 컴퓨터는 극한으로 고도화되었고,
인간 컴퓨터라는 직무를 대체하게 되었다. 그러나 과거와 마찬가지로
&lt;em&gt;상황에 따라 들어온 입력에 대해 적절한 계산을 수행하고 그 값을 출력한다&lt;/em&gt;는 점에서
그 본질은 크게 변하지 않았다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;그렇다면 인간과 기계로서의 컴퓨터의 차이는 어디에 있을까?
다양한 측면이 있겠지만 필자는 가장 큰 차이가 바로 &lt;strong&gt;언어 체계&lt;/strong&gt;에 있다고 생각한다.
인간의 언어는 &lt;em&gt;텍스트&lt;/em&gt;에 기반하는데 반해
컴퓨터의 언어인 기계어(machine language)는 &lt;em&gt;비트와 논리연산&lt;/em&gt;에 기반을 두고 있다.&lt;/p&gt;&lt;h3&gt;인간의 언어: 텍스트&lt;/h3&gt;&lt;p&gt;.js, .py, .java 등 어떤 확장자를 사용하든지 간에
대부분의 경우 프로그래머가 파일에 작성하는 코드는 결국 본질적으로 텍스트에 불과하다.
각 프로그래밍 언어의 문법을 기준으로
각 텍스트는 변수의 선언, 값 할당, 제어문 등 다양한 의미를 지닐 수 있지만
이는 인간의 기준에서만 그러하다.
컴퓨터의 입장에서 이 모든 코드는 그저 텍스트일 뿐이며,
이러한 텍스트가 컴파일러에 의해 기계어로 변환되어야 비로소 컴퓨터는 이를 이해하고 실행할 수 있게 된다.&lt;/p&gt;&lt;p&gt;별도의 IDE 없이 메모장으로 만든 텍스트 파일에 자바 문법 코드를 작성하고
.java 확장자로 저장하면 컴파일러로 해당 파일의 코드를 실행할 수 있다는 점이
이러한 과정을 명시적으로 보여준다.
마찬가지로 url의 쿼리나 해쉬 값 혹은 input 태그의 값으로 특정한 형식의 텍스트를 입력하여
서버에 요청을 보냄으로써
애플리케이션에 코드를 주입하는 종류의 웹공격이 가능한 것도 바로 이 점 때문이다.&lt;/p&gt;&lt;h3&gt;기계어: 비트와 연산&lt;/h3&gt;&lt;p&gt;그렇다면 컴파일러에 의해 변환된 코드를 컴퓨터는 어떻게 이해할까?
결론부터 말하자면 &lt;strong&gt;컴퓨터의 세계는 수학의 세계&lt;/strong&gt;라고 볼 수 있다.
다만, 인간은 일반적으로 10진법을 사용하는 데 반해 컴퓨터는 2진법을 사용하여 계산을 한다.
이는 컴퓨터가 모든 데이터를 비트로써 &lt;em&gt;물리적으로&lt;/em&gt; 저장하고 다룬다는 점을 뜻한다.&lt;/p&gt;&lt;p&gt;비트(bit)란 binary digit의 줄임말로 0 혹은 1 중 하나의 값을 지니는 단위라고 이해하면 편하다.
그리고 복수의 비트를 하나의 단위로 간주할 경우
각 비트가 지니는 0 혹은 1의 &lt;em&gt;값&lt;/em&gt;과 각 비트의 &lt;em&gt;위치&lt;/em&gt;를 기준으로
각 단위는 2진법 체계의 값을 나타낼 수 있게 된다.
대표적인 예로 8비트로 구성된 하나의 바이트(byte)는 0부터 2&lt;sup&gt;8&lt;/sup&gt;-1까지의 값들을
나타낼 수 있다.&lt;/p&gt;&lt;p&gt;그렇다면 여기서 우리는 의문을 가져보아야 한다.
대체 왜 컴퓨터는 모든 것을 10진법이 아닌
2진법으로 나타내고 비트로 데이터를 다루는 것일까?
바로 이 지점에서 우리는 드디어 &lt;strong&gt;로우 레벨에서의 논리연산&lt;/strong&gt;과
&lt;strong&gt;전자회로&lt;/strong&gt;에 대한 이야기를 시작해볼 수 있다.&lt;/p&gt;&lt;h2&gt;논리연산의 본질&lt;/h2&gt;&lt;p&gt;논리연산이란 &lt;em&gt;입력된 비트들의 값&lt;/em&gt;을 토대로
&lt;em&gt;새로운 비트&lt;/em&gt;를 &lt;strong&gt;만들어내는 동작&lt;/strong&gt;이라고 볼 수 있다.
위에서 우리는 논리연산을 참 혹은 거짓 중 하나의 값을 반환하는 연산이라고 정의하였다.
그리고 비트에 담기는 1 혹은 0의 값이 바로 이 참과 거짓에 해당된다고 볼 수 있다.&lt;/p&gt;&lt;p&gt;이해를 위해 &lt;code&gt;if (a &amp;gt; 5) return true&lt;/code&gt;라는 코드를 보면
&lt;code&gt;a &amp;gt; 5&lt;/code&gt;는 a의 값이 5보다 큰 지 확인하고
그 값이 참이면 참을, 거짓이면 거짓을 반환하라는 의미이다.
즉 해당 연산의 결과로 인해
&lt;strong&gt;참 혹은 거짓이라는 값이 컴퓨터 내에 물리적으로 생성&lt;/strong&gt;되고
해당 값을 조건절로 감싸고 있는 if 문은 해당 값에 따라 조건문 내부의 코드를
실행할지 말지에 대해 결정하게 되는 것이다.
그리고 해당 코드가 실행되는 과정에서
변수 a에 담긴 값과 5라는 리터럴은 해당 위치에서 호출되었지만
컴퓨터의 메모리에서 사라지지 않으며 이후 다른 코드들에서 그대로 쓸 수 있다.&lt;/p&gt;&lt;h2&gt;불리언 연산&lt;/h2&gt;&lt;p&gt;그동안 참 혹은 거짓의 값이라고 말한 데이터는
각종 프로그래밍 언어들에서 boolean이라는 자료형으로 불린다.
해당 명칭은 영국의 수학자 George Boole에 이름에서 나온 것이며
그는 불리언 대수(Boolean algebra)라는 4가지 연산 규칙을 고안한 사람이다.&lt;/p&gt;&lt;p&gt;그는 NOT, AND, OR, XOR라는 불리언 연산자를 제안하였는데
바로 이 연산자들이 논리연산, 회로의 뼈대라고 볼 수 있다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;NOT : 논리적 반대를 의미한다. 유일하게 단일 비트에 대해 적용된다.&lt;ul&gt;&lt;li&gt;이해: 비트의 값이 거짓인 경우 참을, 참인 경우 거짓을 출력&lt;/li&gt;&lt;li&gt;본질: 입력의 상태를 반대로 반전시킨 결과를 출력&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;AND : 둘 이상의 비트에 대해 적용되지만 프로그래밍 문법에서는 두 개의 입력값만을 받는다.&lt;ul&gt;&lt;li&gt;이해: 2비트 연산의 경우 a AND b에서 a와 b가 모두 참일 때만 참을, 그 외에는 거짓을 출력&lt;/li&gt;&lt;li&gt;본질: 입력된 모든 비트가 참일 때만 참을 출력&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;OR : 둘 이상의 비트에 대해 적용되지만 프로그래밍 문법에서는 두 개의 입력값만을 받는다.&lt;ul&gt;&lt;li&gt;이해: 2비트 연산의 경우 a OR b에서 a와 b가 모두 거짓일 때만 거짓을, 그 외에는 참을 출력&lt;/li&gt;&lt;li&gt;본질: 입력된 모든 비트 중 하나만이라도 참이면 참을 출력&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;XOR : 배타적 OR(exclusive OR)의 줄임말이다. NOT, AND, OR 연산의 조합으로 구현될 수 있다.&lt;ul&gt;&lt;li&gt;첫번째 비트와 두번째 비트가 서로 다른 경우에 참. 같은 경우 거짓을 출력&lt;/li&gt;&lt;li&gt;구현 예시: (a XOR b) == (a OR b) AND (NOT(a AND b))&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;사실 XOR 외에는 전부 일반적인 프로그래밍 언어들에 기초 문법으로
존재하는 기능들이기 때문에 개념을 이해하는 데 어려움은 없을 것이다.
그런데 앞서 언급했듯이 컴퓨터는 이처럼 프로그래밍 문법으로 명시적으로
작성하지 않은 코드에 대해서도 논리연산을 적용하여 실행한다.
그리고 위의 불리언 연산자들은 바로 이러한 연산을 이해하기 위한 핵심이라고 볼 수 있다.&lt;/p&gt;&lt;h3&gt;예제: 컴퓨터의 사칙연산&lt;/h3&gt;&lt;p&gt;누구나 쉽게 이해할 수 있도록 사칙연산 중에서도 덧셈을 예제로 준비해보았다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/b9e4c95e61067a2b1f51bb8a3875789d/d93d9/decimal-add.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:22.085889570552148%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA10lEQVQY012P22qDQBRF/f+f6ZO0tGkriUovJioZDY29QB7siLQGxwvFqas4LRK64TzsxWafcyz+5Ps+WZZxqpXrceMGjOM4M/tqySYWsz82X1xcu8RRaLzVdR1KKYQQpGlq4MTatiWKYm69NVNd3/e0TYPjr4m2O5PTeuCQl6zuQ7L9k1lsSSnJ85wkScxM5UVRMPFNGHJmL6hrRVmWSPnO+cJl6d3RKMWx+mS7e8a+dAgeH6iqCot/On1vGDR+IND6e2bJ/mAuHMdfVnzUOF7A2+uLyf0Amc0pBQ+aEJcAAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;십진법 덧셈&quot; title=&quot;십진법 덧셈&quot; src=&quot;/static/b9e4c95e61067a2b1f51bb8a3875789d/a6d36/decimal-add.png&quot; srcSet=&quot;/static/b9e4c95e61067a2b1f51bb8a3875789d/222b7/decimal-add.png 163w,/static/b9e4c95e61067a2b1f51bb8a3875789d/ff46a/decimal-add.png 325w,/static/b9e4c95e61067a2b1f51bb8a3875789d/a6d36/decimal-add.png 650w,/static/b9e4c95e61067a2b1f51bb8a3875789d/e548f/decimal-add.png 975w,/static/b9e4c95e61067a2b1f51bb8a3875789d/d93d9/decimal-add.png 1243w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;먼저 우리가 초등학교에서 배운 10진법에서의 덧셈 방식을 한번 봐보자.
우리는 두 수가 있을 때 각 자릿수의 값을 더한 개별 결과에 대해
해당 값이 10 이상인 경우 한 자리 위에 1의 값을 더하는 올림 작업을 수행하고,
해당 자릿수의 1의 자리 값은 그대로 해당 자릿수에 할당한다.&lt;/p&gt;&lt;ul&gt;&lt;li&gt;1의 자리는 &lt;code&gt;5 + 0 = 5&lt;/code&gt;이므로 올림 작업을 수행하지 않고 5를 그대로 할당한다.&lt;/li&gt;&lt;li&gt;10의 자리는 &lt;code&gt;8 + 3 = 11&lt;/code&gt;이므로 올림 작업을 수행하여 일단은 1만을 할당한다.&lt;/li&gt;&lt;li&gt;100의 자리는 &lt;code&gt;1 + 1 = 2&lt;/code&gt;이지만 올림을 적용받으므로 &lt;code&gt;2 + 1 = 3&lt;/code&gt;이 된다.&lt;/li&gt;&lt;li&gt;결국 100의 자리에서는 올림 작업을 수행하지 않으므로 3을 할당하고 &lt;code&gt;315&lt;/code&gt;가 답이 된다.&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;즉, 각 자릿수에 대해 개별적으로 덧셈을 적용하고
&lt;em&gt;올림 작업 수행 여부&lt;/em&gt;와 &lt;em&gt;해당 자릿수에 할당할 값을 결정&lt;/em&gt;하는 두 가지 연산이
실행된다는 점이다.
이때 올림 작업의 경우 2진법이든 10진법이든
언제나 한 자리 위에 1을 더하는 방식으로 적용되며
10진법이기 때문에 10을 기준으로 적용 여부를 결정하게 된다.&lt;/p&gt;&lt;p&gt;이러한 원리는 10진법이든, 2진법이든, 16진법이든 동일하게 적용된다. 아래 예시를 한번 봐보자.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/803f2e975a072aedbc03fc5e6c5c9bd3/27e9a/binary-add.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:22.085889570552148%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA0klEQVQY012QX0vDMBxF+/0/kU+CDzpxTsM61FC6dja2tX8TREnT2SOJTsH7di+Hk/CL+IkxhqqqcM6dJoZh5EZIrJ1+t0y17J5SWD5Df7cz+6IlzzKWZSGy1gaJF9Z1HSDf/a614TZOcG4Om5smMtUg0+fAHY8zr50mL3uUKr6FTdNQliVFUZAkSRD3vQcU+eHA2fkVbdsxDAPli2KzlazWAqNHtB55kCl3uwQhBF3XEfEv/pVT/M8uVvfY6e8Mcq+4vN54MnT99sFaPBLH29C/AJRvLr+dshN4AAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;이진법 덧셈&quot; title=&quot;이진법 덧셈&quot; src=&quot;/static/803f2e975a072aedbc03fc5e6c5c9bd3/a6d36/binary-add.png&quot; srcSet=&quot;/static/803f2e975a072aedbc03fc5e6c5c9bd3/222b7/binary-add.png 163w,/static/803f2e975a072aedbc03fc5e6c5c9bd3/ff46a/binary-add.png 325w,/static/803f2e975a072aedbc03fc5e6c5c9bd3/a6d36/binary-add.png 650w,/static/803f2e975a072aedbc03fc5e6c5c9bd3/e548f/binary-add.png 975w,/static/803f2e975a072aedbc03fc5e6c5c9bd3/27e9a/binary-add.png 1253w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;위의 &lt;code&gt;11 + 11 = 110&lt;/code&gt;은 10진법을 기준으로 &lt;code&gt;3 + 3 = 6&lt;/code&gt;으로 표현되는 매우 간단한 연산이다.
10진법과의 차이점은 각 자릿수에 할당될 수 있는 값의 범위가 0과 1로 줄어들었다는 점밖에 없다.
그런데 이처럼 값의 범위가 두 가지로 줄어들었다는 점은 너무나도 큰 의미를 지닌다.
바로 &lt;strong&gt;불리언 연산을 통해 덧셈 작업을 수행&lt;/strong&gt;할 수 있는 조건이 마련되었다는 것이다.
위에서 수행한 덧셈 작업을 불리언 연산을 통해 수행하면 다음과 같다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/ab9f3bba1fb2e47ac4621c24eb2f9ac2/4b446/boolean-add.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:81.59509202453987%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACPklEQVQ4y5WTW1PaUBSF+f9/oy996EuttqVTW62iIMpFNBSRS4BwT07ugZPL1yGClUGtXTOZ7LMmZ++1zsrJ8EYkSfL43tTTuYHt+lt85qXNTxvEcfyXW/MrHB6f0Wj10zqOH/jMW1Q9RbxSZggi4KxYoaWO/k+h6wW01QEzwyT0PMLpkE7pArtZ58tBlvNihTgKH/e92DBeN+xqU959yFIoK0zGBrM7gXHZwc63+fmtRKmmrC3HL1heq0vWdRQn+DJCAtJfYis9bGOJGYA6tHC8Z0LZLHaeh9Ewn8NoBIoCMkgbhGHI58MThDC2Gz538I9YLEBVwXVBCNAGKR0EAb6MOc5X8Tx3K8DMw7QIXViYtpt+vJRLgsBHNu8JXIeVpmAwIDJNFoFP6/Yardfn49cjVLWbqt0KxXY8rq4b1O9Vard1Dr7nyJ0XqRQuqV3XyRWuKJ3mGY+m6E0V+1ue7mWf93s/qCu3r1v2/AW94RTdtBFCELgBQljYfoA0TbyGitBjVE3SaA3wPW/X8uY2bKJ/FlJCtwtxlC4HM5NypYplWf8OZZNwsjqb8Rg0Ddpt6PdTXhgmnaHgRqnjOM6uQilDhOVgOR5yuUyVRmFI1Gqz1HVkkhCOx8SWjYwknU6T2p3Kef6CQb+/G4pumFxUFG5+tylXa3zKHnNymqecL1KpKvw6K1DKFdA6PcYTh8kEskcV9vb3aa+Uv2Z5pbSlDtHGc3Rdx7PddODK5sIPcL0Iw4DRzGE+n6e/2VPLfwD7icw7vI9cZQAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;불리언 연산을 통한 이진법 덧셈&quot; title=&quot;불리언 연산을 통한 이진법 덧셈&quot; src=&quot;/static/ab9f3bba1fb2e47ac4621c24eb2f9ac2/a6d36/boolean-add.png&quot; srcSet=&quot;/static/ab9f3bba1fb2e47ac4621c24eb2f9ac2/222b7/boolean-add.png 163w,/static/ab9f3bba1fb2e47ac4621c24eb2f9ac2/ff46a/boolean-add.png 325w,/static/ab9f3bba1fb2e47ac4621c24eb2f9ac2/a6d36/boolean-add.png 650w,/static/ab9f3bba1fb2e47ac4621c24eb2f9ac2/4b446/boolean-add.png 877w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;위의 과정은 처음 보면 복잡해보일 수 있겠지만 핵심은 간단하다.
바로 각 자릿수에 있는 1을 참으로, 0을 거짓으로 간주하고
각 자릿수의 숫자들에 대해 AND 연산과 XOR 연산을 수행하는 것이다.
이때 &lt;strong&gt;AND 연산 결과는 다음 자릿수에 올림을 적용 여부를 결정하며,&lt;/strong&gt;
&lt;strong&gt;XOR 연산 결과는 해당 자릿수의 값 존재 여부를 결정한다.&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;혹시 &lt;em&gt;엥? 그냥 더하면 되는 것을 왜 이렇게 작업하는거지?&lt;/em&gt;라는 생각이 드는가?
놀랍게도 뇌가 없는 고철 덩어리들은 그 &lt;em&gt;그냥 더하는 행위&lt;/em&gt;를 할 줄을 모른다.
즉, 인간의 지능으로 수행할 수 있는 작업들을 어떻게 해야
고철 덩어리들이 그럴듯하게 모방할 수 있을지에 대해 고민한 결과가 바로
2진법 체계와 논리연산에 기반을 둔 컴퓨터라고 볼 수 있다.&lt;/p&gt;&lt;p&gt;그리고 이처럼 기계만의 방식으로 각종 작업을 수행하기 위해 사용되는 도구가 바로
컴퓨터의 핵심 요소인 &lt;strong&gt;회로&lt;/strong&gt;라고 볼 수 있다.&lt;/p&gt;&lt;h2&gt;논리연산의 물리적 구현&lt;/h2&gt;&lt;p&gt;회로(circuit)라는 단어를 들으면 뭔지도 잘 모르겠지만
일단 머리가 갑자기 지끈거리는 것이 정상적인 반응일 것이다.
만일 그렇다면 지금 본인이 있는 방의 전등을 한 번 껐다 켜보자.
그대는 스위치에 물리적인 조작을 가함으로써 회로를 조작한 것이다.
물론 현대 사회의 컴퓨터는 그대가 조작한 스위치에 비해 훨씬 복잡한 구조를 지니고 있다.
해당 게시물에서는 위에서 언급한 내용을 중심으로 이에 대해 아주 가볍게만 다루고자 한다.&lt;/p&gt;&lt;p&gt;앞서 우리는 컴퓨터가 덧셈 작업을 수행하기 위해 XOR 연산과 AND 연산을
활용한다는 점에 대해 이야기하였다.
그렇다면 컴퓨터는 어떠한 물리적 장치를 사용하여 이러한 연산을 수행할 수 있을까?&lt;/p&gt;&lt;p&gt;또한 예를 들어 계산기에 &lt;code&gt;3 + 4&lt;/code&gt;라는 내용을 입력했을 때
우리가 &lt;code&gt;=&lt;/code&gt;를 눌러 실제로 연산을 실행하기 전까지
계산기는 어떻게 3과 4라는 값을 기억할 수 있을까?
그리고 계산이 끝나고 화면에 출력되는 &lt;code&gt;7&lt;/code&gt;이라는 값은 어떻게 그대로 유지될 수 있을까?&lt;/p&gt;&lt;h3&gt;논리 게이트&lt;/h3&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:629px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/5ae9e4bc74b9997000840acee978d0ac/63a68/logic-gate.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:50.920245398773%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABV0lEQVQoz3VSXW+CQBDk//8l+1RN6kMLmgpaEoFDqEbxW0FBmGbWHAVtNyF73M3Nzc6uUVUVGN9xhP5bH6ZlIc8L2eOZPmeejB2Y1gDN0BiNM/Qi8D10u68YDIdIswzX67UG3S+WsEefeP8w5Z/neZ4/kRtclGUpG0mSYLvdYrVaYb/f43g84nK5IE3T+lIYhoKLokjy6XQSnMYYTbmWZcHzPCFlLJdLzOdzbDabmtA0TcxmM6zXa8GRlLjD4XAn1FIZ5/NZPhLwy7KsJirLO4ZKbrebEO12uwdbql8PWcpkMoYKFZqPNCsIlYJt2wiC4M/GiELtn22P0Hnp4Mt1/+0gy+32enDGzhNhqylN2QyW2vTt0RY2ik2hh1qQzq2m0GillGR6NJ1OEcdxa4SokiUTx0ngRBCjBbQUFkUhl3m4WCxECdVyX2N835cuu64rj1Ix51F7+AN7BgIfT1w+mwAAAABJRU5ErkJggg==&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;논리 게이트&quot; title=&quot;논리 게이트&quot; src=&quot;/static/5ae9e4bc74b9997000840acee978d0ac/63a68/logic-gate.png&quot; srcSet=&quot;/static/5ae9e4bc74b9997000840acee978d0ac/222b7/logic-gate.png 163w,/static/5ae9e4bc74b9997000840acee978d0ac/ff46a/logic-gate.png 325w,/static/5ae9e4bc74b9997000840acee978d0ac/63a68/logic-gate.png 629w&quot; sizes=&quot;(max-width: 629px) 100vw, 629px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;논리 게이트(logic gate)란 입력값들에 대해
일정한 불리언 연산을 수행한 결과를 출력하는 장치라고 볼 수 있다.
릴레이, 진공관, 트랜지스터, 집적회로 등 다양한 기술을 이용하여 구현될 수 있으며,
기본적으로 전압 수준에 따라 1 혹은 0을 나타내는 전자회로로 구성된다.
그리고 이러한 게이트가 기본 단위로 모여
더욱 구체적이고 복잡한 기능을 수행하는 회로를 구성하게 된다.
그러한 회로 중 하나가 바로 메모리 회로의 핵심 부품이 되는 플립플롭(flip-flop)이다.&lt;/p&gt;&lt;p&gt;플립플롭은 다양한 구조를 띠지만 핵심 원리는 자체는 간단하다.&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;출력값으로 0 혹은 1의 값이 유지된다.&lt;/li&gt;&lt;li&gt;특정 입력값이 &lt;strong&gt;일시적으로&lt;/strong&gt; 변화하는 경우, 출력값은 변화한다.&lt;/li&gt;&lt;li&gt;해당 입력값이 다시 기존값으로 돌아가더라도 &lt;strong&gt;변화한 출력값은 그대로 유지된다.&lt;/strong&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;이해를 위해 매우 간략화된 플립플롭 구조를 한번 살펴보자.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/5e44e90a71d57e2ba0dad4abd8ce1870/bb3ba/flip-flop-example.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:33.74233128834356%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABL0lEQVQoz2WR646CMBCFff9nWxP/yKUCLRWLgAa5Cg3lmBkXN7s7SUNnOPNl5nSHPzEMAx+KxTn0Q495nn9ppnnGbO0nt9Z+NLuu63A6nWCMQV3XaJsGWimIIECRpoijiGtSSj63qsLteoWKIgRhiPv9DmMu/GVg3/fY77+gtcbhcOBimqYMLI2BlhKrtfwvy3Mcj0dM44iyKOD7PpRS8DyP+9Z1xW6aJvieByEEQynyPIfWKYJQoCpLOOeg4hjd+YwwDFmTZRnOlAuBoih+gHSh/auq4pW2eD6fuNJqSr19It/6gYGbX6Qh8DYIA8nDJEl4zQ1IU8VxzBOQt8uyvPNLhiiK+BHIMymT/0ASPx41mqbhRp54mviBxnHE6hyv3LYta+z365JVBKX61kfAF+7FEsGyAlZhAAAAAElFTkSuQmCC&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;플립플롭&quot; title=&quot;플립플롭&quot; src=&quot;/static/5e44e90a71d57e2ba0dad4abd8ce1870/a6d36/flip-flop-example.png&quot; srcSet=&quot;/static/5e44e90a71d57e2ba0dad4abd8ce1870/222b7/flip-flop-example.png 163w,/static/5e44e90a71d57e2ba0dad4abd8ce1870/ff46a/flip-flop-example.png 325w,/static/5e44e90a71d57e2ba0dad4abd8ce1870/a6d36/flip-flop-example.png 650w,/static/5e44e90a71d57e2ba0dad4abd8ce1870/e548f/flip-flop-example.png 975w,/static/5e44e90a71d57e2ba0dad4abd8ce1870/bb3ba/flip-flop-example.png 1121w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;해당 플립플롭에서 두 입력값이 모두 0일 때 출력값은 0으로 유지된다.
이때 아래쪽의 입력값이 0으로 고정된 상태로
위쪽의 입력값이 1로 변하면 출력값은 1로 변하게 된다.
이때 변한 출력값은 입력값이 다시 0으로 되돌아가더라도 그대로 유지된다는 특성을 띤다.
즉, 입력값 중 하나가 순간적으로 &lt;code&gt;0-&amp;gt;1-&amp;gt;0&lt;/code&gt;로 깜빡임으로써 &lt;em&gt;디폴트 출력값&lt;/em&gt;이 &lt;code&gt;0-&amp;gt;1&lt;/code&gt;로 변했다는 것이다.
한편 반대로 위의 입력값이 0으로 고정된 상태에서
아래쪽의 입력값이 &lt;code&gt;0-&amp;gt;1-&amp;gt;0&lt;/code&gt;으로 깜빡이는 경우 &lt;em&gt;디폴트 출력값&lt;/em&gt;은 다시 &lt;code&gt;1-&amp;gt;0&lt;/code&gt;로 변하게 된다.&lt;/p&gt;&lt;p&gt;바로 이러한 성질을 활용함으로써 우리는 비트 단위의 데이터를
회로 구조상 특정 물리적인 위치에 &lt;em&gt;얼려놓을&lt;/em&gt; 수 있게 된다.
그리고 이처럼 저장해놓은 데이터를 우리는 보다 복잡한 연산의 입력값으로 사용하고,
해당 연산의 출력값을 다시 다른 위치에 저장해놓을 수 있다.
이는 마치 인간의 뇌의 작업기억(working memory)에서 각종 정보를 실시간으로 관리하고
별도의 작업에 활용하는 것과 마찬가지이다.&lt;/p&gt;&lt;h3&gt;가산기&lt;/h3&gt;&lt;p&gt;그렇다면 플립플롭 회로와 같은 방식으로 저장된 데이터를 활용하여
실제로 어떻게 덧셈 연산을 수행할 수 있을까?
아래는 반가산기(half adder)와 전가산기(full adder)의 기본 구조다.
이때 출력값의 Carry는 올림 여부를, Sum은 특정 자릿수에 실제로 저장하는 값을 의미한다.&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position:relative;display:block;margin-left:auto;margin-right:auto;max-width:650px&quot;&gt;
      &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/21c0cedd0264d1e5073835cf35a8b19e/33e10/adders.png&quot; style=&quot;display:block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom:36.19631901840491%;position:relative;bottom:0;left:0;background-image:url(&amp;#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA9UlEQVQoz4VRy26EMBDj//9re15uIBAIOBDCM7zfrjxqqu4etpZGIYnHYwcHH3Df90sR13Vh33dM04TzPGVv7wiHGxKO48CyLOi6DsMwvJDYpJRCmqZwXRdxHMP3fTRNgzAMUSglPeSJoDEGfd/j6/EQQtu2KIpCGqwwzyjkPl1EUYQgCJDnufTSCN2S6/yNmGUZkiRBVVWytySLcRxlYF3XMrAsS8zzLAl/I9MmD+nA8zwpxitLLQIW27YhS1MZxiKHDhld6wK9MSIskWmZgnay+bnku1rwm4601rIyCbnrusoddeQN8Q9sZK5Mwrfmj2NR7B3fZssbqHDSYj4AAAAASUVORK5CYII=&amp;#x27;);background-size:cover;display:block&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;반가산기와 전가산기&quot; title=&quot;반가산기와 전가산기&quot; src=&quot;/static/21c0cedd0264d1e5073835cf35a8b19e/a6d36/adders.png&quot; srcSet=&quot;/static/21c0cedd0264d1e5073835cf35a8b19e/222b7/adders.png 163w,/static/21c0cedd0264d1e5073835cf35a8b19e/ff46a/adders.png 325w,/static/21c0cedd0264d1e5073835cf35a8b19e/a6d36/adders.png 650w,/static/21c0cedd0264d1e5073835cf35a8b19e/33e10/adders.png 844w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot;/&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;&lt;p&gt;좌측의 반가산기의 구조는 이해하기 쉬울 것이다.
각 자릿수의 입력값 두 개를 받아
AND 연산 결과로 올림 여부를 결정하고,
XOR 연산 결과를 해당 자릿수의 값으로 저장한다는
위에서 설명한 불리언 연산을 통해 덧셈 작업의 핵심 원리에 정확히 대응된다.
그런데 반가산기는 오직 2&lt;sup&gt;0&lt;/sup&gt; 자리에서의 연산에만 사용이 가능하다.
2&lt;sup&gt;1&lt;/sup&gt; 자리부터는 바로 아래 자릿수에서 올림 여부가 결정되었는지를 고려해야 하기 때문이다.
즉, 2&lt;sup&gt;1&lt;/sup&gt; 자리부터는 각 자릿수의 입력값 두 개만이 아니라 올림 여부까지 포함하여
총 3가지의 입력값을 받아 처리해야 하며, 우측의 전가산기를 통해 이러한 연산을 처리할 수 있게 된다.&lt;/p&gt;&lt;p&gt;실제 컴퓨터에 들어가는 칩(chip) 하나 하나는
초고밀도 집적회로(VLSI) 기술을 통해 이처럼 다양하고 세부적인 구성을 띤 수백만 개의 회로로 구성된다.&lt;/p&gt;&lt;h2&gt;맺으며&lt;/h2&gt;&lt;p&gt;해당 게시글은 최대한 다양한 주제를 겉핥기식으로 다루고 있다.
그러나 전달하고자 하는 핵심은 간단하다.
컴퓨터와 프로그래밍 언어는 전부 인간이 특정한 의도를 지니고 만들어낸 것이며,
컴퓨터는 복잡하지만 체계적으로 설계된 &lt;strong&gt;물리적인 도구&lt;/strong&gt;라는 것이다.&lt;/p&gt;&lt;p&gt;그리고 논리연산의 결과와 비트에 담기는 데이터가 참/거짓 혹은
1/0와 같이 두 가지 값으로 구분된다는 점은
우연의 일치가 아니라 바로 컴퓨터의 구조에 대해
옅볼 수 있는 중요한 힌트라고 볼 수 있다.&lt;/p&gt;&lt;p&gt;보다 체계적이고 깊이 있는 지식을 원한다면 컴퓨터 구조에 관한
서적을 찾아보는 것을 권장한다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9788993712629&quot;&gt;컴퓨터 과학 총론&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://www.kyobobook.co.kr/product/detailViewKor.laf?barcode=9791189909284&quot;&gt;한 권으로 읽는 컴퓨터 구조와 프로그래밍&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;엄밀히 말해서 이는 플립플롭보다는 래치(latch)의 특성이다.
플립플롭은 특정한 조건을 충족한 래치라고 볼 수 있다.
실제 메모리 회로에서 사용되는 플립플롭의 구조와 그 의미에 대해 알아보고 싶다면
&lt;strong&gt;&lt;div to=&quot;/computer-science/latch-and-flip-flop&quot;&gt;이 게시글&lt;/div&gt;&lt;/strong&gt;을
참고하기를 바란다.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[개발 블로그 개발 후기]]></title><description><![CDATA[블로그 버전 1의 개발을 완료하였습니다. 10일 정도 작업을 하였고 현재 도메인을 구글과 네이버 검색엔진에 각각 등록한 상황입니다. 수정하거나 추가하고 싶은 기능들이 아직도 꾸준히 생겨나고 있으나 이대로는 끝이 없을 듯 하여 일단 첫 글을 남기고자 합니다.]]></description><link>https://bugoverdose.github.io/essay/starting-a-dev-blog/</link><guid isPermaLink="false">https://bugoverdose.github.io/essay/starting-a-dev-blog/</guid><pubDate>Wed, 05 Jan 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;지난 해 12월 23일에 깃헙에 저장소를 생성한 이후 올해 1월 4일을 기준으로 블로그 개발을 완료하였습니다.
실질적으로 약 10일 정도 작업을 하였고, &lt;code&gt;github.io&lt;/code&gt; 도메인으로 배포하여 현재 구글과 네이버 검색엔진에 각각 등록한 상황입니다.&lt;/p&gt;&lt;p&gt;수정하거나 추가하고 싶은 기능들이 아직도 꾸준히 생겨나고 있으나 이대로는 끝이 없을 듯 하여 일단 첫 글을 남기고자 합니다.&lt;/p&gt;&lt;h2&gt;왜 블로그를 시작하였는가&lt;/h2&gt;&lt;p&gt;저는 온라인에 글을 올리는 취미가 딱히 없는 사람입니다.
트위터 등 SNS에 글을 올리는 사람들의 심리도 이해는 되지만 딱히 공감하지는 않습니다.&lt;/p&gt;&lt;p&gt;다만, 전 공부한 내용을 체계적으로 정리하는 작업을 대학생활 동안 꾸준히 해왔습니다.
동일한 내용도 나 자신만의 언어로 다시 한번 정리함으로써 기존에 알던 정보들과 새로운 지식들이 통합되고
특정 주제에 대해 보다 깊이 있게 이해할 수 있다고 생각합니다.&lt;/p&gt;&lt;p&gt;지난 몇 년 간 프로그래밍과 관련하여 공부한 것들을 텍스트 파일이나 마크다운 파일로 정리하고
&lt;code&gt;~-study-note&lt;/code&gt;라는 명칭의 깃헙 저장소들에서 관리하기 시작하였습니다.
굳이 노션을 쓰지 않은 이유는 깃헙에 커밋을 남기고 싶어서였습니다.
그러나 글을 작성하고 몇 달의 시간이 지난 이후 과거에 정리한 글들을 다시 보았을 때 도저히 그 내용을 이해할 수가 없었습니다.&lt;/p&gt;&lt;p&gt;이러한 문제 때문에 현재는 대부분의 저장소들을 비공개 처리하거나 그냥 삭제했습니다.
이 상황에 대해 고민해본 결과, 해당 글들이 타인이 읽는 것을 염두에 두지 않고 작성되었기 때문에 가독성이 낮은 것이라는 결론에 도달하였습니다.
그동안 해당 저장소들에 별을 주신 분들도 제가 작성해놓은 내용들을 실제로 읽지는 않았을 것이라 생각합니다.&lt;/p&gt;&lt;p&gt;때문에 저는 앞으로 제가 공부한 내용들을 독자를 염두에 두고 정리하고자 하며, 이를 위해 실제로 독자가 존재할 수 있는 공간에 글을 올리고자 합니다.&lt;/p&gt;&lt;h2&gt;왜 블로그를 직접 개발하였는가&lt;/h2&gt;&lt;p&gt;사실 단순히 글을 올릴 수 있는 환경은 참 많습니다. SNS나 네이버 블로그 외에도 개발 블로그에 특화된 플랫폼들도 꽤 존재합니다.
예를 들어, &lt;a href=&quot;https://velog.io/&quot;&gt;벨로그&lt;/a&gt;를 사용하면 이미 훌륭하게 개발된 템플릿을 토대로
글을 쓰는 작업에 온전히 몰두할 수 있으며
보다 많은 사람들에게 제가 작성한 글이 전달될 것이라고 생각합니다.&lt;/p&gt;&lt;p&gt;그러나 제 주변에는 &lt;code&gt;gatsby-starter-bee&lt;/code&gt;&lt;div num=&quot;1&quot;&gt;&lt;/div&gt;
혹은 &lt;code&gt;gatsby-starter-blog&lt;/code&gt;&lt;div num=&quot;2&quot;&gt;&lt;/div&gt;와 같은 개츠비 템플릿을 활용하여 개발 블로그를 만든 사람들이 상당히 많습니다.
그들이 있기 때문에 저 또한 당연히 개츠비로 직접 개발 및 배포해야 한다고 생각했었고
대학교 마지막 학기를 종강하자마자 바로 개츠비 공식문서의 튜토리얼을 읽기 시작하였습니다.&lt;/p&gt;&lt;h2&gt;왜 템플릿을 사용하지 않았는가&lt;/h2&gt;&lt;p&gt;특이한 점은 개츠비에서 제공하는 다양한 템플릿을 사용하지 않았다는 점입니다.
비어있는 개츠비 프로젝트에 플러그인들을 하나씩 추가하고 설정을 변경해가면서 개발을 진행하였습니다.&lt;/p&gt;&lt;p&gt;디자인의 경우에도 &lt;code&gt;gatsby-plugin-styled-components&lt;/code&gt;를 설치한 이후,
프로젝트 전체에 reset css를 설정하고 컴포넌트별로 css 속성들을 전부 하나씩 설정하면서 디자인해나갔습니다.&lt;/p&gt;&lt;p&gt;수많은 템플릿이 존재한다는 점이 개츠비의 장점 중 하나인데
왜 굳이 이처럼 맨땅에서 시작하였는지에 대해 한번 설명하고자 합니다.&lt;/p&gt;&lt;h3&gt;통제력&lt;/h3&gt;&lt;p&gt;무엇보다도 프로젝트에 대한 통제력을 확보하는 것이 가장 중요한 이유였습니다.
저는 백엔드로 분류되지만 일단은 웹 프론트엔드로 소프트웨어 개발에 입문한 사람입니다.
제가 하나부터 열까지 전부 직접 구현할 수 있는데 굳이 다른 사람의 코드에 의존하고 싶지 않았습니다.&lt;/p&gt;&lt;p&gt;기본적으로 프로젝트 내에 존재하는 모든 코드에 대해 개발자 본인이 이해를 하고 있어야
그 내용을 자유자제로 수정하고 추가할 수 있다고 생각합니다.&lt;/p&gt;&lt;p&gt;만일 &lt;code&gt;gatsby-starter-blog&lt;/code&gt;와 같은 탬플릿의 전반적인 디자인과 기능들이
제 마음에 들었다면 해당 탬플릿을 그냥 사용하고 일부 코드만 적절하게 수정하는 것이 가장 생산적이 높고 효율적이었을지도 모릅니다.
그러나 개인적으로 해당 템플릿의 디자인과 라우팅은 제 취향에 전혀 맞지 않았습니다.&lt;/p&gt;&lt;p&gt;다른 사람의 탬플릿을 기반으로 세부 코드를 전부 뜯어고칠 바에야
차라리 전부 다 직접 구현하는 것이 오히려 더 효율적이라고 판단하였습니다.
현재 결과물은 디자인 측면에서 굉장히 만족스럽고 꾸준한 리팩토링으로 인해 쉽게 유지보수할 수 있는 구조로 완성되었습니다.&lt;/p&gt;&lt;h3&gt;공부&lt;/h3&gt;&lt;p&gt;둘째는 공부 목적입니다.
개발과정에서 SEO(검색엔진 최적화), Open Graph 프로토콜 등 다양한 주제를 공부하고
그 지식을 실제 프로젝트에 적용해볼 기회가 생겨서 무엇보다도 좋았습니다.
해당 사이트가 활성화되면 Google Analysis 등 다른 도구들도 본격적으로 활용해보고자 합니다.&lt;/p&gt;&lt;p&gt;또한 개츠비에 이번 기회에 입문하였는데 BFF(Backend For Frontend) 프레임워크답게
mdx, yaml, json 파일의 형식으로 자료를 효율적으로 구조화하고 GraphQL 쿼리로 이를 조회하는 경험을 할 수 있어서 굉장히 좋았습니다.
관계형 데이터베이스와 SQL문이라는 고정된 형식에서 벗어남으로써 데이터 관리 방법에 대한 전체적인 시야가 넓어질 수 있었다고 생각합니다.&lt;/p&gt;&lt;h2&gt;버전 이슈&lt;/h2&gt;&lt;p&gt;저는 현재 릴리즈된 버전들 중 가장 최신인 개츠비 4.4버전을 사용하여 프로젝트를 셋업하였습니다.
물론 버전이라는 것이 높으면 높을수록 무조건 좋은 것만은 아닙니다.
실제로 &lt;code&gt;gatsby-starter-bee&lt;/code&gt;의 경우 개츠비 2버전을 사용하는 올드한 프로젝트임에도 많은 이들의 사랑을 꾸준히 받고 있습니다.&lt;/p&gt;&lt;p&gt;그렇지만 Gatsby는 현재 빠른 속도로 발전하는 프레임워크이기 때문에
일단은 최신 버전을 사용하는 것이 유지보수 측면에서 장기적으로 적절하다고 생각합니다.
2021년 3월과 10월에 각각 v3.0.0과 v4.0.0이 릴리즈된 것만 보아도
버전 업데이트 속도가 비정상적으로 빠르다고 생각합니다.&lt;/p&gt;&lt;p&gt;개츠비의 프로젝트 구조 및 플러그인 설정 방법에 대한 이해가 부족한 사람이 별 생각 없이 탬플릿을 사용할 경우,
향후 플러그인 중 하나가 deprecate되거나 버전 마이그레이션이 필요한 상황이 생겼을 때
과연 문제 상황에 원활하게 대처할 수 있을지 솔직히 의구심이 들긴 합니다.&lt;/p&gt;&lt;h2&gt;어떤 글을 쓸 것인가&lt;/h2&gt;&lt;p&gt;솔직히 잘 모르겠습니다. 한 번도 글을 써본 적이 없기 때문입니다.
스스로를 &amp;#x27;필자&amp;#x27;라고 지칭해야 할지 &amp;#x27;나&amp;#x27;라고 지칭하는 것이 적절한지도 현재 고민하는 중입니다.
전반적으로 문어체를 추구할지 구어체에 가깝게 작성할지도 생각 중입니다.&lt;/p&gt;&lt;p&gt;그렇지만 일단 현재 블로그 결과물이 생각보다 잘 나왔고, 이왕 이렇게 된 이상 제대로 관리해보고자 합니다.
특히 구현만 해놓은 페이지네이션, 태그 사전 등의 기능이 제대로 동작하려면
적어도 11개 이상의 글은 존재해야 하기 때문에 일단은 뭐라도 쓰기는 할 생각입니다.&lt;/p&gt;&lt;h3&gt;글쓰기 윤리&lt;/h3&gt;&lt;p&gt;기본적으로 모든 게시글은 개발, 실험 등 개인적인 경험과 독서 내용에 기반을 두고 작성하고자 합니다.
다만, 참고자료가 조금이라도 존재할 경우 본문에 최소한의 언급을 하고, 각 게시글 하단에 관련 링크를 추가하고자 합니다.&lt;/p&gt;&lt;hr/&gt;&lt;div&gt;&lt;div num=&quot;1&quot;&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/JaeYeopHan/gatsby-starter-bee&quot;&gt;gatsby-starter-bee&lt;/a&gt;: 오픈소스 블로그 탬플릿&lt;/p&gt;&lt;/div&gt;&lt;div num=&quot;2&quot;&gt;&lt;p&gt;&lt;a href=&quot;https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog/&quot;&gt;gatsby-starter-blog&lt;/a&gt;: Gatsby Starter Library에 등록된 개츠비 공식 블로그 탬플릿&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded></item></channel></rss>